webpackJsonp([1],{"++fU":function(e,t){},"+0hU":function(e,t){},"+EE8":function(e,t){},"0MHw":function(e,t){},"0pnv":function(e,t){},"1YDK":function(e,t){},"3FO/":function(e,t){!function(){window.UEDITOR_HOME_URL="/static/UE/";var e=window.UEDITOR_HOME_URL||t();function t(e,t){return function(e,t){var a=t;/^(\/|\\\\)/.test(t)?a=/^.+?\w(\/|\\\\)/.exec(e)[0]+t.replace(/^(\/|\\\\)/,""):/^[a-z]+:/i.test(t)||(e=e.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),a=e+""+t);return function(e){var t=/^[a-z]+:\/\//.exec(e)[0],a=null,i=[];(e=(e=e.replace(t,"").split("?")[0].split("#")[0]).replace(/\\/g,"/").split(/\//))[e.length-1]="";for(;e.length;)".."===(a=e.shift())?i.pop():"."!==a&&i.push(a);return t+i.join("/")}(a)}(e||self.document.URL||self.location.href,t||(a=document.getElementsByTagName("script"))[a.length-1].src);var a}window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,serverUrl:e+"net/controller.ashx",toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","emotion","scrawl","insertvideo","music","attachment","map","gmap","insertframe","insertcode","webapp","pagebreak","template","background","|","horizontal","date","time","spechars","snapscreen","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview","searchreplace","drafts","help"]],xssFilterRules:!0,inputXssFilter:!0,outputXssFilter:!0,whitList:{a:["target","href","title","class","style"],abbr:["title","class","style"],address:["class","style"],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src","class","style"],b:["class","style"],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite","class","style"],br:[],caption:["class","style"],center:[],cite:[],code:["class","style"],col:["align","valign","span","width","class","style"],colgroup:["align","valign","span","width","class","style"],dd:["class","style"],del:["datetime"],details:["open"],div:["class","style"],dl:["class","style"],dt:["class","style"],em:["class","style"],font:["color","size","face"],footer:[],h1:["class","style"],h2:["class","style"],h3:["class","style"],h4:["class","style"],h5:["class","style"],h6:["class","style"],header:[],hr:[],i:["class","style"],img:["src","alt","title","width","height","id","_src","loadingclass","class","data-latex"],ins:["datetime"],li:["class","style"],mark:[],nav:[],ol:["class","style"],p:["class","style"],pre:["class","style"],s:[],section:[],small:[],span:["class","style"],sub:["class","style"],sup:["class","style"],strong:["class","style"],table:["width","border","align","valign","class","style"],tbody:["align","valign","class","style"],td:["width","rowspan","colspan","align","valign","class","style"],tfoot:["align","valign","class","style"],th:["width","rowspan","colspan","align","valign","class","style"],thead:["align","valign","class","style"],tr:["rowspan","align","valign","class","style"],tt:[],u:[],ul:["class","style"],video:["autoplay","controls","loop","preload","src","height","width","class","style"]}},window.UE={getUEBasePath:t}}()},"3VAf":function(e,t){},"4FnK":function(e,t){},"4ckE":function(e,t){},"5M1U":function(e,t){},"612h":function(e,t){},"6iPZ":function(e,t){},"6pCd":function(e,t){},"79vw":function(e,t){},"83Gx":function(e,t){},"9JjY":function(e,t){},AMu6:function(e,t){},AkXE:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAvmSURBVHhe7d17iFVVG8fxZ16IsMyUqCwn0cxG0iEDE0mQxAocMLKsFMuyMrCmm1Y6hXfRTI1ixj+KiGAkFZMk6AJlikhg0mUcFbpARWalUlmMXez67PcZ6vUd1zn7nLPP7LXW9wPifvY5c/6Z+Z2991rPXrvmz78JgC79x/4H0AUCAjgQEMCBgAAOBARwICCAAwEBHAgI4EBAAAcCAjgQEMCBgAAOBARwICCAAwEBHAgI4EBAAAcCAjgQEMCBgAAOBARwICCAAwEBHAgI4EBAAAcCAjhUbOnRtrY2ee2112Tv3r2yf/9+YUVTVFNNTY3U1tbKsGHDpKGhQerr6+2V8pQdkC1btsjDDz8sI0aMsD1A99u9e7esWLFCxowZY3tKU1ZANBhHjhyxCsiffv36yfz5861Kr+RrkKamJsKB3Pvyyy9l1apVVqVXUkDefvtt+fbbb60C8m3OnDny4YcfWpVOSadY48aNkwsuuMAqIP86Ojpk7dq1VhUv9RFET6u2bt1qFeCHzZs3y++//25V8VIHZPv27TJjxgyrAD9MnTpVPvjgA6uKlzogBw8etC3AL5988oltFS91QI4ePWpbgF8OHTpkW8VLHRCdsQRikXoUq6WlRdrb260qbNeuXdKrVy+rgMrRAaORI0daVZi2nzQ2NlpVnNQBaW5ulj179lhV2LRp02T06NFWAZWzY8cOaW1ttaqwUgKS+hQLiAkBARwICOBAQAAHAgI4EBDAgYAADgQEcCAggAMBARwICOBAQAAHAgI4EBDAgYAADgQEcIgyIJ999pk89dRTsmjRIhk7dmzyT7d1n74GdIoqINu2bZOBAwfK8uXLZd++fXLgwAG58MILk3+6rfv0NX2PrqMERBGQ77//PjlKrFu3Tq666irbe2L6Hn2Ug/6M/iziFXxA9JRJ/9D1KJGW/swll1xS0oJjCEPQAdFv/4kTJ6Za+eJ4ejSZPn06R5JIBR2QW2+9taxwdNLP0KAhPsEGRC/Izz77bKvKp6db+pmIS7ABWbhwoW1Vjp5qIS5BBkQvzOvq6qyqHL0eYZ4kLkEGJMtTIeZH4hLsESQrjGbFJciAZPlHzJxIXIIMSO/evW2r8rL8bORPkAHJ0oABA2wLMQgyIFn+EROQuAQZkGuuuca2Ku/yyy+3LcQg2GuQb775xqrK0YfRcwSJS7DXIFnMpGfxmci3YAMyfPhw6dGjh1Xl++WXXzi9ilCwAVFPPvmk7Ny506rS6WfoZyE+QQdEadtJOSHRn9XPYP4jTsEHRP+wdfa7lNMt/RnCEbfgA9JJT5FmzpxZ1OiWvmfKlCnJzxCOuEUTEKUX7tqNu2LFChk/frycc845//NP9+lr+h4uyKFq/vybbRelublZ9uzZY1Vh06ZNk9GjR1sFVM6OHTuktbXVqsLq6+ulsbHRquJEdQQB0iIggAMBARwICOBAQAKzYcOGpGds2bJlcujQIduLUhGQQOjczahRo+Stt96Sr776Sj7//POk83j9+vX2DpSCgATihhtukIsvvtiq/7rppptk69at8s4779gepEVAArBkyRIZMmSIVf/vuuuukx9//NEqpEFAPKdHh0L3qTQ0NMgtt9xiFdIgIB7T5Y306HDHHXfYnhM788wz5ZlnnrEKxSIgHps6dWpydCjWfffdJ3v37rUKxSAgnmppaZHa2lqriqN9cfoYh59//tn2oBAC4iE9CsyePduqdPRpW3okQXEIiGeOHj2aHAX04UDleOmll2wLLgTEM3fddVdyFCiXjmrt37/fKpwIAfGIzoqffPLJVpVH75jUEbDffvvN9qArBMQT+kiH22+/3arK0Dss582bZxW6QkA88OuvvybXHdo6Uml6i/GWLVuswvEIiAfmzJlTkaf1dmXGjBkyefJkOXz4sO3BvxGQnHv11VeTkassXXvttUlIUi5PEAUCkmNff/11MlteDYMGDZKVK1dahU4EJKf++OMPuf7665M29mp59NFHecTccQhITi1dulQuuugiq6rjtttuSwYDaI3/BwHJIW1hX7RokVXVpc+CpzX+HwQkZ9K0sGdFW+OfffZZq+IWfUB0eFPX7NWlRvXb880337RXuod+e6dpYc/KvffeKx999JFV8Yo6IO3t7TJ48ODkgriurk4GDhwoGzdulFmzZtk7qmvNmjXSt29fq7rXzTffnAz/xt4aH21AOjo6ZNKkSV2OEulrL7zwglXV0dbWJrt377YqH3RN5QceeMCqOEUbkHvuuce5gvudd94pn376qVXZ0olAHdLNIz26xtwaH2VANm3aJCeddJJVXdMJump1u1aqhT0rMbfGRxeQL774QqZPn26V26WXXipNTU1WZaOSLexZibk1PqqA6C9YT2X0F16sH374IbORrSxa2LOirfELFiywKh5RBUR/wcevPlgMDVSlu12zbGHPyvLly5OH1sQkmoBs3749+QWXQoc70xx1ipFlC3tWtDVej8AxtcZHEZDvvvtObrzxxuQXXKrzzz9fVq1aZVV5qtHCnpWrr746aY2PRRQB0Ukv/cWWSy/Y33//fatKU80W9qxoa3ylvizyLviA6AJr/fr1s6o82u2qozk6kViK7mhhz4p+WcTQGh90QPRpvKUusHYiV155ZdK7VYruaGHPSiyt8cEGRHuI9Nu+3AXWutKjR4/UrSjd2cKelRha44MNiC6v6WolKVeaVpQ8tLBnRVvjn3vuOavCE2RAtJUka2laUdKuwu6bu+++Wz7++GOrwhJcQNK0kpSrmFaU5ubm1Kuw+6Zz1Xid/AxNUAHpHCWq9KSei6sVRVdhf/DBB60KW6it8UEFZPHixSW1kpSrq1aUSq3C7hM93dRJ0JAEE5CdO3cmD7PsDl21ouS9hT0rer0VUmt8EAHRVhI9terOUSJtRVm9enWy7UMLe1Z0ElQHL/R0NwRBBERbxsePH29V99FFDl588cUgh3PT0Nb4Qk/e9YX3AXn66aeTsfi8eOONN7zvtaoE7RoIoTXe64DoN/b9999vFfIklNZ4bwOiY+56rqtj8MinEFrjvQ2Irl112WWXWYW80tb4J554wir/eBmQV155RY4dO2YV8k7vnvS1Nd67gOgNR3oDFPzR2Rrv412UXgVEn4Ckt87qxR/8oq3xvqzg8m9eBWTZsmUyZMgQq+CbXr16yfPPP2+VH7wJiLaSzJ8/3yr4yrfWeC8Cord1dncrCSpD1wHzqTXei4Do/R15aCVBZWhrfKXXCshK7gOit3OeccYZViEUegTxoTU+1wHRVhJ90hHC5ENrfG4D0tlKQuNfuHxojc9tQHT2lVaS8GlrfJ6XQ8plQPQeb1/XrkV6eW6Nz11ADh48WNVFF9D9dPheT7f0ztC8yV1A5s6dm9zjjbhMmDBBHnnkEavyI1cB0QnBQs8ORLjyeLGeq4CEuPAY0vnpp59sKx9yFRCdEOQIEq+zzjorWRg8T2r+1B7yFHQpTX2sQLH0llhtLUjj5Zdflvfee88qhK6mpiYZ0tdHS6ShI1+tra1WFVZfXy+NjY1WFSeXAQGKUY2A5G4UC8gTAgI4EBDAgYAADgQEcCAggAMBARwICOBAQAAHAgI4pG41aWlpkfb2dqsK27VrV7KiHlBpR44ckZEjR1pVWC57sYC8qEovlnZeArFIHZCePXvaFuCXUk71UwektrbWtgC/9O/f37aKl/oapKOjQ04//XQvn/WAeOljF3TVlFNOOcX2FCf1EeTUU0+VK664wirADw0NDanDoUqaB9GFvgCfLFmyxLbSKSkgI0aMkD59+lgF5NuAAQNk2LBhVqVTUkDUY489JqeddppVQD6de+650tTUZFV6qS/Sj/f666/LQw89xELTyJW2tjZ5/PHHZcyYMbanNGUHpNO7776bhGXfvn1y4MCB5Im0QLXoBPZ5552XzJbrBfnQoUPtlfJULCBAiEq+BgFiQEAABwICOBAQwIGAAA4EBHAgIIADAQEcCAjgQEAABwICOBAQwIGAAA4EBHAgIIADAQEcCAjgQEAABwICOBAQwIGAAA4EBHAgIIADAQEcCAjgQECAExL5CyODBtgcu3WUAAAAAElFTkSuQmCC"},"BLU/":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAATJJREFUOBFjYBgsgJFYh/T19QlxcnKuA6pn+vv3b2BOTs5bmF4mGAMfDTVgD1DNO0ZGxjssLCwbkNUTNARkABcX116gpu9AbAfEIv////9LtCFTpkwRBhnw79+/S+fPn3cAarwJNEDm+/fvQUQZAjIA6Ow9IAMuXLiQYmBgMAeokRNogEtRUdE7goY0NDQwMTMz70Q2ABgWutgMABmGNUwkJCRAzuWBuQCfASBDWEAEFlAOFHtsZGR0BRgGH3G5AKYPwyVTp041BUqaADE/0ICqly9fWqCHAUwzjMZwyc+fP68AE5V5ZmbmKZgiQjQ8xQLTAyfQ7+yENIDkP378+AMY+D9gauEuAdp+E2iILEwCHw1Uex8orwRTAzcE6HeFq1evwl0GU4CNXr169T9s4gMvBgCIBX7QjOY8zAAAAABJRU5ErkJggg=="},BfIj:function(e,t){},CLkE:function(e,t){},DVzi:function(e,t){},E4Hy:function(e,t){},Ee6j:function(e,t){},FbIm:function(e,t){},Gh8v:function(e,t){},Gsc2:function(e,t){},IAe6:function(e,t){},KJYY:function(e,t){},L4Rw:function(e,t){},LFPg:function(e,t,a){"use strict";(function(e){var i,l=a("aYpo");a.n(l);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={name:"listInfo",components:{VueEditor:l.VueEditor},data:function(){var e,t;return{validaError:[],dialogVadi:!1,isActive:!1,content_01:"",tabIndex:2,notes:[{title:"",content:""}],instructions:[{title:"",content:""}],explain:[{title:"费用包含",content:""},{title:"费用不包含",content:""},{title:"温馨提示",content:""},{title:"儿童政策",content:""},{title:"购物场所",content:""},{title:"自费项目",content:""}],domains:[],isShowImg:!1,imgUrl:"",isSlideshow:!1,slideshowUrl:"",vague:[],tableData1:[],tableData2:[],list:[],excurList:[],dynamicTags1:[],inputVisible1:!1,inputValue1:"",content:"",content1:"<h1>Some initial content111</h1>",editableTabsValue:"1",editableTabs:[{title:"行程套餐",name:"1",content:"Tab 1 content"}],number:"0/10",items:{text:""},flightsList:[],goRoad:[{value:"1",label:"飞机"},{value:"2",label:"火车"},{value:"3",label:"汽车"},{value:"4",label:"轮船"}],selectedOptions:["1"],goDate:[],returnRoad:[{value:"1",label:"飞机"},{value:"2",label:"火车"},{value:"3",label:"汽车"},{value:"4",label:"轮船"}],selectedOptions_01:["1"],goDay:[{value:"选项1",label:"当日"},{value:"选项2",label:"第一天"},{value:"选项3",label:"第一天"},{value:"选项4",label:"第一天"}],hotelStars:[{value:"选项1",label:"三星"},{value:"选项2",label:"四星"},{value:"选项3",label:"五星"}],hotelDays:[{value:"选项1",label:"一宿"},{value:"选项2",label:"两宿"},{value:"选项3",label:"三宿"}],hotelRoom:[{value:"选项1",label:"单人间"},{value:"选项2",label:"双人间"},{value:"选项3",label:"三人间"}],hotelType:[{value:"选项1",label:"双人床"},{value:"选项2",label:"双人床"},{value:"选项3",label:"双人床"}],restaurants:[],info:"",ruleForm:(e={productNamel:"",destinations:"",travelType:"1",placeDeparture:"",travelDays:"",travelNight:"",orderConfirmationType:"",operationLabel:"",Excursion:"",excurList:"",advanceRegistrationDays:"",timeHour:"",timeMinute:"",highlightWords1:"",highlightWords2:"",highlightWords3:"",highlightWords4:"",avatarImages:"",slideshow:"",hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:"",pod:"",company:"",theNumber:""},s(e,"pod",""),s(e,"podPlace",""),s(e,"podTime",""),s(e,"arriveCity",""),s(e,"arrivePlace",""),s(e,"arriveTime",""),s(e,"planeDay",""),s(e,"trafficMode","1"),s(e,"day",""),s(e,"typeExt",""),s(e,"time",""),s(e,"name",""),s(e,"details",""),s(e,"memo",""),s(e,"pictureID",""),s(e,"highlightWords",""),s(e,"theme",""),s(e,"subject",""),s(e,"origin",""),s(e,"bourn",""),s(e,"plane",[{pod:"",id:0,goOrBack:1,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[]}]),s(e,"nackPlane",[{pod:"",id:0,goOrBack:2,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[]}]),s(e,"schedules",[]),e),rules:(t={productNamel:[{required:!0,message:"产品名称不能为空",trigger:"blur"},{min:0,max:30,message:"产品名称字数超过30汉字限制",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9【】，+/（]{1,29}([\u4e00-\u9fa5a-zA-Z0-9【】，+/）]{0,1})$/,message:"请输入正确产品名称，含中括号【】中文逗号，英文+/可用，中文小括号（）仅能用在句尾",trigger:"blur"}],travelType:[{required:!0,message:"不能为空",trigger:"blur"}],orderConfirmationType:[{required:!0,message:"订单确认类型不能为空",trigger:"change"}],advanceRegistrationDays:[{required:!0,message:"提前报名天数不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"提前报名天数需为正整数"}],highlightWords1:[{required:!0,message:"亮点词不能为空",trigger:"blur"},{min:0,max:8,message:"亮点词字数超过8汉字限制",trigger:"blur"}],highlightWords2:[{min:0,max:8,message:"亮点词字数超过8汉字限制",trigger:"blur"}],highlightWords3:[{min:0,max:8,message:"亮点词字数超过8汉字限制",trigger:"blur"}],highlightWords4:[{min:0,max:8,message:"亮点词字数超过8汉字限制",trigger:"blur"}],travelDays:[{required:!0,message:"行程天数不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"行程天数需为正整数"}],travelNight:[{required:!0,message:"行程晚数不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"行程晚数需为正整数"}],timeHour:[{required:!0,message:"最晚收客时间不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"最晚收客时间需为正整数"}],timeMinute:[{required:!0,message:"最晚收客时间不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"最晚收客时间需为正整数"}],operationLabel:[{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]{1,300}$/,message:"不能有标点符号"}],highlightWords:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:10,message:"字数超过10汉字限制",trigger:"blur"}],origin:[{required:!0,message:"行程出发地不能为空",trigger:"change"}],bourn:[{required:!0,message:"行程目的地不能为空",trigger:"change"}],hotelAuto:[{required:!0,message:"不能为空",trigger:"blur"}],hotelChinese:[{required:!0,message:"不能为空",trigger:"blur"}],hotelEnglish:[{required:!0,message:"不能为空",trigger:"blur"}],hotelAddress:[{required:!0,message:"不能为空",trigger:"blur"}],hotelStar:[{required:!0,message:"不能为空",trigger:"blur"}],hotelDay:[{required:!0,message:"不能为空",trigger:"blur"}],hotelHouse:[{required:!0,message:"不能为空",trigger:"blur"}],hotelBed:[{required:!0,message:"不能为空",trigger:"blur"}],pod:[{required:!0,message:"不能为空",trigger:"blur"}],company:[{required:!0,message:"航空公司/游轮公司不能为空",trigger:"blur"}],theNumber:[{required:!0,message:"航班号/车次/游轮号不能为空",trigger:"blur"}],podCity:[{required:!0,message:"出发城市不能为空",trigger:"blur"}],podPlace:[{required:!0,message:"出发机场/出发车站/出发码头不能为空",trigger:"blur"}],podTime:[{required:!0,message:"出发时间不能为空",trigger:"blur"}],arriveCity:[{required:!0,message:"到达城市不能为空",trigger:"blur"}],arrivePlace:[{required:!0,message:"到达机场/到达车站/到达码头不能为空",trigger:"blur"}],arriveTime:[{required:!0,message:"到达时间不能为空",trigger:"blur"}],planeDay:[{required:!0,message:"不能为空",trigger:"blur"}],trafficMode:[{required:!0,message:"不能为空",trigger:"blur"}],day:[{required:!0,message:"不能为空",trigger:"blur"}],typeExt:[{required:!0,message:"不能为空",trigger:"blur"}],time:[{required:!0,message:"不能为空",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"}],details:[{required:!0,message:"不能为空",trigger:"blur"}],memo:[{required:!0,message:"不能为空",trigger:"blur"}]},s(t,"details",[{required:!0,message:"不能为空",trigger:"blur"}]),s(t,"pictureID",[{required:!0,message:"不能为空",trigger:"blur"}]),s(t,"subject",[{required:!0,message:"日程信息主题不能为空",trigger:"blur"},{min:0,max:20,message:"字数超过20汉字限制",trigger:"blur"}]),t),fileList2:[],radio:"1",radio1:"1",radio2:"1",radio3:"1",radio4:"1",num:0,num1:0,param:"1",tabPosition:"right",comboshow:!1,aindex:0,editableTabsValue3:"2",editableTabs3:[{content:""}],describe:["详细说明","简要说明"],pattern:["",""],matter_radio:"0",form:[],form1:[],lineshow:!1,Stopline:!1,transit:["1"],deleteTransit:!0,place:[{value:"选项1",id:"1"},{value:"选项2",id:"2"},{value:"选项3",id:"3"}],destination:[{value:"选项1",id:"1"},{value:"选项2",id:"2"},{value:"选项3",id:"3"}],information:["1"],hotelshow:!1,hotel:[{hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:""}],details:[{value:"1",label:"景点"},{value:"2",label:"购物"},{value:"3",label:"自费项目"}],teturnBack:[],Returnline:!1,num6:0,schedule_radio:"0",num7:0,details_radio:"0",schedule_details:["","",""],mynumber:0,mydate:"2",myTravelDay:[],myxiangnumber:0,hotell:!0,otherl:!1,myradio:[],activeName:"first",travelDays:"",dynamicTags2:[],inputVisible2:!1,inputVal:"",empty:"",dynamicTags3:[],inputVisible3:!1,inputVal3:"",noNull:!1,dynamicTags4:[],inputVisible4:!1,inputVal4:"",errorNull:"",sid:"",imageSearch:"",props1:{label:"name",isLeaf:"leaf"},data:"",theContinent:"",node:"",resolve:"",level:"",figureShow:!1,list_a:[]}},watch:{items:{handler:function(){this.$refs.count.setAttribute("maxlength",10),this.number=10-this.$refs.count.value.length},deep:!1},"ruleForm.travelDays":{handler:function(e,t){this.myTravelDay=[];for(var a=0;a<e;a++)this.myTravelDay.push(a);if(e>t){this.mydate=e-t;for(var i=0;i<this.mydate;i++)this.ruleForm.schedules.push({day:i+1,subject:"",info:"",createTime:this.formatDate(new Date),ext_Hotel:[{Details:""}],ext_Meals:[{label:"早餐",Myself:"0",Detail:""},{label:"午餐",Myself:"0",Detail:""},{label:"晚餐",Myself:"0",Detail:""}],activitys:[{typeExt:"",time:"",name:"",details:"",memo:"",pictureID:"",activityType:"1",createTime:this.formatDate(new Date)}]}),this.myradio.push({lable:"0"})}else this.ruleForm.schedules.splice(e,t-e),this.myradio.splice(e,t-e)}}},mounted:function(){this.guid()},created:function(){this.themeList(),this.itemList()},methods:(i={loadNode1:function(e,t){var a=this;this.node=e.data,this.resolve=t,this.level=e.level,0===e.level&&(this.list_a=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:-1}}).then(function(e){for(var i=0;i<e.data.objects.length;i++)a.list_a.push({name:e.data.objects[i].areaName,key:i,id:e.data.objects[i].id,isLeaf:e.data.objects[i].isLeaf,Hierarchy:0});t(a.list_a)}).catch(function(e){console.log(e)})),e.level>=1&&this.getSon(e.data.key,e.data.label,e.data.id,e.data.isLeaf,t,e.level)},getSon:function(e,t,a,i,l,s){var o=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:a}}).then(function(e){if(o.lists=[],1==e.data.isSuccess)for(var t=0;t<e.data.objects.length;t++)0==e.data.objects[t].isDeleted&&(2==e.data.objects[t].isLeaf?o.lists.push({name:e.data.objects[t].areaName,key:t,id:e.data.objects[t].id,isLeaf:e.data.objects[t].isLeaf,leaf:!1,Hierarchy:s}):o.lists.push({name:e.data.objects[t].areaName,key:t,id:e.data.objects[t].id,isLeaf:e.data.objects[t].isLeaf,leaf:!0,Hierarchy:s}));setTimeout(function(){l(o.lists)},200)}).catch(function(e){console.log(e)})},treeClick:function(e,t){this.data=e,1==e.isLeaf&&(0==this.addAlbum?(this.geography=1,this.albumPage()):(this.picForm.destination=this.data.name,this.picForm.destinationId=this.data.id,this.leftTree1=!1))},figureClick:function(){this.figureShow=!0},getFigure:function(){this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/getpa",{id:this.dynamicTags4[0].destinationID}).then(function(e){if(1==e.data.isSuccess)e.data.object})},figureClose:function(){this.figureShow=!1},myInput:function(){this.ruleForm.productNamel.length>30?this.isActive=!0:this.isActive=!1},getUEContent0:function(){this.notes.push({title:"",content:""})},getUEContent1:function(){this.instructions.push({title:"",content:""})},deleteNotice:function(e){this.notes.splice(e,1)},deleteState:function(e){this.instructions.splice(e,1)},deleteState_01:function(e){this.domains.splice(e,1)},getUEContent:function(){this.domains.push({title:"",content:""})},addsave:function(e){var t=this,a=[];""!=this.ruleForm.highlightWords1&&a.push({strength:this.ruleForm.highlightWords1}),""!=this.ruleForm.highlightWords2&&a.push({strength:this.ruleForm.highlightWords2}),""!=this.ruleForm.highlightWords3&&a.push({strength:this.ruleForm.highlightWords3}),""!=this.ruleForm.highlightWords4&&a.push({strength:this.ruleForm.highlightWords4});for(var i=JSON.stringify(this.ruleForm.plane.concat(this.ruleForm.nackPlane)),l=JSON.parse(i),s=0;s<l.length;s++)l[s].ext_Stopover=JSON.stringify(l[s].ext_Stopover);var o=JSON.stringify(this.ruleForm.schedules),r=JSON.parse(o);for(s=0;s<r.length;s++)r[s].ext_Meals=JSON.stringify(r[s].ext_Meals);for(s=0;s<r.length;s++)r[s].ext_Hotel=JSON.stringify(r[s].ext_Hotel);var n={createTime:this.formatDate(new Date),title:this.ruleForm.productNamel,isForeign:this.ruleForm.travelType,day:this.ruleForm.travelDays,night:this.ruleForm.travelNight,pods:this.dynamicTags3,destinations:this.dynamicTags4,isDeleted:0,confirmType:this.ruleForm.orderConfirmationType,strengths:a,label:this.dynamicTags2,pictureID:0,vedioID:0,pepeatpic:"",advanceDay:this.ruleForm.advanceRegistrationDays,advanceHour:this.ruleForm.timeHour,advanceMinute:this.ruleForm.timeMinute,createUser:sessionStorage.getItem("id"),proStat:1,guid:localStorage.getItem("guid"),crowdID:this.ruleForm.Excursion,themeID:this.ruleForm.theme,mark:this.content_01,package:[{name:this.ruleForm.highlightWords,podID:this.ruleForm.origin.podId,destinationID:this.ruleForm.bourn.destinationId,pod:this.ruleForm.origin.pod,destination:this.ruleForm.bourn.destination,isDeleted:0,createTime:this.formatDate(new Date),traffic:l,schedules:r,briefMark:this.content,loadPlan:!1}],instructions:this.explain.concat(this.domains),instructions1:this.notes,instructions2:this.instructions,loadPackage:!0};this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teaminsert",{object:n}).then(function(e){1==e.data.isSuccess?(a.$message.success("添加成功"),a.$router.push({path:"productList"})):a.$message.success("添加失败")}).catch(function(e){console.log(e)})}else t.errors()})},errors:function(){this.dialogVadi=!0;var t=this;setTimeout(function(){for(var a=[],i=e(".el-form-item__error"),l=0;l<i.length;l++)a.push(i.eq(l).html().trim());t.validaError=[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(new Set(a))),0==t.dynamicTags3.length&&t.validaError.unshift("基本信息出发地不能为空"),0==t.dynamicTags4.length&&t.validaError.unshift("基本信息目的地不能为空")},500)},cancel:function(){this.$router.push({path:"productList"})},handleClick:function(e,t){if("tab-second"==t.target.getAttribute("id")){this.goDate=[];for(var a=0;a<this.ruleForm.travelDays;a++)this.goDate.push({value:a+1,label:a+1})}},childByValue:function(e){this.travelDays=e},otherNumber:function(){this.hotell=!1,this.otherl=!0},tabTravel:function(e){this.mynumber=e},stopping:function(e){this.ruleForm.plane[e].ext_Stopover.push({stopCity:"",stopDate:""})},deleteItem:function(e,t){this.ruleForm.plane[t].ext_Stopover.splice(e,1)},deletePanel:function(e){this.ruleForm.plane.splice(e,1)},reDeleteItem:function(e,t){this.ruleForm.nackPlane[t].ext_Stopover.splice(e,1)},reDeletePanel:function(e){this.ruleForm.nackPlane.splice(e,1)},reStopping:function(e){this.ruleForm.nackPlane[e].ext_Stopover.push({stopCity:"",stopDate:""})},addTransit:function(e){this.ruleForm.plane.push({pod:"",id:0,goOrBack:1,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[]})},trafficClear:function(e){this.ruleForm.plane[e].pod="",this.ruleForm.plane[e].company="",this.ruleForm.plane[e].theNumber="",this.ruleForm.plane[e].podCity="",this.ruleForm.plane[e].podPlace="",this.ruleForm.plane[e].podTime="",this.ruleForm.plane[e].arriveCity="",this.ruleForm.plane[e].arrivePlace="",this.ruleForm.plane[e].arriveTime="",this.ruleForm.plane[e].planeDay="",this.ruleForm.plane[e].day=""},clearBle:function(e){this.ruleForm.plane[e].company="",this.ruleForm.plane[e].theNumber="",this.ruleForm.plane[e].podCity="",this.ruleForm.plane[e].podPlace="",this.ruleForm.plane[e].podTime="",this.ruleForm.plane[e].arriveCity="",this.ruleForm.plane[e].arrivePlace="",this.ruleForm.plane[e].arriveTime="",this.ruleForm.plane[e].planeDay="",this.ruleForm.plane[e].day=""},clearBle_01:function(e){this.ruleForm.nackPlane[e].company="",this.ruleForm.nackPlane[e].theNumber="",this.ruleForm.nackPlane[e].podCity="",this.ruleForm.nackPlane[e].podPlace="",this.ruleForm.nackPlane[e].podTime="",this.ruleForm.nackPlane[e].arriveCity="",this.ruleForm.nackPlane[e].arrivePlace="",this.ruleForm.nackPlane[e].arriveTime="",this.ruleForm.nackPlane[e].planeDay="",this.ruleForm.nackPlane[e].day=""},trafficGoClear:function(e){this.ruleForm.nackPlane[e].pod="",this.ruleForm.nackPlane[e].company="",this.ruleForm.nackPlane[e].theNumber="",this.ruleForm.nackPlane[e].podCity="",this.ruleForm.nackPlane[e].podPlace="",this.ruleForm.nackPlane[e].podTime="",this.ruleForm.nackPlane[e].arriveCity="",this.ruleForm.nackPlane[e].arrivePlace="",this.ruleForm.nackPlane[e].arriveTime="",this.ruleForm.nackPlane[e].planeDay="",this.ruleForm.nackPlane[e].day=""},addRTransit:function(e){this.ruleForm.nackPlane.push({pod:"",id:0,goOrBack:2,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"",ext_Stopover:[]})},addHotel:function(){this.hotel.push({hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:"",hotelAbstract:"",hotelPicture:""})},deleteHotel:function(e){this.hotelshow=!0},shutHotel:function(e){this.hotel.splice(e,1),this.hotelshow=!1},cloceHotel:function(){this.hotelshow=!1},tabHotel:function(e){this.num6=e},tabDetails:function(e,t,a){},handleClose2:function(e){this.dynamicTags2.splice(this.dynamicTags2.indexOf(e),1)},showInput2:function(){var e=this;this.inputVisible2=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleImgClick:function(e){this.isShowImg=!this.isShowImg,this.imgUrl=e.url},handleRemove:function(e,t){this.isShowImg=!1},slideshowClick:function(e){this.isSlideshow=!0,this.slideshowUrl==e.url?(this.isSlideshow=!1,this.slideshowUrl=""):this.slideshowUrl=e.url},handleRemove2:function(e,t){this.isSlideshow=!1},handleRemoves:function(e,t){},handleRemoves1:function(e,t){},addDetails:function(e){this.ruleForm.schedules[e].activitys.push({typeExt:"",time:"",name:"",details:"",memo:"",pictureID:0,activityType:"1",createTime:this.formatDate(new Date)})},deleteDetails:function(e,t){this.ruleForm.schedules[t].activitys.splice(e,1)},diaoyong:function(e,t,a){this.ruleForm.schedules[a].activitys[t].activityType=e},baocun:function(e,t){this.ruleForm.schedules[t].ext_Hotel[0].Details=e,this.ruleForm.schedules[t].ext_Hotel[0].IsHotel=0},close:function(){this.comboshow=!1},confirm:function(){this.handleTabsEdit(this.aindex,"remove"),this.comboshow=!1},tab:function(e){this.num=e},tab1:function(e){this.num1=e},handleTabsEdit:function(e,t){if("add"===t){var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a,content:"New Tab content"}),this.editableTabsValue=a}if("remove"===t){if(0==this.comboshow)return this.comboshow=!0,this.aindex=e,!1;var i=this.editableTabs,l=this.editableTabsValue;l===e&&(i.forEach(function(t,a){if(t.name===e){var s=i[a+1]||i[a-1];s&&(l=s.name)}}),this.editableTabsValue=l,this.editableTabs=i.filter(function(t){return t.name!==e}))}},handleSelectPod_01:function(e){var t=this;if(""==this.ruleForm.plane[e].pod)return this.clearBle(e),!1;this.$http.post(this.GLOBAL.serverSrc+"/Flight/flighs/api/getnum",{number:this.ruleForm.plane[e].pod}).then(function(a){if(1==a.data.isSuccess){var i=a.data.object;t.ruleForm.plane[e].company=i.company,t.ruleForm.plane[e].theNumber=i.number,t.ruleForm.plane[e].podCity=i.departureCity,t.ruleForm.plane[e].podPlace=i.departureAirport,t.ruleForm.plane[e].podTime=i.departureTime,t.ruleForm.plane[e].arriveCity=i.reachingCity,t.ruleForm.plane[e].arrivePlace=i.arrivalAirport,t.ruleForm.plane[e].arriveTime=i.arrivalTime,t.ruleForm.plane[e].planeDay=i.day,t.ruleForm.plane[e].trafficMode=i.byType}})},handleSelectPod_02:function(e){var t=this;if(""==this.ruleForm.nackPlane[e].pod)return this.clearBle_01(e),!1;this.$http.post(this.GLOBAL.serverSrc+"/Flight/flighs/api/getnum",{number:this.ruleForm.nackPlane[e].pod}).then(function(a){if(1==a.data.isSuccess){var i=a.data.object;t.ruleForm.nackPlane[e].company=i.company,t.ruleForm.nackPlane[e].theNumber=i.number,t.ruleForm.nackPlane[e].podCity=i.departureCity,t.ruleForm.nackPlane[e].podPlace=i.departureAirport,t.ruleForm.nackPlane[e].podTime=i.departureTime,t.ruleForm.nackPlane[e].arriveCity=i.reachingCity,t.ruleForm.nackPlane[e].arrivePlace=i.arrivalAirport,t.ruleForm.nackPlane[e].arriveTime=i.arrivalTime,t.ruleForm.nackPlane[e].planeDay=i.day,t.ruleForm.nackPlane[e].trafficMode=i.byType}})},querySearch:function(e,t){var a=this;this.$http.post(this.GLOBAL.serverSrc+"/flight/api/list",{object:{id:0,byType:0,day:0,company:"",number:"",departureCity:"",departureAirport:"",departureTime:"",reachingCity:"",arrivalAirport:"",arrivalTime:"",createTime:"2019-03-21T01:58:24.499Z",code:"",isDeleted:0,isForeign:0}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.flightsList.push({value:i.data.objects[l].number+a.ruleForm.plane[l].company,id:i.data.objects[l].id});var s=e?a.flightsList.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){}},s(i,"handleRemove",function(e,t){console.log(e,t)}),s(i,"handlePreview",function(e){console.log(e)}),s(i,"querySearch1",function(e,t){t(e?this.tableData1.filter(this.createFilter(e)):[])}),s(i,"beforeUploadVideo",function(e){var t=e.size/1024/1024<20;return-1==["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb"].indexOf(e.type)?(this.$message.error("请上传正确的视频格式"),!1):t?void 0:(this.$message.error("上传视频大小不能超过20MB哦!"),!1)}),s(i,"uploadVideoProcess",function(e,t,a){this.videoFlag=!0,this.videoUploadPercent=t.percentage.toFixed(0)}),s(i,"handleImgClick",function(e){this.isShowImg=!this.isShowImg,this.imgUrl=e.url}),s(i,"handleRemove",function(e,t){this.isShowImg=!1}),s(i,"slideshowClick",function(e){this.isSlideshow=!0,this.slideshowUrl==e.url?(this.isSlideshow=!1,this.slideshowUrl=""):this.slideshowUrl=e.url}),s(i,"handleRemove2",function(e,t){this.isSlideshow=!1}),s(i,"handleRemoves",function(e,t){}),s(i,"handleRemoves1",function(e,t){}),s(i,"handleClose2",function(e){e.id==this.ruleForm.bourn.id&&(this.ruleForm.bourn=[]),this.dynamicTags2.splice(this.dynamicTags2.indexOf(e),1)}),s(i,"showInput2",function(){var e=this;this.inputVisible2=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),s(i,"dest_01",function(e){this.dynamicTags2.push({labelID:e.id,label:e.value,teamID:0}),this.ruleForm.operationLabel="",this.inputVisible2=!1}),s(i,"handleInputConfirm2",function(){var e=this;this.$refs.operationLabel.validate(),""!==this.ruleForm.operationLabel?setTimeout(function(t){e.ruleForm.operationLabel;e.inputVisible2=!1,e.ruleForm.operationLabel="",e.empty=!1},200):0==this.dynamicTags2.length?(this.empty=!0,document.getElementById("input-error").style.border="solid 1px red"):this.inputVisible2=!1}),s(i,"querySearch5",function(e,t){var a=this;this.tableData2=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/olabel/api/olabelfuzzy",{object:{labelName:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.tableData2.push({value:i.data.objects[l].labelName,id:i.data.objects[l].id});var s=e?a.tableData2.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),s(i,"createFilter",function(e){return function(e){return e.value}}),s(i,"querySearch3",function(e,t){var a=this;this.vague=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.vague.push({id:i.data.objects[l].id,value:i.data.objects[l].areaName});var s=e?a.vague.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),s(i,"createFilter",function(e){return function(e){return e.value}}),s(i,"querySearch2",function(e,t){var a=this;this.tableData1=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.tableData1.push({value:i.data.objects[l].areaName,id:i.data.objects[l].id});var s=e?a.tableData1.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),s(i,"createFilter",function(e){return function(e){return e.value}}),s(i,"themeList",function(){var e=this;this.excurList=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/crowd/api/crowdlist",{object:{isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.excurList=t.data.objects}).catch(function(e){console.log(e)})}),s(i,"itemList",function(){var e=this;this.list=[];this.$http.post(this.GLOBAL.serverSrc+"/universal/theme/api/themelist",{object:{isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.list=t.data.objects}).catch(function(e){console.log(e)})}),s(i,"guid",function(){this.$http.post(this.GLOBAL.serverSrc+"/universal/utinity/api/getguid",{object:!0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){localStorage.setItem("guid",e.data.object)}).catch(function(e){console.log(e)})}),s(i,"handleClose3",function(e){e.id==this.ruleForm.origin.id&&(this.ruleForm.origin=[]),this.dynamicTags3.splice(this.dynamicTags3.indexOf(e),1)}),s(i,"showInput3",function(){var e=this;this.inputVisible3=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),s(i,"departure",function(e){this.dynamicTags3.push({podID:e.id,pod:e.value}),this.ruleForm.placeDeparture="",this.inputVisible3=!1}),s(i,"handleInputConfirm3",function(){var e=this;this.$refs.placeDeparture.validate(),""!==this.ruleForm.placeDeparture?setTimeout(function(t){e.ruleForm.placeDeparture;e.inputVisible3=!1,e.ruleForm.placeDeparture="",e.noNull=!1},200):0==this.dynamicTags3.length?(this.noNull=!0,document.getElementById("ddd").style.border="solid 1px red"):this.inputVisible3=!1}),s(i,"handleClose4",function(e){e.id==this.ruleForm.bourn.id&&(this.ruleForm.bourn=[]),this.dynamicTags4.splice(this.dynamicTags4.indexOf(e),1)}),s(i,"showInput4",function(){var e=this;this.inputVisible4=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),s(i,"dest",function(e){this.dynamicTags4.push({destinationID:e.id,destination:e.value}),this.ruleForm.destinations="",this.inputVisible4=!1}),s(i,"handleInputConfirm4",function(){var e=this;this.$refs.destinations.validate(),""!==this.ruleForm.destinations?setTimeout(function(t){e.ruleForm.destinations;e.inputVisible4=!1,e.ruleForm.destinations="",e.errorNull=!1},200):0==this.dynamicTags4.length?(this.errorNull=!0,document.getElementById("input-error").style.border="solid 1px red"):this.inputVisible4=!1}),s(i,"formatDate",function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate();i=i<10?"0"+i:i;var l=e.getHours();l=l<10?"0"+l:l;var s=e.getMinutes();s=s<10?"0"+s:s;var o=e.getSeconds();return o=o<10?"0"+o:o,t+"-"+a+"-"+i+" "+l+":"+s}),i)}}).call(t,a("7t+N"))},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),l={data:function(){return{name:""}},created:function(){this.name=localStorage.getItem("name")},methods:{submit:function(){this.$router.push({path:"/login"}),localStorage.clear(),sessionStorage.clear()},listUser:function(){this.$router.push({path:"/accountInfor"})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[e._m(0),e._v(" "),a("div",{staticClass:"right"},[a("el-badge",{staticClass:"icon el-icon-bell",attrs:{value:100,max:99}},[a("div",{})]),e._v(" "),a("div",{staticClass:"vertical-line"}),e._v(" "),a("div",{staticClass:"icon el-icon-service"},[a("span",{attrs:{id:"nameNum"},on:{click:e.listUser}},[e._v(e._s(e.name))])]),e._v(" "),a("div",{staticClass:"vertical-line1"}),e._v(" "),a("div",{staticClass:"icon1",on:{click:e.submit}},[e._v("退出")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"log"},[t("div",{staticClass:"left"},[this._v("嘉麒管理后台")])])}]};var o={data:function(){return{category:[{name:"账户管理",img:"account.png",items:[{value:"用户列表",router:"/userList"},{value:"组织列表",router:"/organList"},{value:"职位列表",router:"/positionList"},{value:"角色模板",router:"/role"}]},{name:"内容管理",img:"content.png",items:[{value:"区域列表",router:"/cityList"},{value:"自定义地区",router:"/customArea"},{value:"景点列表",router:"/scenicList"},{value:"标签列表",router:"/labelList"},{value:"素材列表",router:"/materialList"},{value:"酒店列表",router:"/hotelList"},{value:"供应商信息",router:"/supplierInfo"},{value:"商户信息",router:"/merchantInfo"},{value:"功能管理",router:"/priList"},{value:"权限列表",router:"/proList"},{value:"黑名单",router:"/blacklist"}]},{name:"产品管理",img:"product.png",items:[{value:"产品列表",router:"/productList"},{value:"出行模板",router:"/travelTemplate"},{value:"团期计划",router:"/regimentPlan/teamPlanList"},{value:"共享库存",router:"/sharedInventory"}]},{name:"订单管理",img:"order.png",items:[{value:"订单管理",router:"/orderList"}]},{name:"财务管理",img:"order.png",items:[{value:"无收入借款管理",router:"/loanManagement"},{value:"预付款管理",router:"/advancePayment"},{value:"收款管理",router:"/collectionManagement"},{value:"报销管理",router:"/reimburseManagement"},{value:"欠款管理",router:"/arrearsManagement"},{value:"银行账号管理",router:"/bankAccount"}]}],isRouter:!0,menuNumber:[],index:""}},methods:{handleOpen:function(e){for(var t=Number(e),a=0;a<this.category.length;a++)this.menuNumber[a]=a;if(-1!==this.menuNumber.indexOf(t))for(var i=0;i<this.menuNumber.length;i++)if(t!==this.menuNumber[i]){var l=String(this.menuNumber[i]);this.$refs.menu.close(l)}}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav"},[a("el-row",{staticClass:"tac"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("el-menu",{ref:"menu",staticClass:"el-menu-vertical-demo",attrs:{"default-active":this.$route.name,"background-color":"#0F2350","text-color":"#B9B9BB","active-text-color":"#fff",router:e.isRouter},on:{open:e.handleOpen}},e._l(e.category,function(t,i){return a("el-submenu",{key:i,staticClass:"nav_mouseActive",attrs:{index:String(i)}},[a("template",{slot:"title"},[a("i",{staticClass:"mouseActive",attrs:{id:"d"+i}}),a("img",{attrs:{src:"../static/navLeft/"+t.img,width:"15px",alt:""}}),e._v(" "),a("span",{staticClass:"actionName"},[e._v(e._s(t.name))])]),e._v(" "),e._l(t.items,function(t,i){return[a("el-menu-item",{key:i,staticClass:"suboptions",attrs:{index:t.value,route:{path:t.router}}},[e._v(e._s(t.value))])]})],2)}))],1)],1)],1)},staticRenderFns:[]};var n={name:"App",components:{pageHeader:a("VU/8")(l,s,!1,function(e){a("4FnK")},"data-v-7632c665",null).exports,navLeft:a("VU/8")(o,r,!1,function(e){a("faIj")},"data-v-ed9a380c",null).exports}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-header",{staticClass:"page-header"},[e.$route.meta.keepAlive?a("page-header"):e._e()],1),e._v(" "),a("el-container",{staticClass:"container"},[e.$route.meta.keepAlive?a("el-aside",{staticClass:"navigation"},[a("nav-left")],1):e._e(),e._v(" "),a("el-main",{staticClass:"content-body"},[a("div",{staticClass:"content-position"},[e._v(e._s(this.$route.name))]),e._v(" "),a("div",{staticClass:"el-mainl content-body1"},[a("router-view")],1)])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(e){a("612h")},null,null).exports,u=a("/ocq"),p={data:function(){return{tableHead:{height:"60px",color:"#555555"},tableHeight:{padding:"0",height:"34px"},pagesize:10,qqq:[],total:600,currentPage:1,input:"",dialogFormVisible:!1,form:{},formLabelWidth:"120px",searchListOne:[{value:"1",label:"辽宁大运通"},{value:"2",label:"吉林大运通"},{value:"3",label:"黑龙江大运通"},{value:"4",label:"大连大运通"},{value:"5",label:"甜程旅行网"}],value:"",searchListTwo:[{value:"1",label:"ID"},{value:"2",label:"账号"},{value:"3",label:"名字"},{value:"4",label:"手机号"}],type:"",searchListThird:[{value:"1",label:"启用"},{value:"2",label:"停用"}],user:"",tableData3:[]}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},handleSizeChange:function(e){var t=this;this.pagesize=e,this.currentPage=1,this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{object:{isDeleted:0,value:this.value,type:this.type,user:this.user,input:this.input},pageSize:e,pageIndex:1,isGetAll:!0,id:0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.tableData3=e.data.objects,t.tableData3.forEach(function(e,t,a){0==a[t].userState?a[t].userState="未选择":1==a[t].userState?a[t].userState="等待审核":2==a[t].userState?a[t].userState="正常":a[t].userState="停用",1==a[t].sex?a[t].sex="男":a[t].sex="女",1==a[t].userType?a[t].userType="普通用户":a[t].userType="管理员",a[t].organization="吉林大运通-财务部-会计",a[t].updatetime="2018/05/13 10:43"})}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{object:{isDeleted:0,value:this.value,type:this.type,user:this.user,input:this.input},pageSize:this.pagesize,pageIndex:e,isGetAll:!0,id:0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.tableData3=e.data.objects,t.tableData3.forEach(function(e,t,a){0==a[t].userState?a[t].userState="未选择":1==a[t].userState?a[t].userState="等待审核":2==a[t].userState?a[t].userState="正常":a[t].userState="停用",1==a[t].sex?a[t].sex="男":a[t].sex="女",1==a[t].userType?a[t].userType="普通用户":a[t].userType="管理员",a[t].organization="吉林大运通-财务部-会计",a[t].updatetime="2018/05/13 10:43"})}).catch(function(e){console.log(e)})},searchSubmit:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{object:{isDeleted:0,value:this.value,type:this.type,user:this.user,input:this.input},pageSize:this.pagesize,pageIndex:1,isGetAll:!0,id:0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.tableData3=t.data.objects,e.tableData3.forEach(function(e,t,a){0==a[t].userState?a[t].userState="未选择":1==a[t].userState?a[t].userState="等待审核":2==a[t].userState?a[t].userState="正常":a[t].userState="停用",1==a[t].sex?a[t].sex="男":a[t].sex="女",1==a[t].userType?a[t].userType="普通用户":a[t].userType="管理员",a[t].organization="吉林大运通-财务部-会计",a[t].updatetime="2018/05/13 10:43"})}).catch(function(e){console.log(e)})},find:function(e,t){this.dialogFormVisible=!0,this.form=t,console.log(t),console.log(t)},edit:function(e,t){this.$router.push({path:"/userlist/adduser",query:{id:t.id}}),console.log()}},created:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{object:{isDeleted:0},pageSize:this.pagesize,pageIndex:1,isGetAll:!0,id:0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){console.log(t.data.objects),e.total=t.data.total,e.tableData3=t.data.objects,e.tableData3.forEach(function(e,t,a){0==a[t].userState?a[t].userState="未选择":1==a[t].userState?a[t].userState="等待审核":2==a[t].userState?a[t].userState="正常":a[t].userState="停用",1==a[t].sex?a[t].sex="男":a[t].sex="女",1==a[t].userType?a[t].userType="普通用户":a[t].userType="管理员"})}).catch(function(e){console.log(e)})}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"border_size"},[a("div",[a("div",{staticClass:"search"},[a("div",{staticClass:"search-first"},[a("el-select",{attrs:{placeholder:"全部组织"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.searchListOne,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"search-second"},[a("el-select",{attrs:{placeholder:"名字"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.searchListTwo,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"search-third"},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}},e._l(e.searchListThird,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"search-input"},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),e._v(" "),a("div",{staticClass:"button-search"},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:e.searchSubmit}})],1)]),e._v(" "),a("div",{staticClass:"add-user"},[a("router-link",{attrs:{to:"/userlist/adduser"}},[a("el-button",{attrs:{type:"primary"}},[e._v("添加用户")])],1)],1)]),e._v(" "),a("div",{staticClass:"user-table",staticStyle:{width:"1031px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData3,border:"","header-row-style":e.tableHead,"cell-style":e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"50%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"100%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center",width:"120%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center",width:"180%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center",width:"50%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userState",label:"状态",align:"center",width:"80%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"部门",align:"center",width:"150%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTimeFormat",label:"创建时间",align:"center",width:"150%"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.find(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.edit(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[5,10,300,400],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"用户信息","custom-class":"city_list",visible:e.dialogFormVisible,width:"490px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"bord"},[a("el-form",{ref:"form",staticStyle:{width:"500px","margin-left":"-270px"},attrs:{model:e.form,"label-width":"110px"}},[a("el-form-item",{staticClass:"form-la",attrs:{label:"状态:"}},[a("el-input",{staticClass:"form-gz",attrs:{disabled:""},model:{value:e.form.userState,callback:function(t){e.$set(e.form,"userState",t)},expression:"form.userState"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-la",attrs:{label:"手机号:"}},[a("el-input",{staticClass:"form-gz",attrs:{disabled:""},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-la",attrs:{label:"姓名:"}},[a("el-input",{staticClass:"form-gz",attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-la",attrs:{label:"邮箱:"}},[a("el-input",{staticClass:"form-gz",attrs:{disabled:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-la",attrs:{label:"员工编号:"}},[a("el-input",{staticClass:"form-gz",attrs:{disabled:""},model:{value:e.form.userCode,callback:function(t){e.$set(e.form,"userCode",t)},expression:"form.userCode"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-la",attrs:{label:"身份证号:"}},[a("el-input",{staticClass:"form-gz",attrs:{disabled:""},model:{value:e.form.iDcard,callback:function(t){e.$set(e.form,"iDcard",t)},expression:"form.iDcard"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-la",attrs:{label:"导游证号:"}},[a("el-input",{staticClass:"form-gz",attrs:{disabled:""},model:{value:e.form.tourGuide,callback:function(t){e.$set(e.form,"tourGuide",t)},expression:"form.tourGuide"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-sex",attrs:{label:"性别:"}},[[a("div",{staticClass:"form-size"},[a("el-radio",{staticClass:"form-radios",attrs:{disabled:"",label:"男"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{disabled:"",label:"女"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")])],1)]],2),e._v(" "),a("el-form-item",{staticClass:"form-sex",attrs:{label:"用户类型:"}},[[a("div",{staticClass:"form-size1"},[a("el-radio",{staticClass:"form-radios",attrs:{disabled:"",label:"普通用户"},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},[e._v("普通用户")]),e._v(" "),a("el-radio",{attrs:{disabled:"",label:"管理员"},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},[e._v("管理员")])],1)]],2),e._v(" "),a("el-form-item",{staticClass:"from-organize",attrs:{label:"组织-部门:"}},[a("div",{staticClass:"form-size2"},[a("el-input",{staticClass:"form-gz",attrs:{disabled:""},model:{value:e.form.organization,callback:function(t){e.$set(e.form,"organization",t)},expression:"form.organization"}}),e._v(" "),a("span",{staticClass:"form-text"},[e._v("默认职位")])],1)]),e._v(" "),a("el-form-item",{staticClass:"from-time",attrs:{label:"创建时间："}},[a("div",{staticClass:"form-size3"},[a("span",{staticClass:"form-createtime"},[e._v(e._s(e.form.createTimeFormat))])])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],1)])],1)},staticRenderFns:[]};var h=a("VU/8")(p,m,!1,function(e){a("L4Rw")},"data-v-09395259",null).exports;function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g={data:function(){var e;return f(e={org:"",data:[],data1:[],data2:[],node:"",removes:"",option:"",switchs:!0,tableData:[],editDepartment:!1,updata:{radio:"1",lastStage:"2",value:""},updata1:{},updataLabelWidth:"90px",options:[],value:"",options1:[],value1:"",options2:[],value2:"",options3:[],value3:"",arr:[],arr1:[],arr2:[],bumen2:!1,bumen1:!1,addSubdivision:!1,addInput:{name:"",topDepartment:"",radio:"",lastStage:"2",departmentCode:"",sort:"",phone:"",fax:"",note:"",ParentID:""},rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],radio:[{required:!0,message:"请选择虚拟部门",trigger:"blur"}],lastStage:[{required:!0,trigger:"blur"}],departmentCode:[{required:!0,message:"请输入部门编码",trigger:"blur"},{pattern:/^[0-9]{0,30}$/,message:"请输入数字"}],sort:[{required:!0,message:"请输入排序方式",trigger:"blur"}],phone:[{required:!0,message:"请输入联系方式",trigger:"blur"}],fax:[{required:!0,message:"请输入传真号",trigger:"blur"}],orgName:[{required:!0,message:"请输入部门名称",trigger:"blur"}]},Width:"90px",addPersonnel:!1,person:{search:""},LabelWidth:"87%",members:[],oppo:[],tableList:[],members1:[],pageSize:10,currentPage:1,total:1,position:!1,setPosition:{},setLabelWidth:"90px"},"option",[]),f(e,"values",""),f(e,"kk",[]),f(e,"show",!0),f(e,"isexpand",!1),f(e,"treeKey",[]),f(e,"Parents",[]),f(e,"key",-1),f(e,"flag",!0),f(e,"props",{value:"value",children:"cities"}),f(e,"props1",{label:"label",isLeaf:"leaf"}),f(e,"keyID",[]),f(e,"deleteNum",[]),f(e,"dbSave",""),e},created:function(){this.optionList()},methods:{editPosition:function(e,t){this.position=!0,this.setPosition=t},addSubdivision1:function(e){this.addSubdivision=!1,this.$refs[e].resetFields()},appendSave:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/org/api/deptinsert",{object:{Id:0,OrgName:t.addInput.name,IsDeleted:0,Code:"string",ParentID:t.addInput.ParentID,Physical:0,OrgCode:t.addInput.departmentCode,Rank:t.addInput.sort,OfficeTel:t.addInput.phone,OfficeFax:t.addInput.fax,Mark:t.addInput.note,IsLeaf:t.addInput.lastStage}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){if(0==e.data.isSuccess)a.$message.error("添加失败,部门名称或部门编码已存在");else{a.addSubdivision=!1;var t=Object();t.id=a.addInput.ParentID,t.isLeaf=a.addInput.lastStage,t.key=0,t.label=a.addInput.topDepartment,a.treeClick(t),a.addInput.departmentNames="",a.$refs.addInput.resetFields(),a.$message.success("添加成功"),a.getUser(a.node.key,a.node.label,a.node.id,a.node.isLeaf,a.removes)}}).catch(function(e){console.log(e)})}})},chooseDate:function(e){this.dataNum=e,console.log(this.dataNum)},userInsert:function(){for(var e=0;e<this.dataNum.length;e++)for(var t=0;t<this.tableList.length;t++)-1!==this.tableList[t].id.indexOf(this.dataNum[e].id)&&this.dataNum.splice(this.dataNum[e],e+1);if(this.dataNum.length<1)this.$message.error("没有数据被添加");else{for(var a=0;a<this.dataNum.length;a++)this.tableList.push({id:this.dataNum[a].id,name:this.dataNum[a].name,position:"",phone:this.dataNum[a].phone,sex:this.dataNum[a].sex});this.$message.success("添加成功"),this.addPersonnel=!1,this.person.search="",this.currentPage=1,this.dataNum=[]}},remove:function(e,t){var a=this;this.$confirm("是否删除该部门?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.remove1(a.tableData[e].id,e),a.$refs.oppo.remove(t)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},remove1:function(e,t){var a=this,i=this;this.deleteNum.push(e),this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptdelete",{id:e},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){i.tableData.splice(t,1),i.$message({type:"success",message:"删除成功!"})}).catch(function(e){console.log(e)}),this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptlist",{object:{parentID:e}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){if(""!==e.data.objects)for(var t=0;t<e.data.objects.length;t++)a.remove1(e.data.objects[t].id)}).catch(function(e){})},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},del:function(e,t){var a=this;this.$confirm("是否删除此人员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addPersonnel1:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{object:{name:this.person.search,isDeleted:0},pageSize:this.pageSize,pageIndex:this.currentPage,isGetAll:!0,id:0}).then(function(t){e.members=[],e.total=t.data.total;for(var a=0;a<t.data.objects.length;a++)1==t.data.objects[a].sex?t.data.objects[a].sex="男":t.data.objects[a].sex="女",0==t.data.objects[a].userState?t.data.objects[a].userState="未选择":1==t.data.objects[a].userState?t.data.objects[a].userState="等待审核":2==t.data.objects[a].userState?t.data.objects[a].userState="正常":t.data.objects[a].userState="停用",e.members.push({id:t.data.objects[a].id,name:t.data.objects[a].name,phone:t.data.objects[a].mobile,email:t.data.objects[a].email,sex:t.data.objects[a].sex,state:t.data.objects[a].userState,key:a}),e.addPersonnel=!0}).catch(function(e){console.log(e)})},addPersonnel2:function(){this.addPersonnel=!1,this.person.search="",this.currentPage=1,this.dataNum=[]},treeClick:function(e,t,a){this.data=[],this.org=e.id,this.tableData=[],this.tableList=[],this.addInput.ParentID=e.id,this.addInput.topDepartment=e.label,this.dbSave=e;var i=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptlist",{object:{ParentID:e.id}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){for(var t=0;t<e.data.objects.length;t++)1!==e.data.objects[t].isDeleted&&i.tableData.push({label:e.data.objects[t].orgName,id:e.data.objects[t].id,key:t,value:e.data.objects[t].id})}).catch(function(e){console.log(e)}),this.$http.post(this.GLOBAL.serverSrc+"/org/api/userlistwithorg",{id:e.id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){for(var t=0;t<e.data.objects.length;t++)1==e.data.objects[t].sex?e.data.objects[t].sex="男":e.data.objects[t].sex="女",i.tableList.push({id:e.data.objects[t].id,name:e.data.objects[t].name,phone:e.data.objects[t].mobile,sex:e.data.objects[t].sex})}).catch(function(e){console.log(e)})},loadNode:function(e,t){this.node=e.data,this.removes=t,this.data=[];for(var a=[{code:null,createTime:"2018-08-29T15:43:50",createUser:null,id:204,isDeleted:0,isDeletedCN:"未删除",isLeaf:2,isLeafCN:"不是末级",loadLeader:!1,mark:"0",officeFax:"0",officeTel:"0",orgCode:1e7,orgName:"嘉麒集团",organizationLeader:[],parentID:-1,physical:1,rank:0}],i=0;i<a.length;i++)0===e.level&&(this.options.push({label:a[i].orgName,value:a[i].id+"-"+a[i].orgName}),t([{label:a[i].orgName,key:i,id:a[i].id,isLeaf:a[i].isLeaf}]));var l=Array();l.push({id:a[0].id,isLeaf:a[0].isLeaf,key:0,label:a[0].orgName}),this.flag&&(this.treeClick(l[0]),this.flag=!1),this.treeKey.push(204),e.level>=1&&this.getUser(e.data.key,e.data.label,e.data.id,e.data.isLeaf,t)},getUser:function(e,t,a,i,l){this.data1=[];var s=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptlist",{object:{ParentID:a}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){for(var t=0;t<e.data.objects.length;t++)1!==e.data.objects[t].isDeleted&&(1==e.data.objects[t].isLeaf?s.data1.push({label:e.data.objects[t].orgName,id:e.data.objects[t].id,key:t,cities:[],isLeaf:e.data.objects[t].isLeaf,leaf:!0}):2==e.data.objects[t].isLeaf&&s.data1.push({label:e.data.objects[t].orgName,id:e.data.objects[t].id,key:t,cities:[],isLeaf:e.data.objects[t].isLeaf,leaf:!1}));setTimeout(function(){var e=s.data1;l(e)},200)}).catch(function(e){console.log(e)})},addSubdivisionOpen:function(){1==this.Parents.isLeaf?this.$message.warning("此部门是末级部门，不能添加"):this.addSubdivision=!0},treeDblclick:function(e){this.treeKey=[],2!=this.dbSave.isLeaf&&0!=this.dbSave.isLeaf||this.treeKey.push(this.dbSave.id),this.dbSave=""},editDepartment1:function(e){var t=this;this.updata={radio:"1",lastStage:"2"},this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptget",{id:e},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(a){t.updata.id=e,t.updata.orgName=a.data.object.orgName,t.updata.departmentCode=a.data.object.orgCode,t.updata.sort=a.data.object.rank,t.updata.phone=a.data.object.officeTel,t.updata.fax=a.data.object.officeFax,t.updata.note=a.data.object.mark,t.updata.lastStage=String(a.data.object.isLeaf),t.updata.parentID=a.data.object.parentID,t.$http.post(t.GLOBAL.serverSrc+"/org/api/deptget",{id:a.data.object.parentID},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){-1==t.updata.parentID?t.updata.value="无":t.updata.value=e.data.object.orgName,t.editDepartment=!0}).catch(function(e){}),console.log(err)}).catch(function(e){})},handleCurrentChange:function(e){this.currentPage=e,this.addPersonnel1()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.addPersonnel1()},renderContent:function(e,t){var a=t.node,i=t.data;t.store;return 1==i.isLeaf?e("span",[e("img",{style:"position:relative;bottom: -3px",attrs:{width:"20px",src:"../static/organList-image/257785656210656304.png"}}),e("span",[a.label])]):2==i.isLeaf||0==i.isLeaf?e("span",[e("img",{style:"position:relative;bottom: -3px",attrs:{width:"20px",src:"../static/organList-image/ewqdewq.png"}}),e("span",[a.label])]):void 0},updataEditSave:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptsave",{object:{id:this.updata.id,orgName:this.updata.orgName,parentID:this.updata.parentID,orgCode:this.updata.departmentCode,rank:this.updata.sort,officeTel:this.updata.phone,officeFax:this.updata.fax,mark:this.updata.note,isLeaf:this.updata.lastStage,physical:this.updata.radio}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(a){t.$message.success("修改成功！"),t.getUser(t.node.key,t.node.label,t.node.id,t.node.isLeaf,t.removes),t.addInput.topDepartment=e.orgName,t.editDepartment=!1}).catch(function(e){console.log(e)})},optionList:function(){this.option=[];var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/positionlist",{object:{isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.option.push(t.data.objects[a].name)}).catch(function(e){console.log(e)})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"left"},[a("div",{staticClass:"hh"},[a("el-tree",{ref:"oppo",staticClass:"tree",attrs:{props:e.props1,"node-key":"id",load:e.loadNode,"render-content":e.renderContent,lazy:"","expand-on-click-node":e.isexpand,"default-expanded-keys":e.treeKey,"highlight-current":""},on:{"node-click":e.treeClick},nativeOn:{dblclick:function(t){return e.treeDblclick(t)}}})],1)]),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"right-top"},[a("span",{staticClass:"rightTitle"},[e._v(e._s(e.addInput.topDepartment))])]),e._v(" "),a("div",{staticClass:"right-btn"},[a("el-button",{staticClass:"editDepartment",attrs:{plain:""},on:{click:function(t){e.editDepartment1(e.addInput.ParentID)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"addSubdivision",attrs:{type:"primary"},on:{click:e.addSubdivisionOpen}},[e._v("+  子部门")])],1),e._v(" "),a("div",{staticClass:"small1"}),e._v(" "),a("span",{staticClass:"lowerTitle"},[e._v("下级部门")]),e._v(" "),a("el-table",{staticClass:"divisionTable",attrs:{data:e.tableData,border:"","max-height":"220","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"label",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"500%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.treeClick(t.row)}}},[e._v("进入")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.remove(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"small2"}),e._v(" "),a("span",{staticClass:"personnelTitle"},[e._v("部门人员")]),e._v(" "),a("div",{staticClass:"btn-boom"},[a("el-button",{staticClass:"addPersonnel",attrs:{plain:""},on:{click:e.addPersonnel1}},[e._v("添加成员")])],1),e._v(" "),a("el-table",{staticClass:"tableList",attrs:{data:e.tableList,border:"","max-height":"220","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"100%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"职位",align:"center",width:"130%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center",width:"80%"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"320%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"enter",attrs:{plain:"",size:"small"}},[e._v("权限")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.editPosition(t.$index,t.row)}}},[e._v("职位")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.del(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{staticClass:"updataPopup",attrs:{title:"编辑部门",visible:e.editDepartment,"custom-class":"city_list",width:"550px"},on:{"update:visible":function(t){e.editDepartment=t}}},[a("div",{staticClass:"boom"},[a("el-form",{staticStyle:{"padding-left":"90px"},attrs:{model:e.updata,rules:e.rules}},[a("el-form-item",{attrs:{label:"部门名称","label-width":e.updataLabelWidth,prop:"orgName"}},[a("el-input",{staticClass:"updataLabelWidth-input",attrs:{"auto-complete":"off"},model:{value:e.updata.orgName,callback:function(t){e.$set(e.updata,"orgName",t)},expression:"updata.orgName"}})],1),e._v(" "),a("el-form-item",{staticClass:"updataLabelWidth-input",attrs:{label:"父级部门","label-width":e.Width,prop:"value"}},[a("el-input",{staticClass:"add-input",attrs:{"auto-complete":"off",disabled:!0},model:{value:e.updata.value,callback:function(t){e.$set(e.updata,"value",t)},expression:"updata.value"}})],1),e._v(" "),a("el-form-item",{staticClass:"eidt-virtual",attrs:{label:"虚拟部门",prop:"radio"}},[a("el-radio-group",{staticClass:"virtualDepartment",model:{value:e.updata.radio,callback:function(t){e.$set(e.updata,"radio",t)},expression:"updata.radio"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"updata-virtual",attrs:{label:"末级部门",prop:"lastStage"}},[a("el-radio-group",{staticClass:"virtualDepartment",model:{value:e.updata.lastStage,callback:function(t){e.$set(e.updata,"lastStage",t)},expression:"updata.lastStage"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"部门编码","label-width":e.Width,prop:"departmentCode"}},[a("el-input",{staticClass:"updataLabelWidth-input",attrs:{"auto-complete":"off"},model:{value:e.updata.departmentCode,callback:function(t){e.$set(e.updata,"departmentCode",t)},expression:"updata.departmentCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":e.Width,prop:"sort"}},[a("el-input",{staticClass:"add-department",attrs:{"auto-complete":"off"},model:{value:e.updata.sort,callback:function(t){e.$set(e.updata,"sort",t)},expression:"updata.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话","label-width":e.Width,prop:"phone"}},[a("el-input",{staticClass:"add-department",attrs:{"auto-complete":"off"},model:{value:e.updata.phone,callback:function(t){e.$set(e.updata,"phone",t)},expression:"updata.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传真","label-width":e.Width,prop:"fax"}},[a("el-input",{staticClass:"add-department",attrs:{"auto-complete":"off"},model:{value:e.updata.fax,callback:function(t){e.$set(e.updata,"fax",t)},expression:"updata.fax"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.Width,prop:"note"}},[a("el-input",{staticClass:"add-department",staticStyle:{resize:"none"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:4}},model:{value:e.updata.note,callback:function(t){e.$set(e.updata,"note",t)},expression:"updata.note"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"operation",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn_foot",on:{click:function(t){e.editDepartment=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"btn_foot",attrs:{type:"primary"},on:{click:function(t){e.updataEditSave(e.updata)}}},[e._v("保存")]),e._v(" "),a("el-button",{staticClass:"btn_foot",attrs:{type:"danger"},on:{click:function(t){e.deleted=!1}}},[e._v("删除")])],1)]),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{visible:e.addSubdivision,title:"添加子部门","custom-class":"city_list",width:"570px"},on:{"update:visible":function(t){e.addSubdivision=t}}},[a("el-form",{ref:"addInput",staticStyle:{"padding-left":"95px"},attrs:{model:e.addInput,rules:e.rules,"status-icon":""}},[a("el-form-item",{staticClass:"add_title",attrs:{label:"部门名称","label-width":e.Width,prop:"name"}},[a("el-input",{staticClass:"add-input",attrs:{"auto-complete":"off",maxlength:"15"},model:{value:e.addInput.name,callback:function(t){e.$set(e.addInput,"name",t)},expression:"addInput.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"add_title",attrs:{label:"上级部门","label-width":e.Width,prop:"topDepartment"}},[a("el-input",{staticClass:"add-input",attrs:{"auto-complete":"off",disabled:!0},model:{value:e.addInput.topDepartment,callback:function(t){e.$set(e.addInput,"topDepartment",t)},expression:"addInput.topDepartment"}})],1),e._v(" "),a("el-form-item",{staticClass:"add_radio",attrs:{label:"虚拟部门",prop:"radio"}},[a("el-radio-group",{staticClass:"virtualDepartment",model:{value:e.addInput.radio,callback:function(t){e.$set(e.addInput,"radio",t)},expression:"addInput.radio"}},[a("el-radio",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-radio",{attrs:{label:"否",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"add_radio",attrs:{label:"末级部门",prop:"lastStage"}},[a("el-radio-group",{staticClass:"virtualDepartment",model:{value:e.addInput.lastStage,callback:function(t){e.$set(e.addInput,"lastStage",t)},expression:"addInput.lastStage"}},[a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2",value:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"add_title",attrs:{label:"部门编码","label-width":e.Width,prop:"departmentCode"}},[a("el-input",{staticClass:"updataLabelWidth-input",attrs:{"auto-complete":"off"},model:{value:e.addInput.departmentCode,callback:function(t){e.$set(e.addInput,"departmentCode",t)},expression:"addInput.departmentCode"}})],1),e._v(" "),a("el-form-item",{staticClass:"add_title",attrs:{label:"排序","label-width":e.Width,prop:"sort"}},[a("el-input",{staticClass:"add-department",attrs:{"auto-complete":"off"},model:{value:e.addInput.sort,callback:function(t){e.$set(e.addInput,"sort",t)},expression:"addInput.sort"}})],1),e._v(" "),a("el-form-item",{staticClass:"add_title",attrs:{label:"电话","label-width":e.Width,prop:"phone"}},[a("el-input",{staticClass:"add-department",attrs:{"auto-complete":"off"},model:{value:e.addInput.phone,callback:function(t){e.$set(e.addInput,"phone",t)},expression:"addInput.phone"}})],1),e._v(" "),a("el-form-item",{staticClass:"add_title",attrs:{label:"传真","label-width":e.Width,prop:"fax"}},[a("el-input",{staticClass:"add-department",attrs:{"auto-complete":"off"},model:{value:e.addInput.fax,callback:function(t){e.$set(e.addInput,"fax",t)},expression:"addInput.fax"}})],1),e._v(" "),a("el-form-item",{staticClass:"add_title",attrs:{label:"备注","label-width":e.Width,prop:"note"}},[a("el-input",{staticClass:"add-department",attrs:{type:"textarea",autosize:{minRows:4,maxRows:4}},model:{value:e.addInput.note,callback:function(t){e.$set(e.addInput,"note",t)},expression:"addInput.note"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.addSubdivision1("addInput")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.appendSave("addInput")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"popup",attrs:{title:"添加成员",visible:e.addPersonnel,"custom-class":"city_list",width:"1000px"},on:{"update:visible":function(t){e.addPersonnel=t},close:e.addPersonnel2}},[a("el-form",{staticClass:"booms",attrs:{model:e.updata1}},[a("el-form-item",[a("el-input",{staticClass:"searchInput",attrs:{"auto-complete":"off",placeholder:"输入名称检索"},model:{value:e.person.search,callback:function(t){e.$set(e.person,"search",t)},expression:"person.search"}}),e._v(" "),a("el-button",{staticClass:"searchButton",attrs:{type:"primary"},on:{click:e.addPersonnel1}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{ref:"table",staticClass:"members",attrs:{data:e.members,border:"","header-cell-style":e.getRowClass},on:{"selection-change":e.chooseDate}},[a("el-table-column",{attrs:{type:"selection",width:"35%",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"60%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"120%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center",width:"180%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center",width:"220%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center",width:"90%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center",width:"120%"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"btn",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:e.addPersonnel2}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:e.userInsert}},[e._v("添加")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"设置职位",visible:e.position,"custom-class":"city_list",width:"550px"},on:{"update:visible":function(t){e.position=t}}},[a("el-form",{staticStyle:{"padding-left":"60px"},attrs:{model:e.setPosition}},[a("el-form-item",{staticClass:"setinput",attrs:{label:"姓名","label-width":e.setLabelWidth}},[a("el-input",{staticClass:"positionInput",attrs:{"auto-complete":"off",disabled:!0},model:{value:e.setPosition.name,callback:function(t){e.$set(e.setPosition,"name",t)},expression:"setPosition.name"}})],1),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("职位")]),e._v(" "),a("el-select",{staticClass:"setSelect",attrs:{placeholder:"请选择"},model:{value:e.values,callback:function(t){e.values=t},expression:"values"}},e._l(e.option,function(e,t){return a("el-option",{key:e.value,attrs:{label:e,value:t}})}))],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.position=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.setSave=!1}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(g,v,!1,function(e){a("AMu6")},"data-v-ae7cb19a",null).exports,y={data:function(){return{tableHead:{height:"60px",color:"#555555"},tableHeight:{padding:"0",height:"34px"},typeArr:[{value:"temp_id",label:"模板ID"},{value:"temp_name",label:"模板名称"}],statusArr:[{value:"2",label:"停用"},{value:"1",label:"正常"}],keyword:"",hrs:{height:"60px"},cs:{padding:"0",height:"40px"},roleData:[],pageSize:10,pageIndex:1,total:0}},created:function(){this.getRoleList()},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},getRoleList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/rolepage",{Object:{IsDeleted:0,title:a},PageIndex:e,PageSize:t}).then(function(e){var t=e.data.objects;t.forEach(function(e,t,a){a[t].author="管理员"}),i.roleData=t,i.total=e.data.total}).catch(function(e){console.log(e)})},editRole:function(e){this.$router.push({path:"/addRole",query:{id:e}})},deleteRole:function(e){var t=this;this.$confirm("删除"+e+"角色?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(t.GLOBAL.serverSrc+"/org/api/roledelete",{id:e}).then(function(e){1==e.data.isSuccess&&(t.$message({type:"success",message:"删除成功"}),t.getRoleList())})}).catch(function(){t.$message({type:"info",message:"已取消"})})},handleSizeChange:function(e){this.pageSize=e,this.pageIndex=1,this.getRoleList(1,e,this.keyword)},handleCurrentChange:function(e){this.getRoleList(e,this.pageSize,this.keyword)},subForm:function(){this.getRoleList(1,this.pageSize,this.keyword),this.pageIndex=1}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_dom"},[a("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("el-button",{staticClass:"sub_button",attrs:{type:"primary",size:"",icon:"el-icon-search"},on:{click:function(t){e.subForm()}}})],1),e._v(" "),a("div",{staticClass:"cl_both"}),e._v(" "),a("div",{staticStyle:{padding:"0 20px"}},[a("div",{staticStyle:{"text-align":"left"}},[a("router-link",{attrs:{to:"/addRole"}},[a("el-button",{staticClass:"add_role",attrs:{type:"primary"}},[e._v("添加模板")])],1)],1),e._v(" "),a("el-table",{staticClass:"table",attrs:{headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass,data:e.roleData,"header-row-style":e.hrs,"cell-style":e.cs,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"模板名称",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"创建人","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",label:"模板描述","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"人数","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate",label:"操作",width:"400","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"bt-edit",staticStyle:{margin:"10px"},attrs:{type:"primary",size:"small"},on:{click:function(a){e.editRole(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"bt-stop",attrs:{type:"danger",size:"small"},on:{click:function(a){e.deleteRole(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var C=a("VU/8")(y,_,!1,function(e){a("+0hU")},"data-v-421bef0e",null).exports,x={name:"perList",data:function(){var e=this;return{dialogAddRole:!1,form:{name:"",f_role:0,type:"查看",id:0,desc:"",sort:0,url:""},formLabelWidth:"120px",rules:{name:[{required:!0,validator:function(t,a,i){return a?a.length<2||a.length>10?i(new Error("字数超限")):void e.$http.get("/static/data.json").then(function(e){console.log(e),e.data.name==a&&i("名称重复")}).catch(function(e){console.log(e)}):i(new Error("不可为空"))},trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}]}}},methods:{test:function(){this.$http.post("http://api.dayuntong.com:3009/api/insertrole",this.qs.stringify({Id:103,Object:{ID:15,CreateTime:"2017-06-01 20:23:00",IsDeleted:0,Code:"",Title:"财务用户",Mark:"很多备注",Count:172,State:2}})).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},deleteRole:function(){var e=this;this.$confirm("是否删除该权限?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){})},shoubuttons:function(){console.log()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!"),t.dialogAddRole=!1})},resetForm:function(e){this.$refs[e].resetFields()}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"per-list"},[a("table",{staticStyle:{width:"100%"}},[e._m(0),e._v(" "),a("tbody",[a("tr",[a("td",{staticClass:"title_p",attrs:{rowspan:"9"}},[e._v("\n        账号管理\n        "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){e.dialogAddRole=!0}}})])]),e._v(" "),a("td",{staticClass:"title_p",attrs:{rowspan:"3"}},[e._v("\n        用户管理\n        "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){e.dialogAddRole=!0}}})])]),e._v(" "),a("td",[e._v("只读")]),e._v(" "),a("td",{staticClass:"table-checkout"},[a("span",{staticClass:"title_s"},[e._v("01.用户列表\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])])])]),e._v(" "),a("tr",[a("td",[e._v("编辑")]),e._v(" "),a("td",{staticClass:"table-checkout"},[a("span",{staticClass:"title_s"},[e._v("01.编辑用户\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})]),e._v(" "),a("span",{staticClass:"title_s"},[e._v("02.添加用户\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])])])])]),e._v(" "),a("tr",[a("td",[e._v("操作")]),e._v(" "),a("td",{staticClass:"table-checkout"},[a("span",{staticClass:"title_s"},[e._v("01.启用\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])]),e._v(" "),a("span",{staticClass:"title_s"},[e._v("02.停用\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])])])]),e._v(" "),a("tr",[a("td",{staticClass:"title_p",attrs:{rowspan:"3"}},[e._v("组织管理\n        "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){e.dialogAddRole=!0}}})])]),e._v(" "),a("td",[e._v("只读")]),e._v(" "),a("td")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),a("tr",[a("td",{staticClass:"title_p",attrs:{rowspan:"3"}},[e._v("权限管理\n        "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){e.dialogAddRole=!0}}})])]),e._v(" "),a("td",[e._v("只读")]),e._v(" "),a("td",{staticClass:"table-checkout"},[a("span",{staticClass:"title_s"},[e._v("01.角色模板列表\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])])])]),e._v(" "),a("tr",[a("td",[e._v("编辑")]),e._v(" "),a("td",{staticClass:"table-checkout"},[a("span",{staticClass:"title_s"},[e._v("01.添加角色模板\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])]),e._v(" "),a("span",{staticClass:"title_s"},[e._v("02.编辑角色模板\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])]),e._v(" "),a("span",{staticClass:"title_s"},[e._v("03.停用角色模板\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])])])]),e._v(" "),e._m(3),e._v(" "),a("tr",[a("td",{staticClass:"title_p",attrs:{rowspan:"3"}},[e._v("个人中心\n        "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){e.dialogAddRole=!0}}})])]),e._v(" "),a("td",{staticClass:"title_p",attrs:{rowspan:"3"}},[e._v("账号设置\n        "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){e.dialogAddRole=!0}}})])]),e._v(" "),a("td",[e._v("只读")]),e._v(" "),a("td",{staticClass:"table-checkout"},[a("span",{staticClass:"title_s"},[e._v("01.账号信息\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])])])]),e._v(" "),a("tr",[a("td",[e._v("编辑")]),e._v(" "),a("td",{staticClass:"table-checkout"},[a("span",{staticClass:"title_s"},[e._v("01.修改账号信息\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])]),e._v(" "),a("span",{staticClass:"title_s"},[e._v("02.修改密码\n            "),a("span",{staticClass:"butts"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.dialogAddRole=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.deleteRole}})])])])]),e._v(" "),e._m(4)])]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{visible:e.dialogAddRole,width:"30%",center:!0,lockScroll:!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogAddRole=t}}},[a("el-form",{ref:"myform",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称：","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"说明：","label-width":e.formLabelWidth,prop:"desc"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级权限：","label-width":e.formLabelWidth,prop:""}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.f_role,callback:function(t){e.$set(e.form,"f_role",t)},expression:"form.f_role"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联ID：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作URL：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型：","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:"查看"}}),e._v(" "),a("el-radio",{attrs:{label:"编辑"}}),e._v(" "),a("el-radio",{attrs:{label:"操作"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("myform")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogAddRole=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{staticStyle:{background:"rgb(247, 247, 247)"},attrs:{width:"248"}},[this._v("模块")]),this._v(" "),t("th",{staticStyle:{background:"rgb(247, 247, 247)"},attrs:{width:"278"}},[this._v("菜单")]),this._v(" "),t("th",{staticStyle:{background:"rgb(247, 247, 247)"},attrs:{width:"340"}},[this._v("权限类型")]),this._v(" "),t("th",{staticStyle:{background:"rgb(247, 247, 247)"},attrs:{width:"720"}},[this._v("具体权限")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",[this._v("编辑")]),this._v(" "),t("td")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",[this._v("操作")]),this._v(" "),t("td")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",[this._v("操作")]),this._v(" "),t("td")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",[this._v("操作")]),this._v(" "),t("td")])}]};a("VU/8")(x,k,!1,function(e){a("83Gx")},"data-v-f8a13dc2",null).exports;var w={created:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userget",{id:sessionStorage.getItem("id")},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.form=t.data.object,e.form.sex=String(e.form.sex),e.form.userState=String(e.form.userState)}).catch(function(e){})},data:function(){var e=this;return{form:{},phone1:{name:"",newphone:"",usedphone:""},emial1:{name:"",newemial:"",usedemial:""},show:!0,count:"",timer:null,show1:!0,count1:"",timer1:null,formLabelWidth:"160px",dialogFormVisible:!1,dialogEmial:!1,formPass:{passWord:"",newpass:"",checkpass:""},isPass:!0,rulesPass:{passWord:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,a,i){0==e.isPass?(i(new Error("密码输入不正确")),e.isPass=!0):i()}}],newpass:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/,message:"密码格式错误(6-20位数字加字母)"}],checkpass:[{validator:function(t,a,i){""===a?i(new Error("请再次输入密码")):a!==e.formPass.newpass?i(new Error("两次输入密码不一致!")):i()}}]},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,6}$/,message:"请输入2-6位汉字"}]},rules1:{name:[{required:!0,message:"请填写验证码",trigger:"blur"}],newphone:[{required:!0,message:"请填写手机号",trigger:"blur"},{pattern:/^[1][3,4,5,7,8][0-9]{9}$/,message:"请填写正确电话号码"}],usedphone:[{required:!0,message:"请填写手机号"},{pattern:/^[1][3,4,5,7,8][0-9]{9}$/,message:"请填写正确电话号码"}]},rules2:{name:[{required:!0,message:"请填写验证码",trigger:"blur"}],newemial:[{required:!0,message:"请填写邮箱地址",trigger:"blur"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"请填写正确邮箱地址"}],usedemial:[{required:!0,message:"请填写邮箱地址"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"请填写正确邮箱地址"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(a){a&&("form"==e?t.$http.post(t.GLOBAL.serverSrc+"/org/api/usersave",{Object:{id:t.form.id,createTime:t.form.createTime,isDeleted:t.form.isDeleted,code:t.form.code,passWord:t.form.passWord,mobile:t.form.mobile,name:t.form.name,email:t.form.email,userCode:t.form.userCode,iDcard:t.form.iDcard,tourGuide:t.form.tourGuide,sex:t.form.sex,userType:t.form.userType}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){localStorage.setItem("name",t.form.name),t.$message.success("修改成功！"),document.getElementById("nameNum").innerHTML=t.form.name}).catch(function(e){console.log(e)}):"phone1"==e?(t.$message.success("修改成功！"),t.dialogFormVisible=!1,t.show=!0,t.$refs.phone1.resetFields()):"emial1"==e&&(t.$message.success("修改成功！"),t.dialogEmial=!1,t.show1=!0,t.$refs.emial1.resetFields()))})},verification:function(e){var t=this;this.$refs.usedphone.validate();if(this.phone1.usedphone.match(/^[1][3,4,5,7,8][0-9]{9}$/)){this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){t.count>0&&t.count<=60?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null)},1e3))}},verification1:function(e){var t=this;this.$refs[e].validate();if(this.emial1.usedemial.match(/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/)){this.timer1||(this.count1=60,this.show1=!1,this.timer1=setInterval(function(){t.count1>0&&t.count1<=60?t.count1--:(t.show1=!0,clearInterval(t.timer1),t.timer1=null)},1e3))}},dialogFormVisible1:function(e){this.dialogFormVisible=!1,this.show=!0,clearInterval(this.timer),this.timer=null},dialogEmial1:function(e){this.dialogEmial=!1,this.show1=!0,clearInterval(this.timer1),this.timer1=null},submitForms:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$http.post(t.GLOBAL.serverSrc+"/org/api/userget",{id:sessionStorage.getItem("id")},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.formPass.passWord===e.data.object.passWord?t.$http.post(t.GLOBAL.serverSrc+"/org/api/usersave",{object:{id:e.data.object.id,createTime:e.data.object.createTime,isDeleted:e.data.object.isDeleted,code:e.data.object.code,passWord:t.formPass.checkpass,mobile:e.data.object.mobile,name:e.data.object.name,email:e.data.object.email,userCode:e.data.object.userCode,iDcard:e.data.object.iDcard,tourGuide:e.data.object.tourGuide,sex:e.data.object.sex,userType:e.data.object.userType}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.$message.success("新密码修改成功！"),t.$refs.formPass.resetFields()}).catch(function(e){console.log(e)}):(t.isPass=!1,t.submitForms("formPass"))}).catch(function(e){console.log(e)})})}}},S={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row_pass"},[i("div",{staticClass:"list_left"},[i("span",{staticClass:"information"},[e._v("账户信息")]),e._v(" "),i("div",{staticClass:"content"},[i("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"ID:",prop:"id"}},[i("el-input",{staticClass:"input",attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[i("el-input",{staticClass:"input",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"性别:",prop:"sex"}},[i("el-radio-group",{staticClass:"sex",model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[i("el-radio",{attrs:{label:"1",value:"1"}},[e._v("男")]),e._v(" "),i("el-radio",{attrs:{label:"2",value:"2"}},[e._v("女")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"状态:"}},[i("el-select",{staticClass:"dropdown",attrs:{placeholder:"请选择状态",disabled:!0},model:{value:e.form.userState,callback:function(t){e.$set(e.form,"userState",t)},expression:"form.userState"}},[i("el-option",{attrs:{label:"未选择",value:"0"}}),e._v(" "),i("el-option",{attrs:{label:"待审核",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"启用",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"停用",value:"3"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号:",prop:"mobile"}},[i("el-input",{staticClass:"input-phone",attrs:{disabled:!0},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}}),e._v(" "),i("img",{staticClass:"modify",attrs:{src:a("BLU/"),alt:"",width:"24"},on:{click:function(t){e.dialogFormVisible=!0}}})],1),e._v(" "),i("el-dialog",{attrs:{title:"手机号修改",visible:e.dialogFormVisible,"custom-class":"city_list",width:"600px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"phone1",attrs:{model:e.phone1,"status-icon":"",rules:e.rules1}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"usedphone",attrs:{label:"旧手机号","label-width":e.formLabelWidth,prop:"usedphone"}},[i("el-input",{staticClass:"input-popup",attrs:{"auto-complete":"off"},model:{value:e.phone1.usedphone,callback:function(t){e.$set(e.phone1,"usedphone",t)},expression:"phone1.usedphone"}})],1),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"prompt"},[e._v("已向"+e._s(" "+e.phone1.usedphone+" ")+"发送验证码")]),e._v(" "),i("el-form-item",{attrs:{label:"验证码","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{staticClass:"input-popup",attrs:{"auto-complete":"off"},model:{value:e.phone1.name,callback:function(t){e.$set(e.phone1,"name",t)},expression:"phone1.name"}})],1),e._v(" "),i("el-form-item",{staticClass:"input-popup-2",attrs:{label:"新手机号","label-width":e.formLabelWidth,prop:"newphone"}},[i("el-input",{staticClass:"input-popup",attrs:{"auto-complete":"off"},model:{value:e.phone1.newphone,callback:function(t){e.$set(e.phone1,"newphone",t)},expression:"phone1.newphone"}})],1)],1),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"phone-verification",attrs:{type:"primary",size:"small"},on:{click:function(t){e.verification("usedphone")}}},[e._v("获取验证码")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"phone-verification-1",attrs:{type:"primary",size:"small",plain:"",disabled:""}},[e._v(e._s(e.count+"s"))]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"phone-Determine",on:{click:function(t){e.dialogFormVisible1("phone1")}}},[e._v("取 消")]),e._v(" "),i("el-button",{staticClass:"phone-Determine",attrs:{type:"primary"},on:{click:function(t){e.submitForm("phone1")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[i("el-input",{staticClass:"input-phone",attrs:{disabled:!0},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),i("img",{staticClass:"modify",attrs:{src:a("BLU/"),alt:"",width:"24"},on:{click:function(t){e.dialogEmial=!0}}})],1),e._v(" "),i("el-dialog",{attrs:{title:"邮箱修改",visible:e.dialogEmial,"custom-class":"city_list",width:"600px"},on:{"update:visible":function(t){e.dialogEmial=t}}},[i("el-form",{ref:"emial1",attrs:{model:e.emial1,"status-icon":"",rules:e.rules2}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show1,expression:"show1"}],ref:"usedemial",attrs:{label:"旧邮箱","label-width":e.formLabelWidth,prop:"usedemial"}},[i("el-input",{staticClass:"input-popup",attrs:{"auto-complete":"off"},model:{value:e.emial1.usedemial,callback:function(t){e.$set(e.emial1,"usedemial",t)},expression:"emial1.usedemial"}})],1),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.show1,expression:"!show1"}],staticClass:"prompt"},[e._v("已向"+e._s(" "+e.emial1.usedemial+" ")+"发送验证码")]),e._v(" "),i("el-form-item",{attrs:{label:"验证码","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{staticClass:"input-popup",attrs:{"auto-complete":"off"},model:{value:e.emial1.name,callback:function(t){e.$set(e.emial1,"name",t)},expression:"emial1.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"新邮箱","label-width":e.formLabelWidth,prop:"newemial"}},[i("el-input",{staticClass:"input-popup",attrs:{"auto-complete":"off"},model:{value:e.emial1.newemial,callback:function(t){e.$set(e.emial1,"newemial",t)},expression:"emial1.newemial"}})],1)],1),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show1,expression:"show1"}],staticClass:"phone-verification",attrs:{type:"primary",size:"small"},on:{click:function(t){e.verification1("usedemial")}}},[e._v("获取验证码")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show1,expression:"!show1"}],staticClass:"phone-verification-1",attrs:{type:"primary",size:"small",plain:"",disabled:""}},[e._v(e._s(e.count1+"s"))]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"phone-Determine",on:{click:function(t){e.dialogEmial1("emial1")}}},[e._v("取 消")]),e._v(" "),i("el-button",{staticClass:"phone-Determine",attrs:{type:"primary"},on:{click:function(t){e.submitForm("emial1")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"组织部门:"}},[i("el-select",{staticClass:"dropdown",attrs:{placeholder:"请选择状态",disabled:!0},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}},[i("el-option",{attrs:{label:"大连大运通-连管中心-XXX",value:"1"}})],1)],1),e._v(" "),i("el-form-item",[i("el-select",{staticClass:"dropdown",attrs:{placeholder:"请选择状态",disabled:!0},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}},[i("el-option",{attrs:{label:"辽宁大运通-东南亚部",value:"1"}})],1)],1),e._v(" "),i("el-form-item",[i("el-button",{staticClass:"preservation preservation_left",attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("保存")])],1)],1)],1)]),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("div",{staticClass:"list_right"},[i("span",{staticClass:"information information_right"},[e._v("密码修改")]),e._v(" "),i("div",{staticClass:"content_pass"},[i("el-form",{ref:"formPass",staticClass:"demo-ruleForm",attrs:{model:e.formPass,"status-icon":"",rules:e.rulesPass,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"当前密码",prop:"passWord"}},[i("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"请输入当前密码"},model:{value:e.formPass.passWord,callback:function(t){e.$set(e.formPass,"passWord",t)},expression:"formPass.passWord"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"新密码",prop:"newpass"}},[i("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"6-20位数字与字母"},model:{value:e.formPass.newpass,callback:function(t){e.$set(e.formPass,"newpass",t)},expression:"formPass.newpass"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"再次确认",prop:"checkpass"}},[i("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"请再次确认"},model:{value:e.formPass.checkpass,callback:function(t){e.$set(e.formPass,"checkpass",t)},expression:"formPass.checkpass"}})],1),e._v(" "),i("el-button",{staticClass:"preservation preservation_right",attrs:{type:"primary"},on:{click:function(t){e.submitForms("formPass")}}},[e._v("保 存")])],1)],1)])])},staticRenderFns:[]};var T=a("VU/8")(w,S,!1,function(e){a("jPOy")},"data-v-fe425128",null).exports,N={data:function(){return{tableData:[],aa:"00",rr:"0",bb:9,pagesize:10,currentPage:1,total:1,jj:"",hh:[],addPosition:!1,form:{positionName:""},formLabelWidth:"92px",rules:{positionName:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]{0,10}$/,message:"请输入10字以内的正确名称,含汉字、字母和数字"}]},rules1:{positionName:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]{0,10}$/,message:"请输入10字以内的正确名称,含汉字、字母和数字"}]},editPosition:!1,updata:{positionName:""},updataLabelWidth:"92px"}},created:function(){this.pageList()},methods:{addSave:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/org/api/positioninsert",{object:{name:t.form.positionName}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){0==e.data.isSuccess?a.$message.error("添加失败,该职位已存在"):(a.addPosition=!1,a.form.positionName="",a.$message.success("添加成功"),a.pageList())}).catch(function(e){console.log(e)})}})},editSave:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/org/api/positionsave",{object:{id:t.jj.id,name:t.updata.positionName,createTime:"2018-06-28T08:01:41.772Z",isDeleted:0,code:"string",rank:0,createUser:"string"},id:0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){a.pageList(),a.$message.success("修改成功！"),a.jj="",a.editPosition=!1}).catch(function(e){console.log(e)})}})},remove:function(e,t){var a=this,i=this;this.$confirm("是否删除该职位？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post(a.GLOBAL.serverSrc+"/org/api/positiondelete",{id:a.tableData[e].id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){i.tableData.splice(e,1),i.$message({type:"success",message:"删除成功!"})}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},editPosition1:function(e,t){this.editPosition=!0,this.jj=t,this.updata.positionName=t.positionName},handleCurrentChange:function(e){this.currentPage=e,this.pageList()},pageList:function(){this.tableData=[];var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/positionpage",{object:{isDeleted:0},pageSize:e.pagesize,pageIndex:e.currentPage,id:0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total;for(var a=0;a<t.data.objects.length;a++)1!==t.data.objects[a].isDeleted&&e.tableData.push({id:t.data.objects[a].id,positionName:t.data.objects[a].name})}).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.currentPage=1,this.pagesize=e,this.pageList()},ceils:function(e){this.addPosition=!1,this.$refs[e].resetFields()},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"big"},[a("el-row",[a("el-button",{staticClass:"addButton",attrs:{type:"primary"},on:{click:function(t){e.addPosition=!0}}},[e._v("添加职位")])],1),e._v(" "),a("el-table",{staticClass:"table",staticStyle:{width:"600px"},attrs:{data:e.tableData,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"70%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"positionName",label:"职位名称",align:"center",width:"150%"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.editPosition1(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.remove(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"添加职位",visible:e.addPosition,"custom-class":"city_list",width:"545px"},on:{"update:visible":function(t){e.addPosition=t}}},[a("el-form",{ref:"form",staticStyle:{"padding-left":"79px"},attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"职位名称：","label-width":e.formLabelWidth,prop:"positionName"}},[a("el-input",{staticClass:"addPosition-input",attrs:{"auto-complete":"off",placeholder:"请输入职位"},model:{value:e.form.positionName,callback:function(t){e.$set(e.form,"positionName",t)},expression:"form.positionName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.ceils("form")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.addSave("form")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"编辑职位",visible:e.editPosition,"custom-class":"city_list",width:"545px"},on:{"update:visible":function(t){e.editPosition=t}}},[a("el-form",{ref:"updata",staticStyle:{"padding-left":"79px"},attrs:{model:e.updata,rules:e.rules1}},[a("el-form-item",{attrs:{label:"职位名称：","label-width":e.updataLabelWidth,prop:"positionName"}},[a("el-input",{staticClass:"addPosition-input",attrs:{"auto-complete":"off"},model:{value:e.updata.positionName,callback:function(t){e.$set(e.updata,"positionName",t)},expression:"updata.positionName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.editPosition=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.editSave("updata")}}},[e._v("保存")])],1)],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"page-sizes":[2,4,6,8,10],background:"","page-size":e.pagesize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var I=a("VU/8")(N,F,!1,function(e){a("5M1U")},"data-v-08383766",null).exports,D=a("mtWM"),L=a.n(D);function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var B=function(e,t){window.localStorage.setItem(e,t)},P={data:function(){var e,t=this;return E(e={show:!0,phoneShow:!1,verifyShow:!0,emailShow:!1,newpasswordShow:!1,pop:!1,pop1:!1,select:"0",value:"",ruleForm:{user:"tester",password:"123456"},phoneruleForm:{phone:"",phoneVerification:""},emailruleForm:{email:""},passwordruleForm:{newpassword:"",repassword:""},phonerules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^[1][3,4,5,7,8][0-9]{9}$/,message:"手机格式错误!"}],phoneVerification:[{required:!0,message:"请输入手机验证码",trigger:"blur"},{min:6,max:6,message:"请输入六位手机验证码",trigger:"blur"}]},emailrules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"邮箱格式错误!"}]},newpasswordrules:{newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{6,10}$/,message:"密码格式错误(6-20位数字与字母)"}],repassword:[{validator:function(e,a,i){""===t.passwordruleForm.newpassword?i(new Error("请再次输入密码")):t.passwordruleForm.newpassword!==t.passwordruleForm.repassword?i(new Error("两次输入密码不一致!")):i()}}]},rules:{user:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},checkCode:"",emailTableVisible:!1,emailFormVisible:!1,phoneTableVisible:!1,phoneFormVisible:!1,newpasswordTableVisible:!1,newpasswordFormVisible:!1,time:60,sendMsgDisabled:!1},"show",!0),E(e,"yz",!1),E(e,"yz1",""),E(e,"logClick",!0),E(e,"logClick1",!1),e},methods:{haha:function(e){"0"==e?(this.emailShow=!1,this.phoneShow=!0,this.newpasswordShow=!1):"1"==e&&(this.phoneShow=!1,this.emailShow=!0,this.newpasswordShow=!1)},forget:function(){this.select="0",this.show=!1,this.phoneShow=!0,this.phoneruleForm.phone="",this.phoneruleForm.phoneVerification="",this.emailruleForm.email="",this.passwordruleForm.newpassword="",this.passwordruleForm.repassword="",this.emailShow=!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("验证失败"),t.emailruleForm.email="",!1;t.$alert("验证信息已经发送到您的邮箱,请通过验证邮件修改密码!",{confirmButtonText:"确定"}),t.emailruleForm.email="",t.emailShow=!1,t.newpasswordShow=!0,t.passwordruleForm.newpassword="",t.passwordruleForm.repassword=""})},phoneSubmitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.phoneruleForm.phone="",t.phoneruleForm.phoneVerification="",!1;t.$message.success("验证成功!"),t.phoneruleForm.phone="",t.phoneruleForm.phoneVerification="",t.phoneShow=!1,t.newpasswordShow=!0})},newSubmitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("验证失败"),!1;t.$message.success("密码设置成功!"),t.newpasswordShow=!1,t.show=!0,t.phoneShow=!1,t.passwordruleForm.newpassword="",t.passwordruleForm.repassword=""})},loginForm:function(e){var t=this;this.$refs.ruleForm.validate(function(e){e?(t.pop1=!1,t.$http.post(t.GLOBAL.serverSrc+"/user/api/login",{userName:t.ruleForm.user,passWord:t.ruleForm.password}).then(function(e){""==e.data?(t.$message.error("账号或密码错误"),console.log("出错了"),t.ruleForm.password="",t.ruleForm.verification="",console.log(localStorage.getItem("token"))):(B("token",e.data),t.$http.post(t.GLOBAL.serverSrc+"/org/api/userinfo",{},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){sessionStorage.setItem("id",e.data.id),sessionStorage.setItem("orgID",e.data.orgID),sessionStorage.setItem("account",t.ruleForm.user),B("name",e.data.name),t.$router.push("/userList"),t.$message.success("登录成功"),localStorage.removeItem("code",e.data)}).catch(function(e){}))}).catch(function(e){})):""==t.ruleForm.verification&&(document.getElementById("er").style="border-color: #f56c6c;",setTimeout(function(){t.pop1=!0},90))})},send:function(){if(""===this.phoneruleForm.phone)this.$message.error("手机号为空！");else{if(this.phoneruleForm.phone.match(/^[1][3,4,5,7,8][0-9]{9}$/)){var e=this;e.sendMsgDisabled=!0,this.$alert("验证码已经发送到您的手机,请您注意接收,防止泄露.",{confirmButtonText:"确定"});var t=window.setInterval(function(){e.time--<=0&&(e.time=60,e.sendMsgDisabled=!1,window.clearInterval(t))},1e3)}else this.$message.error("请填写正确的手机号！")}},login:function(){this.show=!0,this.emailShow=!1,this.newpasswordShow=!1,this.phoneShow=!1},aaa:function(e){var t=this;(this.logClick||"show"==e)&&this.$http.post(this.GLOBAL.serverSrc+"/code/api/getguid",{}).then(function(e){localStorage.setItem("code",e.data),t.bbb()}).catch(function(e){})},bbb:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/code/api/getcode",this.qs.stringify({key:localStorage.getItem("code")})).then(function(t){e.yz=!0,e.yz1="data:image/png;base64,"+t.data,e.logClick=!1}).catch(function(e){})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app"},[e._m(0),e._v(" "),a("div",{staticClass:"big"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"ruleForm",staticClass:"demo-ruleForm login-container",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[a("span",{staticClass:"forget-title"},[e._v("嘉麒应用管理中心")]),e._v(" "),a("div",{staticClass:"forget-group"},[a("div",{staticClass:"forget-account"},[e._v("用户登录")]),e._v(" "),a("div",{staticClass:"forget-border"})]),e._v(" "),a("el-button",{staticClass:"form-forget",attrs:{type:"text"},on:{click:e.forget}},[e._v("忘记密码")]),e._v(" "),a("el-form-item",{staticClass:"user-input",attrs:{prop:"user"}},[a("el-input",{attrs:{placeholder:"手机号/邮箱"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginForm("ruleForm")}},model:{value:e.ruleForm.user,callback:function(t){e.$set(e.ruleForm,"user",t)},expression:"ruleForm.user"}})],1),e._v(" "),a("el-form-item",{staticClass:"password-input",attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginForm("ruleForm")},click:function(t){e.loginForm("ruleForm")}}},[e._v("登录")])],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.phoneShow,expression:"phoneShow"}],ref:"phoneruleForm",staticClass:"demo-ruleForm login-forget",attrs:{model:e.phoneruleForm,rules:e.phonerules,"label-width":"80px"}},[a("span",{staticClass:"forget-title"},[e._v("嘉麒应用管理中心")]),e._v(" "),a("div",{staticClass:"forget-group"},[a("div",{staticClass:"forget-account"},[e._v("找回密码")]),e._v(" "),a("div",{staticClass:"forget-border"})]),e._v(" "),a("el-button",{staticClass:"form-forget",attrs:{type:"text"},on:{click:e.login}},[e._v("立刻登录")]),e._v(" "),a("div",{staticClass:"input-with-select"},[a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.phoneruleForm.phone,callback:function(t){e.$set(e.phoneruleForm,"phone",t)},expression:"phoneruleForm.phone"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:"手机号"},on:{change:e.haha},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"手机号",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"邮箱",value:"1"}})],1)],1)],1)],1),e._v(" "),a("div",[a("el-form-item",{staticClass:"phone-verify",attrs:{prop:"phoneVerification"}},[a("el-input",{attrs:{placeholder:"请输入手机验证码"},model:{value:e.phoneruleForm.phoneVerification,callback:function(t){e.$set(e.phoneruleForm,"phoneVerification",t)},expression:"phoneruleForm.phoneVerification"}},[e.sendMsgDisabled?e._e():a("el-button",{staticClass:"phone-button",attrs:{slot:"append"},on:{click:e.send},slot:"append"},[a("span",{staticStyle:{"margin-right":"0px"}},[e._v("获取验证码")])]),e._v(" "),e.sendMsgDisabled?a("el-button",{staticClass:"phone-button",attrs:{slot:"append",plain:"",disabled:""},on:{click:e.send},slot:"append"},[e._v(e._s(e.time)+"S后获取")]):e._e()],1)],1),e._v(" "),a("el-form-item",{staticClass:"verify-buttom"},[a("el-button",{staticClass:"next-button-phone",attrs:{type:"primary"},on:{click:function(t){e.phoneSubmitForm("phoneruleForm")}}},[e._v("下一步")])],1)],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.emailShow,expression:"emailShow"}],ref:"emailruleForm",staticClass:"demo-ruleForm login-forget",attrs:{model:e.emailruleForm,rules:e.emailrules,"label-width":"80px"}},[a("span",{staticClass:"forget-title"},[e._v("嘉麒应用管理中心")]),e._v(" "),a("div",{staticClass:"forget-group"},[a("div",{staticClass:"forget-account"},[e._v("找回密码")]),e._v(" "),a("div",{staticClass:"forget-border"})]),e._v(" "),a("el-button",{staticClass:"form-forget",attrs:{type:"text"},on:{click:e.login}},[e._v("立刻登录")]),e._v(" "),a("div",{staticClass:"input-with-email"},[a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱号码"},model:{value:e.emailruleForm.email,callback:function(t){e.$set(e.emailruleForm,"email",t)},expression:"emailruleForm.email"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",placeholder:"邮箱号"},on:{change:e.haha},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"手机号",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"邮箱",value:"1"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"email-buttom"},[a("el-button",{staticClass:"next-button-email",attrs:{type:"primary"},on:{click:function(t){e.submitForm("emailruleForm")}}},[e._v("下一步")])],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.newpasswordShow,expression:"newpasswordShow"}],ref:"passwordruleForm",staticClass:"demo-ruleForm login-forget",attrs:{model:e.passwordruleForm,rules:e.newpasswordrules,"label-width":"80px"}},[a("span",{staticClass:"forget-title"},[e._v("嘉麒应用管理中心")]),e._v(" "),a("div",{staticClass:"forget-group"},[a("div",{staticClass:"forget-account"},[e._v("找回密码")]),e._v(" "),a("div",{staticClass:"forget-border"})]),e._v(" "),a("el-button",{staticClass:"form-forget",attrs:{type:"text"},on:{click:e.login}},[e._v("立刻登录")]),e._v(" "),a("div",[a("el-form-item",{staticClass:"input-with-newpassword",attrs:{prop:"newpassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.passwordruleForm.newpassword,callback:function(t){e.$set(e.passwordruleForm,"newpassword",t)},expression:"passwordruleForm.newpassword"}})],1),e._v(" "),a("el-form-item",{staticClass:"input-with-repassword",attrs:{prop:"repassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.passwordruleForm.repassword,callback:function(t){e.$set(e.passwordruleForm,"repassword",t)},expression:"passwordruleForm.repassword"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"newbuttom"},[a("el-button",{staticClass:"next-button-email",attrs:{type:"primary"},on:{click:function(t){e.newSubmitForm("passwordruleForm")}}},[e._v("下一步")])],1)],1),e._v(" "),a("div",{staticClass:"foot"},[e._v("\n        Copy right @2018 嘉麒集团版权所有 辽ICP备辽B2 - 20150118\n      ")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top"},[t("div",{staticStyle:{float:"left"}},[t("span",{staticClass:"top-titleone"},[this._v("嘉麒集团")]),this._v(" "),t("span",{staticClass:"top-titletwo"},[this._v("通行证")])])])}]};var $=a("VU/8")(P,A,!1,function(e){a("SsNg")},"data-v-2667045e",null).exports,U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("div",{staticClass:"form-class"},[a("el-form-item",{attrs:{label:"模板名称",prop:"temp_name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",disabled:e.checkboxStatus},model:{value:e.ruleForm.temp_name,callback:function(t){e.$set(e.ruleForm,"temp_name",t)},expression:"ruleForm.temp_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板描述",prop:"desc"}},[a("el-input",{attrs:{placeholder:"请输入模板描述",disabled:e.checkboxStatus},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),e._v(" "),a("div",{staticClass:"cl_both"})],1),e._v(" "),a("div",{staticClass:"for-allcheck"},[a("el-button",{staticStyle:{color:"#3095fa",background:"white"},attrs:{type:"primary"},on:{click:e.handleCheckAllChange}},[e._v("全选")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleResetChange}},[e._v("重置")])],1),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{attrs:{width:"248"}},[e._v("一级功能模块")]),e._v(" "),a("th",{attrs:{width:"278"}},[e._v("二级功能模块")]),e._v(" "),a("th",{attrs:{width:"340"}},[e._v("权限类型")]),e._v(" "),a("th",[e._v("具体权限")])])]),e._v(" "),e._l(e.list,function(t){return a("tbody",{key:t},[a("tr",[a("td",{attrs:{rowspan:"9"}},[a("el-checkbox",{attrs:{disabled:e.checkboxStatus}},[e._v("\n            账号管理\n          ")])],1),e._v(" "),a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",[e._v("用户管理")])],1),e._v(" "),a("td",[a("el-checkbox",[e._v("只读")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",[e._v("用户列表")])],1)]),e._v(" "),a("tr",[a("td",[a("el-checkbox",[e._v("编辑")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",[e._v("编辑用户")]),e._v(" "),a("el-checkbox",[e._v("添加用户")])],1)]),e._v(" "),a("tr",[a("td",[a("el-checkbox",[e._v("操作")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",[e._v("启用")]),e._v(" "),a("el-checkbox",[e._v("停用")])],1)]),e._v(" "),a("tr",[a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",[e._v("组织管理")])],1),e._v(" "),a("td",[a("el-checkbox",[e._v("只读")])],1),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[a("el-checkbox",[e._v("编辑")])],1),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[a("el-checkbox",[e._v("操作")])],1),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",[e._v("权限管理")])],1),e._v(" "),a("td",[a("el-checkbox",[e._v("只读")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",[e._v("角色模板列表")])],1)]),e._v(" "),a("tr",[a("td",[a("el-checkbox",[e._v("编辑")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",[e._v("添加角色模板")]),e._v(" "),a("el-checkbox",[e._v("编辑角色模板")]),e._v(" "),a("el-checkbox",[e._v("停用角色模板")])],1)]),e._v(" "),a("tr",[a("td",[a("el-checkbox",[e._v("操作")])],1),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",[e._v("个人中心")])],1),e._v(" "),a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",[e._v("账号设置")])],1),e._v(" "),a("td",[a("el-checkbox",[e._v("只读")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",[e._v("账号信息")])],1)]),e._v(" "),a("tr",[a("td",[a("el-checkbox",[e._v("编辑")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",[e._v("修改账号信息")]),e._v(" "),a("el-checkbox",[e._v("修改密码")])],1)]),e._v(" "),a("tr",[a("td",[a("el-checkbox",[e._v("操作")])],1),e._v(" "),a("td")])])})],2)]),e._v(" "),a("el-button",{staticClass:"sub_button",staticStyle:{background:"white",color:"#3095fa"},attrs:{type:"primary"},on:{click:function(t){e.handleClose()}}},[e._v("取消\n  ")]),e._v(" "),a("el-button",{staticClass:"sub_button",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)},staticRenderFns:[]};var R=a("VU/8")({data:function(){return{ruleForm:{temp_name:"",desc:"",count:0,state:0},rules:{temp_name:[{required:!0,message:"不可为空",trigger:"blur"},{min:2,max:6,message:"请输入2-6个汉字",trigger:"blur"},{pattern:/[\u4e00-\u9fa5]/,message:"必须为汉字"}],desc:[{required:!0,message:"不可为空",trigger:"blur"},{min:2,max:40,message:"请输入2-40个汉字",trigger:"blur"},{pattern:/[\u4e00-\u9fa5]/,message:"必须为汉字"}]},apiUrl:this.GLOBAL.serverSrc+"/org/api/roleinsert",list:[1],checkboxStatus:!1}},created:function(){this.$route.query.id&&(this.apiUrl=this.GLOBAL.serverSrc+"/org/api/rolesave",this.getDetail(this.$route.query.id))},methods:{submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(e){var i="";i=t.$route.query.id?"修改":"添加",t.$http.post(t.apiUrl,{object:{id:t.$route.query.id,isDeleted:0,title:t.ruleForm.temp_name,mark:t.ruleForm.desc,count:t.ruleForm.count,state:t.ruleForm.state}}).then(function(e){1==e.data.isSuccess&&(t.$message({type:"success",message:i+"成功"}),a.$router.push({path:"/role"}))})}})},handleClose:function(e){var t=this;this.$confirm("取消此模板的配置?").then(function(e){t.$router.push({path:"/role"})}).catch(function(e){})},getDetail:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/roleget",{id:this.$route.query.id}).then(function(e){var a=e.data.object;t.ruleForm.temp_name=a.title,t.ruleForm.desc=a.mark,t.ruleForm.count=a.count,t.ruleForm.state=a.state})},handleCheckAllChange:function(){},handleResetChange:function(){this.$refs.ruleForm.resetFields()}}},U,!1,function(e){a("3VAf")},"data-v-4d91a19c",null).exports,j={name:"Permission",data:function(){return{isChecked:!1,ruleForm:{type:""},options:[{value:"1",label:"管理员"},{value:"2",label:"销售"}],value4:""}},methods:{handleallCancleClick:function(){this.isChecked=!1},handleallClick:function(){this.isChecked=!0},handleCancel:function(){var e=this;this.$confirm("取消此用户的权限配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t,a){"confirm"===t&&e.$router.push({path:"/userlist/adduser?id="+e.$route.query.id})}})},handleSubmit:function(){var e=this;this.$message({message:"保存成功",type:"success"}),setTimeout(function(){e.$router.push({path:"/userlist/adduser?id="+e.$route.query.id})},1e3)}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"150px"}},[a("div",{staticClass:"permission-roel"},[a("el-form-item",{attrs:{label:"选择已有角色模板：",prop:"type"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}},e._l(e.options,function(e){return a("el-option",{key:e.value,staticClass:"permission-roel",attrs:{label:e.label,value:e.value}})}))],1)],1)]),e._v(" "),a("table",{staticClass:"all-size"},[a("thead",[a("tr",[a("th",{staticClass:"table-button",attrs:{colspan:"4"}},[a("el-button",{staticClass:"table-bt",attrs:{type:"primary",size:"mini"},on:{click:e.handleallClick}},[e._v("全选")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleallCancleClick}},[e._v("重置")])],1)])]),e._v(" "),a("tbody",[e._m(0),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",{attrs:{rowspan:"9"}},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("账号管理")])],1),e._v(" "),a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("用户管理")])],1),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("只读")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("用户列表")])],1)]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("编辑")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("编辑用户")]),e._v(" "),a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("添加用户")])],1)]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("操作")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("启用")]),e._v(" "),a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("停用")])],1)]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("组织管理")])],1),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("只读")])],1),e._v(" "),a("td")]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("编辑")])],1),e._v(" "),a("td")]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("操作")])],1),e._v(" "),a("td")]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("权限管理")])],1),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("只读")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("角色模板列表")])],1)]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("编辑")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("添加角色模板")]),e._v(" "),a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("编辑角色模板")]),e._v(" "),a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("停用角色模板")])],1)]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("操作")])],1),e._v(" "),a("td")]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("个人中心")])],1),e._v(" "),a("td",{attrs:{rowspan:"3"}},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("账号设置")])],1),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("只读")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("账号信息")])],1)]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("编辑")])],1),e._v(" "),a("td",{staticClass:"table-checkout"},[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("修改账号信息")]),e._v(" "),a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("修改密码")])],1)]),e._v(" "),a("tr",{staticClass:"table-content"},[a("td",[a("el-checkbox",{model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("操作")])],1),e._v(" "),a("td")])])]),e._v(" "),a("div",{staticClass:"button-submit"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("成功")])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",{staticClass:"table-button"},[t("td",{staticClass:"table-title"},[this._v("一级功能模块")]),this._v(" "),t("td",{staticClass:"table-title"},[this._v("二级功能模块")]),this._v(" "),t("td",{staticClass:"table-title"},[this._v("权限类型")]),this._v(" "),t("td",{staticClass:"table-permiss"},[this._v("具体权限")])])}]};var M={name:"addUser",components:{Permission:a("VU/8")(j,O,!1,function(e){a("bGBf")},"data-v-3a67e4e8",null).exports},data:function(){return{fID:"",dname:"",addInput:{name:"",topDepartment:"",radio:"",lastStage:"2",departmentCode:"",sort:"",phone:"",fax:"",note:"",ParentID:""},treeKey:[],isexpand:!1,props1:{label:"label",isLeaf:"leaf"},userState:"",options:[],value:"",options1:[],value1:"",options2:[],value2:"",options3:[],value3:"",options4:[],value4:"",arr:[],arr1:[],arr2:[],arr3:[],bumen2:!1,bumen1:!1,bumen3:!1,buttonsubmit:!1,buttonchange:!1,uid:0,enable:!1,disable:!1,hidval:"-1",selectedOptions:[],orilist:"请点击添加",ppid:"",ruleForm1:{domains:[{value:"请点击添加",id:""}]},bumen:[],value8:"",dialogFormVisible:!1,cancel:!1,activeName:"first",ruleForm:{phone:"",passWord:"",name:"",mail:"",number:"",idcard:"",trailid:"",sex:"1",type:"1",orderList:"",domains:[{value:""}]},rules:{mail:[{required:!0,validator:function(e,t,a){return t?/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(t)?void a():a(new Error("请输入正确的邮箱")):a(new Error("邮箱不能为空"))},trigger:"blur"}],orderList:[{required:!0,message:"请选择部门",trigger:"blur"}],number:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("员工编号不能为空"));a()},trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],type:[{required:!0,message:"请选择用户类型",trigger:"change"}]}}},methods:{treeDblclick:function(e){this.treeKey=[],2!=this.dbSave.isLeaf&&0!=this.dbSave.isLeaf||this.treeKey.push(this.dbSave.id),this.dbSave=""},getUser:function(e,t,a,i,l){this.data1=[];var s=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptlist",{object:{ParentID:a}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){for(var t=0;t<e.data.objects.length;t++)1!==e.data.objects[t].isDeleted&&(1==e.data.objects[t].isLeaf?s.data1.push({label:e.data.objects[t].orgName,id:e.data.objects[t].id,key:t,cities:[],isLeaf:e.data.objects[t].isLeaf,leaf:!0}):2==e.data.objects[t].isLeaf&&s.data1.push({label:e.data.objects[t].orgName,id:e.data.objects[t].id,key:t,cities:[],isLeaf:e.data.objects[t].isLeaf,leaf:!1}));setTimeout(function(){var e=s.data1;l(e)},200)}).catch(function(e){console.log(e)})},treeClick:function(e,t,a){console.log(e.id),console.log(e.label),this.fID=e.id,this.dname=e.label,this.data=[],this.org=e.id,this.tableData=[],this.tableList=[],this.addInput.ParentID=e.id,this.addInput.topDepartment=e.label,this.dbSave=e;var i=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptlist",{object:{ParentID:e.id}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){for(var t=0;t<e.data.objects.length;t++)1!==e.data.objects[t].isDeleted&&i.tableData.push({label:e.data.objects[t].orgName,id:e.data.objects[t].id,key:t,value:e.data.objects[t].id})}).catch(function(e){console.log(e)}),this.$http.post(this.GLOBAL.serverSrc+"/org/api/userlistwithorg",{id:e.id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){for(var t=0;t<e.data.objects.length;t++)1==e.data.objects[t].sex?e.data.objects[t].sex="男":e.data.objects[t].sex="女",i.tableList.push({id:e.data.objects[t].id,name:e.data.objects[t].name,phone:e.data.objects[t].mobile,sex:e.data.objects[t].sex})}).catch(function(e){console.log(e)})},renderContent:function(e,t){var a=t.node,i=t.data;t.store;return 1==i.isLeaf?e("span",[e("img",{style:"position:relative;bottom: -3px",attrs:{width:"20px",src:"../static/organList-image/257785656210656304.png"}}),e("span",[a.label])]):2==i.isLeaf||0==i.isLeaf?e("span",[e("img",{style:"position:relative;bottom: -3px",attrs:{width:"20px",src:"../static/organList-image/ewqdewq.png"}}),e("span",[a.label])]):void 0},loadNode:function(e,t){var a=this;console.log(e.data),this.node=e.data,this.removes=t,this.data=[];var i=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptlist",{object:{ParentID:-1}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(l){for(var s=0;s<l.data.objects.length;s++)0===e.level&&(i.options.push({label:l.data.objects[s].orgName,value:l.data.objects[s].id+"-"+l.data.objects[s].orgName}),t([{label:l.data.objects[s].orgName,key:s,id:l.data.objects[s].id,isLeaf:l.data.objects[s].isLeaf}]));var o=Array();o.push({id:l.data.objects[0].id,isLeaf:l.data.objects[0].isLeaf,key:0,label:l.data.objects[0].orgName}),a.flag&&(i.treeClick(o[0]),a.flag=!1),a.treeKey.push(204)}).catch(function(e){console.log(e)}),e.level>=1&&this.getUser(e.data.key,e.data.label,e.data.id,e.data.isLeaf,t)},HandChange:function(){this.arr=this.value.split("-"),this.options1=[],this.value1="",this.value2="",this.value3="";var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptlist",{order:"string",object:{isDeleted:0,parentID:this.arr[0]}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){0==t.data.objects.length&&(e.bumen2=!1,e.bumen1=!1),console.log(t);var a="";for(a=0;a<t.data.objects.length;a++)e.options1.push({label:t.data.objects[a].orgName,value:t.data.objects[a].id+"-"+t.data.objects[a].orgName})}).catch(function(e){})},changstatus:function(e){var t=this.ruleForm1.domains.indexOf(e),a=this.orilist;this.orilist=this.ruleForm1.domains[t].value,this.ruleForm1.domains[t].value=a},handleItemChange:function(){console.log(13)},addmaster:function(){-1==this.hidval?(this.orilist=this.dname,this.ppid=this.fID,this.ruleForm.orderList=this.dname):(this.ruleForm1.domains[this.hidval].value=this.dname,this.ruleForm1.domains[this.hidval].id=this.fID,this.hidval=-1),this.dialogFormVisible=!1},tanchu:function(e){var t=this.ruleForm1.domains.indexOf(e);this.hidval=t,this.dialogFormVisible=!0},enableType:function(){var e=this;this.$confirm("您确定启用/停用该用户么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t,a){"confirm"===t&&(e.$http.post(e.GLOBAL.serverSrc+"/org/api/usersave",{Object:{id:e.$route.query.id,mobile:e.ruleForm.phone,name:e.ruleForm.name,email:e.ruleForm.mail,userCode:e.ruleForm.number,passWord:e.ruleForm.passWord,iDcard:e.ruleForm.idcard,tourGuide:e.ruleForm.trailid,sex:e.ruleForm.sex,userType:e.ruleForm.type,userState:"2"}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){var t=this;this.$message({message:"操作成功",type:"success"}),setTimeout(function(){t.$router.push({path:"/userlist"})},1e3)}).catch(function(e){console.log(e)}),e.$message({type:"success",message:"操作成功!"}),setTimeout(function(){e.$router.push({path:"/userlist"})},2e3))}})},disableType:function(){var e=this;this.$confirm("您确定启用/停用该用户么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t,a){"confirm"===t&&(e.$http.post(e.GLOBAL.serverSrc+"/org/api/usersave",{Object:{id:e.$route.query.id,mobile:e.ruleForm.phone,name:e.ruleForm.name,email:e.ruleForm.mail,userCode:e.ruleForm.number,passWord:e.ruleForm.passWord,iDcard:e.ruleForm.idcard,tourGuide:e.ruleForm.trailid,sex:e.ruleForm.sex,userType:e.ruleForm.type,userState:"3"}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){var t=this;that.$message({message:"操作成功",type:"success"}),setTimeout(function(){t.$router.push({path:"/userlist"})},1e3)}).catch(function(e){console.log(e)}),e.$message({type:"success",message:"操作成功!"}),setTimeout(function(){e.$router.push({path:"/userlist"})},2e3))}})},bumen123:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/deptget",{id:e.ppid},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.orilist=t.data.object.orgName}).catch(function(e){})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=t;t.$http.post(t.GLOBAL.serverSrc+"/org/api/userinsert",{Object:{createTime:"2018-06-20T09:35:52.822Z",passWord:t.ruleForm.phone,isDeleted:0,code:123,mobile:t.ruleForm.phone,name:t.ruleForm.name,email:t.ruleForm.mail,userCode:t.ruleForm.number,iDcard:t.ruleForm.idcard,tourGuide:t.ruleForm.trailid,sex:t.ruleForm.sex,userType:t.ruleForm.type,userState:2,orgID:t.ppid},id:0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){200==e.status&&(a.$message({message:"操作成功",type:"success"}),setTimeout(function(){a.$router.push({path:"/userlist"})},1e3))}).catch(function(e){console.log(e)})})},changeForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post(t.GLOBAL.serverSrc+"/org/api/usersave",{Object:{id:t.uid,createTime:"2018-06-20T09:35:52.822Z",isDeleted:0,code:"123",passWord:t.ruleForm.passWord,mobile:t.ruleForm.phone,name:t.ruleForm.name,email:t.ruleForm.mail,userCode:t.ruleForm.number,iDcard:t.ruleForm.idcard,tourGuide:t.ruleForm.trailid,sex:t.ruleForm.sex,userType:t.ruleForm.type,userState:t.userState,orgID:t.ppid}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){a.$message({message:"修改成功",type:"success"}),setTimeout(function(){a.$router.push({path:"/userlist"})},1e3)}).catch(function(e){console.log(e)})})},resetForm:function(e){this.$router.push({path:"/userlist"})},removeDomain:function(e){var t=this.ruleForm1.domains.indexOf(e);-1!==t&&this.ruleForm1.domains.splice(t,1)},addDomain:function(){0==this.cancel?this.cancel=!0:this.ruleForm1.domains.push({value:"请点击添加",key:Date.now()})}},created:function(){var e=this;if(this.$http.post(this.GLOBAL.serverSrc+"/org/api/positionpage",{object:{isDeleted:0},pageSize:100,pageIndex:1,id:0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)1!==t.data.objects[a].isDeleted&&e.bumen.push({value:t.data.objects[a].id,label:t.data.objects[a].name})}).catch(function(e){console.log(e)}),this.$route.query.id){this.buttonchange=!0,this.buttonsubmit=!1,this.uid=this.$route.query.id;e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userget",{id:e.$route.query.id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.ruleForm.phone=t.data.object.mobile,e.ruleForm.name=t.data.object.name,e.ruleForm.mail=t.data.object.email,e.ruleForm.idcard=t.data.object.iDcard,e.ruleForm.number=t.data.object.userCode,e.ruleForm.trailid=t.data.object.tourGuide,e.ruleForm.sex=String(t.data.object.sex),e.ruleForm.type=String(t.data.object.userType),e.ruleForm.passWord=t.data.object.passWord,e.userState=t.data.object.userState,e.ppid=t.data.object.orgID,2==t.data.object.userState?e.disable=!0:3==t.data.object.userState&&(e.enable=!0),e.bumen123()}).catch(function(e){})}else this.buttonsubmit=!0,this.buttonchange=!1}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tag"},[a("el-tabs",{staticClass:"form_tag",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"pane-scroll",attrs:{label:"基本信息",name:"first"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm ruleForm-abjust",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[e.enable?a("el-button",{staticClass:"begin-button",attrs:{type:"success",size:"medium"},on:{click:e.enableType}},[e._v("启用")]):e._e(),e._v(" "),e.disable?a("el-button",{staticClass:"end-button",attrs:{type:"danger",size:"medium"},on:{click:e.disableType}},[e._v("停用 ")]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{staticClass:"from-input",attrs:{placeholder:"请输入手机号"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{staticClass:"from-input",attrs:{placeholder:"请输入2-6位汉字"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"mail"}},[a("el-input",{staticClass:"from-input",attrs:{placeholder:"请输入邮箱"},model:{value:e.ruleForm.mail,callback:function(t){e.$set(e.ruleForm,"mail",t)},expression:"ruleForm.mail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"员工编号",prop:"number"}},[a("el-input",{staticClass:"from-input",attrs:{placeholder:"请输入员工编号"},model:{value:e.ruleForm.number,callback:function(t){e.$set(e.ruleForm,"number",t)},expression:"ruleForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号"}},[a("el-input",{staticClass:"from-input",attrs:{placeholder:"请输入身份证号"},model:{value:e.ruleForm.idcard,callback:function(t){e.$set(e.ruleForm,"idcard",t)},expression:"ruleForm.idcard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"导游证号"}},[a("el-input",{staticClass:"from-input",attrs:{placeholder:"请输入导游证号"},model:{value:e.ruleForm.trailid,callback:function(t){e.$set(e.ruleForm,"trailid",t)},expression:"ruleForm.trailid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},[a("el-radio",{staticClass:"from-radio",attrs:{label:"1"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型",prop:"type"}},[a("el-radio-group",{staticClass:"form_type",model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-radio",{staticClass:"from-radio",attrs:{label:"1"}},[e._v("普通用户")])],1)],1),e._v(" "),a("div",{staticClass:"form_ori"},[a("el-form-item",{attrs:{label:"部门",prop:"orderList"}},[a("div",{staticClass:"addOri"},[a("el-button",{staticClass:"but-left",attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogFormVisible=!0}},model:{value:e.orilist,callback:function(t){e.orilist=t},expression:"orilist"}},[e._v(e._s(e.orilist))]),e._v(" "),a("div",{staticClass:"button-fun"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addDomain}},[e._v("添加")])],1)],1)])],1),e._v(" "),e._l(e.ruleForm1.domains,function(t,i){return e.cancel?a("div",{key:t.key,staticClass:"block",attrs:{prop:"domains."+i+".value"}},[a("el-button",{staticClass:"but-left",attrs:{type:"primary",plain:""},on:{click:function(a){e.tanchu(t)}},model:{value:e.ruleForm1,callback:function(t){e.ruleForm1=t},expression:"ruleForm1"}},[e._v(e._s(t.value))]),e._v(" "),a("div",{staticClass:"button-fun"},[a("el-button",{staticClass:"delete-adjust",attrs:{type:"danger",size:"mini"},on:{click:function(a){a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)],1):e._e()}),e._v(" "),a("el-form-item",{staticClass:"button-adjust"},[e.buttonsubmit?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("创建")]):e._e(),e._v(" "),e.buttonchange?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changeForm("ruleForm")}}},[e._v("修改")]):e._e(),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("取消")])],1),e._v(" "),a("el-dialog",{attrs:{title:"用户信息","custom-class":"city_list",visible:e.dialogFormVisible,width:"500px","show-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"left"},[a("div",{staticClass:"hh"},[a("el-tree",{ref:"oppo",staticClass:"tree",attrs:{props:e.props1,"node-key":"id",load:e.loadNode,"render-content":e.renderContent,lazy:"","expand-on-click-node":e.isexpand,"default-expanded-keys":e.treeKey,"highlight-current":""},on:{"node-click":e.treeClick},nativeOn:{dblclick:function(t){return e.treeDblclick(t)}}})],1)]),e._v(" "),a("div",{staticStyle:{position:"absolute",top:"10px",right:"10px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addmaster}},[e._v("确定")])],1)])],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"权限配置",name:"second"}},[a("Permission")],1)],1)],1)])},staticRenderFns:[]};var q=a("VU/8")(M,z,!1,function(e){a("Gh8v")},"data-v-4a8b5b3c",null).exports,V={data:function(){return{searchInput:"",list:[],lists:[],vague:[],props1:{label:"name",isLeaf:"leaf"},data:"",total:1,theContinent:"",node:"",resolve:"",level:"",tableData:[],countryPopup:{countryName:"",englishName:"",pinyin:"",initials:"",initial:"",code:"",select:"",parentID:"",isLeaf:"2"},editCountryPopup:{id:"",countryName:"",englishName:"",pinyin:"",initials:"",initial:"",code:"",select:"",isLeaf:"",parentID:""},countryRules:{countryName:[{required:!0,message:"请填写国家名称",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,10}$/,message:"请输入2-10位汉字"}],pinyin:[{pattern:/^[a-zA-Z]+$/,message:"请输入字母,不能有空格"}],initials:[{pattern:/^[A-Z]+$/,message:"请输入大写字母,不能有空格"}]},editCountryRules:{countryName:[{required:!0,message:"请填写国家名称",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,10}$/,message:"请输入2-10位汉字"}],pinyin:[{pattern:/^[a-zA-Z]+$/,message:"请输入字母,不能有空格"}],initials:[{pattern:/^[A-Z]+$/,message:"请输入大写字母,不能有空格"}]},input:"",tableHead:{height:"60px",color:"#555555"},tableHeight:{padding:"0",height:"34px"},pagesize:10,currentPage:1,geography:"",addState:!1,formLabelWidth:"160px",editState:!1,clickId:""}},methods:{loadNode1:function(e,t){var a=this;this.node=e.data,this.resolve=t,this.level=e.level,0===e.level&&this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:-1}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){for(var i=0;i<e.data.objects.length;i++)a.list.push({name:e.data.objects[i].areaName,key:i,id:e.data.objects[i].id,isLeaf:e.data.objects[i].isLeaf,Hierarchy:0});t(a.list)}).catch(function(e){console.log(e)}),e.level>=1&&this.getSon(e.data.key,e.data.label,e.data.id,e.data.isLeaf,t,e.level)},getSon:function(e,t,a,i,l,s){var o=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:a}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){if(o.lists=[],1==e.data.isSuccess)for(var t=0;t<e.data.objects.length;t++)0==e.data.objects[t].isDeleted&&(2==e.data.objects[t].isLeaf?o.lists.push({name:e.data.objects[t].areaName,key:t,id:e.data.objects[t].id,isLeaf:e.data.objects[t].isLeaf,leaf:!1,Hierarchy:s}):o.lists.push({name:e.data.objects[t].areaName,key:t,id:e.data.objects[t].id,isLeaf:e.data.objects[t].isLeaf,leaf:!0,Hierarchy:s}));setTimeout(function(){l(o.lists)},200)}).catch(function(e){console.log(e)})},treeClick:function(e,t){var a=this;this.geography=1,this.data=e,this.countryPopup.select=e.name,this.countryPopup.parentID=e.id,this.editCountryPopup.parentID=e.id,0==e.Hierarchy&&(this.theContinent=e.id),1==e.isLeaf?(this.tableData=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforget",{id:e.id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){a.tableData.push({id:e.data.object.id,country:e.data.object.areaName,continent:e.data.object.earth,englishName:e.data.object.englishName,pinyin:e.data.object.chineseFull,initials:e.data.object.firstChar,code:e.data.object.areaCode,value:e.data.object.areaName,isLeaf:e.data.object.isLeaf,initial:e.data.object.initial,parentID:e.data.object.parentID}),a.geography=1,a.currentPage=1,a.total=1}).catch(function(e){console.log(e)})):(this.clickId!=e.id&&(this.currentPage=1),this.clickId=e.id,this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforpage",{object:{parentID:e.id},pageIndex:this.currentPage,pageSize:this.pagesize},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){0==t.data.isSuccess?(a.tableData=[],1!=a.currentPage&&(a.currentPage=1,a.treeClick(e))):(a.tableData=t.data.objects,a.total=t.data.total,a.geography=1,a.tableData.forEach(function(e,a){e.id=t.data.objects[a].id,e.country=t.data.objects[a].areaName,e.continent=t.data.objects[a].earth,e.englishName=t.data.objects[a].englishName,e.pinyin=t.data.objects[a].chineseFull,e.initials=t.data.objects[a].firstChar,e.code=t.data.objects[a].areaCode,e.value=t.data.objects[a].areaName,e.isLeaf=t.data.objects[a].isLeaf,e.initial=t.data.objects[a].initial,e.parentID=t.data.objects[a].parentID}))}).catch(function(e){console.log(e)}))},querySearch:function(e,t){var a=this;this.vague=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.vague.push({id:i.data.objects[l].id,value:i.data.objects[l].areaName});var s=e?a.vague.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})},createFilter:function(e){return function(e){return e.value}},handleSelect:function(e){this.searchInput=e},searchClick:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforget",{id:this.searchInput.id}).then(function(t){e.tableData=[],e.tableData.push({id:t.data.object.id,country:t.data.object.areaName,continent:t.data.object.earth,englishName:t.data.object.englishName,pinyin:t.data.object.chineseFull,initials:t.data.object.firstChar,code:t.data.object.areaCode,value:t.data.object.areaName,isLeaf:t.data.object.isLeaf,initial:t.data.object.initial}),e.geography=1,e.currentPage=1,e.total=1})},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},countryForm:function(e){var t=this;this.$refs[e].validate(function(a){a&&("countryPopup"==e?t.$http.post(t.GLOBAL.serverSrc+"/universal/area/api/areainforinsert",{object:{areaName:t.countryPopup.countryName,englishName:t.countryPopup.englishName,chineseFull:t.countryPopup.pinyin,firstChar:t.countryPopup.initials,areaCode:t.countryPopup.code,parentID:t.countryPopup.parentID,isLeaf:Number(t.countryPopup.isLeaf),initial:t.countryPopup.initial,createTime:"2018-09-11T07:32:14.737Z",earth:"-1"}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){0==e.data.isSuccess?t.$message.error("该名称以存在"):(t.treeClick(t.data),t.addState=!1,t.$message.success("添加成功！"),t.getSon(t.node.key,t.node.label,t.node.id,t.node.isLeaf,t.resolve,t.level),t.$refs.countryPopup.resetFields(),t.countryPopup.initial="")}).catch(function(e){console.log(e)}):"editCountryPopup"==e&&t.$http.post(t.GLOBAL.serverSrc+"/universal/area/api/areainforsave",{object:{id:t.editCountryPopup.id,areaName:t.editCountryPopup.countryName,englishName:t.editCountryPopup.englishName,chineseFull:t.editCountryPopup.pinyin,firstChar:t.editCountryPopup.initials,areaCode:t.editCountryPopup.code,isLeaf:Number(t.editCountryPopup.isLeaf),initial:t.editCountryPopup.initial,parentID:t.editCountryPopup.parentID,earth:"-1"}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.treeClick(t.data),t.editState=!1,t.$message.success("修改成功！"),t.getSon(t.node.key,t.node.label,t.node.id,t.node.isLeaf,t.resolve,t.level)}).catch(function(e){console.log(e)}))})},addStates:function(e,t){this.countryPopup.select=t.country,this.countryPopup.parentID=t.id,this.editCountryPopup.parentID=t.id,this.addState=!0},handleEdit:function(e,t){this.editState=!0,this.countryPopup.parentID=t.parentID,this.editCountryPopup.id=t.id,this.editCountryPopup.code=t.code,this.editCountryPopup.countryName=t.country,this.editCountryPopup.englishName=t.englishName,this.editCountryPopup.initials=t.initials,this.editCountryPopup.initial=t.initial,this.editCountryPopup.pinyin=t.pinyin,this.editCountryPopup.select=this.theContinent,this.editCountryPopup.isLeaf=String(t.isLeaf)},handleDelete:function(e,t){var a=this;this.$confirm("是否删除该国家","信息",{confirmButtonText:"确定",cancelButtonText:"取消",customClass:"delete_country",confirmButtonClass:"delete_country_determine",cancelButtonClass:"delete_country_determine1"}).then(function(){0==t.isLeaf?a.$http.post(a.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:t.id}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(i){0==i.data.isSuccess?a.$http.post(a.GLOBAL.serverSrc+"/universal/area/api/areainfordelete",{id:t.id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(i){a.tableData.splice(e,1),a.$refs.refTree.remove(t),a.$message({type:"success",message:"删除成功!"})}).catch(function(e){console.log(e)}):a.$alert("<p>该地区下存在城市或省份 , 不能删除 ;</p><p>请清空城市或省份在删除 !</p>","信息",{confirmButtonText:"确定",customClass:"delete_country",dangerouslyUseHTMLString:!0,confirmButtonClass:"delete_country_determine"})}).catch(function(e){console.log(e)}):a.$http.post(a.GLOBAL.serverSrc+"/universal/area/api/areainfordelete",{id:t.id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(i){a.tableData.splice(e,1),a.$refs.refTree.remove(t),a.$message({type:"success",message:"删除成功!"})}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},subordinate:function(e){var t={};t.name=e.country,t.id=e.id,t.isLeaf=e.isLeaf,this.treeClick(t)},pagesizes:function(e){this.currentPage=1,this.pagesize=e,this.treeClick(this.data)},handleCurrentChange:function(e){this.currentPage=e,this.treeClick(this.data)}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cityList"},[a("div",{staticClass:"cascade"},[a("el-tree",{ref:"refTree",staticClass:"treeDemo",attrs:{props:e.props1,load:e.loadNode1,lazy:"","expand-on-click-node":!1,"node-key":"id"},on:{"node-click":e.treeClick}})],1),e._v(" "),a("div",{staticClass:"search"},[a("span",{staticClass:"keyword"},[e._v("输入关键字:")]),e._v(" "),a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入关键字","fetch-suggestions":e.querySearch,"suffix-icon":"el-icon-search","trigger-on-focus":!1},on:{select:e.handleSelect},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" "),a("el-button",{staticClass:"searchButton",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchClick}})],1),e._v(" "),1==e.geography?[2==e.data.isLeaf?[a("el-button",{staticClass:"add_country",attrs:{type:"primary"},on:{click:function(t){e.addState=!0}}},[e._v("添加")])]:e._e(),e._v(" "),a("el-table",{staticClass:"table_list",staticStyle:{width:"70%"},attrs:{data:e.tableData,border:"","header-row-style":e.tableHead,"cell-style":e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{key:Math.random(),attrs:{prop:"id",label:"ID",align:"center",width:"60%"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.isLeaf?[a("el-tooltip",{attrs:{placement:"right",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("点击查看"),a("br"),e._v("下级分类")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.subordinate(t.row)}}},[e._v(e._s(t.row.country))])],1)]:1==t.row.isLeaf?[a("span",{attrs:{type:"text"}},[e._v(e._s(t.row.country))])]:e._e()]}}])}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"continent",label:"所属大洲",align:"center",width:"80%"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"englishName",label:"英文名",align:"center"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"pinyin",label:"中文全拼",align:"center"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"initials",label:"首字母",align:"center",width:"70%"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"initial",label:"首拼",align:"center"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"code",label:"代码",align:"center",width:"80%"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作",align:"center",width:"230%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table_button_left"},[a("el-button",{staticClass:"table_button",attrs:{type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"table_button",attrs:{type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),2==t.row.isLeaf?[a("el-button",{staticClass:"table_button1",attrs:{type:"success"},on:{click:function(a){e.addStates(t.$index,t.row)}}},[e._v("添加")])]:e._e()],2)]}}])})],1),e._v(" "),a("div",{staticClass:"pages"},[a("el-pagination",{staticClass:"page",attrs:{background:"","current-page":e.currentPage,"page-sizes":[2,4,8,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pagesizes,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]:e._e(),e._v(" "),a("el-dialog",{staticClass:"add_country_popup",attrs:{"custom-class":"city_list",title:"添加国家",visible:e.addState,width:"600px"},on:{"update:visible":function(t){e.addState=t}}},[a("el-form",{ref:"countryPopup",attrs:{model:e.countryPopup,"status-icon":"",rules:e.countryRules}},[a("el-form-item",{attrs:{label:"所属地区:","label-width":e.formLabelWidth}},[a("span",{staticClass:"country_span"},[e._v(e._s(e.countryPopup.select))])]),e._v(" "),a("el-form-item",{attrs:{label:"地区名称:","label-width":e.formLabelWidth,prop:"countryName"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.countryPopup.countryName,callback:function(t){e.$set(e.countryPopup,"countryName",t)},expression:"countryPopup.countryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"末级区域:","label-width":e.formLabelWidth}},[a("el-radio-group",{staticClass:"virtualDepartment",model:{value:e.countryPopup.isLeaf,callback:function(t){e.$set(e.countryPopup,"isLeaf",t)},expression:"countryPopup.isLeaf"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"英文名:","label-width":e.formLabelWidth,prop:"englishName"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.countryPopup.englishName,callback:function(t){e.$set(e.countryPopup,"englishName",t)},expression:"countryPopup.englishName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文全拼:","label-width":e.formLabelWidth,prop:"pinyin"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.countryPopup.pinyin,callback:function(t){e.$set(e.countryPopup,"pinyin",t)},expression:"countryPopup.pinyin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"首字母:","label-width":e.formLabelWidth,prop:"initials"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.countryPopup.initials,callback:function(t){e.$set(e.countryPopup,"initials",t)},expression:"countryPopup.initials"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"首拼:","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.countryPopup.initial,callback:function(t){e.$set(e.countryPopup,"initial",t)},expression:"countryPopup.initial"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码:","label-width":e.formLabelWidth,prop:"code"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.countryPopup.code,callback:function(t){e.$set(e.countryPopup,"code",t)},expression:"countryPopup.code"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"Determine",on:{click:function(t){e.addState=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"Determine",attrs:{type:"primary"},on:{click:function(t){e.countryForm("countryPopup")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"edit_country_popup",attrs:{"custom-class":"city_list",title:"国家编辑",visible:e.editState,width:"600px"},on:{"update:visible":function(t){e.editState=t}}},[a("el-form",{ref:"editCountryPopup",attrs:{model:e.editCountryPopup,"status-icon":"",rules:e.editCountryRules}},[a("el-form-item",{attrs:{label:"ID:","label-width":e.formLabelWidth,prop:"id"}},[a("span",{staticClass:"country_span"},[e._v(e._s(e.editCountryPopup.id))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属地区:","label-width":e.formLabelWidth}},[a("span",{staticClass:"country_span"},[e._v(e._s(e.editCountryPopup.select))])]),e._v(" "),a("el-form-item",{attrs:{label:"地区名称:","label-width":e.formLabelWidth,prop:"countryName"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.editCountryPopup.countryName,callback:function(t){e.$set(e.editCountryPopup,"countryName",t)},expression:"editCountryPopup.countryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"末级区域:","label-width":e.formLabelWidth}},[a("el-radio-group",{staticClass:"virtualDepartment",model:{value:e.editCountryPopup.isLeaf,callback:function(t){e.$set(e.editCountryPopup,"isLeaf",t)},expression:"editCountryPopup.isLeaf"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"英文名:","label-width":e.formLabelWidth,prop:"englishName"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.editCountryPopup.englishName,callback:function(t){e.$set(e.editCountryPopup,"englishName",t)},expression:"editCountryPopup.englishName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文全拼:","label-width":e.formLabelWidth,prop:"pinyin"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.editCountryPopup.pinyin,callback:function(t){e.$set(e.editCountryPopup,"pinyin",t)},expression:"editCountryPopup.pinyin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"首字母:","label-width":e.formLabelWidth,prop:"initials"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.editCountryPopup.initials,callback:function(t){e.$set(e.editCountryPopup,"initials",t)},expression:"editCountryPopup.initials"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"首拼:","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.editCountryPopup.initial,callback:function(t){e.$set(e.editCountryPopup,"initial",t)},expression:"editCountryPopup.initial"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码:","label-width":e.formLabelWidth,prop:"code"}},[a("el-input",{staticClass:"country_input",attrs:{clearable:""},model:{value:e.editCountryPopup.code,callback:function(t){e.$set(e.editCountryPopup,"code",t)},expression:"editCountryPopup.code"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"Determine",on:{click:function(t){e.editState=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"Determine",attrs:{type:"primary"},on:{click:function(t){e.countryForm("editCountryPopup")}}},[e._v("确 定")])],1)],1)],2)},staticRenderFns:[]};var W=a("VU/8")(V,H,!1,function(e){a("rxmx")},"data-v-f4459268",null).exports,G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"big"},[a("div",{staticClass:"top"},[a("el-button",{staticClass:"add-classification",attrs:{type:"primary"},on:{click:function(t){e.addClassification=!0}}},[e._v("添加分类")])],1),e._v(" "),a("div",{staticClass:"bottom_customArea_list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.classificationTable,"cell-style":e.bottom_table,"span-method":e.objectSpanMethod}},[a("el-table-column",{attrs:{prop:"classification",label:"分类",align:"center"}},[a("el-table-column",{attrs:{label:"名称",prop:"classificationName",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"father"},[a("span",{staticClass:"name"},[e._v(e._s(t.row.classificationName))]),e._v(" "),a("span",{staticClass:"icon"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.editClassification=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-remove",on:{click:e.removeClassification}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus",on:{click:function(t){e.addGrouping=!0}}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"排序",prop:"classificationRank",align:"center"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"grouping",label:"分组",align:"center"}},[a("el-table-column",{attrs:{label:"名称",prop:"groupingName",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"father"},[a("span",{staticClass:"name"},[e._v(e._s(t.row.groupingName))]),e._v(" "),a("span",{staticClass:"icon"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.editGrouping=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-remove",on:{click:e.removeGrouping}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus",on:{click:function(t){e.addCity=!0}}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"排序",prop:"groupingRank",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"分组url",prop:"groupingUrl",align:"center",width:"618"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"city",label:"城市",align:"center"}},[a("el-table-column",{attrs:{label:"名称",prop:"cityName",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"father"},[a("span",{staticClass:"name"},[e._v(e._s(t.row.cityName))]),e._v(" "),a("span",{staticClass:"icon"},[a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.editCity=!0}}}),e._v(" "),a("i",{staticClass:"el-icon-remove",on:{click:e.removeCity}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"排序",prop:"cityRank",align:"center"}})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","page-sizes":[100,200,300,400],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:400}})],1)],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"添加分类","custom-class":"city_list",visible:e.addClassification,width:""},on:{"update:visible":function(t){e.addClassification=t}}},[a("el-form",{ref:"form",staticStyle:{"padding-left":"79px"},attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{staticClass:"boom",attrs:{label:"分类名称：",prop:"classificationName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.classificationName,callback:function(t){e.$set(e.form,"classificationName",t)},expression:"form.classificationName"}})],1),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"排序：","label-width":e.formLabelWidth,prop:"classificationRank"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.classificationRank,callback:function(t){e.$set(e.form,"classificationRank",t)},expression:"form.classificationRank"}})],1)],1),e._v(" "),a("div",{staticClass:"classification-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.addClassification_ceil("form")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.addsave("form")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"编辑分类","custom-class":"city_list",visible:e.editClassification},on:{"update:visible":function(t){e.editClassification=t}}},[a("el-form",{ref:"editForm",staticStyle:{"padding-left":"79px"},attrs:{model:e.editForm,rules:e.rules}},[a("el-form-item",{staticClass:"boom",attrs:{label:"分类名称：",prop:"classificationName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.classificationName,callback:function(t){e.$set(e.editForm,"classificationName",t)},expression:"editForm.classificationName"}})],1),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"排序：","label-width":e.formLabelWidth,prop:"classificationRank"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.classificationRank,callback:function(t){e.$set(e.editForm,"classificationRank",t)},expression:"editForm.classificationRank"}})],1)],1),e._v(" "),a("div",{staticClass:"classification-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.editClassification_ceil("editForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.editsave("editForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"添加分组","custom-class":"city_list",visible:e.addGrouping,width:"580px"},on:{"update:visible":function(t){e.addGrouping=t}}},[a("el-form",{ref:"addGroup",staticStyle:{"padding-left":"79px"},attrs:{model:e.addGroup,rules:e.rules}},[a("el-form-item",{staticClass:"boom",attrs:{label:"分类：","label-width":e.formLabelWidth}},[a("span",{staticClass:"zoon"},[e._v("国内")])]),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"分组名称：","label-width":e.formLabelWidth,prop:"groupingName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addGroup.groupingName,callback:function(t){e.$set(e.addGroup,"groupingName",t)},expression:"addGroup.groupingName"}})],1),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"排序：","label-width":e.formLabelWidth,prop:"groupingRank"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addGroup.groupingRank,callback:function(t){e.$set(e.addGroup,"groupingRank",t)},expression:"addGroup.groupingRank"}})],1),e._v(" "),a("el-form-item",{staticClass:"url",attrs:{label:"url：","label-width":e.formLabelWidth,prop:"groupingUrl"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addGroup.groupingUrl,callback:function(t){e.$set(e.addGroup,"groupingUrl",t)},expression:"addGroup.groupingUrl"}})],1)],1),e._v(" "),a("div",{staticClass:"classification-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.addGrouping_ceil("addGroup")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.addGroupingSave("addGroup")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"编辑分组","custom-class":"city_list",visible:e.editGrouping,width:"580px"},on:{"update:visible":function(t){e.editGrouping=t}}},[a("el-form",{ref:"editGroup",staticStyle:{"padding-left":"79px"},attrs:{model:e.editGroup,rules:e.rules}},[a("el-form-item",{staticClass:"boom",attrs:{label:"分类：","label-width":e.formLabelWidth}},[a("span",{staticClass:"zoon"},[e._v("国内")])]),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"分组名称：","label-width":e.formLabelWidth,prop:"groupingName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editGroup.groupingName,callback:function(t){e.$set(e.editGroup,"groupingName",t)},expression:"editGroup.groupingName"}})],1),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"排序：","label-width":e.formLabelWidth,prop:"groupingRank"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editGroup.groupingRank,callback:function(t){e.$set(e.editGroup,"groupingRank",t)},expression:"editGroup.groupingRank"}})],1),e._v(" "),a("el-form-item",{staticClass:"url",attrs:{label:"url：","label-width":e.formLabelWidth,prop:"groupingUrl"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editGroup.groupingUrl,callback:function(t){e.$set(e.editGroup,"groupingUrl",t)},expression:"editGroup.groupingUrl"}})],1)],1),e._v(" "),a("div",{staticClass:"classification-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.editGrouping_ceil("editGroup")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.editGroupingSave("editGroup")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"编辑城市","custom-class":"city_list",visible:e.editCity},on:{"update:visible":function(t){e.editCity=t}}},[a("el-form",{ref:"editCitys",staticStyle:{"padding-left":"79px"},attrs:{model:e.editCitys,rules:e.rules}},[a("el-form-item",{staticClass:"boom",attrs:{label:"分类：","label-width":e.formLabelWidth}},[a("span",{staticClass:"zoonA"},[e._v("国内")])]),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"分组：","label-width":e.formLabelWidth}},[a("span",{staticClass:"zoonB"},[e._v("直辖市")])]),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"城市名称：","label-width":e.formLabelWidth}},[a("span",{staticClass:"zoonA"},[e._v("北京")])]),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"排序：","label-width":e.formLabelWidth,prop:"cityRank"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editCitys.cityRank,callback:function(t){e.$set(e.editCitys,"cityRank",t)},expression:"editCitys.cityRank"}})],1)],1),e._v(" "),a("div",{staticClass:"classification-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.editCity_ceil("editCitys")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.editCitySave("editCitys")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"Popup",attrs:{title:"添加城市","custom-class":"city_list",visible:e.addCity},on:{"update:visible":function(t){e.addCity=t}}},[a("el-form",{ref:"addCitys",staticStyle:{"padding-left":"79px"},attrs:{model:e.addCitys,rules:e.rules}},[a("el-form-item",{staticClass:"boom",attrs:{label:"分类：","label-width":e.formLabelWidth}},[a("span",{staticClass:"zoonA"},[e._v("国内")])]),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"分组：","label-width":e.formLabelWidth}},[a("span",{staticClass:"zoonB"},[e._v("直辖市")])]),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"选择城市：","label-width":e.formLabelWidth,prop:"cityName"}},[a("el-cascader",{staticClass:"cascader",attrs:{placeholder:"请选择",options:e.options,filterable:"","change-on-select":""},model:{value:e.addCitys.cityName,callback:function(t){e.$set(e.addCitys,"cityName",t)},expression:"addCitys.cityName"}})],1),e._v(" "),a("el-form-item",{staticClass:"boom",attrs:{label:"排序：","label-width":e.formLabelWidth,prop:"cityRank"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addCitys.cityRank,callback:function(t){e.$set(e.addCitys,"cityRank",t)},expression:"addCitys.cityRank"}})],1)],1),e._v(" "),a("div",{staticClass:"classification-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oppp",on:{click:function(t){e.addCity_ceil("addCitys")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"oppp",attrs:{type:"primary"},on:{click:function(t){e.addCitySave("addCitys")}}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var J=a("VU/8")({data:function(){return{classificationTable:[{classificationName:"国内",classificationRank:"01",groupingName:"直辖市",groupingRank:"01",groupingUrl:"http://www.dytyou.com/gonglue/jianjie/city11893-beijing.html",cityName:"北京",cityRank:"01"},{cityName:"天津",cityRank:"02"},{cityName:"上海",cityRank:"03"},{groupingName:"四川、重庆",groupingRank:"02",groupingUrl:"http://www.dytyou.com/gonglue/jianjie/city11893-beijing.html",cityName:"成都",cityRank:"01"},{cityName:"九寨沟",cityRank:"02"},{cityName:"都江堰",cityRank:"03"},{cityName:"稻城亚丁",cityRank:"04"},{groupingName:"港澳台",groupingRank:"03",groupingUrl:"http://www.dytyou.com/gonglue/jianjie/city11893-beijing.html",cityName:"香港",cityRank:"01"},{cityName:"澳门",cityRank:"02"},{classificationName:"欧洲",classificationRank:"02",groupingName:"北欧",groupingRank:"01",groupingUrl:"http://www.dytyou.com/gonglue/jianjie/city11893-beijing.html",cityName:"冰岛",cityRank:"01"},{cityName:"芬兰",cityRank:"02"},{cityName:"挪威",cityRank:"03"},{cityName:"丹麦",cityRank:"04"},{cityName:"瑞典",cityRank:"05"}],options:[{value:"zhongguo",label:"中国",children:[{value:"henansheng",label:"河南省",children:[{value:"shijiazhuangshi",label:"石家庄市"},{value:"tangshan",label:"唐山"},{value:"qinhuangdao",label:"秦皇岛"},{value:"handan",label:"邯郸"}]},{value:"jilinsheng",label:"吉林省"}]},{value:"riben",label:"日本"}],addClassification:!1,form:{classificationName:"",classificationRank:""},editClassification:!1,editForm:{classificationName:"国内",classificationRank:"01"},addGrouping:!1,addGroup:{groupingName:"",groupingRank:"",groupingUrl:""},editGrouping:!1,editGroup:{groupingName:"直辖市",groupingRank:"01",groupingUrl:"http://www.dytyou.com/gonglue/jianjie/city11893-beijing.html"},editCity:!1,editCitys:{cityRank:"01"},addCity:!1,addCitys:{cityRank:""},formLabelWidth:"200px",bottom_table:{height:"36px",padding:"0"},rules:{classificationName:[{required:!0,message:"请输入分类名称",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,10}$/,message:"请输入2-10位汉字"}],classificationRank:[{required:!0,message:"排序不能为空",trigger:"blur"}],groupingName:[{required:!0,message:"请输入分组名称",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,10}$/,message:"请输入2-10位汉字"}],groupingRank:[{required:!0,message:"排序不能为空",trigger:"blur"}],cityRank:[{required:!0,message:"排序不能为空",trigger:"blur"}],cityName:[{required:!0,message:"城市必选",trigger:"blur"}]}}},methods:{addsave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$message.success("添加成功"),t.addClassification=!1})},editsave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$message.success("修改成功"),t.editClassification=!1})},addGroupingSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$message.success("添加成功"),t.addGrouping=!1})},editGroupingSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$message.success("修改成功"),t.editGrouping=!1})},addCitySave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$message.success("添加成功"),t.addCity=!1})},editCitySave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$message.success("修改成功"),t.editCity=!1})},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;return 0===a||1===a?0===t?{rowspan:9,colspan:1}:9===t?{rowspan:5,colspan:1}:{rowspan:0,colspan:0}:4===a||3===a||2===a?0===t?{rowspan:3,colspan:1}:3===t?{rowspan:4,colspan:1}:7===t?{rowspan:2,colspan:1}:9===t?{rowspan:5,colspan:1}:{rowspan:0,colspan:0}:void 0},removeClassification:function(){var e=this;this.$confirm("是否删除该分类？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},removeGrouping:function(){var e=this;this.$confirm("是否删除该分组?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},removeCity:function(){var e=this;this.$confirm("是否删除该城市?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addClassification_ceil:function(e){this.addClassification=!1,this.$refs[e].resetFields()},editClassification_ceil:function(e){this.editClassification=!1,this.$refs[e].resetFields()},addGrouping_ceil:function(e){this.addGrouping=!1,this.$refs[e].resetFields()},editGrouping_ceil:function(e){this.editGrouping=!1,this.$refs[e].resetFields()},addCity_ceil:function(e){this.addCity=!1,this.$refs[e].resetFields()},editCity_ceil:function(e){this.editCity=!1,this.$refs[e].resetFields()}}},G,!1,function(e){a("4ckE")},"data-v-4bb34626",null).exports,Y={render:function(){var e=this.$createElement;return(this._self._c||e)("transition",[this._t("default")],2)},staticRenderFns:[]};var X=a("VU/8")({name:"FadeAnimation"},Y,!1,function(e){a("auut")},"data-v-056b7941",null).exports,Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户管理",name:"first"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"标签"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加")]),e._v(" "),a("el-checkbox-group",{model:{value:e.first,callback:function(t){e.first=t},expression:"first"}},[a("el-checkbox",{attrs:{label:"复选框 A"}}),e._v(" "),a("el-checkbox",{attrs:{label:"复选框 B"}}),e._v(" "),a("el-checkbox",{attrs:{label:"复选框 C"}})],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"配置管理",name:"second"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"标签"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加")]),e._v(" "),a("el-checkbox-group",{model:{value:e.first,callback:function(t){e.first=t},expression:"first"}},[a("el-checkbox",{attrs:{label:"复选框 A"}}),e._v(" "),a("el-checkbox",{attrs:{label:"复选框 B"}}),e._v(" "),a("el-checkbox",{attrs:{label:"复选框 C"}})],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"角色管理",name:"third"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"标签"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加")]),e._v(" "),a("el-checkbox-group",{model:{value:e.first,callback:function(t){e.first=t},expression:"first"}},[a("el-checkbox",{attrs:{label:"复选框 A"}}),e._v(" "),a("el-checkbox",{attrs:{label:"复选框 B"}}),e._v(" "),a("el-checkbox",{attrs:{label:"复选框 C"}})],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"定时任务补偿",name:"fourth"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"标签"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加")]),e._v(" "),a("el-checkbox-group",{model:{value:e.first,callback:function(t){e.first=t},expression:"first"}},[a("el-checkbox",{attrs:{label:"复选框 A"}}),e._v(" "),a("el-checkbox",{attrs:{label:"复选框 B"}}),e._v(" "),a("el-checkbox",{attrs:{label:"复选框 C"}})],1)],1)],1)],1)],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"150px"}},[e._v("\n      取消\n     ")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("\n      确认\n     ")])],1)},staticRenderFns:[]};var Z=a("VU/8")({data:function(){return{form:{},activeName:"first",first:[]}}},Q,!1,function(e){a("iLpS")},null,null).exports,K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"operation"},[a("el-button",{staticStyle:{border:"1px solid #3095fa",color:"#3095fa"},on:{click:function(t){e.$emit("closeButton",!1)}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handSever}},[e._v("保存")])],1),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",[a("span",{staticClass:"formItem"},[e._v("星期一")]),e._v(" "),a("div",{staticClass:"formTime"},[e._l(e.form.one,function(t,i){return a("div",{key:i,class:e.timeDiv+i},[a("el-input",{staticClass:"form-input",model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"8px"}},[e._v("至")]),e._v(" "),a("el-input",{staticClass:"form-input",model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}}),e._v(" "),a("span",{staticClass:"el-icon-remove",on:{click:function(t){e.closeMondayOne(i)}}})],1)}),e._v(" "),e.isOne?a("el-button",{class:e.formButtonOne,attrs:{plain:""},on:{click:e.addlistOne}},[e._v("添加时间")]):e._e(),e._v(" "),a("el-checkbox",{class:e.formCheckOne,on:{change:e.handChangeOne},model:{value:e.form.alltimeOne,callback:function(t){e.$set(e.form,"alltimeOne",t)},expression:"form.alltimeOne"}},[e._v("全天营业")])],2)]),e._v(" "),a("el-form-item",[a("span",{staticClass:"formItem"},[e._v("星期二")]),e._v(" "),a("div",{staticClass:"formTime"},[e._l(e.form.tue,function(t,i){return a("div",{key:i,class:e.timeDiv+i},[a("el-input",{staticClass:"form-input",model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"8px"}},[e._v("至")]),e._v(" "),a("el-input",{staticClass:"form-input",model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}}),e._v(" "),a("span",{staticClass:"el-icon-remove",on:{click:function(t){e.closeMondayTue(i)}}})],1)}),e._v(" "),e.isTue?a("el-button",{class:e.formButtonTue,attrs:{plain:""},on:{click:e.addlistTue}},[e._v("添加时间")]):e._e(),e._v(" "),a("el-checkbox",{class:e.formCheckTue,on:{change:e.handChangeTue},model:{value:e.form.alltimeTue,callback:function(t){e.$set(e.form,"alltimeTue",t)},expression:"form.alltimeTue"}},[e._v("全天营业")])],2)]),e._v(" "),a("el-form-item",[a("span",{staticClass:"formItem"},[e._v("星期三")]),e._v(" "),a("div",{staticClass:"formTime"},[e._l(e.form.wed,function(t,i){return a("div",{key:i,class:e.timeDiv+i},[a("el-input",{staticClass:"form-input",model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"8px"}},[e._v("至")]),e._v(" "),a("el-input",{staticClass:"form-input",model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}}),e._v(" "),a("span",{staticClass:"el-icon-remove",on:{click:function(t){e.closeMondayWed(i)}}})],1)}),e._v(" "),e.isWed?a("el-button",{class:e.formButtonWed,attrs:{plain:""},on:{click:e.addlistWed}},[e._v("添加时间")]):e._e(),e._v(" "),a("el-checkbox",{class:e.formCheckWed,on:{change:e.handChangeWed},model:{value:e.form.alltimeWed,callback:function(t){e.$set(e.form,"alltimeWed",t)},expression:"form.alltimeWed"}},[e._v("全天营业")])],2)]),e._v(" "),a("el-form-item",[a("span",{staticClass:"formItem"},[e._v("星期四")]),e._v(" "),a("div",{staticClass:"formTime"},[e._l(e.form.thur,function(t,i){return a("div",{key:i,class:e.timeDiv+i},[a("el-input",{staticClass:"form-input",model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"8px"}},[e._v("至")]),e._v(" "),a("el-input",{staticClass:"form-input",model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}}),e._v(" "),a("span",{staticClass:"el-icon-remove",on:{click:function(t){e.closeMondayThur(i)}}})],1)}),e._v(" "),e.isThur?a("el-button",{class:e.formButtonThur,attrs:{plain:""},on:{click:e.addlistThur}},[e._v("添加时间")]):e._e(),e._v(" "),a("el-checkbox",{class:e.formCheckThur,on:{change:e.handChangeThur},model:{value:e.form.alltimeThur,callback:function(t){e.$set(e.form,"alltimeThur",t)},expression:"form.alltimeThur"}},[e._v("全天营业")])],2)]),e._v(" "),a("el-form-item",[a("span",{staticClass:"formItem"},[e._v("星期五")]),e._v(" "),a("div",{staticClass:"formTime"},[e._l(e.form.fir,function(t,i){return a("div",{key:i,class:e.timeDiv+i},[a("el-input",{staticClass:"form-input",model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"8px"}},[e._v("至")]),e._v(" "),a("el-input",{staticClass:"form-input",model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}}),e._v(" "),a("span",{staticClass:"el-icon-remove",on:{click:function(t){e.closeMondayFir(i)}}})],1)}),e._v(" "),e.isFir?a("el-button",{class:e.formButtonFir,attrs:{plain:""},on:{click:e.addlistFir}},[e._v("添加时间")]):e._e(),e._v(" "),a("el-checkbox",{class:e.formCheckFir,on:{change:e.handChangeFir},model:{value:e.form.alltimeFir,callback:function(t){e.$set(e.form,"alltimeFir",t)},expression:"form.alltimeFir"}},[e._v("全天营业")])],2)]),e._v(" "),a("el-form-item",[a("span",{staticClass:"formItem"},[e._v("星期六")]),e._v(" "),a("div",{staticClass:"formTime"},[e._l(e.form.sat,function(t,i){return a("div",{key:i,class:e.timeDiv+i},[a("el-input",{staticClass:"form-input",model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"8px"}},[e._v("至")]),e._v(" "),a("el-input",{staticClass:"form-input",model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}}),e._v(" "),a("span",{staticClass:"el-icon-remove",on:{click:function(t){e.closeMondaySat(i)}}})],1)}),e._v(" "),e.isSat?a("el-button",{class:e.formButtonSat,attrs:{plain:""},on:{click:e.addlistSat}},[e._v("添加时间")]):e._e(),e._v(" "),a("el-checkbox",{class:e.formCheckSat,on:{change:e.handChangeSat},model:{value:e.form.alltimeSat,callback:function(t){e.$set(e.form,"alltimeSat",t)},expression:"form.alltimeSat"}},[e._v("全天营业")])],2)]),e._v(" "),a("el-form-item",[a("span",{staticClass:"formItem"},[e._v("星期日")]),e._v(" "),a("div",{staticClass:"formTime"},[e._l(e.form.sun,function(t,i){return a("div",{key:i,class:e.timeDiv+i},[a("el-input",{staticClass:"form-input",model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"8px"}},[e._v("至")]),e._v(" "),a("el-input",{staticClass:"form-input",model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}}),e._v(" "),a("span",{staticClass:"el-icon-remove",on:{click:function(t){e.closeMondaySun(i)}}})],1)}),e._v(" "),e.isSun?a("el-button",{class:e.formButtonSun,attrs:{plain:""},on:{click:e.addlistSun}},[e._v("添加时间")]):e._e(),e._v(" "),a("el-checkbox",{class:e.formCheckSun,on:{change:e.handChangeSun},model:{value:e.form.alltimeSun,callback:function(t){e.$set(e.form,"alltimeSun",t)},expression:"form.alltimeSun"}},[e._v("全天营业")])],2)]),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"其他说明:"}},[a("el-input",{staticStyle:{width:"705px"},attrs:{rows:10,type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)},staticRenderFns:[]};var ee=a("VU/8")({name:"OpenTime",props:["dateTime","isWatch"],data:function(){return{timeDiv:"timeDiv",formButtonOne:"formButton1",formButtonTue:"formButton1",formButtonWed:"formButton1",formButtonThur:"formButton1",formButtonFir:"formButton1",formButtonSat:"formButton1",formButtonSun:"formButton1",formCheckOne:"formCheck",formCheckTue:"formCheck",formCheckWed:"formCheck",formCheckThur:"formCheck",formCheckFir:"formCheck",formCheckSat:"formCheck",formCheckSun:"formCheck",isOne:!0,isTue:!0,isWed:!0,isThur:!0,isFir:!0,isSat:!0,isSun:!0,mondayList:[],tue:[],wed:[],thur:[],fir:[],sat:[],sun:[],form:{one:[{start:"",end:""}],tue:[{start:"",end:""}],wed:[{start:"",end:""}],thur:[{start:"",end:""}],fir:[{start:"",end:""}],sat:[{start:"",end:""}],sun:[{start:"",end:""}],alltimeOne:!1,alltimeTue:!1,alltimeWed:!1,alltimeThur:!1,alltimeFir:!1,alltimeSat:!1,alltimeSun:!1,desc:""}}},created:function(){this.changeData()},methods:{changeData:function(){var e=this.dateTime;0!=e.one.length&&(e.one[0].alltime?(this.form.alltimeOne=!0,this.handChangeOne(!0)):(this.form.one=e.one,this.listClassOne(this.form.one))),0!=e.tue.length&&(e.tue[0].alltime?(this.form.alltimeTue=!0,this.handChangeTue(!0)):(this.form.tue=e.tue,this.listClassTue(this.form.tue))),0!=e.wed.length&&(e.wed[0].alltime?(this.form.alltimeWed=!0,this.handChangeWed(!0)):(this.form.wed=e.wed,this.listClassWed(this.form.wed))),0!=e.thur.length&&(e.thur[0].alltime?(this.form.alltimeThur=!0,this.handChangeThur(!0)):(this.form.thur=e.thur,this.listClassThur(this.form.thur))),0!=e.fir.length&&(e.fir[0].alltime?(this.form.alltimeFir=!0,this.handChangeFir(!0)):(this.form.fir=e.fir,this.listClassFir(this.form.fir))),0!=e.sat.length&&(e.sat[0].alltime?(this.form.alltimeSat=!0,this.handChangeSat(!0)):(this.form.sat=e.sat,this.listClassSat(this.form.sat))),0!=e.sun.length&&(e.sun[0].alltime?(this.form.alltimeSun=!0,this.handChangeSun(!0)):(this.form.sun=e.sun,this.listClassSun(this.form.sun))),this.form.desc=e.desc},listClassOne:function(e){0==e.length?this.formButtonOne="formButton0":1==e.length?(this.formButtonOne="formButton1",this.formCheckOne="formCheck"):2==e.length?this.formButtonOne="formButton2":3==e.length?(this.formButtonOne="formButton3",this.formCheckOne="formCheck",this.isOne=!0):4==e.length&&(this.isOne=!1,this.formCheckOne="formCheck1")},listClassTue:function(e){0==e.length?this.formButtonTue="formButton0":1==e.length?(this.formButtonTue="formButton1",this.formCheckTue="formCheck"):2==e.length?this.formButtonTue="formButton2":3==e.length?(this.formButtonTue="formButton3",this.formCheckTue="formCheck",this.isTue=!0):4==e.length&&(this.isTue=!1,this.formCheckTue="formCheck1")},listClassWed:function(e){0==e.length?this.formButtonWed="formButton0":1==e.length?(this.formButtonWed="formButton1",this.formCheckWed="formCheck"):2==e.length?this.formButtonWed="formButton2":3==e.length?(this.formButtonWed="formButton3",this.formCheckWed="formCheck",this.isWed=!0):4==e.length&&(this.isWed=!1,this.formCheckWed="formCheck1")},listClassThur:function(e){0==e.length?this.formButtonThur="formButton0":1==e.length?(this.formButtonThur="formButton1",this.formCheckThur="formCheck"):2==e.length?this.formButtonThur="formButton2":3==e.length?(this.formButtonThur="formButton3",this.formCheckThur="formCheck",this.isThur=!0):4==e.length&&(this.isThur=!1,this.formCheckThur="formCheck1")},listClassFir:function(e){0==e.length?this.formButtonFir="formButton0":1==e.length?(this.formButtonFir="formButton1",this.formCheckFir="formCheck"):2==e.length?this.formButtonFir="formButton2":3==e.length?(this.formButtonFir="formButton3",this.formCheckFir="formCheck",this.isFir=!0):4==e.length&&(this.isFir=!1,this.formCheckFir="formCheck1")},listClassSat:function(e){0==e.length?this.formButtonSat="formButton0":1==e.length?(this.formButtonSat="formButton1",this.formCheckSat="formCheck"):2==e.length?this.formButtonSat="formButton2":3==e.length?(this.formButtonSat="formButton3",this.formCheckSat="formCheck",this.isSat=!0):4==e.length&&(this.isSat=!1,this.formCheckSat="formCheck1")},listClassSun:function(e){0==e.length?this.formButtonSun="formButton0":1==e.length?(this.formButtonSun="formButton1",this.formCheckSun="formCheck"):2==e.length?this.formButtonSun="formButton2":3==e.length?(this.formButtonSun="formButton3",this.formCheckSun="formCheck",this.isSun=!0):4==e.length&&(this.isSun=!1,this.formCheckSun="formCheck1")},addlistOne:function(){this.form.one.push({start:"",end:""}),this.listClassOne(this.form.one)},closeMondayOne:function(e){this.form.one.splice(e,1),this.listClassOne(this.form.one)},handChangeOne:function(e){e?(this.isOne=!1,this.form.one=[],this.formCheckOne="formCheck1"):(this.form.one.push({start:"",end:""}),this.isOne=!0,this.formButtonOne="formButton1",this.formCheckOne="formCheck")},addlistTue:function(){this.form.tue.push({start:"",end:""}),this.listClassTue(this.form.tue)},closeMondayTue:function(e){this.form.tue.splice(e,1),this.listClassTue(this.form.tue)},handChangeTue:function(e){e?(this.isTue=!1,this.form.tue=[],this.formCheckTue="formCheck1"):(this.form.tue.push({start:"",end:""}),this.isTue=!0,this.formButtonTue="formButton1",this.formCheckTue="formCheck")},addlistWed:function(){this.form.wed.push({start:"",end:""}),this.listClassWed(this.form.wed)},closeMondayWed:function(e){this.form.wed.splice(e,1),this.listClassWed(this.form.wed)},handChangeWed:function(e){e?(this.isWed=!1,this.form.wed=[],this.formCheckWed="formCheck1"):(this.form.wed.push({start:"",end:""}),this.isWed=!0,this.formButtonWed="formButton1",this.formCheckWed="formCheck")},addlistThur:function(){this.form.thur.push({start:"",end:""}),this.listClassThur(this.form.thur)},closeMondayThur:function(e){this.form.thur.splice(e,1),this.listClassThur(this.form.thur)},handChangeThur:function(e){e?(this.isThur=!1,this.form.thur=[],this.formCheckThur="formCheck1"):(this.form.thur.push({start:"",end:""}),this.isThur=!0,this.formButtonThur="formButton1",this.formCheckThur="formCheck")},addlistFir:function(){this.form.fir.push({start:"",end:""}),this.listClassFir(this.form.fir)},closeMondayFir:function(e){this.form.fir.splice(e,1),this.listClassFir(this.form.fir)},handChangeFir:function(e){e?(this.isFir=!1,this.form.fir=[],this.formCheckFir="formCheck1"):(this.form.fir.push({start:"",end:""}),this.isFir=!0,this.formButtonFir="formButton1",this.formCheckFir="formCheck")},addlistSat:function(){this.form.sat.push({start:"",end:""}),this.listClassSat(this.form.sat)},closeMondaySat:function(e){this.form.sat.splice(e,1),this.listClassSat(this.form.sat)},handChangeSat:function(e){e?(this.isSat=!1,this.form.sat=[],this.formCheckSat="formCheck1"):(this.form.sat.push({start:"",end:""}),this.isSat=!0,this.formButtonSat="formButton1",this.formCheckSat="formCheck")},addlistSun:function(){this.form.sun.push({start:"",end:""}),this.listClassSun(this.form.sun)},closeMondaySun:function(e){this.form.sun.splice(e,1),this.listClassSun(this.form.sun)},handChangeSun:function(e){e?(this.isSun=!1,this.form.sun=[],this.formCheckSun="formCheck1"):(this.form.sun.push({start:"",end:""}),this.isSun=!0,this.formButtonSun="formButton1",this.formCheckSun="formCheck")},handSever:function(){this.$emit("timeList",this.form)}}},K,!1,function(e){a("+EE8")},"data-v-3c590982",null).exports,te=a("DNVT"),ae=(a("mgS3"),{props:["chineseName","imgData"],data:function(){return{checkList:[],picSrc:"http://192.168.1.186:3009/upload",list:[],lists:[],props1:{label:"name",isLeaf:"leaf"},data:"",theContinent:"",node:"",resolve:"",level:"",pageSize:10,pageIndex:1,total:0,albumList:[],searchName:"",picForm:{name:"",type:"",destination:"请选择目的地",destinationId:0},formLabelWidth:"100px",addAlbum:!1,leftTree1:!1,albumtype:[],geography:"",getAlbumForm:!1,albumInfo:{},leftTree2:!1,albumId:0,albumDisabled:!0,saveAlbumBut:"修改属性",albumNameEmpty:!1,picInfoShow:!0,companyList:[],picDisabled:!0,savPicBut:"修改属性",picNameEmpty:!1,pictInfo:{},checkedCompany:[],activeIndex:0,getPictureForm:!1,fileList:[],insertCheCompany:[],uid:0,len:0,time:0,rules:{name:[{required:!0,message:"请输入相册名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],destination:[{required:!0,message:"请选择目的地",trigger:"blur"}]}}},watch:{chineseName:function(){this.searchName=this.chineseName},imgData:function(){this.checkList=this.imgData}},created:function(){this.checkList=this.imgData,this.searchName=this.chineseName,this.albumtypeget()},methods:{handleSave:function(){this.getAlbumForm=!1,this.$emit("closeButton",!1),this.$emit("checkList",this.checkList)},handleSizeChange:function(e){this.pageSize=e,this.pageIndex=1,this.albumPage(1,e,this.data.id,this.searchName)},handleCurrentChange:function(e){this.albumPage(e,this.pageSize,this.data.id,this.searchName)},albumtypeget:function(){var e=this;this.$http.post("http://192.168.1.186:3024/album/api/albumtypeget").then(function(t){1==t.data.isSuccess&&(e.albumtype=t.data.objects)}).catch(function(e){console.log(e)})},loadNode1:function(e,t){var a=this;this.node=e.data,this.resolve=t,this.level=e.level,0===e.level&&(this.list=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:-1}}).then(function(e){for(var i=0;i<e.data.objects.length;i++)a.list.push({name:e.data.objects[i].areaName,key:i,id:e.data.objects[i].id,isLeaf:e.data.objects[i].isLeaf,Hierarchy:0});t(a.list)}).catch(function(e){console.log(e)})),e.level>=1&&this.getSon(e.data.key,e.data.label,e.data.id,e.data.isLeaf,t,e.level)},getSon:function(e,t,a,i,l,s){var o=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:a}}).then(function(e){if(o.lists=[],1==e.data.isSuccess)for(var t=0;t<e.data.objects.length;t++)0==e.data.objects[t].isDeleted&&o.lists.push({name:e.data.objects[t].areaName,key:t,id:e.data.objects[t].id,isLeaf:e.data.objects[t].isLeaf,leaf:2!=e.data.objects[t].isLeaf,Hierarchy:s});setTimeout(function(){l(o.lists)},200)}).catch(function(e){console.log(e)})},treeClick:function(e,t){1==e.isLeaf&&(1==this.getAlbumForm?(this.albumInfo.areaName=e.name,this.albumInfo.areaID=e.id,this.leftTree2=!1):(this.data=e,this.geography=1,this.searchName="",this.albumPage(this.pageIndex,this.pageSize,this.data.id?this.data.id:0,this.searchName)))},sealbumPage:function(){this.geography=1,this.albumPage(this.pageIndex,this.pageSize,0,this.searchName)},albumPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.$http.post("http://192.168.1.186:3024/album/api/page",{pageIndex:e,pageSize:t,object:{name:l,areaID:i,isDeleted:0}}).then(function(e){1==e.data.isSuccess?(a.albumList=e.data.objects,a.total=e.data.total):(a.albumList=[],a.total=0)}).catch(function(e){console.log(e)})},getAlbum:function(e){var t=this;this.$http.post("http://192.168.1.186:3024/album/api/get",{id:e}).then(function(a){1==a.data.isSuccess&&(t.albumInfo=a.data.object,t.albumId=e,t.getAlbumForm=!0,t.getCompany(),setTimeout(function(){t.mySwiper(0)},100),0!=a.data.object.pictures.length?(t.getPicture(0),t.picInfoShow=!0):t.picInfoShow=!1)}).catch(function(e){console.log(e)})},albumInfoClose:function(){this.getAlbumForm=!1,this.leftTree2=!1,this.albumDisabled=!0,this.saveAlbumBut="修改属性"},mySwiper:function(e){var t=new te.a(".gallery-thumbs",{spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!0,initialSlide:e,observer:!0,observeParents:!0});new te.a(".gallery-top",{spaceBetween:10,initialSlide:e,observer:!0,observeParents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:t}})},getPicture:function(e){var t=this;this.picDisabled=!0,this.savPicBut="修改属性",this.$http.post("http://192.168.1.186:3024/picture/api/get",{id:this.albumInfo.pictures[e].id}).then(function(a){if(1==a.data.isSuccess){t.pictInfo=a.data.object,t.checkedCompany=[];for(var i=0;i<t.pictInfo.companies.length;i++)t.checkedCompany.push(t.pictInfo.companies[i].company);t.activeIndex=e}})},getCompany:function(){var e=this;this.$http.post("http://192.168.1.186:3024/picture/api/companyget").then(function(t){e.insertCheCompany=[],e.companyList=t.data.objects;for(var a=0;a<e.companyList.length;a++)e.insertCheCompany.push(e.companyList[a].id)})}}}),ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main-container"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header_seach"},[a("div",{staticClass:"search-input"},[a("el-input",{attrs:{placeholder:"请输入相册名称",clearable:""},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1),e._v(" "),a("div",{staticClass:"search-button"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.sealbumPage}})],1)])]),e._v(" "),a("div",{staticClass:"left-tree"},[a("el-tree",{ref:"refTree",staticClass:"treeDemo",attrs:{props:e.props1,"default-expanded-keys":[1,12,474],load:e.loadNode1,lazy:"","expand-on-click-node":!1,"node-key":"id"},on:{"node-click":e.treeClick}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.geography,expression:"geography == 1"}],staticClass:"address-big"},[e._l(e.albumList,function(t){return a("div",{staticClass:"address-img"},[a("div",{staticClass:"marterialist-img",on:{click:function(a){e.getAlbum(t.id)}}},[t.pictures.length>0?a("img",{attrs:{width:"100%",height:"100%",src:e.picSrc+t.pictures[0].url}}):a("img",{attrs:{width:"100%",height:"100%",src:"../../../static/materialList/nopic.jpg"}})]),e._v(" "),a("div",{staticClass:"introduce"},[e._l(e.albumtype,function(i){return a("div",[t.albumType==i.id?a("div",{staticClass:"label"},[e._v(e._s(i.name))]):e._e()])}),e._v(" "),a("div",{staticClass:"number"},[e._v(e._s(t.pictures.length)+"张")])],2),e._v(" "),a("div",{staticClass:"address-name"},[e._v("\r\n                  "+e._s(t.name)+"\r\n              ")])])}),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)]),e._v(" "),a("el-dialog",{staticClass:"clearfix",staticStyle:{"margin-top":"-50px"},attrs:{title:"相册",visible:e.getAlbumForm,"custom-class":"city_list","append-to-body":!0,width:"1220px"},on:{"update:visible":function(t){e.getAlbumForm=t},close:e.albumInfoClose}},[a("div",{staticClass:"add-address-img"},[a("div",{staticClass:"left-img",staticStyle:{overflow:"auto"}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.albumInfo.pictures,function(t){return a("div",{staticClass:"img-div"},[a("el-checkbox",{staticClass:"img-div-box",attrs:{label:t.id}},[a("img",{attrs:{src:e.picSrc+t.url,width:"220px",height:"147px"}})])],1)}))],1),e._v(" "),a("div",{staticClass:"right-form"},[a("div",{staticClass:"material-message"},[a("div",{staticClass:"album-title"},[a("div",{staticClass:"blue-box"}),e._v(" "),a("div",{staticClass:"album-text"},[e._v("素材信息")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.picInfoShow,expression:"picInfoShow"}],staticClass:"album-form"},[a("div",{staticClass:"album-name1"},[e._v("\r\n                    名称："),a("el-input",{attrs:{placeholder:"请输入素材名称",disabled:e.picDisabled},model:{value:e.pictInfo.name,callback:function(t){e.$set(e.pictInfo,"name",t)},expression:"pictInfo.name"}}),e._v(" "),e.picNameEmpty?a("span",{staticClass:"empty"},[e._v("名称不能为空")]):e._e()],1),e._v(" "),a("div",{staticClass:"album-info"},[a("div",[a("p",{staticClass:"per-title"},[e._v("权限：")]),e._v(" "),a("el-checkbox-group",{staticClass:"company-list",attrs:{disabled:e.picDisabled},model:{value:e.checkedCompany,callback:function(t){e.checkedCompany=t},expression:"checkedCompany"}},e._l(e.companyList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("div",{staticClass:"size"},[e._v("尺寸："+e._s(e.pictInfo.width)+"*"+e._s(e.pictInfo.height))]),e._v(" "),a("div",{staticClass:"size"},[e._v("大小："+e._s(e.pictInfo.length))])])])])]),e._v(" "),a("div",{staticClass:"button-bottom"},[a("el-button",{staticStyle:{width:"130px"},attrs:{plain:""},on:{click:function(t){e.getAlbumForm=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{width:"130px","margin-left":"40px"},attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)])])],1)},staticRenderFns:[]};var le={props:["referenceTime","seasons","crowds","handleEditDate"],components:{LabelSelection:Z,OpenTime:ee,MaterialList:a("VU/8")(ae,ie,!1,function(e){a("KJYY")},"data-v-ddc9dfe8",null).exports},data:function(){var e=this;return{formLabelWidth:"90px",isImgUrlShow:!1,imgUrlShow:"",isShowImg:"",imgUrl:"",imgData:[],showtime:!1,showEdit:!1,imgUpload:!1,hackReset:!0,fileList2:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],vague:[],placeholderValue:"请输入标签",destinationInput:"destination-input",isTag:!1,isSelect:!1,isBlur:!0,inputTag:"",isDataTime:!1,dateTime:[],form:{chineseName:"",englishName:"",areaId:{id:"",value:""},tags:[],lat:"",lng:"",referenceTime:"",seasons:[],crowds:[],openingHours:"",imgs:[],introduction:""},rules:{chineseName:[{pattern:/[\u4e00-\u9fa5]/,message:"请输入中文"},{validator:function(t,a,i){if(!e.form.chineseName&&!e.form.englishName)return i(new Error("中文名称、英文名称至少有一个"));e.form.englishName.match(/[a-zA-Z]/)&&e.$refs.englishName.clearValidate(),i()}}],englishName:[{pattern:/[a-zA-Z]/,message:"请输入英文"},{validator:function(t,a,i){if(!e.form.chineseName&&!e.form.englishName)return i(new Error("中文名称、英文名称至少有一个"));e.form.chineseName.match(/[\u4e00-\u9fa5]/)&&e.$refs.chineseName.clearValidate(),i()}}],areaId:[{validator:function(t,a,i){setTimeout(function(){if(!e.form.areaId.value)return i(new Error("请选择所属地区"));i()},200)},trigger:"blur"}],tags:[{validator:function(t,a,i){if(0==e.form.tags.length)return e.destinationInput="destination-input1",i(new Error("输入至少一条标签数据"));e.destinationInput="destination-input2",i()},trigger:"blur"}],lat:[{required:!0,message:"请填写地理坐标",trigger:"blur"}],lng:[{required:!0,message:"请填写地理坐标",trigger:"blur"}],referenceTime:[{required:!0,message:"请选择用时"}],openingHours:[{validator:function(t,a,i){if(0==e.dateTime.one.length&&0==e.dateTime.tue.length&&0==e.dateTime.wed.length&&0==e.dateTime.thur.length&&0==e.dateTime.fir.length&&0==e.dateTime.sat.length&&0==e.dateTime.sun.length)return i(new Error("请补充开放用时"));i()}}]}}},created:function(){""!=this.handleEditDate?(this.templateEmpty(),this.changeData()):(this.templateEmpty(),void 0!=this.$refs.form&&this.$refs.form.resetFields())},watch:{handleEditDate:function(){""!=this.handleEditDate?(this.templateEmpty(),this.changeData()):(this.templateEmpty(),void 0!=this.$refs.form&&this.$refs.form.resetFields())}},methods:{handleList:function(e){"showDiv"!=e.target.id&&(this.isImgUrlShow=!1)},imgClickShow:function(e){var t=this;this.$http.post("http://192.168.1.186:3024/picture/api/get",{id:e.img_ID}).then(function(e){t.isImgUrlShow=!0,t.imgUrlShow="http://192.168.1.186:3009/upload"+e.data.object.url})},checkList:function(e){this.form.imgs=e.map(function(e){return{img_ID:e}})},handleImgUpload:function(){this.imgData=this.form.imgs.map(function(e){return e.img_ID}),this.imgUpload=!0},closeBoo:function(){var e=this;this.showtime=!1,setTimeout(function(){e.hackReset=!1},200)},editBoo:function(){this.showtime=!0,this.hackReset=!0},templateEmpty:function(){this.isDataTime=!1,this.dateTime.one=[],this.dateTime.tue=[],this.dateTime.wed=[],this.dateTime.thur=[],this.dateTime.fir=[],this.dateTime.sat=[],this.dateTime.sun=[],this.dateTime.desc="",this.placeholderValue="请输入标签",this.form={chineseName:"",englishName:"",areaId:{id:"",value:""},tags:[],lat:"",lng:"",referenceTime:"",seasons:[],crowds:[],openingHours:"",imgs:[],introduction:""}},changeData:function(){var e=this,t=this.form,a=this.handleEditDate;0==a.openingHours.length&&""==a.openingHourExplain||(this.isDataTime=!0,a.openingHours.forEach(function(t){1==t.theWeek?"00:00"==t.beginDate&&"24:00"==t.endDate?e.dateTime.one.push({alltime:!0}):e.dateTime.one.push({start:t.beginDate,end:t.endDate}):2==t.theWeek?"00:00"==t.beginDate&&"24:00"==t.endDate?e.dateTime.tue.push({alltime:!0}):e.dateTime.tue.push({start:t.beginDate,end:t.endDate}):3==t.theWeek?"00:00"==t.beginDate&&"24:00"==t.endDate?e.dateTime.wed.push({alltime:!0}):e.dateTime.wed.push({start:t.beginDate,end:t.endDate}):4==t.theWeek?"00:00"==t.beginDate&&"24:00"==t.endDate?e.dateTime.thur.push({alltime:!0}):e.dateTime.thur.push({start:t.beginDate,end:t.endDate}):5==t.theWeek?"00:00"==t.beginDate&&"24:00"==t.endDate?e.dateTime.fir.push({alltime:!0}):e.dateTime.fir.push({start:t.beginDate,end:t.endDate}):6==t.theWeek?"00:00"==t.beginDate&&"24:00"==t.endDate?e.dateTime.sat.push({alltime:!0}):e.dateTime.sat.push({start:t.beginDate,end:t.endDate}):7==t.theWeek&&("00:00"==t.beginDate&&"24:00"==t.endDate?e.dateTime.sun.push({alltime:!0}):e.dateTime.sun.push({start:t.beginDate,end:t.endDate}))})),t.id=a.id,t.chineseName=a.chineseName,t.englishName=a.name,t.areaId={id:a.areaID,value:a.areaName},t.tags=a.labels.split(",").map(function(e){return{name:e}}),""!=t.tags&&(this.placeholderValue=""),t.lat=a.lat,t.lng=a.lng,t.referenceTime=a.referenceTime?a.referenceTime.dict_ID:"",t.seasons=a.seasons.map(function(e){return e.dict_ID}),t.crowds=a.crowds.map(function(e){return e.dict_ID}),t.introduction=a.introduction,t.imgs=a.imgs.map(function(e){return{img_ID:e.img_ID}}),this.dateTime.desc=a.openingHourExplain,console.log(a)},handleSelect:function(e){this.form.areaId=e,this.isSelect=!0},handleBlur:function(){var e=this;setTimeout(function(){!1===e.isSelect?e.form.areaId={id:"",value:""}:e.isSelect=!1},200)},querySearch:function(e,t){var a=this;this.vague=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.vague.push({id:i.data.objects[l].id,value:i.data.objects[l].areaName});var s=e?a.vague.filter(a.createFilter(e)):[];t(s)})},createFilter:function(e){return function(e){return e.value}},handleInputConfirm:function(e){var t=this;""!=e&&(this.form.tags=this.form.tags.filter(function(t){return t.name!=e}),this.form.tags.push({name:e}),this.placeholderValue="",this.inputTag="",this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.blur()}))},handleCancel:function(e){var t=this;this.form.tags.splice(this.form.tags.indexOf(e),1),this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()}),this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.blur()}),0==this.form.tags.length&&(this.placeholderValue="请输入标签")},addsave:function(){var e=this;this.$refs.form.validate(function(t){if(t){var a=e.form.tags.map(function(e){return e.name}).join(),i={dict_ID:e.form.referenceTime},l=e.form.seasons.map(function(e){return{dict_ID:e}}),s=e.form.crowds.map(function(e){return{dict_ID:e}}),o=e.dateTime.one.map(function(e){return e.alltime?{theWeek:1,beginDate:"00:00",endDate:"24:00"}:{theWeek:1,beginDate:e.start,endDate:e.end}}).concat(e.dateTime.tue.map(function(e){return e.alltime?{theWeek:2,beginDate:"00:00",endDate:"24:00"}:{theWeek:2,beginDate:e.start,endDate:e.end}})).concat(e.dateTime.wed.map(function(e){return e.alltime?{theWeek:3,beginDate:"00:00",endDate:"24:00"}:{theWeek:3,beginDate:e.start,endDate:e.end}})).concat(e.dateTime.thur.map(function(e){return e.alltime?{theWeek:4,beginDate:"00:00",endDate:"24:00"}:{theWeek:4,beginDate:e.start,endDate:e.end}})).concat(e.dateTime.fir.map(function(e){return e.alltime?{theWeek:5,beginDate:"00:00",endDate:"24:00"}:{theWeek:5,beginDate:e.start,endDate:e.end}})).concat(e.dateTime.sat.map(function(e){return e.alltime?{theWeek:6,beginDate:"00:00",endDate:"24:00"}:{theWeek:6,beginDate:e.start,endDate:e.end}})).concat(e.dateTime.sun.map(function(e){return e.alltime?{theWeek:7,beginDate:"00:00",endDate:"24:00"}:{theWeek:7,beginDate:e.start,endDate:e.end}}));""==e.handleEditDate?e.$http.post(e.GLOBAL.serverSrc+"/scenicspot/api/insert",{object:{name:e.form.englishName,chineseName:e.form.chineseName,areaID:e.form.areaId.id,areaName:e.form.areaId.value,link:"这是链接",labels:a,lat:e.form.lat,lng:e.form.lng,referenceTime:i,openingHours:o,openingHourExplain:e.dateTime.desc,seasons:l,crowds:s,introduction:e.form.introduction,imgs:e.form.imgs,createTime:"2019-03-20T05:36:16.641Z"}}).then(function(t){e.$message.success("添加成功！"),e.$emit("closeButton",!1),e.$emit("callInit",!0)}):e.$http.post(e.GLOBAL.serverSrc+"/scenicspot/api/save",{object:{id:e.form.id,name:e.form.englishName,chineseName:e.form.chineseName,areaID:e.form.areaId.id,areaName:e.form.areaId.value,link:"这是链接",labels:a,lat:e.form.lat,lng:e.form.lng,referenceTime:i,openingHours:o,openingHourExplain:e.dateTime.desc,seasons:l,crowds:s,introduction:e.form.introduction,imgs:e.form.imgs,createTime:"2019-03-20T05:36:16.641Z"}}).then(function(t){e.$message.success("修改成功！"),e.$emit("closeButton",!1),e.$emit("callInit",!0)})}})},timeList:function(e){var t=this;this.dateTime.one=[],this.dateTime.tue=[],this.dateTime.wed=[],this.dateTime.thur=[],this.dateTime.fir=[],this.dateTime.sat=[],this.dateTime.sun=[],this.showtime=!1;var a=e;a.alltimeOne?this.dateTime.one.push({alltime:a.alltimeOne}):a.one.forEach(function(e){(e.start||e.end)&&t.dateTime.one.push({start:e.start,end:e.end})}),a.alltimeTue?this.dateTime.tue.push({alltime:a.alltimeTue}):a.tue.forEach(function(e){(e.start||e.end)&&t.dateTime.tue.push({start:e.start,end:e.end})}),a.alltimeWed?this.dateTime.wed.push({alltime:a.alltimeWed}):a.wed.forEach(function(e){(e.start||e.end)&&t.dateTime.wed.push({start:e.start,end:e.end})}),a.alltimeThur?this.dateTime.thur.push({alltime:a.alltimeThur}):a.thur.forEach(function(e){(e.start||e.end)&&t.dateTime.thur.push({start:e.start,end:e.end})}),a.alltimeFir?this.dateTime.fir.push({alltime:a.alltimeFir}):a.fir.forEach(function(e){(e.start||e.end)&&t.dateTime.fir.push({start:e.start,end:e.end})}),a.alltimeSat?this.dateTime.sat.push({alltime:a.alltimeSat}):a.sat.forEach(function(e){(e.start||e.end)&&t.dateTime.sat.push({start:e.start,end:e.end})}),a.alltimeSun?this.dateTime.sun.push({alltime:a.alltimeSun}):a.sun.forEach(function(e){(e.start||e.end)&&t.dateTime.sun.push({start:e.start,end:e.end})}),this.dateTime.desc=a.desc,0!=this.dateTime.one.length||0!=this.dateTime.tue.length||0!=this.dateTime.wed.length||0!=this.dateTime.thur.length||0!=this.dateTime.fir.length||0!=this.dateTime.sat.length||0!=this.dateTime.sun.length||""!=this.dateTime.desc?(this.isDataTime=!0,this.$refs.form.clearValidate("openingHours")):this.isDataTime=!1}}},se={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{on:{click:e.handleList}},[i("el-form",{ref:"form",staticStyle:{"margin-left":"130px"},attrs:{model:e.form,rules:e.rules,"label-width":e.formLabelWidth}},[i("el-form-item",{ref:"chineseName",staticClass:"form-item",attrs:{prop:"chineseName","label-width":e.formLabelWidth,label:"中文名称:"}},[i("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),i("el-input",{staticClass:"form-input",attrs:{clearable:"",placeholder:"请输入中文名称"},model:{value:e.form.chineseName,callback:function(t){e.$set(e.form,"chineseName",t)},expression:"form.chineseName"}})],1),e._v(" "),i("el-form-item",{ref:"englishName",staticClass:"form-item",attrs:{prop:"englishName","label-width":e.formLabelWidth,label:"英文名称:"}},[i("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),i("el-input",{staticClass:"form-input",attrs:{clearable:"",placeholder:"请输入英文名称"},model:{value:e.form.englishName,callback:function(t){e.$set(e.form,"englishName",t)},expression:"form.englishName"}})],1),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{prop:"areaId","label-width":e.formLabelWidth,label:"所属地区:"}},[i("el-autocomplete",{staticClass:"form-input",attrs:{clearable:"",placeholder:"请输入地区名称","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},on:{blur:e.handleBlur,select:e.handleSelect},model:{value:e.form.areaId.value,callback:function(t){e.$set(e.form.areaId,"value",t)},expression:"form.areaId.value"}})],1),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{prop:"tags","label-width":e.formLabelWidth,label:"标签:"}},[i("span",{staticClass:"redStar",staticStyle:{"margin-left":"-53px"}},[e._v("*")]),e._v(" "),i("div",{class:e.destinationInput},[e._l(e.form.tags,function(t,a){return i("el-tag",{key:a,staticStyle:{float:"left",margin:"4px 0 0 4px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleCancel(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])}),e._v(" "),i("div",{staticStyle:{float:"left"}},[i("el-input",{ref:"saveTagInput",staticClass:"input_tag",attrs:{placeholder:e.placeholderValue},on:{blur:function(t){e.handleInputConfirm(e.inputTag)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleInputConfirm(e.inputTag)}},model:{value:e.inputTag,callback:function(t){e.inputTag=t},expression:"inputTag"}})],1)],2)]),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{prop:"lat","label-width":e.formLabelWidth,label:"经度:"}},[i("el-input",{staticClass:"form-input",attrs:{clearable:"",placeholder:"请输入经度"},model:{value:e.form.lat,callback:function(t){e.$set(e.form,"lat",t)},expression:"form.lat"}})],1),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{prop:"lng",label:"纬度:"}},[i("el-input",{staticClass:"form-input",attrs:{clearable:"",placeholder:"请输入纬度"},model:{value:e.form.lng,callback:function(t){e.$set(e.form,"lng",t)},expression:"form.lng"}})],1),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{prop:"referenceTime","label-width":e.formLabelWidth,label:"参考用时:"}},[i("el-radio-group",{model:{value:e.form.referenceTime,callback:function(t){e.$set(e.form,"referenceTime",t)},expression:"form.referenceTime"}},e._l(e.referenceTime,function(t,a){return i("el-radio",{key:a,attrs:{label:t.id}},[e._v(e._s(t.dict_Name))])}))],1),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"适宜季节:"}},[i("el-checkbox-group",{staticStyle:{float:"left"},model:{value:e.form.seasons,callback:function(t){e.$set(e.form,"seasons",t)},expression:"form.seasons"}},e._l(e.seasons,function(t,a){return i("el-checkbox",{key:a,attrs:{label:t.id}},[e._v(e._s(t.dict_Name))])}))],1),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"适宜人群:"}},[i("el-checkbox-group",{staticStyle:{float:"left"},model:{value:e.form.crowds,callback:function(t){e.$set(e.form,"crowds",t)},expression:"form.crowds"}},e._l(e.crowds,function(t,a){return i("el-checkbox",{key:a,attrs:{label:t.id}},[e._v(e._s(t.dict_Name))])}))],1),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{prop:"openingHours","label-width":e.formLabelWidth,label:"开放时间:"}},[i("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),i("el-button",{staticStyle:{border:"1px solid #3095fa",color:"#3095fa"},attrs:{size:"small"},on:{click:e.editBoo}},[e._v("编辑")])],1),e._v(" "),i("div",{staticStyle:{width:"1200px",float:"left"}},[e.isDataTime?i("div",{staticStyle:{"margin-left":"90px",width:"565px",background:"#F7F7F7",padding:"20px","margin-bottom":"20px",float:"left"}},[0!=e.dateTime.one.length?i("div",{staticStyle:{"margin-top":"-5px",float:"left",width:"900px"}},[i("span",{staticStyle:{float:"left"}},[e._v("周一")]),e._v(" "),e.dateTime.one[0].alltime?i("div",{staticStyle:{"margin-left":"92px"}},[i("span",[e._v("全天营业")])]):i("div",{staticStyle:{"margin-left":"84px"}},e._l(e.dateTime.one,function(t,a){return i("div",{key:a,staticStyle:{float:"left","padding-left":"10px"}},[i("span",[e._v(e._s(t.start))]),e._v(" - "),i("span",[e._v(e._s(t.end))]),e.dateTime.one.length>1&&a!=e.dateTime.one.length-1?i("span",[e._v(";")]):e._e()])}))]):e._e(),e._v(" "),0!=e.dateTime.tue.length?i("div",{staticStyle:{"margin-top":"10px",float:"left",width:"900px"}},[i("span",{staticStyle:{float:"left"}},[e._v("周二")]),e._v(" "),e.dateTime.tue[0].alltime?i("div",{staticStyle:{"margin-left":"92px"}},[i("span",[e._v("全天营业")])]):i("div",{staticStyle:{"margin-left":"84px"}},e._l(e.dateTime.tue,function(t,a){return i("div",{key:a,staticStyle:{float:"left","padding-left":"10px"}},[i("span",[e._v(e._s(t.start))]),e._v(" - "),i("span",[e._v(e._s(t.end))]),e.dateTime.tue.length>1&&a!=e.dateTime.tue.length-1?i("span",[e._v(";")]):e._e()])}))]):e._e(),e._v(" "),0!=e.dateTime.wed.length?i("div",{staticStyle:{"margin-top":"10px",float:"left",width:"900px"}},[i("span",{staticStyle:{float:"left"}},[e._v("周三")]),e._v(" "),e.dateTime.wed[0].alltime?i("div",{staticStyle:{"margin-left":"92px"}},[i("span",[e._v("全天营业")])]):i("div",{staticStyle:{"margin-left":"84px"}},e._l(e.dateTime.wed,function(t,a){return i("div",{key:a,staticStyle:{float:"left","padding-left":"10px"}},[i("span",[e._v(e._s(t.start))]),e._v(" - "),i("span",[e._v(e._s(t.end))]),e.dateTime.wed.length>1&&a!=e.dateTime.wed.length-1?i("span",[e._v(";")]):e._e()])}))]):e._e(),e._v(" "),0!=e.dateTime.thur.length?i("div",{staticStyle:{"margin-top":"10px",float:"left",width:"900px"}},[i("span",{staticStyle:{float:"left"}},[e._v("周四")]),e._v(" "),e.dateTime.thur[0].alltime?i("div",{staticStyle:{"margin-left":"92px"}},[i("span",[e._v("全天营业")])]):i("div",{staticStyle:{"margin-left":"84px"}},e._l(e.dateTime.thur,function(t,a){return i("div",{key:a,staticStyle:{float:"left","padding-left":"10px"}},[i("span",[e._v(e._s(t.start))]),e._v(" - "),i("span",[e._v(e._s(t.end))]),e.dateTime.thur.length>1&&a!=e.dateTime.thur.length-1?i("span",[e._v(";")]):e._e()])}))]):e._e(),e._v(" "),0!=e.dateTime.fir.length?i("div",{staticStyle:{"margin-top":"10px",float:"left",width:"900px"}},[i("span",{staticStyle:{float:"left"}},[e._v("周五")]),e._v(" "),e.dateTime.fir[0].alltime?i("div",{staticStyle:{"margin-left":"92px"}},[i("span",[e._v("全天营业")])]):i("div",{staticStyle:{"margin-left":"84px"}},e._l(e.dateTime.fir,function(t,a){return i("div",{key:a,staticStyle:{float:"left","padding-left":"10px"}},[i("span",[e._v(e._s(t.start))]),e._v(" - "),i("span",[e._v(e._s(t.end))]),e.dateTime.fir.length>1&&a!=e.dateTime.fir.length-1?i("span",[e._v(";")]):e._e()])}))]):e._e(),e._v(" "),0!=e.dateTime.sat.length?i("div",{staticStyle:{"margin-top":"10px",float:"left",width:"900px"}},[i("span",{staticStyle:{float:"left"}},[e._v("周六")]),e._v(" "),e.dateTime.sat[0].alltime?i("div",{staticStyle:{"margin-left":"92px"}},[i("span",[e._v("全天营业")])]):i("div",{staticStyle:{"margin-left":"84px"}},e._l(e.dateTime.sat,function(t,a){return i("div",{key:a,staticStyle:{float:"left","padding-left":"10px"}},[i("span",[e._v(e._s(t.start))]),e._v(" - "),i("span",[e._v(e._s(t.end))]),e.dateTime.sat.length>1&&a!=e.dateTime.sat.length-1?i("span",[e._v(";")]):e._e()])}))]):e._e(),e._v(" "),0!=e.dateTime.sun.length?i("div",{staticStyle:{"margin-top":"10px",float:"left",width:"900px"}},[i("span",{staticStyle:{float:"left"}},[e._v("周日")]),e._v(" "),e.dateTime.sun[0].alltime?i("div",{staticStyle:{"margin-left":"92px"}},[i("span",[e._v("全天营业")])]):i("div",{staticStyle:{"margin-left":"84px"}},e._l(e.dateTime.sun,function(t,a){return i("div",{key:a,staticStyle:{float:"left","padding-left":"10px"}},[i("span",[e._v(e._s(t.start))]),e._v(" - "),i("span",[e._v(e._s(t.end))]),e.dateTime.sun.length>1&&a!=e.dateTime.sun.length-1?i("span",[e._v(";")]):e._e()])}))]):e._e(),e._v(" "),""!=e.dateTime.desc?i("div",{staticStyle:{float:"left","margin-top":"10px"}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(e.dateTime.desc))])]):e._e()]):e._e()]),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"图片:"}},[i("div",{staticClass:"img_upload"},[e._l(e.form.imgs,function(t,l){return[i("img",{key:t.img_ID,staticClass:"img_list",attrs:{id:"showDiv",src:a("AkXE"),alt:""},on:{click:function(a){e.imgClickShow(t)}}}),e._v(" "),i("div",{key:l,staticClass:"img_div"},[e._v("x")])]})],2),e._v(" "),i("el-button",{staticClass:"img_button",attrs:{type:"info"},on:{click:e.handleImgUpload}},[e._v("上传")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isImgUrlShow,expression:"isImgUrlShow"}],staticClass:"show_div"},[i("img",{staticClass:"show_img",attrs:{src:e.imgUrlShow,alt:""}})])],1),e._v(" "),i("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"产品概述:"}},[i("el-input",{staticStyle:{width:"605px"},attrs:{rows:13,type:"textarea"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1)],1),e._v(" "),i("div",{staticClass:"operation"},[i("el-button",{staticStyle:{width:"100px",border:"1px solid #3095fa",color:"#3095fa"},on:{click:function(t){e.$emit("closeButton",!1)}}},[e._v("取消")]),e._v(" "),i("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.addsave}},[e._v("保存")])],1),e._v(" "),i("el-dialog",{attrs:{width:"30%",top:"20vh","append-to-body":"",title:"标签选择",visible:e.showEdit,"custom-class":"city_list"},on:{"update:visible":function(t){e.showEdit=t}}},[i("LabelSelection")],1),e._v(" "),i("el-dialog",{attrs:{width:"1100px",top:"10vh","append-to-body":"",title:"添加开放时间",visible:e.showtime,"show-close":!1},on:{"update:visible":function(t){e.showtime=t},close:e.closeBoo}},[e.hackReset?i("OpenTime",{attrs:{dateTime:e.dateTime},on:{timeList:e.timeList,closeButton:function(t){e.showtime=!1}}}):e._e()],1),e._v(" "),i("el-dialog",{attrs:{width:"1300px",top:"5vh","append-to-body":"",title:"图片选择",visible:e.imgUpload,"custom-class":"city_list"},on:{"update:visible":function(t){e.imgUpload=t}}},[i("MaterialList",{attrs:{imgData:e.imgData,chineseName:e.form.chineseName},on:{checkList:e.checkList,closeButton:function(t){e.imgUpload=!1}}})],1)],1)},staticRenderFns:[]};var oe={name:"scenicList",components:{AddScenic:a("VU/8")(le,se,!1,function(e){a("Wb2A")},"data-v-76222b76",null).exports,FadeAnimation:X},data:function(){return{areaName:"",name:"",areaNames:"",names:"",vague:[],referenceTime:"",seasons:"",crowds:"",currentRow:"",input:"",currentPage:1,pagesize:10,total:1,checkLabelList:[],handleEditDate:"",tableHead:{height:"60px",color:"#555555"},tableHeight:{padding:"0",height:"40px"},dialogFormVisible:!1,hrs:{height:"60px"},cs:{padding:"0",height:"40px"}}},created:function(){this.initData()},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},callInit:function(){this.initData()},initData:function(e,t){var a=this;this.$http.post(this.GLOBAL.serverSrc+"/scenicspot/api/search",{pageIndex:this.currentPage,pageSize:this.pagesize,object:{areaName:e,name:t}}).then(function(e){a.currentRow="",a.checkLabelList=e.data.objects,a.total=e.data.total})},handleChange:function(e){e&&(this.currentRow=e)},dataLoading:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/scenicspot/api/GetDictListByType",{object:{type:2}}).then(function(e){t.referenceTime=e.data.objects,t.$http.post(t.GLOBAL.serverSrc+"/scenicspot/api/GetDictListByType",{object:{type:0}}).then(function(e){t.seasons=e.data.objects,t.$http.post(t.GLOBAL.serverSrc+"/scenicspot/api/GetDictListByType",{object:{type:1}}).then(function(e){t.crowds=e.data.objects,t.dialogFormVisible=!0})})})},addFormVisible:function(){this.dataLoading(),this.handleEditDate=""},handleEdit:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/scenicspot/api/get",{id:this.currentRow.id}).then(function(t){e.handleEditDate=t.data.object,e.dataLoading()})},handleDelete:function(){var e=this;this.$confirm("是否删除该景点信息?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.GLOBAL.serverSrc+"/scenicspot/api/delete",{id:e.currentRow.id}).then(function(t){1==e.checkLabelList.length&&(e.currentPage=e.currentPage-1),e.$message({type:"success",message:"删除成功!"}),e.initData()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleclose:function(){this.dialogFormVisible=!1},handleSelect:function(){},resetButton:function(){this.areaName="",this.name="",this.pagesize=10,this.currentPage=1,this.initData()},searchFormVisible:function(){this.areaNames=this.areaName,this.names=this.name,this.initData(this.areaNames,this.names)},querySearch:function(e,t){var a=this;this.vague=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.vague.push({id:i.data.objects[l].id,value:i.data.objects[l].areaName});var s=e?a.vague.filter(a.createFilter(e)):[];t(s)})},createFilter:function(e){return function(e){return e.value}},pagesizes:function(e){this.currentPage=1,this.pagesize=e,this.initData(this.areaNames,this.names)},handleCurrentChange:function(e){this.currentPage=e,this.initData(this.areaNames,this.names)}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_dom"},[a("div",{staticClass:"region_search"},[a("span",{staticClass:"keyword"},[e._v("地区筛选")]),e._v(" "),a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入地区名称","fetch-suggestions":e.querySearch,"suffix-icon":"el-icon-search","trigger-on-focus":!1},on:{select:e.handleSelect},model:{value:e.areaName,callback:function(t){e.areaName=t},expression:"areaName"}})],1),e._v(" "),a("div",{staticClass:"spot_search"},[a("span",{staticClass:"keyword"},[e._v("景点名称")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{clearable:"",placeholder:"请输入景点名称(英文/中文)"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.searchFormVisible}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.resetButton}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{padding:"0 20px"}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{staticClass:"add_scenic",attrs:{type:"primary"},on:{click:e.addFormVisible}},[e._v("添加")]),e._v(" "),""==e.currentRow?a("el-button",{staticClass:"add_scenic",attrs:{disabled:""}},[e._v("编辑")]):a("el-button",{staticClass:"add_scenic",staticStyle:{border:"1px solid #3095fa",color:"#3095fa"},on:{click:e.handleEdit}},[e._v("编辑")]),e._v(" "),""==e.currentRow?a("el-button",{staticClass:"add_scenic",attrs:{disabled:"",type:"danger"}},[e._v("删除")]):a("el-button",{staticClass:"add_scenic",attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),a("el-table",{ref:"singleTable",staticClass:"table",attrs:{data:e.checkLabelList,"header-row-style":e.hrs,"highlight-current-row":"","cell-style":e.cs,border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass},on:{"current-change":e.handleChange}},[a("el-table-column",{attrs:{prop:"id",label:"景点ID","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"景点名称","min-width":"180","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.chineseName?a("el-button",{attrs:{type:"text"}},[e._v(e._s(t.row.chineseName))]):a("el-button",{attrs:{type:"text"}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"所属地区","min-width":"180","header-align":"center"}})],1),e._v(" "),a("div",{staticClass:"pages"},[a("el-pagination",{staticClass:"page",attrs:{background:"","current-page":e.currentPage,"page-sizes":[2,4,8,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pagesizes,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"900px",top:"10vh",title:"景点信息",visible:e.dialogFormVisible,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("AddScenic",{attrs:{referenceTime:e.referenceTime,seasons:e.seasons,crowds:e.crowds,handleEditDate:e.handleEditDate},on:{close:e.handleclose,closeButton:function(t){e.dialogFormVisible=!1},callInit:e.callInit}})],1)],1)},staticRenderFns:[]};var ne=a("VU/8")(oe,re,!1,function(e){a("ldFB")},"data-v-949248ac",null).exports,ce={data:function(){return{editableTabsValue:"0",editableTabs:[],tabIndex:0,empty:"",tableData:[],multipleSelection:[],forbidden:!0,currentPage:1,total:0,pagesize:10,title:"",dialogFormVisible:!1,rformA:{labelList:""},ruleForm:{highlightWords:""},ruleForm_01:{highlightWords01:""},rules:{highlightWords:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:10,message:"字数超过10汉字限制",trigger:"blur"}],highlightWords01:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:10,message:"字数超过10汉字限制",trigger:"blur"}],labelList:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:10,message:"字数超过10汉字限制",trigger:"blur"}]},gatherShow:!1,deleteGatherShow:!1,ensure:"",editGatherShow:!1,clickTab:"",sid:""}},mounted:function(){this.pageList()},methods:{handleTabsEdit:function(e,t){if("add"===t){if(0==this.gatherShow)return this.gatherShow=!0,!1;var a=++this.tabIndex+"";this.editableTabs.push({typeName:this.ruleForm.highlightWords,content:"New Tab content"}),this.editableTabsValue=(a-1).toString(),console.log(this.editableTabsValue)}if("remove"===t){if(0==this.deleteGatherShow)return this.deleteGatherShow=!0,this.editableTabsValue=e,!1;var i=this.editableTabs,l=this.editableTabsValue;l===e&&i.forEach(function(t,a){if(t.name===e){var s=i[a+1]||i[a-1];s&&(l=s.name)}}),this.editableTabsValue=l,this.editableTabs=i.filter(function(t){return t.name!==e})}},emptyButton:function(){this.empty=""},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},changeFun:function(e){this.multipleSelection=e,1==this.multipleSelection.length?this.forbidden=!1:this.forbidden=!0},clickRow:function(e){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(e)},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.multipleSelection.length;a++)if(this.multipleSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},handleSizeChange:function(e){this.currentPage=1,this.pagesize=e,this.themeList()},handleCurrentChange:function(e){this.currentPage=e,this.themeList()},gatherClose:function(){this.gatherShow=!1,this.ruleForm.highlightWords=""},addGather:function(){this.handleTabsEdit(this.tabIndex,"add"),this.addTheme()},deleteGatherClose:function(){this.deleteGatherShow=!1},deleteGather:function(e){this.handleTabsEdit(this.tabIndex,"remove"),this.deleteTheme()},deleteGatherTheme:function(){this.deleteGatherShow=!0},addTheme:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var a=e;e.$http.post(e.GLOBAL.serverSrc+"/universal/labletype/api/insert",{object:{id:0,typeName:e.ruleForm.highlightWords,createTime:0,code:"string",isDeleted:0}}).then(function(e){0==e.data.isSuccess?a.$message.error("添加失败,该供应商已存在"):(a.$message({type:"success",message:"添加成功"}),a.ruleForm.highlightWords="",a.gatherShow=!1,a.pageList())})})},deleteTheme:function(e){for(var t=0;t<this.editableTabs.length;t++)t==this.editableTabsValue&&(this.sid=this.editableTabs[t].id);var a=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/labletype/api/delete",{id:this.sid}).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.deleteGatherShow=!1,a.pageList()}).catch(function(e){console.log(e)})},editTheme:function(){this.$http.post(this.GLOBAL.serverSrc+"/universal/labletype/api/save",{object:{id:this.sid,typeName:this.ruleForm_01.highlightWords01,createTime:0,code:"string",isDeleted:0}}).then(function(e){0==e.data.isSuccess?_this.$message.error("修改失败,该标签已存在"):(_this.$message({type:"success",message:"修改成功"}),_this.editGatherShow=!1,_this.pageList())}).catch(function(e){console.log(e)})},editGatherClose:function(){this.editGatherShow=!1,this.ruleForm_01.highlightWords01=""},handleClick:function(e,t){this.clickTab=e.label,this.themeList()},editGatherTheme:function(e){this.editGatherShow=!0,this.cycleId(),this.ruleForm_01.highlightWords01=this.clickTab},cycleId:function(){console.log("cycleId");for(var e=0;e<this.editableTabs.length;e++)e==this.editableTabsValue&&(this.clickTab=this.editableTabs[e].typeName,this.sid=this.editableTabs[e].id)},saveModule:function(e){"添加标签"==this.title?this.addLabelTheme(e):this.editLabelTheme(e)},addLabel:function(){this.title="添加标签",this.dialogFormVisible=!0},editLabel:function(){this.getLabel(),this.title="编辑标签",this.dialogFormVisible=!0},getLabel:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/olabel/api/olabelget",{id:this.multipleSelection[0].id}).then(function(t){if(1==t.data.isSuccess){var a=t.data.object;e.rformA.labelList=a.labelName}})},addLabelTheme:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;t.$http.post(t.GLOBAL.serverSrc+"/universal/olabel/api/olabelinsert",{object:{id:0,labelName:t.rformA.labelList,tagType:t.sid,createTime:0,code:"string",isDeleted:0}}).then(function(a){1==a.data.isSuccess?(t.pageList(),t.dialogFormVisible=!1,t.$refs[e].resetFields()):t.$message.success(a.data.result.message)})})},editLabelTheme:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/olabel/api/olabelsave",{object:{id:this.multipleSelection[0].id,labelName:this.rformA.labelList,tagType:this.sid,createTime:0,code:"string",isDeleted:0}}).then(function(a){1==a.data.isSuccess?(t.pageList(),t.dialogFormVisible=!1,t.$refs[e].resetFields()):t.$message.success(a.data.result.message)}).catch(function(e){console.log(e)})},deleteLabel:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.GLOBAL.serverSrc+"/universal/olabel/api/oplabledelete",{id:e.multipleSelection[0].id}).then(function(t){1==t.data.isSuccess&&(e.$message.success("删除成功"),e.pageList())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},cancel:function(){this.dialogFormVisible=!1,this.$refs.rformA.resetFields()},pageList:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/labletype/api/list",{pageIndex:0,pageSize:0,total:0,object:{id:0,typeName:"",createTime:0,code:"string",isDeleted:0}}).then(function(t){e.total=t.data.total,t.data.objects?e.editableTabs=t.data.objects:e.editableTabs=[],e.tabIndex=e.editableTabs.length,e.themeList()}).catch(function(e){console.log(e)})},themeList:function(){this.cycleId();var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/olabel/api/olabelpage",{pageIndex:this.currentPage,pageSize:this.pagesize,total:0,object:{id:0,labelName:"",tagType:this.sid,createTime:0,code:"string",isDeleted:0}}).then(function(t){e.total=t.data.total,e.tableData=t.data.objects,e.tabIndex=e.tableData.length}).catch(function(e){console.log(e)})}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"labelList"},[a("div",[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:e.handleTabsEdit,"tab-click":e.handleClick},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,function(e,t){return a("el-tab-pane",{key:t+"",attrs:{label:e.typeName,name:t+""}})})),e._v(" "),a("div",{staticClass:"labelBorder"},[a("div",{staticClass:"searchBox"},[a("div",{staticStyle:{float:"left"}},[a("el-input",{staticClass:"empty",attrs:{placeholder:"搜索标签名称",clearable:""},model:{value:e.empty,callback:function(t){e.empty=t},expression:"empty"}}),e._v(" "),a("el-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:function(t){e.emptyButton()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:function(t){e.editGatherTheme(t)}}},[e._v("编辑集合")]),e._v(" "),a("el-button",{staticClass:"primary",attrs:{type:"danger"},on:{click:function(t){e.deleteGatherTheme()}}},[e._v("删除集合")])],1),e._v(" "),a("div",{staticClass:"actionButton"},[a("el-button",{on:{click:function(t){e.addLabel()}}},[e._v("添加标签")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:function(t){e.editLabel()}}},[e._v("编辑标签")]),e._v(" "),a("el-button",{attrs:{disabled:""}},[e._v("转移集合")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:function(t){e.deleteLabel()}}},[e._v("删除标签")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"labelTable",attrs:{data:e.tableData,"header-cell-style":e.getRowClass,border:"","row-style":e.rowClass},on:{"selection-change":e.changeFun,"row-click":e.clickRow}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"labelName",label:"标签名称",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"product",label:"绑定相关产品",align:"center"}})],1),e._v(" "),a("el-pagination",{staticClass:"pageList",attrs:{"page-sizes":[10,1,30,50],background:"","page-size":e.pagesize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gatherShow,expression:"gatherShow"}],staticClass:"popup"},[a("div",{staticClass:"mask",on:{click:function(t){e.gatherClose()}}}),e._v(" "),a("div",{staticClass:"add"},[a("div",{staticClass:"gatherColor"},[a("div",{staticClass:"gatherTitle"},[e._v("添加集合")]),e._v(" "),a("div",{staticClass:"gatherClose",on:{click:function(t){e.gatherClose()}}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"labelName"},[a("div",{staticStyle:{float:"left","line-height":"40px",margin:"0 10px 0 70px"}},[e._v("集合名称：")]),e._v(" "),a("el-form",{ref:"ruleForm",staticStyle:{float:"left"},attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{prop:"highlightWords"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{maxlength:"10",placeholder:"10个字以内"},model:{value:e.ruleForm.highlightWords,callback:function(t){e.$set(e.ruleForm,"highlightWords",t)},expression:"ruleForm.highlightWords"}}),e._v(" "),a("span",{staticClass:"span1"},[e._v(e._s(e.ruleForm.highlightWords.length)+"/10字")])],1)],1)],1),e._v(" "),a("div",{staticClass:"judge"},[a("el-button",{on:{click:function(t){e.gatherClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addGather()}}},[e._v("确定")])],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editGatherShow,expression:"editGatherShow"}],staticClass:"popup"},[a("div",{staticClass:"mask",on:{click:function(t){e.editGatherClose()}}}),e._v(" "),a("div",{staticClass:"add"},[a("div",{staticClass:"gatherColor"},[a("div",{staticClass:"gatherTitle"},[e._v("编辑集合")]),e._v(" "),a("div",{staticClass:"gatherClose",on:{click:function(t){e.editGatherClose()}}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"labelName"},[a("div",{staticStyle:{float:"left","line-height":"40px",margin:"0 10px 0 70px"}},[e._v("集合名称：")]),e._v(" "),a("el-form",{ref:"ruleForm_01",staticStyle:{float:"left"},attrs:{model:e.ruleForm_01,rules:e.rules}},[a("el-form-item",{attrs:{prop:"highlightWords01"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{maxlength:"10",placeholder:"10个字以内"},model:{value:e.ruleForm_01.highlightWords01,callback:function(t){e.$set(e.ruleForm_01,"highlightWords01",t)},expression:"ruleForm_01.highlightWords01"}}),e._v(" "),a("span",{staticClass:"span1"},[e._v(e._s(e.ruleForm_01.highlightWords01.length)+"/10字")])],1)],1)],1),e._v(" "),a("div",{staticClass:"judge"},[a("el-button",{on:{click:function(t){e.editGatherClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editTheme()}}},[e._v("确定")])],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteGatherShow,expression:"deleteGatherShow"}],staticClass:"popup"},[a("div",{staticClass:"mask",on:{click:function(t){e.deleteGatherClose()}}}),e._v(" "),a("div",{staticClass:"add"},[a("div",{staticClass:"gatherColor"},[a("div",{staticClass:"gatherTitle"},[e._v("删除集合")]),e._v(" "),a("div",{staticClass:"gatherClose",on:{click:function(t){e.deleteGatherClose()}}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"judgeDelete"},[a("el-button",{on:{click:function(t){e.deleteGatherClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteGather(e.ensure)}}},[e._v("确定")])],1)])]),e._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancel}},[a("div",{staticStyle:{float:"left","line-height":"40px",margin:"0 10px 0 70px"}},[e._v("标签名称：")]),e._v(" "),a("el-form",{ref:"rformA",staticClass:"demo-ruleForm",attrs:{model:e.rformA,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"labelList"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{maxlength:"10",placeholder:"10个字以内"},model:{value:e.rformA.labelList,callback:function(t){e.$set(e.rformA,"labelList",t)},expression:"rformA.labelList"}}),e._v(" "),a("span",{staticClass:"span1"},[e._v(e._s(e.rformA.labelList.length)+"/10字")])],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){e.saveModule("rformA")}}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.contentShow=!1,expression:"contentShow=false"}],staticClass:"popup"},[a("div",{staticClass:"mask"}),e._v(" "),e._m(0)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"add"},[t("div",{staticClass:"gatherColor"},[t("div",{staticClass:"gatherTitle"},[this._v("绑定相关产品")]),this._v(" "),t("div",{staticClass:"gatherClose"},[this._v("×")])])])}]};var ue=a("VU/8")(ce,de,!1,function(e){a("OEC9")},"data-v-6a021313",null).exports,pe={data:function(){return{picSrc:"http://192.168.1.186:3009/upload",list:[],lists:[],props1:{label:"name",isLeaf:"leaf"},data:"",theContinent:"",node:"",resolve:"",level:"",pageSize:10,pageIndex:1,total:0,albumList:[],searchName:"",picForm:{name:"",type:"",destination:"请选择目的地",destinationId:0},formLabelWidth:"100px",addAlbum:!1,leftTree1:!1,albumtype:[],geography:"",getAlbumForm:!1,albumInfo:{},leftTree2:!1,albumId:0,albumDisabled:!0,saveAlbumBut:"修改属性",albumNameEmpty:!1,picInfoShow:!0,companyList:[],picDisabled:!0,savPicBut:"修改属性",picNameEmpty:!1,pictInfo:{},checkedCompany:[],activeIndex:0,getPictureForm:!1,fileList:[],insertCheCompany:[],uid:0,len:0,time:0,rules:{name:[{required:!0,message:"请输入相册名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],destination:[{required:!0,message:"请选择目的地",trigger:"blur"}]}}},created:function(){this.albumtypeget()},methods:{handleSizeChange:function(e){this.pageSize=e,this.pageIndex=1,this.albumPage(1,e,this.data.id,this.searchName)},handleCurrentChange:function(e){this.albumPage(e,this.pageSize,this.data.id,this.searchName)},albumtypeget:function(){var e=this;this.$http.post("http://192.168.1.186:3024/album/api/albumtypeget").then(function(t){1==t.data.isSuccess&&(e.albumtype=t.data.objects)}).catch(function(e){console.log(e)})},albumClose:function(){this.$refs.picForm.resetFields(),this.addAlbum=!1,this.leftTree1=!1},albumInsert:function(e){var t=this;this.$refs[e].validate(function(a){a&&t.$http.post("http://192.168.1.186:3024/album/api/insert",{object:{id:0,name:t.picForm.name,areaID:t.picForm.destinationId,albumType:t.picForm.type,createUser:sessionStorage.getItem("id")}}).then(function(a){1==a.data.isSuccess&&(t.addAlbum=!1,t.$refs[e].resetFields(),t.$message({message:"添加相册成功",type:"success"}))}).catch(function(e){console.log(e)})})},loadNode1:function(e,t){var a=this;this.node=e.data,this.resolve=t,this.level=e.level,0===e.level&&(this.list=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:-1}}).then(function(e){for(var i=0;i<e.data.objects.length;i++)a.list.push({name:e.data.objects[i].areaName,key:i,id:e.data.objects[i].id,isLeaf:e.data.objects[i].isLeaf,Hierarchy:0});t(a.list)}).catch(function(e){console.log(e)})),e.level>=1&&this.getSon(e.data.key,e.data.label,e.data.id,e.data.isLeaf,t,e.level)},getSon:function(e,t,a,i,l,s){var o=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:a}}).then(function(e){if(o.lists=[],1==e.data.isSuccess)for(var t=0;t<e.data.objects.length;t++)0==e.data.objects[t].isDeleted&&o.lists.push({name:e.data.objects[t].areaName,key:t,id:e.data.objects[t].id,isLeaf:e.data.objects[t].isLeaf,leaf:2!=e.data.objects[t].isLeaf,Hierarchy:s});setTimeout(function(){l(o.lists)},200)}).catch(function(e){console.log(e)})},treeClick:function(e,t){1==e.isLeaf&&(1==this.addAlbum?(this.picForm.destination=e.name,this.picForm.destinationId=e.id,this.leftTree1=!1):1==this.getAlbumForm?(this.albumInfo.areaName=e.name,this.albumInfo.areaID=e.id,this.leftTree2=!1):(this.data=e,this.geography=1,this.searchName="",this.albumPage(this.pageIndex,this.pageSize,this.data.id?this.data.id:0,this.searchName)))},sealbumPage:function(){this.geography=1,this.albumPage(this.pageIndex,this.pageSize,0,this.searchName)},albumPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.$http.post("http://192.168.1.186:3024/album/api/page",{pageIndex:e,pageSize:t,object:{name:l,areaID:i,isDeleted:0}}).then(function(e){1==e.data.isSuccess?(a.albumList=e.data.objects,a.total=e.data.total):(a.albumList=[],a.total=0)}).catch(function(e){console.log(e)})},getAlbum:function(e){var t=this;this.$http.post("http://192.168.1.186:3024/album/api/get",{id:e}).then(function(a){1==a.data.isSuccess&&(t.albumInfo=a.data.object,t.albumId=e,t.getAlbumForm=!0,t.getCompany(),setTimeout(function(){t.mySwiper(0)},100),0!=a.data.object.pictures.length?(t.getPicture(0),t.picInfoShow=!0):t.picInfoShow=!1)}).catch(function(e){console.log(e)})},saveAlbum:function(){var e=this;if(this.albumDisabled)this.albumDisabled=!1,this.saveAlbumBut="保存属性";else{if(!this.albumInfo.name)return this.albumNameEmpty=!0,!1;this.$http.post("http://192.168.1.186:3024/album/api/save",{object:this.albumInfo}).then(function(t){1==t.data.isSuccess&&(e.albumPage(e.pageIndex,e.pageSize,e.data.id,e.searchName),e.$message({message:"保存成功",type:"success"}),e.albumNameEmpty=!1,e.saveAlbumBut="修改属性",e.albumDisabled=!0)}).catch(function(e){console.log(e)})}},albumInfoClose:function(){this.getAlbumForm=!1,this.leftTree2=!1,this.albumDisabled=!0,this.saveAlbumBut="修改属性"},mySwiper:function(e){var t=new te.a(".gallery-thumbs",{spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!0,initialSlide:e,observer:!0,observeParents:!0});new te.a(".gallery-top",{spaceBetween:10,initialSlide:e,observer:!0,observeParents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:t}})},slideTo:function(e){this.getPicture(e)},prevSwiper:function(){this.getPicture(this.activeIndex-1)},nextSwiper:function(){this.getPicture(this.activeIndex+1)},pictureFormClose:function(){this.fileList=[],this.getPictureForm=!1},getPicture:function(e){var t=this;this.picDisabled=!0,this.savPicBut="修改属性",this.$http.post("http://192.168.1.186:3024/picture/api/get",{id:this.albumInfo.pictures[e].id}).then(function(a){if(1==a.data.isSuccess){t.pictInfo=a.data.object,t.checkedCompany=[];for(var i=0;i<t.pictInfo.companies.length;i++)t.checkedCompany.push(t.pictInfo.companies[i].company);t.activeIndex=e}})},delPic:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("http://192.168.1.186:3024/picture/api/delete",{id:e.pictInfo.id}).then(function(t){1==t.data.isSuccess&&(e.$message.success("删除成功"),e.getAlbum(e.albumId))})}).catch(function(){e.$message({type:"info",message:"已取消"})})},savPic:function(){var e=this;if(this.picDisabled)this.picDisabled=!1,this.savPicBut="保存属性";else{if(!this.pictInfo.name)return this.picNameEmpty=!0,!1;this.pictInfo.companies=[];for(var t=0;t<this.checkedCompany.length;t++)this.pictInfo.companies.push({id:0,company:this.checkedCompany[t],pictureID:this.pictInfo.id});this.$http.post("http://192.168.1.186:3024/picture/api/save",{object:this.pictInfo}).then(function(t){1==t.data.isSuccess&&(e.$message({message:"保存成功",type:"success"}),e.picNameEmpty=!1,e.savPicBut="修改属性",e.picDisabled=!0)}).catch(function(e){console.log(e)})}},getCompany:function(){var e=this;this.$http.post("http://192.168.1.186:3024/picture/api/companyget").then(function(t){e.insertCheCompany=[],e.companyList=t.data.objects;for(var a=0;a<e.companyList.length;a++)e.insertCheCompany.push(e.companyList[a].id)})},createPic:function(){this.getPictureForm=!0},handleError:function(e,t){console.log("失败"),this.fileList=[]},handleSuccess:function(e,t,a){if(this.time!=a.length)if(this.time=a.length,0==this.fileList.length)this.fileList=a;else{this.len=this.fileList.length;for(var i=this.len;i<a.length;i++)this.fileList.push(a[i])}for(var l=null,s=this.len;s<a.length;s++)l=JSON.parse(a[s].response).paths[0],this.$set(this.fileList[s],"companies",this.insertCheCompany),this.$set(this.fileList[s],"width",l.Width),this.$set(this.fileList[s],"height",l.Height),this.$set(this.fileList[s],"url1",l.Url),this.$set(this.fileList[s],"length",l.Length),this.$set(this.fileList[s],"name",l.Name);this.uid=a[0].uid},handlePreview:function(e){this.uid=e.uid},handleRemove:function(e,t){this.uid=t[0].uid;for(var a=0;a<this.fileList.length;a++)e.uid==this.fileList[a].uid&&this.fileList.splice(a,1);this.time=this.fileList.length},pictureInsert:function(){for(var e=this,t=[],a=this.fileList,i=0;i<a.length;i++){var l={id:0};l.albumID=this.albumId,l.name=a[i].name,l.url=a[i].url1,l.height=a[i].height,l.width=a[i].width,l.length=parseInt(a[i].size/1024),l.createUser=sessionStorage.getItem("id"),l.companies=[],l.createTime=new Date;for(var s=0;s<a[i].companies.length;s++)l.companies.push({id:0,company:a[i].companies[s],pictureID:0});t.push(l)}this.$http.post("http://192.168.1.186:3024/picture/api/insertlist",{object:{pictures:t}}).then(function(t){1==t.data.isSuccess&&(e.$message({message:"图片图片成功",type:"success"}),e.getAlbum(e.albumId),e.fileList=[],e.getPictureForm=!1,e.time=0,e.len=0)})}}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main-container"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header_add"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addAlbum=!0}}},[e._v("添加相册")])],1),e._v(" "),a("div",{staticClass:"header_seach"},[a("div",{staticClass:"search-input"},[a("el-input",{attrs:{placeholder:"请输入相册名称",clearable:""},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1),e._v(" "),a("div",{staticClass:"search-button"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.sealbumPage}})],1)])]),e._v(" "),a("div",{staticClass:"left-tree"},[a("el-tree",{ref:"refTree",staticClass:"treeDemo",attrs:{props:e.props1,load:e.loadNode1,lazy:"","expand-on-click-node":!1,"node-key":"id"},on:{"node-click":e.treeClick}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.geography,expression:"geography == 1"}],staticClass:"address-big"},[e._l(e.albumList,function(t){return a("div",{staticClass:"address-img"},[a("div",{staticClass:"marterialist-img",on:{click:function(a){e.getAlbum(t.id)}}},[t.pictures.length>0?a("img",{attrs:{width:"100%",height:"100%",src:e.picSrc+t.pictures[0].url}}):a("img",{attrs:{width:"100%",height:"100%",src:"../../../static/materialList/nopic.jpg"}})]),e._v(" "),a("div",{staticClass:"introduce"},[e._l(e.albumtype,function(i){return a("div",[t.albumType==i.id?a("div",{staticClass:"label"},[e._v(e._s(i.name))]):e._e()])}),e._v(" "),a("div",{staticClass:"number"},[e._v(e._s(t.pictures.length)+"张")])],2),e._v(" "),a("div",{staticClass:"address-name"},[e._v("\r\n                  "+e._s(t.name)+"\r\n              ")])])}),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)]),e._v(" "),a("el-dialog",{attrs:{title:"添加相册",visible:e.addAlbum,"custom-class":"city_list","append-to-body":"",width:"450px"},on:{"update:visible":function(t){e.addAlbum=t},close:e.albumClose}},[a("el-form",{ref:"picForm",attrs:{model:e.picForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称:",prop:"name","label-width":e.formLabelWidth,width:"250"}},[a("el-input",{staticClass:"w270 tl",attrs:{"auto-complete":"off",placeholder:"请输入相册名称"},model:{value:e.picForm.name,callback:function(t){e.$set(e.picForm,"name",t)},expression:"picForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型:",prop:"type","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"w270",attrs:{placeholder:"请选择相册类型"},model:{value:e.picForm.type,callback:function(t){e.$set(e.picForm,"type",t)},expression:"picForm.type"}},e._l(e.albumtype,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"目的地:",prop:"destination","label-width":e.formLabelWidth}},[a("el-button",{staticClass:"w270",attrs:{plain:""},on:{click:function(t){e.leftTree1=1!=e.leftTree1}}},[e._v(e._s(e.picForm.destination))])],1),e._v(" "),e.leftTree1?a("div",{staticClass:"left-tree1"},[a("el-tree",{ref:"refTree",staticClass:"treeDemo",attrs:{props:e.props1,load:e.loadNode1,lazy:"","expand-on-click-node":!1,"node-key":"id"},on:{"node-click":e.treeClick}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.albumClose}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){e.albumInsert("picForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"clearfix",staticStyle:{"margin-top":"-50px"},attrs:{title:"相册",visible:e.getAlbumForm,"custom-class":"city_list","append-to-body":!0,width:"1220px"},on:{"update:visible":function(t){e.getAlbumForm=t},close:e.albumInfoClose}},[a("div",{staticClass:"add-address-img"},[a("div",{staticClass:"left-img"},[a("div",{staticClass:"swiper-container gallery-top"},[a("div",{staticClass:"swiper-wrapper"},e._l(e.albumInfo.pictures,function(t){return a("div",{staticClass:"swiper-slide"},[a("img",{attrs:{src:e.picSrc+t.url,width:"100%",height:"100%"}})])})),e._v(" "),a("div",{staticClass:"swiper-button-next swiper-button-white",on:{click:e.nextSwiper}}),e._v(" "),a("div",{staticClass:"swiper-button-prev swiper-button-white",on:{click:e.prevSwiper}})]),e._v(" "),a("div",{staticClass:"swiper-container gallery-thumbs"},[a("div",{staticClass:"swiper-wrapper"},e._l(e.albumInfo.pictures,function(t,i){return a("div",{staticClass:"swiper-slide",on:{click:function(t){e.slideTo(i)}}},[a("img",{attrs:{src:e.picSrc+t.url,width:"100%",height:"100%"}})])}))]),e._v(" "),a("i",{staticClass:"el-icon-circle-close-outline",on:{click:e.delPic}})]),e._v(" "),a("div",{staticClass:"right-form"},[a("div",{staticClass:"album-message"},[a("div",{staticClass:"album-title"},[a("div",{staticClass:"blue-box"}),e._v(" "),a("div",{staticClass:"album-text"},[e._v("相册信息")])]),e._v(" "),a("div",{staticClass:"album-form"},[a("el-form",{ref:"albumForm",attrs:{model:e.albumInfo,"label-width":"100px"}},[a("div",{staticClass:"album-name1"},[e._v("\r\n                    名称："),a("el-input",{attrs:{placeholder:"请输入素材名称",disabled:e.albumDisabled},model:{value:e.albumInfo.name,callback:function(t){e.$set(e.albumInfo,"name",t)},expression:"albumInfo.name"}}),e._v(" "),e.albumNameEmpty?a("span",{staticClass:"empty"},[e._v("名称不能为空")]):e._e()],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"类型："}},[a("el-select",{model:{value:e.albumInfo.albumType,callback:function(t){e.$set(e.albumInfo,"albumType",t)},expression:"albumInfo.albumType"}},e._l(e.albumtype,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:e.albumDisabled}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"目的地："}},[a("el-button",{staticClass:"w200 tl",attrs:{plain:"",disabled:e.albumDisabled},on:{click:function(t){e.leftTree2=1!=e.leftTree2}}},[e._v(e._s(e.albumInfo.areaName))])],1),e._v(" "),e.leftTree2?a("div",{staticClass:"left-tree2"},[a("el-tree",{ref:"refTree",staticClass:"treeDemo",attrs:{props:e.props1,load:e.loadNode1,lazy:"","expand-on-click-node":!1,"node-key":"id"},on:{"node-click":e.treeClick}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"album-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createPic}},[e._v("创建素材")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAlbum}},[e._v(e._s(e.saveAlbumBut))])],1)],1)]),e._v(" "),a("div",{staticClass:"material-message"},[a("div",{staticClass:"album-title"},[a("div",{staticClass:"blue-box"}),e._v(" "),a("div",{staticClass:"album-text"},[e._v("素材信息")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.picInfoShow,expression:"picInfoShow"}],staticClass:"album-form"},[a("div",{staticClass:"album-name1"},[e._v("\r\n                    名称："),a("el-input",{attrs:{placeholder:"请输入素材名称",disabled:e.picDisabled},model:{value:e.pictInfo.name,callback:function(t){e.$set(e.pictInfo,"name",t)},expression:"pictInfo.name"}}),e._v(" "),e.picNameEmpty?a("span",{staticClass:"empty"},[e._v("名称不能为空")]):e._e()],1),e._v(" "),a("div",{staticClass:"album-info"},[a("div",[a("p",{staticClass:"per-title"},[e._v("权限：")]),e._v(" "),a("el-checkbox-group",{staticClass:"company-list",attrs:{disabled:e.picDisabled},model:{value:e.checkedCompany,callback:function(t){e.checkedCompany=t},expression:"checkedCompany"}},e._l(e.companyList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("div",{staticClass:"size"},[e._v("尺寸："+e._s(e.pictInfo.width)+"*"+e._s(e.pictInfo.height))]),e._v(" "),a("div",{staticClass:"size"},[e._v("大小："+e._s(e.pictInfo.length))])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.picInfoShow,expression:"picInfoShow"}],staticClass:"album-picbutton"},[a("el-button",{attrs:{type:"primary"},on:{click:e.savPic}},[e._v(e._s(e.savPicBut))])],1)])])])]),e._v(" "),a("el-dialog",{staticClass:"clearfix",attrs:{title:"添加照片",visible:e.getPictureForm,"custom-class":"city_list","append-to-body":!0,width:"1350px"},on:{"update:visible":function(t){e.getPictureForm=t},close:e.pictureFormClose}},[a("div",{staticClass:"add-address-imgpic"},[a("div",{staticClass:"left-imgpic"},[a("div",{staticClass:"upload"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{limit:12,drag:"","file-list":e.fileList,action:"http://192.168.1.186:3009/upload/api/picture",multiple:"","list-type":"picture","on-error":e.handleError,"on-success":e.handleSuccess,"on-remove":e.handleRemove,"on-preview":e.handlePreview,name:"files"}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，单次最多上传12张图片")])])],1)]),e._v(" "),a("div",{staticClass:"right-form1"},[a("div",{staticClass:"album-title"},[a("div",{staticClass:"blue-box"}),e._v(" "),a("div",{staticClass:"album-text"},[e._v("素材信息")])]),e._v(" "),e._l(e.fileList,function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.uid==t.uid,expression:"uid==item.uid"}],staticClass:"album-form"},[a("div",{staticClass:"album-name1"},[e._v("\r\n                    名称："),a("el-input",{attrs:{placeholder:"请输入素材名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("div",{staticClass:"album-info"},[a("div",[a("p",{staticClass:"per-title"},[e._v("权限：")]),e._v(" "),a("el-checkbox-group",{staticClass:"company-list",model:{value:t.companies,callback:function(a){e.$set(t,"companies",a)},expression:"item.companies"}},e._l(e.companyList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("div",{staticClass:"size"},[e._v("尺寸： "+e._s(t.width)+"*"+e._s(t.height))]),e._v(" "),a("div",{staticClass:"size"},[e._v("大小： "+e._s(t.length))])])])}),e._v(" "),a("div",{staticClass:"uploadBut"},[a("el-button",{on:{click:e.pictureFormClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.pictureInsert}},[e._v("添加素材")])],1)],2)])])],1)},staticRenderFns:[]};var he=a("VU/8")(pe,me,!1,function(e){a("RNdM")},"data-v-42b4c318",null).exports,fe={data:function(){return{create_img:!1,fileList2:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],se_img:!1,up_img:!1,img_change:!1,hidval:-1,shebeiWindow:!1,img_name:{name:"",type:"",address:""},form:{china:"",english:"",info:""},tags:[{name:"标签一",type:""},{name:"标签二",type:"success"},{name:"标签三",type:"info"},{name:"标签四",type:"warning"},{name:"标签五",type:"danger"}],image1:{domains:[{url:"http://victor-t.cn/7.png"},{url:"http://victor-t.cn/7.png"},{url:"http://victor-t.cn/7.png"},{url:"http://victor-t.cn/7.png"},{url:"http://victor-t.cn/7.png"},{url:"http://victor-t.cn/7.png"}]},image:{domains:[{url:"http://victor-t.cn/7.png"},{url:"http://victor-t.cn/7.png"},{url:"http://victor-t.cn/7.png"}]},ruleForm1:{domains:[{value:"",namechina:"12",nameenglish:"12",info:"12"}]},dialogFormVisible:!1,ruleForm:{NameChn:"",NameEng:"",Address:"",AddressEng:"",area:"",Star:"",region:"",Longitude:"",Latitude:"",CommentScore:"",desc:""},rules:{NameChn:[{validator:function(e,t,a){if(!t)return a(new Error("中文名称不能为空"));a()},trigger:"blur"}],Address:[{validator:function(e,t,a){if(!t)return a(new Error("中文地址不能为空"));a()},trigger:"blur"}],area:[{validator:function(e,t,a){if(!t)return a(new Error("所属地区不能为空"));a()},trigger:"blur"}],Longitude:[{validator:function(e,t,a){if(!t)return a(new Error("经度不能为空"));if(!/^[0-9]+.?[0-9]*$/.test(t))return a(new Error("请输入数字"));a()},trigger:"blur"}],Latitude:[{validator:function(e,t,a){if(!t)return a(new Error("纬度不能为空"));if(!/^[0-9]+.?[0-9]*$/.test(t))return a(new Error("请输入数字"));a()},trigger:"blur"}],CommentScore:[{validator:function(e,t,a){if(t&&!/^([1-9]\d?|100)$/.test(t))return a(new Error("请输入1-100的数字"));a()},trigger:"blur"}]},formLabelWidth:"120px",img:[{imgUrl:"http://victor-t.cn/7.png",hotelchina:"平八茶楼酒店",hotelenglish:"Heihachi Tea House Inn",value5:3.7},{imgUrl:"http://victor-t.cn/7.png",hotelchina:"平八茶楼酒店",hotelenglish:"Heihachi Tea House Inn",value5:3.7},{imgUrl:"http://victor-t.cn/7.png",hotelchina:"平八茶楼酒店",hotelenglish:"Heihachi Tea House Inn",value5:3.7},{imgUrl:"http://victor-t.cn/7.png",hotelchina:"平八茶楼酒店",hotelenglish:"Heihachi Tea House Inn",value5:3.7},{imgUrl:"http://victor-t.cn/7.png",hotelchina:"平八茶楼酒店",hotelenglish:"Heihachi Tea House Inn",value5:3.7},{imgUrl:"http://victor-t.cn/7.png",hotelchina:"平八茶楼酒店",hotelenglish:"Heihachi Tea House Inn",value5:3.7}],currentPage4:4,search_text:"",props1:{label:"name"},find_img:!1}},methods:{createdImg:function(){this.create_img=!0},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},sele_img:function(){this.se_img=!0},uplo_img:function(){this.up_img=!0},add_image_style:function(){this.img_change=!0},handleClose:function(e){this.tags.splice(this.tags.indexOf(e),1)},find_image:function(e){this.find_img=!0},img_delete:function(e){var t=this.image.domains.indexOf(e);this.image.domains.splice(t,1)},shebeiChange:function(){this.ruleForm1.domains[this.hidval].namechina=this.form.china,this.ruleForm1.domains[this.hidval].nameenglish=this.form.english,this.ruleForm1.domains[this.hidval].info=this.form.info,this.shebeiWindow=!1},tanchu:function(e){this.shebeiWindow=!0;var t=this.ruleForm1.domains.indexOf(e);this.hidval=t,this.form.china=this.ruleForm1.domains[this.hidval].namechina,this.form.english=this.ruleForm1.domains[this.hidval].nameenglish,this.form.info=this.ruleForm1.domains[this.hidval].info},removeDomain:function(e){var t=this.ruleForm1.domains.indexOf(e);-1!==t&&this.ruleForm1.domains.splice(t,1)},add_shebei:function(){this.ruleForm1.domains.push({value:"",namechina:"",nameenglish:"",info:"",key:Date.now()})},addhotel:function(){this.dialogFormVisible=!0},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},loadNode1:function(e,t){return console.log(e),0===e.level?t([{name:"region"},{name:"qqq"}]):e.level>1?t([]):void setTimeout(function(){t([{name:"leaf",leaf:!0},{name:"zone"}])},500)}}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header_add"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addhotel}},[e._v("添加酒店")])],1),e._v(" "),a("div",{staticClass:"header_seach"},[a("div",{staticClass:"search-input"},[a("el-input",{attrs:{placeholder:"请输入中文名称\\英文名称\\目的地",clearable:""},model:{value:e.search_text,callback:function(t){e.search_text=t},expression:"search_text"}})],1),e._v(" "),a("div",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-search"}})],1)])]),e._v(" "),a("div",{staticClass:"left_tree"},[a("div",{staticClass:"tree_size"},[a("el-tree",{attrs:{props:e.props1,load:e.loadNode1,lazy:""}})],1)]),e._v(" "),a("div",{staticClass:"img",on:{click:e.addhotel}},e._l(e.img,function(t,i){return a("div",{staticClass:"img_border",attrs:{index:""}},[a("div",{staticClass:"image_size"},[a("img",{staticClass:"img_item",attrs:{src:t.imgUrl}})]),e._v(" "),a("div",{staticClass:"hotchi",model:{value:t.hotelchina,callback:function(a){e.$set(t,"hotelchina",a)},expression:"item.hotelchina"}},[e._v(e._s(t.hotelchina))]),e._v(" "),a("div",{staticClass:"hoteng",model:{value:t.hotelenglish,callback:function(a){e.$set(t,"hotelenglish",a)},expression:"item.hotelenglish"}},[e._v(e._s(t.hotelenglish))]),e._v(" "),a("div",{staticClass:"start"},[a("el-rate",{attrs:{disabled:"","text-color":"#ff9900","score-template":"{item.value}"},model:{value:t.value5,callback:function(a){e.$set(t,"value5",a)},expression:"item.value5"}})],1)])})),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage4,"page-sizes":[100,200,300,400],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:400},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",[a("el-dialog",{staticClass:"clearfix form_left",attrs:{title:"新增和编辑页面",visible:e.dialogFormVisible,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"info_title"},[e._v("\n        基础信息\n      ")]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"clearfix form_left",attrs:{model:e.ruleForm,rules:e.rules,inline:!0}},[a("div",{staticClass:"left_input"},[a("el-form-item",{attrs:{label:"中文名称",prop:"NameChn"}},[a("el-input",{model:{value:e.ruleForm.NameChn,callback:function(t){e.$set(e.ruleForm,"NameChn",t)},expression:"ruleForm.NameChn"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"英文名称",prop:"NameEng"}},[a("el-input",{model:{value:e.ruleForm.NameEng,callback:function(t){e.$set(e.ruleForm,"NameEng",t)},expression:"ruleForm.NameEng"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文地址",prop:"Address"}},[a("el-input",{model:{value:e.ruleForm.Address,callback:function(t){e.$set(e.ruleForm,"Address",t)},expression:"ruleForm.Address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"英文地址",prop:"AddressEng"}},[a("el-input",{model:{value:e.ruleForm.AddressEng,callback:function(t){e.$set(e.ruleForm,"AddressEng",t)},expression:"ruleForm.AddressEng"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属地区",prop:"area"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"middle_input"},[a("el-form-item",{attrs:{label:"星级",prop:"Star"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择星级"},model:{value:e.ruleForm.Star,callback:function(t){e.$set(e.ruleForm,"Star",t)},expression:"ruleForm.Star"}},[a("el-option",{attrs:{label:"一星",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"二星",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"三星",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"四星",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"五星",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"经度",prop:"Longitude"}},[a("el-input",{model:{value:e.ruleForm.Longitude,callback:function(t){e.$set(e.ruleForm,"Longitude",t)},expression:"ruleForm.Longitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纬度",prop:"Latitude"}},[a("el-input",{model:{value:e.ruleForm.Latitude,callback:function(t){e.$set(e.ruleForm,"Latitude",t)},expression:"ruleForm.Latitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评分",prop:"CommentScore"}},[a("el-input",{model:{value:e.ruleForm.CommentScore,callback:function(t){e.$set(e.ruleForm,"CommentScore",t)},expression:"ruleForm.CommentScore"}})],1)],1),e._v(" "),a("div",{staticClass:"right_input"},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticClass:"textarea_size",attrs:{type:"textarea",rows:13,placeholder:"请输入内容",width:"50%"}})],1)],1),e._v(" "),a("div",{staticClass:"introduction"},[a("el-form-item",{attrs:{label:"简介"}},[a("el-input",{staticClass:"introduction_area",attrs:{type:"textarea",rows:17,placeholder:"请输入内容"}})],1)],1),e._v(" "),a("div",{staticClass:"info_title"},[e._v("\n          设施列表\n        ")]),e._v(" "),a("div",{staticClass:"facilities"},[a("div",[a("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.add_shebei}},[e._v("添加新设施")])],1),e._v(" "),e._l(e.ruleForm1.domains,function(t,i){return a("div",{key:t.key,staticClass:"add_facilities",attrs:{prop:"domains."+i+".value"},model:{value:e.ruleForm1,callback:function(t){e.ruleForm1=t},expression:"ruleForm1"}},[a("div",{staticClass:"qq",on:{click:function(a){a.preventDefault(),e.tanchu(t)}}},[a("el-form-item",{staticClass:"facilities_name",attrs:{label:"中文设施名"}},[a("el-input",{attrs:{disabled:""},model:{value:t.namechina,callback:function(a){e.$set(t,"namechina",a)},expression:"domain.namechina"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"英文设施名"}},[a("el-input",{attrs:{disabled:""},model:{value:t.nameenglish,callback:function(a){e.$set(t,"nameenglish",a)},expression:"domain.nameenglish"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设施简介"}},[a("el-input",{attrs:{disabled:""},model:{value:t.info,callback:function(a){e.$set(t,"info",a)},expression:"domain.info"}})],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)])})],2),e._v(" "),a("div",{staticClass:"info_title"},[e._v("\n          图片列表\n        ")]),e._v(" "),a("div",{staticClass:"add_img"},[a("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.add_image_style}},[e._v("添加图片")])],1),e._v(" "),a("div",{staticClass:"image_border"},e._l(e.image.domains,function(t,i){return a("div",{key:t.key,staticClass:"image_kuang",model:{value:e.image,callback:function(t){e.image=t},expression:"image"}},[a("img",{staticClass:"ima_kuang",attrs:{src:t.url},on:{click:function(a){e.find_image(t)}},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}}),e._v(" "),a("div",{staticClass:"image_exit",on:{click:function(a){e.img_delete(t)}}})])}))]),e._v(" "),a("div",[a("el-dialog",{staticClass:"clearfix form_left",attrs:{title:"查看素材",visible:e.find_img,"append-to-body":"",width:"90%"},on:{"update:visible":function(t){e.find_img=t}}},[a("div",{staticClass:"zong_border clearfix"},[a("div",{staticClass:"left_border"},[a("div",{staticClass:"left_img"},[a("img",{staticStyle:{width:"920px",height:"500px"},attrs:{src:"http://victor-t.cn/7.png"}})]),e._v(" "),a("div",{staticClass:"delete_img"},[a("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary"}},[e._v("移除图片"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)]),e._v(" "),a("div",{staticClass:"right_border"},[a("div",{staticClass:"photo_info"},[a("div",[e._v("相册信息")]),e._v(" "),a("div",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[e._v("大帅府")]),e._v(" "),a("div",{staticClass:"font_info"},[e._v("类型： 景点")]),e._v(" "),a("div",{staticClass:"font_info"},[e._v("目的地： 沈阳")])]),e._v(" "),a("div",{staticClass:"shucai_info"},[a("div",[e._v("素材信息")]),e._v(" "),a("div",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[e._v("大帅府")]),e._v(" "),a("div",{staticClass:"kuang_bor"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"名称："}},[a("el-input")],1),e._v(" "),a("el-form-item",{attrs:{label:"尺寸："}},[a("el-input")],1),e._v(" "),a("el-form-item",{attrs:{label:"大小："}},[a("el-input")],1),e._v(" "),e._l(e.tags,function(t){return a("el-tag",{key:t.name,staticClass:"tag_info",attrs:{closable:"",type:t.type},on:{close:function(a){e.handleClose(t)}}},[e._v("\n                          "+e._s(t.name)+"\n                        >\n                        ")])})],2)],1)])])])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"设备列表",visible:e.shebeiWindow,"append-to-body":"",width:"20%"},on:{"update:visible":function(t){e.shebeiWindow=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"中文设备名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.china,callback:function(t){e.$set(e.form,"china",t)},expression:"form.china"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"英文设备名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.english,callback:function(t){e.$set(e.form,"english",t)},expression:"form.english"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备简称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.hidval,expression:"hidval"}],attrs:{type:"hidden",value:"hidval"},domProps:{value:e.hidval},on:{input:function(t){t.target.composing||(e.hidval=t.target.value)}}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.shebeiChange()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{width:"50%",title:"添加图片",visible:e.img_change,"append-to-body":""},on:{"update:visible":function(t){e.img_change=t}}},[a("div",{staticClass:"big_img clearfix"},[a("div",{staticClass:"select_img"},[a("el-button",{staticClass:"butn",attrs:{type:"primary"},on:{click:e.sele_img}},[e._v("选取图片"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1),e._v(" "),a("div",{staticClass:"upload_img"},[a("div",[a("el-button",{staticClass:"butn",attrs:{type:"primary"},on:{click:e.uplo_img}},[e._v("上传图片"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)])])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{width:"80%",title:"选取图片",visible:e.se_img,"append-to-body":""},on:{"update:visible":function(t){e.se_img=t}}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"sea_buton"},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"}},[e._v("添加")]),e._v(" "),a("div",{staticClass:"input_wid"},[a("el-input",{staticStyle:{width:"182px"},attrs:{placeholder:"请输入内容",clearable:""}}),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticClass:"input_img"},[a("el-form",[a("el-form-item",{attrs:{label:"所属地区","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"相册","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"input_rig_img"},e._l(e.image1.domains,function(t,i){return a("div",{key:t.key,staticClass:"inp_i",model:{value:e.image1,callback:function(t){e.image1=t},expression:"image1"}},[a("img",{staticClass:"inp_ii",attrs:{src:t.url},model:{value:e.image1,callback:function(t){e.image1=t},expression:"image1"}})])}))])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{width:"80%",title:"选取图片",visible:e.up_img,"append-to-body":""},on:{"update:visible":function(t){e.up_img=t}}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"sea_buton"},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"}},[e._v("上传并选取")]),e._v(" "),a("el-button",{staticStyle:{float:"left"},on:{click:e.createdImg}},[e._v("创建相册")]),e._v(" "),a("div",{staticClass:"input_wid"},[a("el-input",{staticStyle:{width:"182px"},attrs:{placeholder:"请输入内容",clearable:""}}),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticClass:"input_img"},[a("el-form",[a("el-form-item",{attrs:{label:"所属地区","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"相册","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"input_rig_img"},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList2,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{width:"20%",title:"创建相册",visible:e.create_img,"append-to-body":""},on:{"update:visible":function(t){e.create_img=t}}},[a("div",{staticClass:"clearfix"},[a("el-form",{attrs:{model:e.img_name}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.img_name.name,callback:function(t){e.$set(e.img_name,"name",t)},expression:"img_name.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.img_name.type,callback:function(t){e.$set(e.img_name,"type",t)},expression:"img_name.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目的地","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.img_name.address,callback:function(t){e.$set(e.img_name,"address",t)},expression:"img_name.address"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"}},[e._v("确 定")])],1)],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确认")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var ve=a("VU/8")(fe,ge,!1,function(e){a("CLkE")},"data-v-67fc1124",null).exports;function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ye={data:function(){var e;return be(e={companyList:[],sid:0,a:[],b:[],c:[{name:"",url:""}],files:[],bankAccount:!1,add_bankAccount:!1,edit_bankAccount:!1,addBankAccount:{cardNumber:"",cardName:"",bankName:"",memo:""},editBankAccount:{cardNumber:"",cardName:"",bankName:"",memo:""},BankSelection:[],bankid:0,forbidden4:!0,forbidden5:!0,supplier:{search:""},add_supplierInfo:!1,addSupplierInfo:{name:"",address:"",leader:"",phone:"",destinationID:"",productDirection:"",userState:"",supplierType:[],expireTime:"",isMonthly:"",memo:""},edit_supplierInfo:!1,editSupplierInfo:{name:"",address:"",leader:"",phone:"",destinationID:"",productDirection:"",userState:"",expireTime:"",isMonthly:"",memo:"",supplierType_edit:[]},attachment:!1,labelPosition:"right",aaa:{Authorization:"Bearer "+localStorage.getItem("token")}},"files",[]),be(e,"rules",{contactName:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z]{0,4}$/,message:"请输入4个字以内的中文或英文名称"}],contactPhone:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^1(3|4|5|7|8)\d{9}$/,message:"请输入11位正确的手机号码"}],cardNumber:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[0-9]{0,20}$/,message:"请输入20个数字以内的正确卡号"}],cardName:[{required:!0,message:"不能为空",trigger:"blur"}],bankName:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{0,10}$/,message:"请输入10个汉字以内银行名称"}],name:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]{0,40}$/,message:"请输入40字以内的正确名称,含汉字、字母和数字"}],address:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9_]{0,80}$/,message:"请输入80字以内正确地址，含汉字、字母、数字下划线"}],leader:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z]{0,4}$/,message:"请输入4个字以内的中文或英文"}],phone:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^1(3|4|5|7|8)\d{9}$/,message:"请输入11位正确的手机号码"}],destinationID:[{required:!0,message:"不能为空",trigger:"blur"}],productDirection:[{required:!0,message:"不能为空",trigger:"blur"}],userState:[{required:!0,message:"不能为空",trigger:"change"}],supplierType:[{required:!0,message:"不能为空",trigger:"change"}],expireTime:[{required:!0,message:"不能为空",trigger:"change"}],isMonthly:[{required:!0,message:"不能为空",trigger:"change"}],supplierType_edit:[{required:!0,message:"不能为空",trigger:"change"}]}),be(e,"tableData",[]),be(e,"multipleSelection",[]),be(e,"forbidden1",!0),be(e,"forbidden",!0),be(e,"bankData",[]),be(e,"Width",""),be(e,"add_contact",!1),be(e,"addContact",{contactName:"",contactPhone:"",weChat:"",qq:""}),be(e,"edit_contact",!1),be(e,"editContact",{contactName:"",contactPhone:"",weChat:"",qq:""}),be(e,"contactData",[]),be(e,"contactSelection",[]),be(e,"forbidden2",!0),be(e,"forbidden3",!0),be(e,"ssid",0),be(e,"contact",!1),be(e,"currentPage",1),be(e,"total",1),be(e,"pagesize",10),be(e,"index",""),e},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},attachment_close:function(){this.attachment=!1},handlePreview:function(e){console.log(e)},handleRemove:function(e,t){console.log(e,t)},handleSuccess:function(e,t,a){this.a=JSON.parse(e),this.b.push(this.a[0]),a.length==this.b.length&&this.ppp()},ppp:function(){for(var e=0;e<this.b.length;e++)this.b[e].supplierID=this.sid;var t=[];this.b.forEach(function(e){t.push({name:e.Name,url:e.Url,supplierID:e.supplierID})});this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/savefd",{file:t}).then(function(e){}).catch(function(e){console.log(e)}),console.log(t)},clearFiles:function(){this.$refs["my-upload"].clearFiles()},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.multipleSelection.length;a++)if(this.multipleSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},changeFun:function(e){0===this.sid?this.sid=e[0].id:this.sid=0,console.log(e),console.log(this.sid),this.multipleSelection=e,1==this.multipleSelection.length?this.forbidden1=!1:this.forbidden1=!0,this.multipleSelection.length>=1?this.forbidden=!1:this.forbidden=!0},clickRow:function(e){this.$refs.multipleTable.toggleRowSelection(e)},add_test:function(){this.add_supplierInfo=!0,this.getCompany()},getCompany:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/suppliertype/api/get").then(function(t){e.companyList=t.data.objects})},addSupplier:function(e){for(var t=this,a=[],i=0;i<this.addSupplierInfo.supplierType.length;i++)a.push({id:0,supplierType:this.addSupplierInfo.supplierType[i],supplierID:0});this.$refs.addSupplierInfo.validate(function(e){if(!e)return!1;var i=t;t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/supplierinsert",{object:{name:t.addSupplierInfo.name,userState:t.addSupplierInfo.userState,types:a,address:t.addSupplierInfo.address,destinationID:t.addSupplierInfo.destinationID,productDirection:t.addSupplierInfo.productDirection,isMonthly:t.addSupplierInfo.isMonthly,leader:t.addSupplierInfo.leader,phone:t.addSupplierInfo.phone,expireTime:t.addSupplierInfo.expireTime,memo:t.addSupplierInfo.memo,id:0,createTime:"2018-12-25T02:23:15.735Z",code:"string",isDeleted:0,billName:"string",taxNumber:"string",createUser:"string"}}).then(function(e){0==e.data.isSuccess?i.$message.error("添加失败,该供应商已存在"):(i.addSupplierInfo.name="",i.addSupplierInfo.userState="",i.addSupplierInfo.supplierType="",i.addSupplierInfo.address="",i.addSupplierInfo.destinationID="",i.addSupplierInfo.productDirection="",i.addSupplierInfo.isMonthly="",i.addSupplierInfo.leader="",i.addSupplierInfo.phone="",i.addSupplierInfo.expireTime="",i.addSupplierInfo.memo="",i.$message.success("添加成功"),i.pageList(),i.add_supplierInfo=!1)})})},addSupplierInfoCancel:function(e){this.add_supplierInfo=!1,this.$refs[e].resetFields()},obtain:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/supplierget",{id:this.sid}).then(function(a){if(1==e){t.editSupplierInfo=a.data.object,t.$set(t.editSupplierInfo,"supplierType_edit",[]);for(var i=0;i<t.editSupplierInfo.types.length;i++)t.editSupplierInfo.supplierType_edit.push(t.editSupplierInfo.types[i].supplierType)}}).catch(function(e){})},test:function(){this.edit_supplierInfo=!0,this.obtain(1),this.getCompany()},editDialogVisible:function(e){for(var t=this,a=[],i=0;i<this.editSupplierInfo.supplierType_edit.length;i++)a.push({id:0,supplierType:this.editSupplierInfo.supplierType_edit[i],supplierID:this.sid});this.edit_supplierInfo=!1,this.$refs[e].validate(function(e){if(e){var i=t;t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/suppliersave",{object:{name:t.editSupplierInfo.name,userState:t.editSupplierInfo.userState,types:a,address:t.editSupplierInfo.address,destinationID:t.editSupplierInfo.destinationID,productDirection:t.editSupplierInfo.productDirection,isMonthly:t.editSupplierInfo.isMonthly,leader:t.editSupplierInfo.leader,phone:t.editSupplierInfo.phone,expireTime:t.editSupplierInfo.expireTime,memo:t.editSupplierInfo.memo,id:t.sid,createTime:"2018-12-25T02:23:15.735Z",code:"string",isDeleted:0,billName:"string",taxNumber:"string",createUser:"string"}}).then(function(e){i.total=obj.data.total,i.tableData=obj.data.objects,i.tableData.forEach(function(e,t,a){0==a[t].userState?a[t].userState="停用":1==a[t].userState&&(a[t].userState="正常"),0==a[t].supplierType?a[t].supplierType="签证，机票":1==a[t].supplierType?a[t].supplierType="地接":2==a[t].supplierType&&(a[t].supplierType="订车"),0==a[t].isMonthly?a[t].isMonthly="现金":1==a[t].isMonthly?a[t].isMonthly="微信":2==a[t].isMonthly&&(a[t].isMonthly="支付宝")}),console.log(obj.data.objects),i.$message.success("修改成功！"),i.edit_supplierInfo=!1}).catch(function(e){console.log(e)})}}),this.pageList()},editSupplierInfoCancel:function(e){this.edit_supplierInfo=!1,this.$refs[e].resetFields()},add_contactCancel:function(e){this.add_contact=!1,this.$refs[e].resetFields()},contactPeoele:function(){this.contact=!0,this.link_people()},link_people:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/contactlist",{object:{supplierID:this.sid}}).then(function(t){e.contactData=t.data.objects,console.log(t.data.objects)}).catch(function(e){console.log(e)})},contact_close:function(){this.contact=!1},addContactPeople:function(e){var t=this;this.$refs.addContact.validate(function(e){if(!e)return!1;var a=t;t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/contactinsert",{object:{id:0,createTime:"2019-01-08T11:00:54.570Z",code:"string",isDeleted:0,name:t.addContact.contactName,phone:t.addContact.contactPhone,weChat:t.addContact.weChat,qq:t.addContact.qq,supplierID:t.sid}}).then(function(e){0==e.data.isSuccess?a.$message.error("添加失败,该供应商已存在"):(a.addContact.contactName="",a.addContact.contactPhone="",a.addContact.weChat="",a.addContact.qq="",a.$message.success("添加成功"),a.link_people())}),t.add_contact=!1})},clickContact:function(e){this.$refs.contactTable.toggleRowSelection(e)},changeContact:function(e){0===this.ssid?this.ssid=e[0].id:this.ssid=0,console.log(this.ssid),this.contactSelection=e,1==this.contactSelection.length?this.forbidden2=!1:this.forbidden2=!0,this.contactSelection.length>=1?this.forbidden3=!1:this.forbidden3=!0},rowStyle:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.contactSelection.length;a++)if(this.contactSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},peoeleObtain:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/contactget",{id:this.ssid}).then(function(t){console.log(t.data.object),e.editContact.id=t.data.object.id,e.editContact.contactName=t.data.object.name,e.editContact.contactPhone=t.data.object.phone,e.editContact.weChat=t.data.object.weChat,e.editContact.qq=t.data.object.qq}).catch(function(e){})},tests:function(){this.edit_contact=!0,this.peoeleObtain()},editContactPeople:function(e){var t=this;this.edit_contact=!1,this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/contactsave",{object:{id:t.ssid,createTime:"2019-01-11T06:52:05.349Z",code:"string",isDeleted:0,name:t.editContact.contactName,phone:t.editContact.contactPhone,weChat:t.editContact.weChat,qq:t.editContact.qq,supplierID:t.sid}}).then(function(e){a.$message.success("修改成功！"),a.edit_contact=!1,a.link_people()}).catch(function(e){console.log(e)})}})},edit_contactCancel:function(e){this.edit_contact=!1,this.$refs[e].resetFields()},deleteContact:function(e){var t=this,a=this;this.$confirm("是否删除该联系人？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/contactdelete",{id:t.ssid}).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.link_people()}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},contactBank:function(){this.bankAccount=!0,this.link_bank()},link_bank:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/banklist",{object:{supplierID:this.sid}}).then(function(t){e.bankData=t.data.objects,console.log(t.data.objects)}).catch(function(e){console.log(e)})},bankAccount_close:function(){this.bankAccount=!1},addBankAccountCancel:function(e){this.add_bankAccount=!1,this.$refs[e].resetFields()},editBank:function(){this.edit_bankAccount=!0,this.BankObtain()},editBankAccountCancel:function(e){this.edit_bankAccount=!1,this.$refs[e].resetFields()},BankObtain:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/bankget",{id:this.bankid}).then(function(t){console.log(t.data.object),e.editBankAccount.id=t.data.object.id,e.editBankAccount.cardNumber=t.data.object.cardNumber,e.editBankAccount.cardName=t.data.object.cardName,e.editBankAccount.bankName=t.data.object.bankName,e.editBankAccount.memo=t.data.object.memo}).catch(function(e){})},clickBank:function(e){this.$refs.bankTable.toggleRowSelection(e)},changeBank:function(e){0===this.bankid?this.bankid=e[0].id:this.bankid=0,console.log(this.bankid),this.BankSelection=e,1==this.BankSelection.length?this.forbidden4=!1:this.forbidden4=!0,this.BankSelection.length>=1?this.forbidden5=!1:this.forbidden5=!0},rowStyleBank:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.BankSelection.length;a++)if(this.BankSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},addBank:function(e){var t=this;this.$refs.addBankAccount.validate(function(e){if(!e)return!1;var a=t;t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/bankinsert",{object:{id:0,createTime:"2019-01-08T11:00:54.570Z",code:"string",isDeleted:0,cardNumber:t.addBankAccount.cardNumber,cardName:t.addBankAccount.cardName,bankName:t.addBankAccount.bankName,memo:t.addBankAccount.memo,supplierID:t.sid}}).then(function(e){0==e.data.isSuccess?a.$message.error("添加失败,该供应商已存在"):(a.addBankAccount.cardNumber="",a.addBankAccount.cardName="",a.addBankAccount.bankName="",a.addBankAccount.memo="",a.$message.success("添加成功"),a.link_bank())}),t.add_bankAccount=!1})},editBankCancel:function(e){var t=this;this.$refs.editBankAccount.validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/banksave",{object:{id:t.bankid,createTime:"2019-01-08T11:00:54.570Z",code:"string",isDeleted:0,cardNumber:t.editBankAccount.cardNumber,cardName:t.editBankAccount.cardName,bankName:t.editBankAccount.bankName,memo:t.editBankAccount.memo,supplierID:t.sid}}).then(function(e){a.$message.success("修改成功！"),a.edit_contact=!1,a.link_bank()}).catch(function(e){console.log(e)})}}),this.edit_bankAccount=!1},deleteBank:function(e){var t=this,a=this;this.$confirm("是否删除该银行账号？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/bankdelete",{id:t.bankid}).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.link_bank()}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deletion:function(e){var t=this,a=this;this.$confirm("是否删除该供应商？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(t.GLOBAL.serverSrc+"/universal/supplier/api/supplierdelete",{id:t.sid}).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.pageList()}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.currentPage=1,this.pagesize=e,this.pageList()},handleCurrentChange:function(e){this.currentPage=e,this.pageList()},pageList:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/supplierpage",{object:{isDeleted:0},pageSize:this.pagesize,pageIndex:this.currentPage,isGetAll:!0,id:0}).then(function(t){e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(e,t,a){for(var i="",l=0;l<a[t].types.length;l++)i+=a[t].types[l].supplierTypeEX,l!=a[t].types.length-1&&(i+=",");a[t].types1=i,0==a[t].userState?a[t].userState="停用":1==a[t].userState&&(a[t].userState="正常"),0==a[t].isMonthly?a[t].isMonthly="现金":1==a[t].isMonthly?a[t].isMonthly="微信":2==a[t].isMonthly&&(a[t].isMonthly="支付宝")}),console.log(t.data.objects)}).catch(function(e){console.log(e)})}},mounted:function(){this.pageList()}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"supplierInfo"},[a("el-form",[a("el-form-item",{staticClass:"top"},[a("span",[e._v("名称")]),e._v(" "),a("el-input",{staticClass:"supplier_search",attrs:{placeholder:"输入供应商信息",clearable:""},model:{value:e.supplier.search,callback:function(t){e.$set(e.supplier,"search",t)},expression:"supplier.search"}})],1)],1),e._v(" "),a("div",{staticClass:"button",staticStyle:{"text-align":"left",clear:"both"}},[a("el-button",{attrs:{plain:""},on:{click:e.add_test}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.forbidden1},on:{click:e.test}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.forbidden1},on:{click:e.contactPeoele}},[e._v("联系人")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.forbidden1},on:{click:e.contactBank}},[e._v("银行账号")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.forbidden1},on:{click:function(t){e.attachment=!0}}},[e._v("附件")]),e._v(" "),a("el-button",{staticClass:"delete_button",attrs:{plain:"",disabled:e.forbidden},on:{click:function(t){e.deletion(e.index)}}},[e._v("删除")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-style":e.getRowClass,border:"","row-style":e.rowClass},on:{"row-click":e.clickRow,"selection-change":e.changeFun}},[a("el-table-column",{attrs:{prop:"number",fixed:"",label:"",type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userState",label:"状态","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expireTime",label:"到期日期","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"types1",label:"类型","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productDirection",label:"产品方向","min-width":"130",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isMonthly",label:"借款方式","min-width":"110",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"220",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"destinationID",label:"区域","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leader",label:"法人","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"80",align:"center"}})],1),e._v(" "),a("el-pagination",{staticClass:"paging",attrs:{"page-sizes":[10,20,30,50],background:"","page-size":e.pagesize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{staticStyle:{position:"absolute"},attrs:{title:"供应商信息",visible:e.add_supplierInfo,width:"900px","custom-class":"city_list","show-close":!1},on:{"update:visible":function(t){e.add_supplierInfo=t}}},[a("div",{staticStyle:{position:"absolute",top:"8px",right:"10px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addSupplierInfoCancel("addSupplierInfo")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addSupplier}},[e._v("保 存")])],1),e._v(" "),a("el-form",{ref:"addSupplierInfo",attrs:{model:e.addSupplierInfo,"label-position":e.labelPosition,"label-width":"80px",rules:e.rules}},[a("div",{staticClass:"supplierInfo_left"},[a("el-form-item",{staticClass:"addContact_span",attrs:{label:"名称","label-width":e.Width,prop:"name"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入名称"},model:{value:e.addSupplierInfo.name,callback:function(t){e.$set(e.addSupplierInfo,"name",t)},expression:"addSupplierInfo.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"地址","label-width":e.Width,prop:"address"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入地址"},model:{value:e.addSupplierInfo.address,callback:function(t){e.$set(e.addSupplierInfo,"address",t)},expression:"addSupplierInfo.address"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"负责人","label-width":e.Width,prop:"leader"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入负责人"},model:{value:e.addSupplierInfo.leader,callback:function(t){e.$set(e.addSupplierInfo,"leader",t)},expression:"addSupplierInfo.leader"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"手机号","label-width":e.Width,prop:"phone"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.addSupplierInfo.phone,callback:function(t){e.$set(e.addSupplierInfo,"phone",t)},expression:"addSupplierInfo.phone"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"区域","label-width":e.Width,prop:"destinationID"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入区域"},model:{value:e.addSupplierInfo.destinationID,callback:function(t){e.$set(e.addSupplierInfo,"destinationID",t)},expression:"addSupplierInfo.destinationID"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"产品方向","label-width":e.Width,prop:"productDirection"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入产品方向"},model:{value:e.addSupplierInfo.productDirection,callback:function(t){e.$set(e.addSupplierInfo,"productDirection",t)},expression:"addSupplierInfo.productDirection"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"状态",prop:"userState"}},[a("el-radio-group",{staticClass:"addSupplierInfo_state",model:{value:e.addSupplierInfo.userState,callback:function(t){e.$set(e.addSupplierInfo,"userState",t)},expression:"addSupplierInfo.userState"}},[a("el-radio",{attrs:{label:"0",value:"0"}},[e._v("停用")]),e._v(" "),a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("正常")])],1)],1)],1),e._v(" "),a("div",{staticClass:"supplierInfo_right"},[a("el-form-item",{attrs:{label:"到期时间",prop:"expireTime"}},[a("el-date-picker",{staticClass:"addSupplierInfo_name",staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择到期时间"},model:{value:e.addSupplierInfo.expireTime,callback:function(t){e.$set(e.addSupplierInfo,"expireTime",t)},expression:"addSupplierInfo.expireTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算方式",prop:"isMonthly"}},[a("el-select",{staticClass:"addSupplierInfo_name",attrs:{placeholder:"请选择结算方式"},model:{value:e.addSupplierInfo.isMonthly,callback:function(t){e.$set(e.addSupplierInfo,"isMonthly",t)},expression:"addSupplierInfo.isMonthly"}},[a("el-option",{attrs:{label:"现金",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"微信",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"支付宝",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"memo"}},[a("el-input",{staticClass:"addSupplierInfo_textarea",attrs:{type:"textarea","auto-complete":"off",autosize:{minRows:10,maxRows:15}},model:{value:e.addSupplierInfo.memo,callback:function(t){e.$set(e.addSupplierInfo,"memo",t)},expression:"addSupplierInfo.memo"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"类型",prop:"supplierType"}},[a("el-checkbox-group",{staticStyle:{width:"700px"},model:{value:e.addSupplierInfo.supplierType,callback:function(t){e.$set(e.addSupplierInfo,"supplierType",t)},expression:"addSupplierInfo.supplierType"}},e._l(e.companyList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"供应商信息",visible:e.edit_supplierInfo,width:"900px","custom-class":"city_list","show-close":!1},on:{"update:visible":function(t){e.edit_supplierInfo=t}}},[a("div",{staticStyle:{position:"absolute",top:"8px",right:"10px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editSupplierInfoCancel("editSupplierInfo")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editDialogVisible("editSupplierInfo")}}},[e._v("保 存")])],1),e._v(" "),a("el-form",{ref:"editSupplierInfo",attrs:{model:e.editSupplierInfo,"label-position":e.labelPosition,"label-width":"80px",rules:e.rules}},[a("div",{staticClass:"supplierInfo_left"},[a("el-form-item",{staticClass:"addContact_span",attrs:{label:"名称","label-width":e.Width,prop:"name"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入名称"},model:{value:e.editSupplierInfo.name,callback:function(t){e.$set(e.editSupplierInfo,"name",t)},expression:"editSupplierInfo.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"地址","label-width":e.Width,prop:"address"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入地址"},model:{value:e.editSupplierInfo.address,callback:function(t){e.$set(e.editSupplierInfo,"address",t)},expression:"editSupplierInfo.address"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"负责人","label-width":e.Width,prop:"leader"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入负责人"},model:{value:e.editSupplierInfo.leader,callback:function(t){e.$set(e.editSupplierInfo,"leader",t)},expression:"editSupplierInfo.leader"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"手机号","label-width":e.Width,prop:"phone"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.editSupplierInfo.phone,callback:function(t){e.$set(e.editSupplierInfo,"phone",t)},expression:"editSupplierInfo.phone"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"区域","label-width":e.Width,prop:"destinationID"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入区域"},model:{value:e.editSupplierInfo.destinationID,callback:function(t){e.$set(e.editSupplierInfo,"destinationID",t)},expression:"editSupplierInfo.destinationID"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"产品方向","label-width":e.Width,prop:"productDirection"}},[a("el-input",{staticClass:"addSupplierInfo_name",attrs:{"auto-complete":"off",placeholder:"请输入产品方向"},model:{value:e.editSupplierInfo.productDirection,callback:function(t){e.$set(e.editSupplierInfo,"productDirection",t)},expression:"editSupplierInfo.productDirection"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"状态",prop:"userState"}},[a("el-radio-group",{staticClass:"addSupplierInfo_state",model:{value:e.editSupplierInfo.userState,callback:function(t){e.$set(e.editSupplierInfo,"userState",t)},expression:"editSupplierInfo.userState"}},[a("el-radio",{attrs:{label:"0",value:"0"}},[e._v("停用")]),e._v(" "),a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("正常")])],1)],1)],1),e._v(" "),a("div",{staticClass:"supplierInfo_right"},[a("el-form-item",{attrs:{label:"到期时间",prop:"expireTime"}},[a("el-date-picker",{staticClass:"addSupplierInfo_name",staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择到期时间"},model:{value:e.editSupplierInfo.expireTime,callback:function(t){e.$set(e.editSupplierInfo,"expireTime",t)},expression:"editSupplierInfo.expireTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算方式",prop:"isMonthly"}},[a("el-select",{staticClass:"addSupplierInfo_name",attrs:{placeholder:"请选择结算方式"},model:{value:e.editSupplierInfo.isMonthly,callback:function(t){e.$set(e.editSupplierInfo,"isMonthly",t)},expression:"editSupplierInfo.isMonthly"}},[a("el-option",{attrs:{label:"现金",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"微信",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"支付宝",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"memo"}},[a("el-input",{staticClass:"addSupplierInfo_textarea",attrs:{type:"textarea","auto-complete":"off",autosize:{minRows:10,maxRows:15}},model:{value:e.editSupplierInfo.memo,callback:function(t){e.$set(e.editSupplierInfo,"memo",t)},expression:"editSupplierInfo.memo"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"类型",prop:"supplierType_edit"}},[a("el-checkbox-group",{staticStyle:{width:"700px"},model:{value:e.editSupplierInfo.supplierType_edit,callback:function(t){e.$set(e.editSupplierInfo,"supplierType_edit",t)},expression:"editSupplierInfo.supplierType_edit"}},e._l(e.companyList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"联系人信息",visible:e.contact,width:"690px","custom-class":"city_list","show-close":!1},on:{"update:visible":function(t){e.contact=t}}},[a("el-button",{staticStyle:{position:"absolute",right:"20px",top:"8px"},attrs:{plain:""},on:{click:e.contact_close}},[e._v("关闭")]),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-left":"20px"}},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.add_contact=!0}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.forbidden2},on:{click:e.tests}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{border:"1px solid red",color:"#FE1312"},attrs:{plain:"",disabled:e.forbidden3},on:{click:function(t){e.deleteContact(e.index)}}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"bankAccount_data"},[a("el-table",{ref:"contactTable",staticStyle:{width:"611px"},attrs:{data:e.contactData,border:"","header-cell-style":e.getRowClass,"row-style":e.rowStyle},on:{"row-click":e.clickContact,"selection-change":e.changeContact}},[a("el-table-column",{attrs:{prop:"number",fixed:"",label:"",type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机",width:"140",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weChat",label:"微信",width:"140",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qq",label:"QQ",width:"140",align:"center"}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"联系人",visible:e.add_contact,width:"440px",center:"","custom-class":"city_list"},on:{"update:visible":function(t){e.add_contact=t}}},[a("el-form",{ref:"addContact",staticClass:"contact_form",attrs:{model:e.addContact,rules:e.rules}},[a("el-form-item",{staticClass:"addContact_span",attrs:{label:"姓名","label-width":e.Width,prop:"contactName"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入姓名"},model:{value:e.addContact.contactName,callback:function(t){e.$set(e.addContact,"contactName",t)},expression:"addContact.contactName"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"手机","label-width":e.Width,prop:"contactPhone"}},[a("el-input",{staticClass:"addContact_phone",attrs:{"auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.addContact.contactPhone,callback:function(t){e.$set(e.addContact,"contactPhone",t)},expression:"addContact.contactPhone"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span2",attrs:{label:"微信","label-width":e.Width,prop:"weChat"}},[a("el-input",{staticClass:"addContact_weChat",attrs:{"auto-complete":"off",placeholder:"请输入微信号"},model:{value:e.addContact.weChat,callback:function(t){e.$set(e.addContact,"weChat",t)},expression:"addContact.weChat"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span1",attrs:{label:"QQ","label-width":e.Width,prop:"qq"}},[a("el-input",{staticClass:"addContact_qq",attrs:{"auto-complete":"off",placeholder:"请输入QQ号"},model:{value:e.addContact.qq,callback:function(t){e.$set(e.addContact,"qq",t)},expression:"addContact.qq"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.add_contactCancel("addContact")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addContactPeople}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"联系人",visible:e.edit_contact,width:"440px",center:"","custom-class":"city_list"},on:{"update:visible":function(t){e.edit_contact=t}}},[a("el-form",{ref:"editContact",staticClass:"contact_form",attrs:{model:e.editContact,rules:e.rules}},[a("el-form-item",{staticClass:"addContact_span",attrs:{label:"姓名","label-width":e.Width,prop:"contactName"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入姓名"},model:{value:e.editContact.contactName,callback:function(t){e.$set(e.editContact,"contactName",t)},expression:"editContact.contactName"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"手机","label-width":e.Width,prop:"contactPhone"}},[a("el-input",{staticClass:"addContact_phone",attrs:{"auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.editContact.contactPhone,callback:function(t){e.$set(e.editContact,"contactPhone",t)},expression:"editContact.contactPhone"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span2",attrs:{label:"微信","label-width":e.Width,prop:"weChat"}},[a("el-input",{staticClass:"addContact_weChat",attrs:{"auto-complete":"off",placeholder:"请输入微信号"},model:{value:e.editContact.weChat,callback:function(t){e.$set(e.editContact,"weChat",t)},expression:"editContact.weChat"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span1",attrs:{label:"QQ","label-width":e.Width,prop:"qq"}},[a("el-input",{staticClass:"addContact_qq",attrs:{"auto-complete":"off",placeholder:"请输入QQ号"},model:{value:e.editContact.qq,callback:function(t){e.$set(e.editContact,"qq",t)},expression:"editContact.qq"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.edit_contactCancel("editContact")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editContactPeople("editContact")}}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"银行账号信息",visible:e.bankAccount,width:"740px","custom-class":"city_list","show-close":!1},on:{"update:visible":function(t){e.bankAccount=t}}},[a("el-button",{staticStyle:{position:"absolute",right:"20px",top:"8px"},attrs:{plain:""},on:{click:e.bankAccount_close}},[e._v("关闭")]),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-left":"20px"}},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.add_bankAccount=!0}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.forbidden4},on:{click:e.editBank}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{border:"1px solid red",color:"#FE1312"},attrs:{plain:"",disabled:e.forbidden5},on:{click:function(t){e.deleteBank(e.index)}}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"bankAccount_data"},[a("el-table",{ref:"bankTable",staticStyle:{width:"661px"},attrs:{data:e.bankData,border:"","header-cell-style":e.getRowClass,"row-style":e.rowStyleBank},on:{"row-click":e.clickBank,"selection-change":e.changeBank}},[a("el-table-column",{attrs:{prop:"number",fixed:"",label:"",type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardName",label:"开户名",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardNumber",label:"卡号",width:"210",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bankName",label:"银行",width:"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注",width:"140",align:"center"}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"银行账号",visible:e.add_bankAccount,width:"440px",center:"","custom-class":"city_list"},on:{"update:visible":function(t){e.add_bankAccount=t}}},[a("el-form",{ref:"addBankAccount",staticClass:"bankAccount_form",attrs:{model:e.addBankAccount,"label-width":"65px",rules:e.rules}},[a("el-form-item",{staticClass:"addContact_span",attrs:{label:"开户名","label-width":e.Width,prop:"cardName"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入开户名"},model:{value:e.addBankAccount.cardName,callback:function(t){e.$set(e.addBankAccount,"cardName",t)},expression:"addBankAccount.cardName"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"卡号","label-width":e.Width,prop:"cardNumber"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入银行卡号"},model:{value:e.addBankAccount.cardNumber,callback:function(t){e.$set(e.addBankAccount,"cardNumber",t)},expression:"addBankAccount.cardNumber"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"银行","label-width":e.Width,prop:"bankName"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入银行名称"},model:{value:e.addBankAccount.bankName,callback:function(t){e.$set(e.addBankAccount,"bankName",t)},expression:"addBankAccount.bankName"}})],1),e._v(" "),a("el-form-item",{staticClass:"bankAccount_span",attrs:{label:"备注","label-width":"55px",prop:"memo"}},[a("el-input",{staticClass:"addBankAccount_textarea",attrs:{type:"textarea","auto-complete":"off",autosize:{minRows:4,maxRows:8}},model:{value:e.addBankAccount.memo,callback:function(t){e.$set(e.addBankAccount,"memo",t)},expression:"addBankAccount.memo"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addBankAccountCancel("addBankAccount")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addBank}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"银行账号",visible:e.edit_bankAccount,width:"440px",center:"","custom-class":"city_list"},on:{"update:visible":function(t){e.edit_bankAccount=t}}},[a("el-form",{ref:"editBankAccount",staticClass:"bankAccount_form",attrs:{model:e.editBankAccount,"label-width":"65px",rules:e.rules}},[a("el-form-item",{staticClass:"addContact_span",attrs:{label:"开户名","label-width":e.Width,prop:"cardName"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入开户名"},model:{value:e.editBankAccount.cardName,callback:function(t){e.$set(e.editBankAccount,"cardName",t)},expression:"editBankAccount.cardName"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"卡号","label-width":e.Width,prop:"cardNumber"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入银行卡号"},model:{value:e.editBankAccount.cardNumber,callback:function(t){e.$set(e.editBankAccount,"cardNumber",t)},expression:"editBankAccount.cardNumber"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"银行","label-width":e.Width,prop:"bankName"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入银行名称"},model:{value:e.editBankAccount.bankName,callback:function(t){e.$set(e.editBankAccount,"bankName",t)},expression:"editBankAccount.bankName"}})],1),e._v(" "),a("el-form-item",{staticClass:"bankAccount_span",attrs:{label:"备注","label-width":"55px",prop:"memo"}},[a("el-input",{staticClass:"addBankAccount_textarea",attrs:{type:"textarea","auto-complete":"off",autosize:{minRows:4,maxRows:8}},model:{value:e.editBankAccount.memo,callback:function(t){e.$set(e.editBankAccount,"memo",t)},expression:"editBankAccount.memo"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editBankAccountCancel("editBankAccount")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editBankCancel("editBankAccount")}}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"附件",visible:e.attachment,width:"660px","custom-class":"city_list","show-close":!1},on:{"update:visible":function(t){e.attachment=t}}},[a("el-button",{staticStyle:{position:"absolute",right:"20px",top:"8px"},attrs:{plain:""},on:{click:e.attachment_close}},[e._v("关闭")]),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-left":"20px",overflow:"hidden",position:"relative"}},[a("el-upload",{ref:"my-upload",staticClass:"upload-demo",attrs:{action:"http://192.168.1.186:3017/universal/supplier/api/upload","on-success":e.handleSuccess,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.files,name:"files",headers:e.aaa,multiple:"","list-type":"picture",accept:".jpg,.png,.gif,.txt,.doc,.hlp,.wps,.html,.pdf"}},[a("el-button",{attrs:{plain:""}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{position:"absolute",top:"0px",left:"85px"}},[a("el-button",{attrs:{plain:""}},[e._v("下载")]),e._v(" "),a("el-button",{staticStyle:{border:"1px solid red",color:"#FE1312"},attrs:{plain:""},on:{click:e.clearFiles}},[e._v("删除")])],1)],1)],1)],1)},staticRenderFns:[]};var Ce=a("VU/8")(ye,_e,!1,function(e){a("joYe")},"data-v-9d78095e",null).exports;function xe(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var ke={name:"DateList",props:["msgFather","piapia"],mounted:function(){console.log("渲染")},updated:function(){},data:function(){return{today:new Date,Rform:{id:"",date:"",region:"",resource:"",shareId:"",sumId:"",shareNum:"",sumNum:"",orderRetain:""},form:{price:"",number:"",top:"",down:""},monday:!1,tue:!1,wed:!1,tur:!1,fri:!1,sat:!1,sun:!1,n:[],share:!1,currentDay:1,currentMonth:1,currentYear:1970,currentWeek:1,rightTable:!1,forbidden:!1,days:[],arr:[],ccc:[],clickData:"",RformRuler:{sumNum:[{required:!0,message:"请填写库存"}],shareId:[{required:!0,message:"共享库存不能为空"}],resource:[{required:!0,message:"请选择库存类型"}]},formRuler:{salePrice:[{required:!0,message:"不能为空"}],traderPrice:[{required:!0,message:"不能为空"}]},typeSelect:[],signUptypeSelect:[]}},watch:{msgFather:function(){var e=this;""!=this.msgFather&&(this.clearchecked(),setTimeout(function(t){e.ccc=[],e.ccc.push(e.msgFather[0].id),e.calendarList(e.ccc[0])},100))},monday:function(){var e=this;if(this.monday){this.days.filter(function(e){return 1===e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day>=new Date}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})}else{this.n.filter(function(e){return 1==e.day.getDay()});var t=this.n.filter(function(e){return 1!==e.name});this.n=t,0==this.n.length&&(this.rightTable=!1),this.n.length<2&&(this.forbidden=!1,this.Rform.resource="")}this.days.filter(function(e){return 1===e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day>=new Date})},tue:function(){var e=this;if(this.tue){this.days.filter(function(e){return 2===e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day>=new Date}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})}else{this.n.filter(function(e){return 1==e.day.getDay()});var t=this.n.filter(function(e){return 2!==e.name});this.n=t,0==this.n.length&&(this.rightTable=!1),this.n.length<2&&(this.forbidden=!1,this.Rform.resource="")}},wed:function(){var e=this;if(this.wed){this.days.filter(function(e){return 3===e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day>=new Date}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})}else{this.n.filter(function(e){return 1==e.day.getDay()});var t=this.n.filter(function(e){return 3!==e.name});this.n=t,0==this.n.length&&(this.rightTable=!1),this.n.length<2&&(this.forbidden=!1,this.Rform.resource="")}},tur:function(){var e=this;if(this.tur){this.days.filter(function(e){return 4===e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day>=new Date}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})}else{this.n.filter(function(e){return 1==e.day.getDay()});var t=this.n.filter(function(e){return 4!==e.name});this.n=t,0==this.n.length&&(this.rightTable=!1),this.n.length<2&&(this.forbidden=!1,this.Rform.resource="")}},fri:function(){var e=this;if(this.fri){this.days.filter(function(e){return 5===e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day>=new Date}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})}else{this.n.filter(function(e){return 1==e.day.getDay()});var t=this.n.filter(function(e){return 5!==e.name});this.n=t,0==this.n.length&&(this.rightTable=!1),this.n.length<2&&(this.forbidden=!1,this.Rform.resource="")}},sat:function(){var e=this;if(this.sat){this.days.filter(function(e){return 6===e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day>=new Date}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})}else{this.n.filter(function(e){return 1==e.day.getDay()});var t=this.n.filter(function(e){return 6!==e.name});this.n=t,0==this.n.length&&(this.rightTable=!1),this.n.length<2&&(this.forbidden=!1,this.Rform.resource="")}},sun:function(){var e=this;if(this.sun){this.days.filter(function(e){return 0===e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day>=new Date}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})}else{this.n.filter(function(e){return 1==e.day.getDay()});var t=this.n.filter(function(e){return 0!==e.name});this.n=t,0==this.n.length&&(this.rightTable=!1),this.n.length<2&&(this.forbidden=!1,this.Rform.resource="")}}},created:function(){this.initData(null),""==this.piapia?(this.ccc=[],this.ccc.push(this.msgFather[0].id)):(this.ccc=[],this.ccc.push(this.piapia)),this.calendarList(this.ccc[0]),this.initTypeSelect()},methods:{calendarList:function(e){var t=this;this.clearNull();var a=this.currentMonth;a<10&&(a="0"+a),this.$http.post(this.GLOBAL.serverSrc+"/team/calendar/api/get",{object:{year:this.currentYear,month:a,packageID:e}}).then(function(e){t.days.forEach(function(a){var i=t.formatDates(a.day.getFullYear(),a.day.getMonth()+1,a.day.getDate());a.data.person={},e.data.objects.forEach(function(e){if(i==e.date){var t=[];""!=e.plan_Enrolls&&e.plan_Enrolls.forEach(function(e){t.push({id:e.id,enrollID:e.enrollID,name:e.enrollName,salePrice:e.price_01,traderPrice:e.price_02,quotaPrice:e.quota})}),a.data.person={id:e.planID,packageID:e.packageID,share:e.share,date:i,planEnroll:t}}})}),t.n=[]})},saveQuota:function(e,t,a,i,l){var s=this,o=[],r=!0;0!=e.data.person.planEnroll.length&&e.data.person.planEnroll.forEach(function(e){var a="";e.enrollID==t.id&&e.name==t.name?(a=""==t.quotaPrice?0:t.quotaPrice,o.push({enrollID:t.id,enrollName:t.name,price_01:t.salePrice,price_02:t.traderPrice,quota:a}),r=!1):(a=""==e.quotaPrice?0:e.quotaPrice,o.push({enrollID:e.enrollID,enrollName:e.name,price_01:e.salePrice,price_02:e.traderPrice,quota:e.quotaPrice}))});var n="";n=""==t.quotaPrice?0:t.quotaPrice,r&&o.push({enrollID:t.id,enrollName:t.name,price_01:t.salePrice,price_02:t.traderPrice,quota:n}),this.$http.post(this.GLOBAL.serverSrc+"/team/plan/api/save",{object:{id:this.Rform.id,inventoryID:a,packageID:this.ccc[0],planEnroll:o,date:this.Rform.date,groupCode:this.msgFather[0].codePrefix+"-"+e.data.person.date+"-"+this.msgFather[0].codeSuffix}}).then(function(t){var r=[];o.forEach(function(e){r.push({enrollID:e.enrollID,name:e.enrollName,salePrice:e.price_01,traderPrice:e.price_02,quotaPrice:e.quota})}),s.days[e.index].data.person={id:s.Rform.id,inventoryID:a,packageID:s.ccc[0],share:s.Rform.resource,planEnroll:r,date:s.Rform.date};var n;n=s.days[e.index],s.n=[],s.n.push(n),s.$message.success("修改成功"),i&&s.$http.post(s.GLOBAL.serverSrc+"/team/api/inventorydelete",{id:l}).then(function(e){}).catch(function(e){console.log("删除非共享库存失败")})}).catch(function(e){console.log("修改非共享库存失败")})},addQuota:function(e,t){var a=this;this.Rform.id?"2"==this.Rform.resource?""!=this.Rform.sumNum?this.$refs.form[t].validate(function(t){t&&(a.Rform.sumId?a.saveQuota(a.n[0],e,a.Rform.sumId):a.$http.post(a.GLOBAL.serverSrc+"/team/api/inventoryinsert",{object:{name:"",count:a.Rform.sumNum,share:2,date:a.Rform.date}}).then(function(t){a.saveQuota(a.n[0],e,t.data.id)}).catch(function(e){console.log("添加非共享库存失败")}))}):this.$refs.Rform.validateField("sumNum"):"1"==this.Rform.resource&&(""!=this.Rform.shareId?this.$refs.form[t].validate(function(t){t&&(a.Rform.sumId?a.saveQuota(a.n[0],e,a.Rform.shareId,"delete",a.Rform.sumId):a.saveQuota(a.n[0],e,a.Rform.shareId))}):this.$refs.Rform.validateField("shareId")):""!=this.Rform.resource?"2"==this.Rform.resource?""!=this.Rform.sumNum?this.$refs.form[t].validate(function(t){if(t){var i=[];a.n.forEach(function(t){if(void 0==a.days[t.index].data.person.planEnroll){var l=[];l.push({enrollID:e.id,name:e.name,salePrice:e.salePrice,traderPrice:e.traderPrice,quotaPrice:e.quotaPrice});var s=a.formatDates(t.day.getFullYear(),t.day.getMonth()+1,t.day.getDate());a.days[t.index].data.person={inventoryID:"",packageID:a.ccc[0],date:s,count:a.Rform.sumNum,share:a.Rform.resource,planEnroll:l},i.push(a.days[t.index])}else{var o=a.formatDates(t.day.getFullYear(),t.day.getMonth()+1,t.day.getDate()),r=[],n=!0;a.days[t.index].data.person.planEnroll.forEach(function(t){t.enrollID==e.id&&t.name==e.name?(r.push({enrollID:e.id,name:e.name,salePrice:e.salePrice,traderPrice:e.traderPrice,quotaPrice:e.quotaPrice}),n=!1):r.push({enrollID:t.enrollID,name:t.name,salePrice:t.salePrice,traderPrice:t.traderPrice,quotaPrice:t.quotaPrice})}),n&&r.push({enrollID:e.id,name:e.name,salePrice:e.salePrice,traderPrice:e.traderPrice,quotaPrice:e.quotaPrice}),a.days[t.index].data.person={inventoryID:a.Rform.shareId,packageID:a.ccc[0],date:o,share:a.Rform.resource,count:a.Rform.sumNum,planEnroll:r},i.push(a.days[t.index])}}),a.n=[],a.n=i}}):this.$refs.Rform.validateField("sumNum"):"1"==this.Rform.resource&&(""!=this.Rform.shareId?this.$refs.form[t].validate(function(t){if(t){var i=[],l=a.formatDates(a.n[0].day.getFullYear(),a.n[0].day.getMonth()+1,a.n[0].day.getDate());if(void 0==a.days[a.n[0].index].data.person.planEnroll)i.push({enrollID:e.id,name:e.name,salePrice:e.salePrice,traderPrice:e.traderPrice,quotaPrice:e.quotaPrice});else{var s=!0;a.days[a.n[0].index].data.person.planEnroll.forEach(function(t){t.enrollID==e.id&&t.name==e.name?(i.push({enrollID:e.id,name:e.name,salePrice:e.salePrice,traderPrice:e.traderPrice,quotaPrice:e.quotaPrice}),s=!1):i.push({enrollID:t.enrollID,name:t.name,salePrice:t.salePrice,traderPrice:t.traderPrice,quotaPrice:t.quotaPrice})}),s&&i.push({enrollID:e.id,name:e.name,salePrice:e.salePrice,traderPrice:e.traderPrice,quotaPrice:e.quotaPrice})}a.days[a.n[0].index].data.person={inventoryID:a.Rform.shareId,share:a.Rform.resource,packageID:a.ccc[0],count:a.Rform.shareNum,date:l,planEnroll:i};var o;o=a.days[a.n[0].index],a.n=[],a.n.push(o)}}):this.$refs.Rform.validateField("shareId")):this.$refs.Rform.validateField("resource")},handleTwoClick:function(){var e=this;this.n=[],this.clearNull();var t=(new Date).getTime(),a=(new Date).getDate(),i=this.days.filter(function(e){return 0==e.day.getDay()}),l=this.days.filter(function(e){return 6==e.day.getDay()});[].concat(xe(i)).concat([].concat(xe(l))).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day.getTime()>t||e.day.getDate()==a}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0==e.n.length&&(e.rightTable=!1),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})},handleWeekClick:function(){var e=this;this.n=[],this.clearNull();var t=(new Date).getTime(),a=(new Date).getDate();this.days.filter(function(e){return 6!=e.day.getDay()&&0!=e.day.getDay()}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return e.day.getTime()>t||e.day.getDate()==a}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0==e.n.length&&(e.rightTable=!1),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})},handleallclick:function(){var e=this;this.n=[],this.clearNull();var t=(new Date).getTime(),a=(new Date).getDate();this.days.filter(function(e){return e.day.getTime()>t||e.day.getDate()==a}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).forEach(function(t){e.n.includes(t)||(void 0==t.data.person.id&&(t.name=t.day.getDay(),e.n.push(t)),0==e.n.length&&(e.rightTable=!1),0!=e.n.length&&(e.rightTable=!0),e.n.length>1&&(e.forbidden=!0,e.Rform.resource="2"))})},clearchecked:function(){this.clearNull(),this.n=[],this.monday=!1,this.tue=!1,this.fri=!1,this.tur=!1,this.sun=!1,this.wed=!1,this.sat=!1,0==this.n.length&&(this.rightTable=!1)},clearNull:function(){this.arr=[],this.Rform={id:"",date:"",region:"",resource:"",sumId:"",shareNum:"",shareId:"",sumNum:""},void 0!=this.$refs.Rform&&this.$refs.Rform.resetFields()},handleitemclick:function(e,t){var a=this;this.n.includes(e)?(this.n=this.n.filter(function(t){return t!=e}),0==this.n.length&&(this.share=!1,this.rightTable=!1),this.n.length<2&&(this.forbidden=!1,this.Rform.resource=""),1==this.n.length&&(this.clickData=this.formatDates(this.n[0].day.getFullYear(),this.n[0].day.getMonth()+1,this.n[0].day.getDate()))):(this.clearNull(),0!=this.n.length&&void 0!=e.data.person.id||(this.forbidden=!1,e.name=e.day.getDay(),e.index=t,this.n.push(e)),void 0==e.data.person.id&&void 0==this.n[0].data.person.id||(this.n=[],this.forbidden=!1,e.name=e.day.getDay(),this.n.push(e)),0!=this.n.length&&(this.rightTable=!0),this.n.length>1?(this.forbidden=!0,this.Rform.resource="2"):this.clickData=this.formatDates(e.day.getFullYear(),e.day.getMonth()+1,e.day.getDate()),void 0!=e.data.person.id?this.$http.post(this.GLOBAL.serverSrc+"/team/plan/api/get",{id:e.data.person.id}).then(function(t){e.data.person.inventoryID=t.data.object.inventoryID,a.$http.post(a.GLOBAL.serverSrc+"/team/api/inventoryget",{id:t.data.object.inventoryID}).then(function(i){e.data.person.count=i.data.object.count,a.Rform.resource=String(e.data.person.share),a.xuanze(a.Rform.resource),1==a.Rform.resource?(a.Rform.shareNum=e.data.person.count,a.Rform.shareId=t.data.object.inventoryID):(a.Rform.sumNum=e.data.person.count,a.Rform.sumId=t.data.object.inventoryID),a.Rform.id=e.data.person.id,a.Rform.date=a.formatDates(e.day.getFullYear(),e.day.getMonth()+1,e.day.getDate()),a.selectType(e)})}):void 0!=e.data.person.packageID&&(this.Rform.resource=e.data.person.share,this.xuanze(this.Rform.resource),1==this.Rform.resource?(this.Rform.shareNum=e.data.person.count,this.Rform.shareId=e.data.person.inventoryID):(this.Rform.sumNum=e.data.person.count,this.Rform.sumId=e.data.person.inventoryID),this.selectType(e)))},selectType:function(e){for(var t=e.data.person.planEnroll,a=0;a<t.length;a++)this.Rform.region=t[a].enrollID+"-"+t[a].name,this.AddType(),this.arr[a].id==t[a].enrollID&&this.arr[a].name==t[a].name&&(this.arr[a].isModify=!0,this.arr[a].salePrice=t[a].salePrice,this.arr[a].traderPrice=t[a].traderPrice,null==t[a].quotaPrice||0==t[a].quotaPrice?(this.arr[a].quota=!1,this.arr[a].quotaPrice=""):(this.arr[a].quota=!0,this.arr[a].quotaPrice=t[a].quotaPrice))},initData:function(e){var t;if(e)t=new Date(e);else{var a=new Date;(s=new Date(this.formatDate(a.getFullYear(),a.getMonth()+1,1))).setDate(35),t=new Date(this.formatDate(s.getFullYear(),s.getMonth(),1))}this.currentDay=t.getDate(),this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()+1,this.currentWeek=t.getDay(),0==this.currentWeek&&(this.currentWeek=7);var i=this.formatDate(this.currentYear,this.currentMonth,this.currentDay);this.days.length=0;for(var l=this.currentWeek;l>=0;l--){(s=new Date(i)).setDate(s.getDate()-l),(o={}).day=s,o.index=this.days.length,this.days.push(o)}for(l=1;l<=41-this.currentWeek;l++){var s,o;(s=new Date(i)).setDate(s.getDate()+l),(o={}).day=s,o.index=this.days.length,this.days.push(o),this.days.map(function(e){return e.data={person:{},children:{}}})}},pickPre:function(e,t){if(this.today.getMonth()+1<this.currentMonth||this.today.getFullYear()<this.currentYear){this.clearchecked();var a=new Date(this.formatDate(e,t,1));a.setDate(0),this.initData(this.formatDate(a.getFullYear(),a.getMonth()+1,1)),this.calendarList(this.ccc[0]),this.n=[]}else this.$message({message:"不能选择以前的",type:"warning"})},pickNext:function(e,t){this.clearchecked();var a=new Date(this.formatDate(e,t,1));a.setDate(35),this.initData(this.formatDate(a.getFullYear(),a.getMonth()+1,1)),this.calendarList(this.ccc[0]),this.n=[]},formatDate:function(e,t,a){var i=t;i<10&&(i="0"+i);var l=a;return l<10&&(l="0"+l),e+"-"+i+"-"+l},formatDates:function(e,t,a){return t<10&&(t="0"+t),a<10&&(a="0"+a),e+""+t+a},listData:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/inventorylist",{object:{share:1,date:this.clickData}}).then(function(t){e.signUptypeSelect=[],t.data.objects.forEach(function(t){e.signUptypeSelect.push({id:t.id,name:t.name,count:t.count})})}).catch(function(e){console.log("共享库存获取失败")})},xuanze:function(e){var t=this;"1"==this.Rform.resource&&this.listData(),"1"==e?"1"==this.Rform.resource&&this.listData():("2"==e&&""!=this.Rform.shareId||""!=this.Rform.sumNum)&&this.$confirm("当前类型数据将重置，是否更改?","更改库存类型",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"1"==t.Rform.resource?(t.listData(),t.Rform.sumNum=""):(t.Rform.shareId="",t.Rform.shareNum="")}).catch(function(){"1"==t.Rform.resource?t.Rform.resource="2":t.Rform.resource="1"})},shareSelect:function(){var e=this,t=this.signUptypeSelect.filter(function(t){return t.id==e.Rform.shareId});this.Rform.shareNum=t[0].count},AddType:function(e){var t=this;if(this.Rform.region){var a=!0;if(0!==this.arr.length&&this.arr.forEach(function(e){e.id+"-"+e.name==t.Rform.region&&(a=!1)}),a){var i=this.Rform.region.substring(0,this.Rform.region.indexOf("-")),l=this.Rform.region.substring(this.Rform.region.lastIndexOf("-")+1,this.Rform.region.length);this.arr.push({id:i,name:l,isModify:!1,salePrice:"",traderPrice:"",quota:!1,quotaPrice:""})}else this.$message({message:"已存在该报名类型",type:"warning"})}else this.$message({message:"请先选择报名类型",type:"warning"})},delect:function(e,t){var a=this,i=this.n[0];if(e.isModify)if(i.data.person.planEnroll.length<=1)console.log("剩一个类型时"),this.$http.post(this.GLOBAL.serverSrc+"/team/plan/api/delete",{id:this.Rform.id}).then(function(e){console.log(e)});else{this.arr.splice(t,1);var l=[];this.arr.forEach(function(e){l.push({enrollID:e.id,enrollName:e.name,price_01:e.salePrice,price_02:e.traderPrice,quota:e.quotaPrice})}),this.$http.post(this.GLOBAL.serverSrc+"/team/plan/api/save",{object:{id:this.Rform.id,inventoryID:i.data.person.inventoryID,packageID:this.ccc[0],date:this.Rform.date,planEnroll:l}}).then(function(e){a.days[i.index].data.person.planEnroll.splice(t,1);var l;l=a.days[i.index],a.n=[],a.n.push(l),a.$message.success("删除成功")}).catch(function(e){console.log("删除(修改)计划失败")})}else{this.arr.splice(t,1),this.days[i.index].data.person.planEnroll.splice(t,1);var s;s=this.days[i.index],this.n=[],this.n.push(s),i.data.person.planEnroll.length<=1&&(this.days[i.index].data.person.share="")}},AddQuotas:function(e){this.arr[e].quota=!0},DelectQuota:function(e){this.arr[e].quota=!1,this.arr[e].quotaPrice=""},BandCancel:function(){this.$emit("merchandises",!1)},BandSave:function(){var e=this,t=(new Date).getTime(),a=(new Date).getDate(),i=this.days.filter(function(e){return e.day.getTime()>t||e.day.getDate()==a}).filter(function(t){return t.day.getMonth()+1==e.currentMonth}).filter(function(e){return void 0!=e.data.person.inventoryID&&void 0==e.data.person.id});0==i.length?this.$message({message:"没有可供保存的计划",type:"warning"}):(i.forEach(function(t){var a=[];0!=t.data.person.planEnroll.length&&t.data.person.planEnroll.forEach(function(e){var t="";t=""==e.quotaPrice?0:e.quotaPrice,a.push({enrollID:e.enrollID,enrollName:e.name,price_01:e.salePrice,price_02:e.traderPrice,quota:t})}),""==t.data.person.inventoryID?e.$http.post(e.GLOBAL.serverSrc+"/team/api/inventoryinsert",{object:{name:"",count:t.data.person.count,share:2,date:t.data.person.date}}).then(function(i){e.$http.post(e.GLOBAL.serverSrc+"/team/plan/api/insert",{object:{inventoryID:i.data.id,packageID:t.data.person.packageID,date:t.data.person.date,groupCode:e.msgFather[0].codePrefix+"-"+t.data.person.date+"-"+e.msgFather[0].codeSuffix,planEnroll:a}}).then(function(t){e.calendarList(e.ccc[0])}).catch(function(e){console.log("添加计划失败")})}).catch(function(e){console.log("共享库存添加失败")}):e.$http.post(e.GLOBAL.serverSrc+"/team/plan/api/insert",{object:{inventoryID:t.data.person.inventoryID,packageID:t.data.person.packageID,date:t.data.person.date,groupCode:e.msgFather[0].codePrefix+"-"+t.data.person.date+"-"+e.msgFather[0].codeSuffix,planEnroll:a}}).then(function(t){e.calendarList(e.ccc[0])}).catch(function(e){console.log("添加计划失败")})}),this.clearNull(),this.n=[],this.rightTable=!1,this.$message.success("添加成功"))},setMeal:function(e){if(""!=e.codePrefix&&""!=e.codeSuffix){var t="";t=void 0==e.id?e:e.id,this.forbidden=!1,this.rightTable=!1,this.Rform={id:"",date:"",region:"",resource:"",sumId:"",shareNum:"",shareId:"",sumNum:""},this.arr=[],this.ccc=[],this.ccc.push(t),this.calendarList(this.ccc[0])}else this.$message({message:"该计划没有团号",type:"warning"})},initTypeSelect:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/enrolla/api/list",{object:{}}).then(function(t){e.$http.post(e.GLOBAL.serverSrc+"/universal/enrollb/api/list",{object:{}}).then(function(a){t.data.objects.forEach(function(t){a.data.objects.forEach(function(a){e.typeSelect.push({id:t.id,name:t.name+a.name})})})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"leftSku"},[a("div",{staticStyle:{"font-size":"20px","margin-left":"40px"}},[e._v("Sku")]),e._v(" "),e._l(e.msgFather,function(t,i){return a("el-button",{key:i,class:{selectSku:e.ccc.includes(t.id)},staticStyle:{"margin-top":"10px","margin-left":"40px",width:"220px",height:"64px"},attrs:{plain:""},on:{click:function(a){e.setMeal(t)}}},[e._v(e._s(t.ddd))])})],2),e._v(" "),a("div",{attrs:{id:"calendar"}},[a("div",{staticClass:"month"},[a("ul",{staticClass:"date"},[a("li",{staticClass:"arrow",on:{click:function(t){e.pickPre(e.currentYear,e.currentMonth)}}},[e._v("<")]),e._v(" "),a("li",{staticClass:"year-month"},[e._v("\n          "+e._s(e.currentYear)+"-"+e._s(e.currentMonth)+"月\n        ")]),e._v(" "),a("li",{staticClass:"arrow",on:{click:function(t){e.pickNext(e.currentYear,e.currentMonth)}}},[e._v(">")])]),e._v(" "),a("div",{staticClass:"all-month"},[a("span",{staticStyle:{float:"left",padding:"10px 20px","margin-left":"18px",cursor:"pointer"},on:{click:e.handleallclick}},[e._v("全月")]),e._v(" "),a("span",{staticStyle:{float:"left",padding:"10px 20px","margin-left":"8px",cursor:"pointer"},on:{click:e.handleTwoClick}},[e._v("周六、日")]),e._v(" "),a("span",{staticStyle:{float:"left",padding:"10px 20px","margin-left":"8px",cursor:"pointer"},on:{click:e.handleWeekClick}},[e._v("周一 ~ 周五")]),e._v(" "),a("span",{staticStyle:{float:"left",padding:"10px 20px","margin-left":"8px",cursor:"pointer"},on:{click:e.clearchecked}},[e._v("全部清除")]),e._v(" "),e.rightTable?[a("i",{staticStyle:{float:"left",padding:"10px 10px","margin-left":"25px","font-size":"15px","font-style":"normal"}},[e._v("已选"+e._s(e.n.length)+"天")])]:e._e()],2)]),e._v(" "),a("ul",{staticClass:"weekdays"},[a("li",{staticStyle:{color:"red"}},[a("el-checkbox",{staticClass:"checkbox",model:{value:e.sun,callback:function(t){e.sun=t},expression:"sun"}}),e._v("日")],1),e._v(" "),a("li",[a("el-checkbox",{staticClass:"checkbox",model:{value:e.monday,callback:function(t){e.monday=t},expression:"monday"}}),e._v("一")],1),e._v(" "),a("li",[a("el-checkbox",{staticClass:"checkbox",model:{value:e.tue,callback:function(t){e.tue=t},expression:"tue"}}),e._v("二")],1),e._v(" "),a("li",[a("el-checkbox",{staticClass:"checkbox",model:{value:e.wed,callback:function(t){e.wed=t},expression:"wed"}}),e._v("三")],1),e._v(" "),a("li",[a("el-checkbox",{staticClass:"checkbox",model:{value:e.tur,callback:function(t){e.tur=t},expression:"tur"}}),e._v("四")],1),e._v(" "),a("li",[a("el-checkbox",{staticClass:"checkbox",model:{value:e.fri,callback:function(t){e.fri=t},expression:"fri"}}),e._v("五")],1),e._v(" "),a("li",{staticStyle:{color:"red"}},[a("el-checkbox",{staticClass:"checkbox",model:{value:e.sat,callback:function(t){e.sat=t},expression:"sat"}}),e._v("六")],1)]),e._v(" "),a("ul",{staticClass:"days"},[e._l(e.days,function(t,i){return[t.day.getMonth()+1!=e.currentMonth||t.day.getTime()<e.today.getTime()-864e5?[a("li",{key:i,staticStyle:{background:"#F6F6F6",border:"solid 1px #E7E7E7","border-left":"none","border-top":"none",cursor:"not-allowed"}},[1==t.data.person.share?a("span",{staticClass:"isShare"},[e._v("共享")]):e._e(),e._v(" "),t.day.getMonth()+1!=e.currentMonth?a("span",{staticClass:"other-month"},[e._v(e._s(t.day.getDate()))]):a("div",[t.day.getFullYear()==(new Date).getFullYear()&&t.day.getMonth()==(new Date).getMonth()&&t.day.getDate()==(new Date).getDate()?a("span",{staticClass:"active"},[e._v(e._s(t.day.getDate()))]):a("span",[e._v(e._s(t.day.getDate()))]),e._v(" "),e._l(t.data.person.planEnroll,function(t,i){return a("div",{key:i,staticClass:"person"},[a("p",{staticClass:"old"},[e._v(e._s(t.name))]),e._v(" "),a("p",[e._v("销售价："+e._s(t.salePrice))]),e._v(" "),a("p",[e._v("同业价："+e._s(t.traderPrice))]),e._v(" "),a("p",[e._v("已售/库存：0/0")])])})],2)])]:[a("li",{key:i,class:{checked:e.n.includes(t)},staticStyle:{border:"solid 1px #E7E7E7","border-left":"none","border-top":"none"},on:{click:function(a){e.handleitemclick(t,i)}}},[1==t.data.person.share?a("span",{staticClass:"isShare"},[e._v("共享")]):e._e(),e._v(" "),t.day.getMonth()+1!=e.currentMonth?a("span",{staticClass:"other-month"},[e._v(e._s(t.day.getDate()))]):a("div",[t.day.getFullYear()==(new Date).getFullYear()&&t.day.getMonth()==(new Date).getMonth()&&t.day.getDate()==(new Date).getDate()?a("span",{staticClass:"active"},[e._v(e._s(t.day.getDate()))]):a("span",[e._v(e._s(t.day.getDate()))]),e._v(" "),e._l(t.data.person.planEnroll,function(t,i){return a("div",{key:i,staticClass:"person"},[a("p",{staticClass:"old"},[e._v(e._s(t.name))]),e._v(" "),a("p",[e._v("销售价："+e._s(t.salePrice))]),e._v(" "),a("p",[e._v("同业价："+e._s(t.traderPrice))]),e._v(" "),a("p",[e._v("已售/库存：0/0")])])})],2)])]]})],2),e._v(" "),a("div",{staticClass:"ButtonCls"},[a("el-button",{staticStyle:{width:"100px"},on:{click:e.BandCancel}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.BandSave}},[e._v("保存")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.rightTable,expression:"rightTable"}],staticClass:"rightForm"},[a("el-form",{ref:"Rform",attrs:{model:e.Rform,rules:e.RformRuler}},[a("el-form-item",{attrs:{label:"报名类型:"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.Rform.region,callback:function(t){e.$set(e.Rform,"region",t)},expression:"Rform.region"}},e._l(e.typeSelect,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id+"-"+e.name}})})),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.AddType}},[e._v("添加")])],1),e._v(" "),a("el-form-item",{attrs:{label:"库存类型:",prop:"resource"}},[a("el-radio-group",{on:{change:function(t){e.xuanze("2")}},model:{value:e.Rform.resource,callback:function(t){e.$set(e.Rform,"resource",t)},expression:"Rform.resource"}},[a("el-radio",{attrs:{disabled:e.forbidden,label:"1"}},[e._v("共享")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("非共享")])],1)],1),e._v(" "),"1"==e.Rform.resource?[a("el-form-item",{staticStyle:{"margin-top":"-15px"},attrs:{label:"共享库存:",prop:"shareId"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},on:{change:e.shareSelect},model:{value:e.Rform.shareId,callback:function(t){e.$set(e.Rform,"shareId",t)},expression:"Rform.shareId"}},e._l(e.signUptypeSelect,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),e.Rform.shareId?[a("div",[a("span",[e._v("当前剩余:")]),a("span",{staticStyle:{color:"blue","margin-left":"22px"}},[e._v(e._s(e.Rform.shareNum))])])]:e._e()]:e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"==e.Rform.resource,expression:'Rform.resource == "2"'}],staticStyle:{"margin-top":"-15px"},attrs:{label:"总库存:",prop:"sumNum"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.Rform.sumNum,callback:function(t){e.$set(e.Rform,"sumNum",t)},expression:"Rform.sumNum"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"订单保留:"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:e.Rform.orderRetain,callback:function(t){e.$set(e.Rform,"orderRetain",t)},expression:"Rform.orderRetain"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],2),e._v(" "),e._l(e.arr,function(t,i){return a("el-card",{key:t.key,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"fontName"},[a("span",[e._v(e._s(t.name))])]),e._v(" "),a("div",{staticStyle:{float:"right","margin-top":"-25px"}},[0==e.arr[i].quota?[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.AddQuotas(i)}}},[e._v("添加配额")])]:[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.DelectQuota(i)}}},[e._v("删除配额")])],e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.addQuota(t,i)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.delect(t,i)}}},[e._v("删除")])],2)]),e._v(" "),a("div",{staticClass:"divform"},[a("el-form",{ref:"form",refInFor:!0,attrs:{model:t,rules:e.formRuler,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"销售价",prop:"salePrice"}},[a("el-input",{attrs:{maxlength:6,type:"tel"},model:{value:t.salePrice,callback:function(a){e.$set(t,"salePrice",a)},expression:"item.salePrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"同业价",prop:"traderPrice"}},[a("el-input",{attrs:{maxlength:6},model:{value:t.traderPrice,callback:function(a){e.$set(t,"traderPrice",a)},expression:"item.traderPrice"}})],1),e._v(" "),1==e.arr[i].quota?a("el-form-item",{attrs:{label:"配额"}},[a("el-input",{attrs:{maxlength:6},model:{value:t.quotaPrice,callback:function(a){e.$set(t,"quotaPrice",a)},expression:"item.quotaPrice"}})],1):e._e()],1)],1)])})],2)])},staticRenderFns:[]};var Se={components:{DateList:a("VU/8")(ke,we,!1,function(e){a("atE2")},"data-v-0f437e9c",null).exports},data:function(){return{productId:"",productTitle:"",productPos:"",productMod:"",productUser:"",productPrefix:"",productBehind:"",pageNum:1,codePrefix:"",codeSuffix:"",pagesize:10,total:0,reable:!0,fid:0,buttonlist:[],pid:"",domains:[{value:"跟团游",status:"false"},{value:"自由行",status:"false"},{value:"签证",status:"false"},{value:"机票",status:"false"},{value:"酒店",status:"false"},{value:"门票",status:"false"},{value:"WiFi",status:"false"},{value:"电话卡",status:"false"},{value:"交通",status:"false"},{value:"保险",status:"false"}],thisClass:"",options1:[{value1:"1",label:"跟团游"},{value1:"2",label:"自由行"}],about:"",dialogVisible:!1,currentPage1:5,currentPage2:5,currentPage3:5,currentPage4:4,merchandise:!1,isCollapse:!0,aaa:0,di:0,wc:"",listId:"",io:0,lm:"",forbidden:!0,mm:!0,pp:!0,qq:!1,aa:!0,bb:!1,again:!1,close:!1,select:!1,addsku:!1,skuList:!0,ccc:[],skuid:0,xianshi:!1,arr:[],accretion:!0,accretionBall:!1,accretionTable:!0,ruleForm:{name:"",priceSelect:"",explain:""},Addprice:[{id:1,name:"保险",priceSelect:"非日历价格",explain:"保护安全",type:!1},{id:2,name:"小费",priceSelect:"日历价格",explain:"给小费鼓励一下吧",type:!1}],AddpriceId:0,rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{max:20,message:"不超过20个汉字",trigger:"blur"}],priceSelect:[{required:!0,message:"请选择活动资源",trigger:"change"}],explain:[{required:!0,message:"请填写活动形式",trigger:"blur"},{max:50,message:"不超过50个汉字",trigger:"blur"}]},Online:!0,Offline:!1,shuxingz:[],buttonList:[{id:"0",button:"出发地",pp:!1,forbidden:!1,verifier:" Origin"},{id:"1",button:"行程路线",pp:!1,forbidden:!1,verifier:"Route"},{id:"2",button:"天数",pp:!1,forbidden:!1,verifier:"Day"},{id:"3",button:"晚数",pp:!1,forbidden:!1,verifier:"NightNum"},{id:"4",button:"房型",pp:!1,forbidden:!1,verifier:"House"},{id:"5",button:"住宿等级",pp:!1,forbidden:!1,verifier:"Accommodation"},{id:"6",button:"航空公司",pp:!1,forbidden:!1,verifier:"Airline"},{id:"7",button:"酒店名称",pp:!1,forbidden:!1,verifier:"HotelName"},{id:"8",button:"套餐类型",pp:!1,forbidden:!1,verifier:"SetMeal"}],Day:[{value:"2天",label:"2天"},{value:"3天",label:"3天"},{value:"4天",label:"4天"},{value:"5天",label:"5天"},{value:"6天",label:"6天"},{value:"7天",label:"7天"},{value:"8天",label:"8天"},{value:"9天",label:"9天"},{value:"10天",label:"10天"},{value:"11天",label:"11天"},{value:"12天",label:"12天"},{value:"13天",label:"13天"},{value:"14天",label:"14天"},{value:"15天",label:"15天"},{value:"16天",label:"16天"}],NightNum:[{value:"1晚",label:"1晚"},{value:"2晚",label:"2晚"},{value:"3晚",label:"3晚"},{value:"4晚",label:"4晚"},{value:"5晚",label:"5晚"},{value:"6晚",label:"6晚"},{value:"7晚",label:"7晚"},{value:"8晚",label:"8晚"},{value:"9晚",label:"9晚"},{value:"10晚",label:"10晚"},{value:"11晚",label:"11晚"},{value:"12晚",label:"12晚"},{value:"13晚",label:"13晚"},{value:"14晚",label:"14晚"},{value:"15晚",label:"15晚"}],Accommodation:[{value:"豪华型",label:"豪华型"},{value:"高档型",label:"高档型"},{value:"舒适型",label:"舒适型"},{value:"经济型",label:"经济型"},{value:"快捷连锁",label:"快捷连锁"},{value:"民俗",label:"民俗"},{value:"农家乐",label:"农家乐"}],addtable:[],sku:[],options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],type:[],value:"",piaid:"",tableData:[],price:[],abc:!1}},methods:{deleta:function(){this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamdelete",{id:that.pid}).then(function(e){}).catch(function(e){})},handleDelete:function(){var e=this;this.$confirm("此操作将删除该模板","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1==e.tableData.length&&(e.pageNum=e.pageNum-1);var t=e;e.$http.post(e.GLOBAL.serverSrc+"/team/api/teamdelete",{id:t.pid}).then(function(t){var a=e;e.$http.post(e.GLOBAL.serverSrc+"/team/api/teampage",{pageIndex:e.pageNum,pageSize:e.pagesize,total:0,object:{loadPackage:!0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){console.log(e.data.total),a.total=e.data.total,a.tableData=e.data.objects,a.tableData.forEach(function(t,a,i){i[a].type="跟团游",i[a].name=e.data.objects[a].title,i[a].mu_address="xxx",i[a].options=e.data.objects[a].createUser,i[a].status="1",i[a].opers="飞猪 携程",i[a].price=e.data.objects[a].refPrice})}).catch(function(e){console.log(e)}),e.$message({type:"success",message:"删除成功!"})}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handDb:function(){this.$router.push({path:"/changepro",query:{id:this.pid}})},handInfo:function(){this.$router.push({path:"/changeinfo",query:{id:this.pid}})},bandlePrice:function(e){this.piaid=this.ccc[e].id,this.codePrefix=this.ccc[e].codePrefix,this.codeSuffix=this.ccc[e].codeSuffix,""==this.codePrefix||""==this.codeSuffix?this.$message.error("错了哦，团号不能为空"):this.isCollapse=!1},BandSave:function(){for(var e=0;e<this.ccc.length;e++){this.$http.post(this.GLOBAL.serverSrc+"/team/api/teampackagesave",{object:{id:this.ccc[e].id,name:this.ccc[e].ddd,podID:0,destinationID:0,pod:"string",destination:"string",teamID:this.ccc[e].id,isDeleted:0,createTime:"2018-12-04T06:46:08.554Z",code:"string",traffic:[{id:0,packageID:0,goOrBack:1,trafficMode:1,day:0,pod:"string",company:"string",theNumber:"string",podCity:"string",podPlace:"string",podTime:"string",arriveCity:"string",arrivePlace:"string",arriveTime:"string",ext_Stopover:"string"}],schedules:[{id:0,packageID:0,day:0,subject:"string",ext_Meals:"string",info:"string",ext_Hotel:"string",activitys:[{id:0,scheduleID:0,activityType:0,time:0,name:"string",details:"string",typeExt:"string",pictureID:0,memo:"string",createTime:"2018-12-04T06:46:08.555Z",code:"string"}],createTime:"2018-12-04T06:46:08.555Z",code:"string"}],briefMark:"string",loadPlan:!0,uptoDay:this.ccc[e].uptoDay,templateID:this.ccc[e].value}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){}).catch(function(e){})}this.merchandise=!1},BandCancel:function(){this.merchandise=!1},searchHand:function(){""==this.productId?this.productId=0:this.pageNum=1,this.productTitle?this.pageNum=1:this.productTitle="",this.productUser?this.pageNum=1:this.productUser="",this.productPos?this.pageNum=1:this.productPos=0,this.productMod?this.pageNum=1:this.productMod=0,this.productPrefix?this.pageNum=1:this.productPrefix=0,this.productBehind?this.pageNum=1:this.productBehind=0;var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:this.pageNum,pageSize:this.pagesize,total:0,object:{id:e.productId,title:e.productTitle,createUser:e.productUser,minPrice:e.productPrefix,maxPrice:e.productBehind,podID:e.productPos,destinationID:e.productMod}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(e,a,i){i[a].type="跟团游",i[a].name=t.data.objects[a].title,i[a].mu_address="xxx",i[a].options=t.data.objects[a].createUser,i[a].status="1",i[a].opers="飞猪 携程",i[a].price=t.data.objects[a].refPrice})}).catch(function(e){console.log(e)})},clickHand:function(e){"true"==this.domains[e].status?this.domains[e].status="false":(this.buttonlist.push(this.domains[e].value),this.domains[e].status="true")},routerHandle:function(){console.log(this.about),1==this.about&&this.$router.push({path:"listInfo"}),this.dialogVisible=!1},handleClick:function(e){console.log(e)},handleSizeChange:function(e){""==this.productId?this.productId=0:this.pageNum=1,this.productTitle?this.pageNum=1:this.productTitle="",this.productUser?this.pageNum=1:this.productUser="",this.productPos?this.pageNum=1:this.productPos=0,this.productMod?this.pageNum=1:this.productMod=0,this.productPrefix?this.pageNum=1:this.productPrefix=0,this.productBehind?this.pageNum=1:this.productBehind=0,this.pagesize=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:1,pageSize:e,total:0,object:{id:t.productId,title:t.productTitle,createUser:t.productUser,minPrice:t.productPrefix,maxPrice:t.productBehind,podID:t.productPos,destinationID:t.productMod}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){console.log(e.data),t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(t,a,i){i[a].type="跟团游",i[a].name=e.data.objects[a].title,i[a].mu_address=e.data.objects[a].destinations[0].destination,i[a].options=e.data.objects[a].createUser,i[a].status="1",i[a].opers="飞猪 携程",i[a].price=e.data.objects[a].refPrice})}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){""==this.productId?this.productId=0:this.pageNum=1,this.productTitle?this.pageNum=1:this.productTitle="",this.productUser?this.pageNum=1:this.productUser="",this.productPos?this.pageNum=1:this.productPos=0,this.productMod?this.pageNum=1:this.productMod=0,this.productPrefix?this.pageNum=1:this.productPrefix=0,this.productBehind?this.pageNum=1:this.productBehind=0,this.pageNum=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:e,pageSize:this.pagesize,total:0,object:{id:t.productId,title:t.productTitle,createUser:t.productUser,minPrice:t.productPrefix,maxPrice:t.productBehind,podID:t.productPos,destinationID:t.productMod}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){console.log(e.data),t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(t,a,i){i[a].type="跟团游",i[a].name=e.data.objects[a].title,i[a].mu_address=e.data.objects[a].destinations[0].destination,i[a].options=e.data.objects[a].createUser,i[a].status="1",i[a].opers="飞猪 携程",i[a].price=e.data.objects[a].refPrice})}).catch(function(e){console.log(e)})},groupStage:function(){this.ccc=[];var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teampackagelist",{object:{teamID:this.pid}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.ccc.push({id:t.data.objects[a].id,ddd:t.data.objects[a].name,uptoDay:t.data.objects[a].uptoDay,value:t.data.objects[a].templateID,codePrefix:t.data.objects[a].codePrefix,codeSuffix:t.data.objects[a].codeSuffix,createTime:t.data.objects[a].createTime,type:!1});console.log(t.data)}).catch(function(e){console.log(e)}),this.merchandise=!0,this.addtable.push({allprice:[]}),this.sku.push({price:[]})},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},begin:function(e,t){if(0==e.pp){if(this.arr.push({id:t}),document.getElementById("kk"+t).style.border="solid 1px #409EFF",document.getElementById("kk"+t).style.color="#409EFF",this.addtable[this.addtable.length-1].allprice.length>=3){for(var a=0;a<this.buttonList.length;a++)this.buttonList[a].forbidden=!0,document.getElementById("kk"+a).style.border="dashed 1px #c2c2c2",document.getElementById("kk"+a).style.color="#c0c4cc",document.getElementById("kk"+a).style.background="#fff";for(var i=0;i<this.arr.length;i++)this.buttonList[this.arr[i].id].forbidden=!1,document.getElementById("kk"+this.arr[i].id).style.border="solid 1px #409EFF",document.getElementById("kk"+this.arr[i].id).style.color="#409EFF"}if(this.addtable[this.addtable.length-1].allprice.push({id:e.id,property:e.button,verifier:e.verifier,value:[]}),this.buttonList[t].pp=!0,1==this.addtable[this.addtable.length-1].allprice.length)this.addtable[this.addtable.length-1].allprice.push({ll:""}),this.qq=!0,this.buttonList[t].key=this.addtable[this.addtable.length-1].allprice.length-2;else{var l=this.addtable[this.addtable.length-1].allprice.splice(this.addtable[this.addtable.length-1].allprice.length-2,1);this.addtable[this.addtable.length-1].allprice.push(l[0]),this.buttonList[t].key=this.addtable[this.addtable.length-1].allprice.length-2}}else if(e.pp){console.log(this.addtable),this.addtable[this.addtable.length-1].allprice.splice(e.key,1);for(var s=0;s<this.addtable[this.addtable.length-1].allprice.length-1;s++)this.buttonList[this.addtable[this.addtable.length-1].allprice[s].id].key=s;if(1==this.addtable[this.addtable.length-1].allprice.length&&this.addtable[this.addtable.length-1].allprice.splice(0,1),this.buttonList[t].pp=!1,this.addtable[this.addtable.length-1].allprice.length<4){for(a=0;a<this.buttonList.length;a++)this.buttonList[a].forbidden=!1,document.getElementById("kk"+a).style.border="solid 1px #c2c2c2",document.getElementById("kk"+a).style.color="#606266";this.arr.splice(e.key,1)}for(i=0;i<this.arr.length;i++)document.getElementById("kk"+this.arr[i].id).style.border="solid 1px #409EFF",document.getElementById("kk"+this.arr[i].id).style.color="#409EFF"}},addInput:function(e,t){this.aa=!0,this.di++,this.addtable[this.addtable.length-1].allprice[t].value.push({di:t,price:"",pp:!1,forbidden:!1});for(var a=0;a<e.value.length;a++)e.value[a].forbidden=!1,console.log(t),console.log(a),console.log("--------------");console.log(this.sku)},gain:function(){for(var e=0;e<this.addtable[this.addtable.length-1].allprice.length-1;e++)0==this.addtable[this.addtable.length-1].allprice[e].value.length&&(this.abc=!0);if(this.abc)this.$message({showClose:!0,message:"请为每个属性至少添加一个属性值",type:"error"});else{this.aa=!1,this.bb=!0,this.qq=!1,this.again=!0,this.pp=!1,this.close=!0,this.addsku=!0,this.xianshi=!0;for(var t=0;t<this.arr.length;t++)document.getElementById("kk"+this.arr[t].id).style.border="solid 1px #409EFF",document.getElementById("kk"+this.arr[t].id).style.color="#409EFF"}this.abc=!1},back:function(){this.aa=!0,this.bb=!1,this.qq=!0,this.again=!1,this.pp=!0,this.close=!1,this.addsku=!1,console.log(this.sku),this.sku[this.sku.length-1].price.splice(0,this.sku[this.sku.length-1].price.length);for(var e=0;e<this.addtable[this.addtable.length-1].allprice.length-1;e++)for(var t=0;t<this.addtable[this.addtable.length-1].allprice[e].value.length;t++)this.addtable[this.addtable.length-1].allprice[e].value[t].forbidden=!1,this.addtable[this.addtable.length-1].allprice[e].value[t].pp=!1,document.getElementById("vv"+e+t).style.border="solid 1px #b3d8ff",document.getElementById("vv"+e+t).style.color="#409EFF",document.getElementById("vv"+e+t).style.background="#ecf5ff";if(console.log(this.sku),this.addtable[this.addtable.length-1].allprice.length<4){for(var a=0;a<this.buttonList.length;a++)this.buttonList[a].forbidden=!1,document.getElementById("kk"+a).style.border="solid 1px #dcdfe6",document.getElementById("kk"+a).style.color="#606266";for(var i=0;i<this.arr.length;i++)document.getElementById("kk"+this.arr[i].id).style.border="solid 1px #409EFF",document.getElementById("kk"+this.arr[i].id).style.color="#409EFF"}else if(4==this.addtable[this.addtable.length-1].allprice.length){for(a=0;a<this.buttonList.length;a++)this.buttonList[a].forbidden=!0,document.getElementById("kk"+a).style.border="solid 1px #c2c2c2",document.getElementById("kk"+a).style.color="#c0c4cc",document.getElementById("kk"+a).style.background="#fff";for(i=0;i<this.arr.length;i++)this.buttonList[this.arr[i].id].forbidden=!1,document.getElementById("kk"+this.arr[i].id).style.border="solid 1px #409EFF",document.getElementById("kk"+this.arr[i].id).style.color="#409EFF"}},choice:function(e,t,a,i){if(0==a.value[t].pp){for(var l=0;l<a.value.length;l++)a.value[l].forbidden=!0;this.lm=this.addtable[this.addtable.length-1].allprice[i].value[t].di,document.getElementById("vv"+i+t).style.border="solid 1px #409eff",document.getElementById("vv"+i+t).style.color="#fff",document.getElementById("vv"+i+t).style.background="#409eff",a.value[t].forbidden=!1,a.value[t].pp=!0,this.sku[this.sku.length-1].price.push({ID:a.id,zhi:a.value[t].price,name:a.property}),console.log(this.sku[this.sku.length-1].price),console.log(i)}else if(1==a.value[t].pp){for(l=0;l<a.value.length;l++)a.value[l].forbidden=!1;a.value[t].pp=!1,console.log(this.sku[this.sku.length-1].price),console.log(t),this.sku[this.sku.length-1].price.splice(i,1),document.getElementById("vv"+i+t).style.border="solid 1px #b3d8ff",document.getElementById("vv"+i+t).style.color="#409EFF",document.getElementById("vv"+i+t).style.background="#ecf5ff"}},qqq:function(){console.log(this.ccc);for(var e=0;e<this.ccc.length;e++)""!=this.ccc[e].codeSuffix&&""!=this.ccc[e].codePrefix||(this.isCollapse=!0,this.$message.error("错了哦，团号不能为空"))},headCall:function(e){this.merchandise=e},skuadd:function(){if(console.log(this.addtable[this.addtable.length-1].allprice),this.sku[this.sku.length-1].price.length<this.addtable[this.addtable.length-1].allprice.length-1)this.$message({showClose:!0,message:"请为每一个属性选择要添加的属性值",type:"error"});else{for(var e=0;e<this.addtable[this.addtable.length-1].allprice.length-1;e++)for(var t=0;t<this.addtable[this.addtable.length-1].allprice[e].value.length;t++)this.addtable[this.addtable.length-1].allprice[e].value[t].forbidden=!1,this.addtable[this.addtable.length-1].allprice[e].value[t].pp=!1,document.getElementById("vv"+e+t).style.border="solid 1px #b3d8ff",document.getElementById("vv"+e+t).style.color="#409EFF",document.getElementById("vv"+e+t).style.background="#ecf5ff";this.skuList=!0;for(var a=[],i=0;i<this.sku[this.sku.length-1].price.length;i++)a[i]=this.sku[this.sku.length-1].price[i];this.sku[this.sku.length-1].price.splice(0,this.sku[this.sku.length-1].price.length);for(var l=[],s=0;s<a.length;s++)l.push(a[s].name+":"+a[s].zhi);var o=l.toString();this.skuid++,this.ccc.push({id:this.skuid,ddd:o,type:!1}),console.log(this.ccc),this.ccc.length>0&&(this.accretion=!0)}},shanchu:function(e,t){this.addtable[this.addtable.length-1].allprice[t].value.splice(e,1)},appreciation:function(){this.accretionBall=!0},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$message({message:"添加成功",type:"success"}),console.log(t.ruleForm),t.accretionBall=!1,t.AddpriceId++,t.Addprice.push({id:t.Addprice.length+1,name:t.ruleForm.name,priceSelect:t.ruleForm.priceSelect,explain:t.ruleForm.explain,type:!1}),t.accretionTable=!0,console.log(t.Addprice),t.ruleForm.name="",t.ruleForm.priceSelect="",t.ruleForm.explain=""})},delSku:function(e){this.ccc.splice(e,1)},delPrice:function(e){this.Addprice.splice(e,1)},online:function(e){console.log(e),console.log(this.ccc[e]),this.ccc[e].type=!0},offline:function(e){console.log(2),console.log(this.ccc[e]),this.ccc[e].type=!1},addOnline:function(e){this.Addprice[e].type=!0},addOffline:function(e){this.Addprice[e].type=!1},clickBanle:function(e,t,a){this.pid=e.id,this.reable=!1}},created:function(){var e=this;""==this.productId?this.productId=0:this.pageNum=1,this.productTitle?this.pageNum=1:this.productTitle="",this.productUser?this.pageNum=1:this.productUser="",this.productPos?this.pageNum=1:this.productPos=0,this.productMod?this.pageNum=1:this.productMod=0,this.productPrefix?this.pageNum=1:this.productPrefix=0,this.productBehind?this.pageNum=1:this.productBehind=0,this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:1,pageSize:this.pagesize,total:0,object:{id:e.productId,title:e.productTitle,createUser:e.productUser,minPrice:e.productPrefix,maxPrice:e.productBehind,podID:e.productPos,destinationID:e.productMod}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){console.log(t.data),e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(e,a,i){i[a].type="跟团游",i[a].name=t.data.objects[a].title,i[a].mu_address=t.data.objects[a].destinations[0].destination,i[a].options=t.data.objects[a].createUser,i[a].status="1",i[a].opers="飞猪 携程",i[a].price=t.data.objects[a].refPrice})}).catch(function(e){console.log(e)}),this.$http.post(this.GLOBAL.serverSrc+"/universal/template/api/templatelist",{object:{}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.type.push({value:t.data.objects[a].id,label:t.data.objects[a].name})}).catch(function(e){console.log(e)})}},Te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"text-align":"left","margin-left":"50px","margin-bottom":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加产品")])],1),e._v(" "),a("div",{staticStyle:{border:"1px solid rgb(241, 241, 241)","margin-left":"50px",width:"1009px"}},[a("div",{staticClass:"select_button"},e._l(e.domains,function(t,i){return a("el-button",{key:t.key,attrs:{plain:""},on:{click:function(t){e.clickHand(i)}}},[e._v(e._s(t.value))])})),e._v(" "),a("div",[a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",[e._v("产品类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.about,callback:function(t){e.about=t},expression:"about"}},e._l(e.options1,function(e){return a("el-option",{key:e.value1,attrs:{label:e.label,value:e.value1}})}))],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.routerHandle()}}},[e._v("确 定")])],1)])],1),e._v(" "),a("div",{staticStyle:{width:"1200px",height:"223px","margin-left":"20px"}},[a("div",{staticClass:"select_two"},[a("div",{staticClass:"id"},[e._v("ID "),a("el-input",{staticStyle:{width:"205px","margin-left":"20px"},attrs:{placeholder:"请输入内容"},model:{value:e.productId,callback:function(t){e.productId=t},expression:"productId"}})],1),e._v(" "),a("div",{staticClass:"product"},[e._v("商品名称   "),a("el-input",{staticStyle:{width:"500px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.productTitle,callback:function(t){e.productTitle=t},expression:"productTitle"}})],1)]),e._v(" "),a("div",{staticClass:"select_two"},[a("div",{staticClass:"address"},[e._v("出发地 "),a("el-input",{staticStyle:{width:"205px","margin-left":"20px"},attrs:{placeholder:"请输入内容"},model:{value:e.productPos,callback:function(t){e.productPos=t},expression:"productPos"}})],1),e._v(" "),a("div",{staticClass:"name"},[e._v("目的地 "),a("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.productMod,callback:function(t){e.productMod=t},expression:"productMod"}})],1),e._v(" "),a("div",{staticClass:"options"},[e._v("产品操作人 "),a("el-input",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.productUser,callback:function(t){e.productUser=t},expression:"productUser"}})],1)]),e._v(" "),a("div",{staticClass:"select_two"},[a("div",{staticClass:"options11"},[e._v("状态\n         "),a("el-select",{staticStyle:{width:"205px","margin-left":"20px"},attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"prices"},[e._v("价格"),a("el-input",{staticStyle:{width:"104px","margin-left":"20px"},attrs:{placeholder:"请输入内容"},model:{value:e.productPrefix,callback:function(t){e.productPrefix=t},expression:"productPrefix"}}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("——")]),a("el-input",{staticStyle:{width:"104px","margin-left":"20px"},attrs:{placeholder:"请输入内容"},model:{value:e.productBehind,callback:function(t){e.productBehind=t},expression:"productBehind"}})],1)]),e._v(" "),a("div",{staticClass:"select_two_button"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.searchHand()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"}},[e._v("重置")])],1)])]),e._v(" "),a("div",{staticStyle:{border:"1px solid #e9eaea","margin-bottom":"100px","margin-top":"30px","margin-left":"50px",width:"62.5%"}},[a("div",{staticClass:"button_select"},[a("el-button",{attrs:{plain:"",disabled:e.reable},on:{click:e.handDb}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.reable}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.reable}},[e._v("导出行程")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.reable}},[e._v("退改")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.reable},on:{click:e.groupStage}},[e._v("团期/库存")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.reable},on:{click:e.handInfo}},[e._v("修改行程信息")]),e._v(" "),a("el-button",{attrs:{type:"danger",plain:"",disabled:e.reable},on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"table_trip",staticStyle:{"margin-left":"50px",width:"92%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":!0},on:{"row-click":e.clickBanle}},[a("el-table-column",{attrs:{prop:"id",label:"产品编号",align:"center",width:"80%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"150%",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"产品名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"}},[e._v(e._s(e.tableData[t.$index].name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mu_address",label:"目的地",align:"center",width:"120%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"options",label:"操作人",align:"center",width:"100%"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center",width:"110%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"mini"}},[e._v("已上架")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"cell-style":"",prop:"opers",label:"推送平台",align:"center",width:"110%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{color:"#f5a142"}},[e._v(e._s(e.tableData[t.$index].opers))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",align:"center",width:"80%"}})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage4=t}}})],1)]),e._v(" "),a("el-dialog",{staticClass:"merchandise",attrs:{visible:e.merchandise,"show-close":!1,"append-to-body":"",width:"77%"},on:{"update:visible":function(t){e.merchandise=t}}},[a("div",{staticStyle:{float:"left","margin-bottom":"20px","margin-left":"40%"}},[a("el-radio-group",{on:{change:e.qqq},model:{value:e.isCollapse,callback:function(t){e.isCollapse=t},expression:"isCollapse"}},[a("el-radio-button",{staticClass:"group",attrs:{label:!0}},[e._v("库存")]),e._v(" "),a("el-radio-button",{attrs:{label:!1}},[e._v("价格")])],1)],1),e._v(" "),1==e.isCollapse?a("div",[a("div",{staticClass:"ButtonCls"},[a("el-button",{on:{click:e.BandCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.BandSave}},[e._v("保存")])],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.skuList,expression:"skuList"}],staticStyle:{width:"1340px",margin:"30px auto"},attrs:{data:e.ccc,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ddd",label:"名称",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"团号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100px"},attrs:{maxlength:10},model:{value:e.ccc[t.$index].codePrefix,callback:function(a){e.$set(e.ccc[t.$index],"codePrefix",a)},expression:"ccc[scope.$index].codePrefix"}}),e._v(" "),a("span",[e._v("-")]),e._v(" "),a("span",[e._v("{{")]),e._v(" "),a("span",[e._v("日期")]),e._v(" "),a("span",[e._v("}}")]),e._v(" "),a("span",[e._v("-")]),e._v(" "),a("el-input",{staticStyle:{width:"100px"},attrs:{maxlength:10},model:{value:e.ccc[t.$index].codeSuffix,callback:function(a){e.$set(e.ccc[t.$index],"codeSuffix",a)},expression:"ccc[scope.$index].codeSuffix"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"180",label:"清位时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-right":"5px"}},[e._v("前")]),e._v(" "),a("el-input",{staticStyle:{width:"60px"},attrs:{maxlength:3},model:{value:e.ccc[t.$index].uptoDay,callback:function(a){e.$set(e.ccc[t.$index],"uptoDay",a)},expression:"ccc[scope.$index].uptoDay"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("天")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"180",label:"出行模板"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ccc[t.$index].value,callback:function(a){e.$set(e.ccc[t.$index],"value",a)},expression:"ccc[scope.$index].value"}},e._l(e.type,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==e.ccc[t.$index].type?[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.online(t.$index)}}},[e._v("上线")])]:[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.offline(t.$index)}}},[e._v("下线")])],e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.bandlePrice(t.$index)}}},[e._v("价格")])]}}])})],1)],1):a("div",[a("DateList",{attrs:{"msg-father":e.ccc,piapia:e.piaid,codePrefix:e.codePrefix,codeSuffix:e.codeSuffix},on:{merchandises:e.headCall}})],1)])],1)},staticRenderFns:[]};var Ne=a("VU/8")(Se,Te,!1,function(e){a("YnYZ")},"data-v-6fc15c42",null).exports,Fe=a("LFPg"),Ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("div",{staticClass:"btn",staticStyle:{width:"200px",position:"absolute","z-index":"99",top:"0px",left:"68%"}},[a("el-button",{staticClass:"btn-button",attrs:{plain:""},on:{click:function(t){e.cancel()}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"btn-button",staticStyle:{background:"#3095fa",color:"#fff"},on:{click:function(t){e.addsave("ruleForm")}}},[e._v("保存")])],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[a("div",[a("el-form-item",{attrs:{label:"产品名称",prop:"productNamel","label-width":"120px"}},[a("el-input",{staticClass:"productName",attrs:{placeholder:"请输入正确产品名称"},on:{input:e.myInput},model:{value:e.ruleForm.productNamel,callback:function(t){e.$set(e.ruleForm,"productNamel",t)},expression:"ruleForm.productNamel"}}),e._v(" "),a("span",{staticClass:"Numbers"},[a("span",{class:{active:e.isActive}},[e._v(e._s(e.ruleForm.productNamel.length))]),e._v("/30字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"出游类型",prop:"travelType","label-width":"120px"}},[a("el-radio-group",{staticClass:"travelType",model:{value:e.ruleForm.travelType,callback:function(t){e.$set(e.ruleForm,"travelType",t)},expression:"ruleForm.travelType"}},[a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("境外")]),e._v(" "),a("el-radio",{attrs:{label:"2",value:"2"}},[e._v("国内")])],1)],1),e._v(" "),a("el-form-item",{ref:"placeDeparture",staticStyle:{clear:"both"},attrs:{label:"出发地","label-width":"120px"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("div",{staticClass:"destination-input"},[e._l(e.dynamicTags3,function(t){return a("el-tag",{key:t.pod,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose3(t)}}},[e._v("\n                "+e._s(t.pod)+"\n              ")])}),e._v(" "),e.inputVisible3?a("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tags",attrs:{id:"ddd","fetch-suggestions":e.querySearch3,size:"small",placeholder:"请输入出发地","trigger-on-focus":!1},on:{select:e.departure,blur:e.handleInputConfirm3},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm3(t):null}},model:{value:e.ruleForm.placeDeparture,callback:function(t){e.$set(e.ruleForm,"placeDeparture",t)},expression:"ruleForm.placeDeparture"}}):a("el-button",{staticClass:"input-new-tag",attrs:{size:"small"},on:{click:e.showInput3}},[e._v("请输入出发地")])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.noNull,expression:"noNull"}],attrs:{id:"isNull"}},[e._v("不能为空")])]),e._v(" "),a("el-form-item",{ref:"destinations",staticStyle:{clear:"both"},attrs:{label:"目的地","label-width":"120px"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("div",{staticClass:"destination-input"},[e._l(e.dynamicTags4,function(t){return a("el-tag",{key:t.destination,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose4(t)}}},[e._v("\n                "+e._s(t.destination)+"\n              ")])}),e._v(" "),e.inputVisible4?a("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tags",attrs:{id:"input-error",size:"small",placeholder:"请输入目的地","fetch-suggestions":e.querySearch2,"trigger-on-focus":!1},on:{select:e.dest,blur:e.handleInputConfirm4},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm4(t):null}},model:{value:e.ruleForm.destinations,callback:function(t){e.$set(e.ruleForm,"destinations",t)},expression:"ruleForm.destinations"}}):a("el-button",{staticClass:"input-new-tag",attrs:{size:"small"},on:{click:e.showInput4}},[e._v("请输入目的地")])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errorNull,expression:"errorNull"}],attrs:{id:"zero"}},[e._v("不能为空")])]),e._v(" "),a("div",{staticStyle:{overflow:"hidden"}},[a("el-form-item",{staticStyle:{width:"300px",float:"left"},attrs:{label:"行程天数",prop:"travelDays","label-width":"120px"}},[a("el-input",{ref:"travelDays",staticStyle:{width:"105px","margin-left":"-25px"},attrs:{placeholder:"请输入天数"},model:{value:e.ruleForm.travelDays,callback:function(t){e.$set(e.ruleForm,"travelDays",t)},expression:"ruleForm.travelDays"}}),e._v(" "),a("span",{staticClass:"travelDays-span",staticStyle:{"margin-left":"10px",color:"#333"}},[e._v("天")])],1),e._v(" "),a("el-form-item",{staticClass:"number-day",staticStyle:{float:"left","margin-left":"-25px"},attrs:{prop:"travelNight"}},[a("el-input",{staticStyle:{width:"105px",float:"left","margin-right":"10px"},attrs:{placeholder:"请输入晚数"},model:{value:e.ruleForm.travelNight,callback:function(t){e.$set(e.ruleForm,"travelNight",t)},expression:"ruleForm.travelNight"}}),e._v(" "),a("span",{staticClass:"travelNight"},[e._v("晚")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"订单确认类型",prop:"orderConfirmationType","label-width":"120px"}},[a("el-radio-group",{staticClass:"indent",model:{value:e.ruleForm.orderConfirmationType,callback:function(t){e.$set(e.ruleForm,"orderConfirmationType",t)},expression:"ruleForm.orderConfirmationType"}},[a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("及时确认")]),e._v(" "),a("el-radio",{attrs:{label:"2",value:"2"}},[e._v("二次确认")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"亮点词",prop:"highlightWords1","label-width":"120px"}},[a("el-input",{staticClass:"bright",attrs:{maxlength:"8",placeholder:"8个字以内"},model:{value:e.ruleForm.highlightWords1,callback:function(t){e.$set(e.ruleForm,"highlightWords1",t)},expression:"ruleForm.highlightWords1"}}),e._v(" "),a("span",{staticClass:"bright-number"},[e._v(e._s(e.ruleForm.highlightWords1.length)+"/8字")])],1),e._v(" "),a("el-form-item",{staticClass:"bright_b",staticStyle:{float:"left"},attrs:{prop:"highlightWords2","label-width":"120px"}},[a("el-input",{staticClass:"lightspot",attrs:{maxlength:"8",placeholder:"8个字以内"},model:{value:e.ruleForm.highlightWords2,callback:function(t){e.$set(e.ruleForm,"highlightWords2",t)},expression:"ruleForm.highlightWords2"}}),e._v(" "),a("span",{staticClass:"lightspot-span"},[e._v(e._s(e.ruleForm.highlightWords2.length)+"/8字")])],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{prop:"highlightWords3","label-width":"120px"}},[a("el-input",{staticStyle:{width:"210px",float:"left",margin:"0 0 0 10px"},attrs:{maxlength:"8",placeholder:"8个字以内"},model:{value:e.ruleForm.highlightWords3,callback:function(t){e.$set(e.ruleForm,"highlightWords3",t)},expression:"ruleForm.highlightWords3"}}),e._v(" "),a("span",{staticClass:"lightspot-span"},[e._v(e._s(e.ruleForm.highlightWords3.length)+"/8字")])],1),e._v(" "),a("el-form-item",{staticClass:"bright_b",attrs:{prop:"highlightWords4","label-width":"120px"}},[a("el-input",{staticClass:"lightspot",attrs:{maxlength:"8",placeholder:"8个字以内"},model:{value:e.ruleForm.highlightWords4,callback:function(t){e.$set(e.ruleForm,"highlightWords4",t)},expression:"ruleForm.highlightWords4"}}),e._v(" "),a("span",{staticClass:"lightspot-span"},[e._v(e._s(e.ruleForm.highlightWords4.length)+"/8字")])],1),e._v(" "),a("el-form-item",{ref:"operationLabel",staticStyle:{clear:"both"},attrs:{label:"运营标签","label-width":"120px"}},[a("div",{staticClass:"destination-input"},[e._l(e.dynamicTags2,function(t){return a("el-tag",{key:t.id,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose2(t)}}},[e._v("\n                "+e._s(t.label)+"\n              ")])}),e._v(" "),e.inputVisible2?a("el-autocomplete",{ref:"saveTagInput",staticClass:"lable_input",attrs:{id:"input-error",size:"small",placeholder:"请输入运营标签","fetch-suggestions":e.querySearch5,"trigger-on-focus":!1},on:{select:e.dest_01,blur:e.handleInputConfirm2},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm2(t):null}},model:{value:e.ruleForm.operationLabel,callback:function(t){e.$set(e.ruleForm,"operationLabel",t)},expression:"ruleForm.operationLabel"}}):a("el-button",{staticClass:"operation_Label",attrs:{size:"small"},on:{click:e.showInput2}},[e._v("请输入运营标签")])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.empty,expression:"empty"}],attrs:{id:"empty"}},[e._v("不能为空")])]),e._v(" "),a("el-form-item",{attrs:{label:"头图",prop:"avatarImages","label-width":"120px"}},[a("el-input",{staticStyle:{width:"110px",float:"left","margin-left":"10px",position:"relative"},attrs:{disabled:""},model:{value:e.ruleForm.avatarImages,callback:function(t){e.$set(e.ruleForm,"avatarImages",t)},expression:"ruleForm.avatarImages"}}),e._v(" "),a("el-button",{staticClass:"upload-btn",staticStyle:{margin:"1px 0 0 200px"},attrs:{type:"info"},on:{click:e.figureClick}},[e._v("上传")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.figureShow,expression:"figureShow"}],staticClass:"popup",staticStyle:{width:"100%",overflow:"hidden"}},[a("div",{staticClass:"mask",on:{click:e.figureClose}}),e._v(" "),a("div",{staticStyle:{width:"1100px",height:"870px",position:"fixed",top:"50%",left:"50%","margin-top":"-435px","margin-left":"-550px",background:"#fff","z-index":"1000"}},[a("div",{staticStyle:{"line-height":"40px","font-weight":"bold","font-size":"14pt",float:"left",margin:"40px 0 0 3%"}},[e._v("图片选择")]),e._v(" "),a("div",{staticStyle:{float:"right",margin:"100px 3% 20px 0"}},[a("el-input",{staticStyle:{float:"left",width:"200px",margin:"0 15px 0 0"},attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.imageSearch,callback:function(t){e.imageSearch=t},expression:"imageSearch"}}),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{clear:"both"}},[a("div",{staticClass:"left-tree"},[a("el-tree",{ref:"refTree",staticClass:"treeDemo",attrs:{props:e.props1,load:e.loadNode1,lazy:"","expand-on-click-node":!1,"node-key":"id","default-expanded-keys":[]},on:{"node-click":e.treeClick}})],1),e._v(" "),a("div",{staticStyle:{float:"left",margin:"10px 0 0 30px"}},[a("div",{staticStyle:{width:"300px",height:"200px",background:"#f5f5f5"}}),e._v(" "),a("div",{staticStyle:{margin:"10px 0 0 0"}},[a("div",{staticStyle:{float:"left",width:"60px",height:"25px",background:"#000",color:"#fff","text-align":"center","line-height":"23px","font-size":"14px"}},[e._v("景点")]),e._v(" "),a("div",{staticStyle:{float:"left",width:"60px",height:"25px",background:"#5b5b5b",color:"#fff","text-align":"center","line-height":"23px","font-size":"14px"}},[e._v("5张")])]),e._v(" "),a("div",{staticStyle:{"font-size":"14pt",clear:"both","text-align":"left","line-height":"40px"}},[e._v("大帅府")])])]),e._v(" "),a("el-button",{staticStyle:{position:"absolute",bottom:"20px",right:"3%"},on:{click:e.figureClose}},[e._v("取消")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"视频",prop:"video","label-width":"120px"}},[a("el-input",{staticStyle:{width:"110px",float:"left","margin-left":"10px",position:"relative"},attrs:{disabled:""},model:{value:e.ruleForm.video,callback:function(t){e.$set(e.ruleForm,"video",t)},expression:"ruleForm.video"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo uploadimage",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture",limit:1,"on-remove":e.handleRemoves1,"before-upload":e.beforeUploadVideo,"on-progress":e.uploadVideoProcess}},[a("el-button",{staticClass:"upload-btn",attrs:{type:"info"}},[e._v("上传")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"轮播图",prop:"slideshow","label-width":"120px"}},[a("el-input",{staticClass:"banner",attrs:{disabled:"",placeholder:"3-6张图片"},model:{value:e.ruleForm.slideshow,callback:function(t){e.$set(e.ruleForm,"slideshow",t)},expression:"ruleForm.slideshow"}}),e._v(" "),a("el-upload",{staticStyle:{float:"left"},attrs:{"on-preview":e.slideshowClick,method:"post",action:"http://192.168.1.168:6012/universal/supplier/api/upload","list-type":"picture",limit:6,accept:".jpg,.png,.gif","on-remove":e.handleRemove2,multiple:!0}},[a("el-button",{attrs:{type:"info"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSlideshow,expression:"isSlideshow"}],staticClass:"upload_div"},[a("img",{staticClass:"upload_img",attrs:{src:this.slideshowUrl,alt:""}})]),e._v("\n                上传")])],1),e._v(" "),a("input",{staticStyle:{float:"left","margin-left":"10px"},attrs:{id:"fileItem",type:"file",multiple:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出游人群",prop:"Excursion","label-width":"120px"}},[a("el-select",{staticClass:"Excursion-select",attrs:{placeholder:"请选择"},model:{value:e.ruleForm.Excursion,callback:function(t){e.$set(e.ruleForm,"Excursion",t)},expression:"ruleForm.Excursion"}},e._l(e.excurList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"主题",prop:"theme","label-width":"120px"}},[a("el-select",{staticClass:"Excursion-select",attrs:{placeholder:"请选择"},model:{value:e.ruleForm.theme,callback:function(t){e.$set(e.ruleForm,"theme",t)},expression:"ruleForm.theme"}},e._l(e.list,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"提前报名天数",prop:"advanceRegistrationDays","label-width":"120px"}},[a("el-input",{staticClass:"applyDay",attrs:{placeholder:"请输入天数"},model:{value:e.ruleForm.advanceRegistrationDays,callback:function(t){e.$set(e.ruleForm,"advanceRegistrationDays",t)},expression:"ruleForm.advanceRegistrationDays"}}),e._v(" "),a("span",{staticClass:"apply_day"},[e._v("天")])],1),e._v(" "),a("div",{staticClass:"latest"},[a("el-form-item",{staticStyle:{width:"300px",float:"left"},attrs:{label:"最晚收客时间",prop:"timeHour","label-width":"120px"}},[a("el-input",{staticStyle:{width:"50px",float:"left","margin-left":"10px"},model:{value:e.ruleForm.timeHour,callback:function(t){e.$set(e.ruleForm,"timeHour",t)},expression:"ruleForm.timeHour"}}),e._v(" "),a("span",{staticStyle:{float:"left",color:"#333","margin-left":"10px"}},[e._v("时")])],1),e._v(" "),a("el-form-item",{staticClass:"err_span",staticStyle:{float:"left","margin-left":"-85px"},attrs:{prop:"timeMinute"}},[a("el-input",{staticClass:"err_span",staticStyle:{width:"50px",float:"left"},model:{value:e.ruleForm.timeMinute,callback:function(t){e.$set(e.ruleForm,"timeMinute",t)},expression:"ruleForm.timeMinute"}}),e._v(" "),a("span",{staticStyle:{float:"left",color:"#333","margin-left":"10px"}},[e._v("分")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产品概括",prop:"productSummary","label-width":"120px"}},[a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:e.content_01,callback:function(t){e.content_01=t},expression:"content_01"}})],1)])],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"行程信息",name:"second"}},[a("div",{staticClass:"tripInfo"},[a("div",{staticClass:"outline"},[a("el-tabs",{attrs:{type:"card"},on:{edit:e.handleTabsEdit},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.title,name:t.name}},[a("el-form-item",{staticClass:"setmeal",attrs:{label:"套餐名","label-width":"100px"}},[a("el-input",{staticClass:"highlightWords-input1",attrs:{maxlength:"10",placeholder:"10个字以内"},model:{value:e.ruleForm.highlightWords,callback:function(t){e.$set(e.ruleForm,"highlightWords",t)},expression:"ruleForm.highlightWords"}}),e._v(" "),a("span",{staticClass:"span1"},[e._v(e._s(e.ruleForm.highlightWords.length)+"/10字")])],1),e._v(" "),a("div",{staticClass:"setout"},[a("span",[e._v("*")]),e._v("出发地")]),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"origin"}},[a("el-select",{staticClass:"depart",attrs:{placeholder:"出发地","value-key":"id"},model:{value:e.ruleForm.origin,callback:function(t){e.$set(e.ruleForm,"origin",t)},expression:"ruleForm.origin"}},e._l(e.dynamicTags3,function(e){return a("el-option",{key:e.pod,attrs:{label:e.pod,value:e}})}))],1),e._v(" "),a("div",{staticClass:"setout"},[a("span",[e._v("*")]),e._v("目的地")]),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"bourn"}},[a("el-select",{staticClass:"depart",attrs:{placeholder:"目的地","value-key":"id"},model:{value:e.ruleForm.bourn,callback:function(t){e.$set(e.ruleForm,"bourn",t)},expression:"ruleForm.bourn"}},e._l(e.dynamicTags4,function(e){return a("el-option",{key:e.destination,attrs:{label:e.destination,value:e}})}))],1),e._v(" "),a("div",{staticClass:"traffic"},[a("div",{staticClass:"traffic_title"},[e._v("交通信息")]),e._v(" "),a("div",{staticClass:"describe_way"},[e._v("描述方式")]),e._v(" "),a("ul",{staticClass:"description"},e._l(e.describe,function(t,i){return a("li",{key:i,class:{active:i==e.num},on:{click:function(t){e.tab(i)}}},["0"==i?a("span",[a("el-radio",{attrs:{label:"0",checked:""},model:{value:e.matter_radio,callback:function(t){e.matter_radio=t},expression:"matter_radio"}},[e._v(e._s(t))])],1):e._e(),e._v(" "),"1"==i?a("span",[a("el-radio",{attrs:{label:"1"},model:{value:e.matter_radio,callback:function(t){e.matter_radio=t},expression:"matter_radio"}},[e._v(e._s(t))])],1):e._e()])})),e._v(" "),e._l(e.pattern,function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i==e.num,expression:"index == num"}],key:i},[0==i?a("div",{staticClass:"traffic_border"},[a("div",[a("div",{staticClass:"traffic_button"},[e._v("去程")]),e._v(" "),a("div",{staticClass:"traffic_button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addTransit}},[e._v("添加中转")])],1)]),e._v(" "),e._l(e.ruleForm.plane,function(t,i){return a("div",{key:t.index,staticClass:"plane"},[a("div",{staticStyle:{clear:"both",margin:"0 0 0 0",position:"relative"}},[a("el-cascader",{staticClass:"plane_type",attrs:{options:e.goRoad,placeholder:"飞机"},on:{change:function(e){t.trafficMode=e[0]},blur:function(t){e.trafficClear(i)}},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}}),e._v(" "),a("span",{staticClass:"plane_text"},[e._v("第")]),e._v(" "),a("el-select",{staticClass:"plane_type",staticStyle:{"margin-left":"20px"},attrs:{"collapse-tags":"",placeholder:"1"},model:{value:t.day,callback:function(a){e.$set(t,"day",a)},expression:"item.day"}},e._l(e.goDate,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"plane_text"},[e._v("天")]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{position:"absolute",top:"20px",left:"300px"}},[a("el-form",{staticStyle:{float:"left"},attrs:{model:t,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"自动填充",prop:"pod"}},[a("el-input",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航班号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},on:{clear:function(t){e.clearBle(i)},blur:function(t){e.handleSelectPod_01(i)}},model:{value:t.pod,callback:function(a){e.$set(t,"pod",a)},expression:"item.pod"}})],1)],1)],1)],1),e._v(" "),"1"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"plane."+i+".company",rules:e.rules.company,label:"航空公司","label-width":"100px"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航空公司","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-form-item",{staticStyle:{width:"280px"},attrs:{"label-width":"100px",label:"航班号",prop:"plane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航班号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"plane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发机场","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发机场","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"plane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"plane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达机场","label-width":"100px",prop:"plane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达机场","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"plane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{attrs:{closable:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.lineshow,expression:"lineshow"}],staticClass:"transit_border"}),e._v(" "),e._l(t.ext_Stopover,function(t,l){return a("div",{key:l,staticClass:"abc",attrs:{type:"text"}},[a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停城市",prop:"stopCity"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopCity,callback:function(a){e.$set(t,"stopCity",a)},expression:"iteml.stopCity"}})],1)],1),e._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停时间",prop:"stopDate"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopDate,callback:function(a){e.$set(t,"stopDate",a)},expression:"iteml.stopDate"}})],1)],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(t){e.deleteItem(l,i)}}},[e._v("删除")])],1)})],2),e._v(" "),a("div",{staticClass:"transit"},[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},on:{click:function(t){e.stopping(i)}}},[e._v("添加经停")])],1),e._v(" "),a("div",{staticClass:"addTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"2"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{attrs:{label:"车次","label-width":"100px",prop:"plane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车次","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"plane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发车站","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"plane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"plane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达车站","label-width":"100px",prop:"plane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"plane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"stop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"3"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"plane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发车站","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"plane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"plane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达车站",prop:"podPlace","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"plane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"stop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"4"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px",position:"relative"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"游轮公司",prop:"plane."+i+".company",rules:e.rules.company,"label-width":"100px"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入游轮公司","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"游轮号","label-width":"100px",prop:"plane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入游轮号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"plane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发码头","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发码头","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"plane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"plane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达码头","label-width":"100px",prop:"plane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达码头","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"plane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{attrs:{closable:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.lineshow,expression:"lineshow"}],staticClass:"transit_border"}),e._v(" "),e._l(t.ext_Stopover,function(t,l){return a("div",{key:l,staticClass:"abc",attrs:{type:"text"}},[a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停城市",prop:"stopCity"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopCity,callback:function(a){e.$set(t,"stopCity",a)},expression:"iteml.stopCity"}})],1)],1),e._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停时间",prop:"stopDate"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopDate,callback:function(a){e.$set(t,"stopDate",a)},expression:"iteml.stopDate"}})],1)],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(t){e.deleteItem(l,i)}}},[e._v("删除")])],1)})],2),e._v(" "),a("div",{staticClass:"transit"},[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},on:{click:function(t){e.stopping(i)}}},[e._v("添加经停")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteTransit,expression:"deleteTransit"}],staticClass:"addTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index !='0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e()])}),e._v(" "),a("div",{staticStyle:{clear:"both"}},[a("div",{staticClass:"traffic_button"},[e._v("返程")]),e._v(" "),a("div",{staticClass:"traffic_button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRTransit}},[e._v("添加中转")])],1)]),e._v(" "),e._l(e.ruleForm.nackPlane,function(t,i){return a("div",{key:t.index,staticClass:"plane"},[a("div",{staticStyle:{clear:"both",margin:"0 0 0 0",position:"relative"}},[a("el-cascader",{staticClass:"plane_type",attrs:{options:e.goRoad,placeholder:"飞机"},on:{change:function(e){t.trafficMode=e[0]},blur:function(t){e.trafficGoClear(i)}},model:{value:e.selectedOptions_01,callback:function(t){e.selectedOptions_01=t},expression:"selectedOptions_01"}}),e._v(" "),a("span",{staticClass:"plane_text"},[e._v("第")]),e._v(" "),a("el-select",{staticClass:"plane_type",staticStyle:{"margin-left":"20px"},attrs:{"collapse-tags":"",placeholder:"1"},model:{value:t.day,callback:function(a){e.$set(t,"day",a)},expression:"item.day"}},e._l(e.goDate,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"plane_text"},[e._v("天")]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{position:"absolute",top:"20px",left:"300px"}},[a("el-form",{staticStyle:{float:"left"},attrs:{model:t,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"自动填充",prop:"pod"}},[a("el-input",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航班号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},on:{clear:function(t){e.clearBle_01(i)},blur:function(t){e.handleSelectPod_02(i)}},model:{value:t.pod,callback:function(a){e.$set(t,"pod",a)},expression:"item.pod"}})],1)],1)],1)],1),e._v(" "),"1"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"航空公司","label-width":"100px",prop:"nackPlane."+i+".company",rules:e.rules.company}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航空公司","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"航班号","label-width":"100px",prop:"nackPlane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航班号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"nackPlane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发机场","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发机场","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"nackPlane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"nackPlane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达机场","label-width":"100px",prop:"nackPlane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达机场","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"nackPlane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{attrs:{type:"card",closable:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.Returnline,expression:"Returnline"}],staticClass:"transit_border"}),e._v(" "),e._l(t.ext_Stopover,function(t,l){return a("div",{key:l,staticClass:"abc",attrs:{type:"text"}},[a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停城市",prop:"stopCity"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopCity,callback:function(a){e.$set(t,"stopCity",a)},expression:"iteml.stopCity"}})],1)],1),e._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停时间",prop:"stopDate"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopDate,callback:function(a){e.$set(t,"stopDate",a)},expression:"iteml.stopDate"}})],1)],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(t){e.reDeleteItem(l,i)}}},[e._v("删除")])],1)})],2),e._v(" "),a("div",{staticClass:"transit"},[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},on:{click:function(t){e.reStopping(i)}}},[e._v("添加经停")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteTransit,expression:"deleteTransit"}],staticClass:"addTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.reDeletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"2"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"车次","label-width":"100px",prop:"nackPlane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入车次","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"nackPlane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发车站","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"nackPlane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"nackPlane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达车站","label-width":"100px",prop:"nackPlane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"nackPlane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"stop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.reDeletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"3"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"nackPlane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发车站","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"nackPlane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"nackPlane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达车站","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"nackPlane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"stop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.reDeletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"4"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px",position:"relative"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"游轮公司","label-width":"100px",prop:"nackPlane."+i+".company",rules:e.rules.company}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入游轮公司","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"游轮号","label-width":"100px",prop:"nackPlane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入游轮号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"nackPlane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发码头","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发码头","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"nackPlane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"nackPlane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达码头","label-width":"100px",prop:"nackPlane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达码头","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"nackPlane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{attrs:{type:"card",closable:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.lineshow,expression:"lineshow"}],staticClass:"transit_border"}),e._v(" "),e._l(t.ext_Stopover,function(t,l){return a("div",{key:l,staticClass:"abc",attrs:{type:"text"}},[a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停城市",prop:"stopCity"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopCity,callback:function(a){e.$set(t,"stopCity",a)},expression:"iteml.stopCity"}})],1)],1),e._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停时间",prop:"stopDate"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopDate,callback:function(a){e.$set(t,"stopDate",a)},expression:"iteml.stopDate"}})],1)],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(t){e.reDeleteItem(l,i)}}},[e._v("删除")])],1)})],2),e._v(" "),a("div",{staticClass:"transit"},[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},on:{click:function(t){e.reStopping(i)}}},[e._v("添加经停")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteTransit,expression:"deleteTransit"}],staticClass:"addTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index !='0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.reDeletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e()])})],2):e._e(),e._v(" "),1==i?a("div",{staticClass:"traffic_border"},[a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)]):e._e()])})],2),e._v(" "),a("div",{staticClass:"traffic"},[a("div",{staticClass:"traffic_title"},[e._v("日程信息")]),e._v(" "),a("div",{staticClass:"details_border"},[e._l(e.ruleForm.schedules,function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i==e.mynumber,expression:" index == mynumber"}],key:i},[a("div",{staticClass:"date"},[e._v("DAY"+e._s(i+1))]),e._v(" "),a("div",{staticClass:"plane"},[a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left",margin:"30px 0 0 0"},attrs:{label:"主题","label-width":"100px",prop:"schedules."+i+".subject",rules:e.rules.subject}},[a("el-input",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入主题","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.subject,callback:function(a){e.$set(t,"subject",a)},expression:"item.subject"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"aviation_text"},[e._v("住宿")]),e._v(" "),a("div",{staticClass:"type_radio",staticStyle:{margin:"10px 0 0 0"}},[a("div",[a("span",[a("el-radio",{attrs:{label:"0"},model:{value:e.myradio[i].lable,callback:function(t){e.$set(e.myradio[i],"lable",t)},expression:"myradio[index].lable"}},[e._v("其他")])],1),e._v(" "),a("div",{staticClass:"explain"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.myradio[i].lable,expression:"myradio[index].lable=='0'"}]},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.ext_Hotel[0].Details,callback:function(a){e.$set(t.ext_Hotel[0],"Details",a)},expression:"item.ext_Hotel[0].Details"}})],1)])])])])]),e._v(" "),a("div",{staticClass:"aviation"},[a("div",{staticClass:"food_text"},[e._v("餐饮")])]),e._v(" "),e._l(t.ext_Meals,function(t,i){return a("div",{key:i,staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"food_radio",staticStyle:{"line-height":"40px"}},[a("div",{staticClass:"repast"},[e._v(e._s(t.label))]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:t.Myself,callback:function(a){e.$set(t,"Myself",a)},expression:"it.Myself"}},[e._v("自理")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.Myself,callback:function(a){e.$set(t,"Myself",a)},expression:"it.Myself"}},[e._v("详细说明")])],1),e._v(" "),a("div",{staticClass:"aviation_first"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.Myself,expression:"it.Myself=='1'"}]},[a("el-input",{staticClass:"state",attrs:{placeholder:"餐饮说明"},model:{value:t.Detail,callback:function(a){e.$set(t,"Detail",a)},expression:"it.Detail"}})],1)])])])}),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("详情")]),e._v(" "),a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:t.info,callback:function(a){e.$set(t,"info",a)},expression:"item.info"}})],1)]),e._v(" "),a("div",{staticClass:"date"},[e._v("活动详情")]),e._v(" "),a("div",{staticClass:"hotel_button"},[a("el-button",{staticStyle:{margin:"20px 0 0 20px"},attrs:{type:"primary"},on:{click:function(t){e.addDetails(i)}}},[e._v("添加详情")])],1),e._v(" "),a("div",{staticClass:"aviation"},e._l(t.activitys,function(t,l){return a("div",{key:l,staticStyle:{width:"100%"}},[a("div",{staticClass:"explain"},[a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("el-radio-group",{staticStyle:{"margin-left":"55px"},on:{change:function(a){e.diaoyong(t.activityType,l,i)}},model:{value:t.activityType,callback:function(a){e.$set(t,"activityType",a)},expression:"item.activityType"}},e._l(e.details,function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",[a("div",{staticClass:"explain"},[1==t.activityType?a("div",[a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("城市")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入城市"},model:{value:t.typeExt,callback:function(a){e.$set(t,"typeExt",a)},expression:"item.typeExt"}})],1),e._v(" "),a("div",{staticClass:"aviation_text"},[e._v("活动时间")]),e._v(" "),a("div",{staticClass:"city_input"},[a("el-input",{attrs:{placeholder:""},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"item.time"}})],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")])]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("景点名称")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入景点名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("详细说明")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入详细说明"},model:{value:t.details,callback:function(a){e.$set(t,"details",a)},expression:"item.details"}})],1)]),e._v(" "),a("div",{staticClass:"dashed"},[e._v(" ")]),e._v(" "),a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"aviation_text"},[e._v("图片")]),e._v(" "),a("div",{staticClass:"aviation_input",staticStyle:{position:"relative"}},[a("el-input",{attrs:{placeholder:"请输入图片内容"},model:{value:t.pictureID,callback:function(a){e.$set(t,"pictureID",a)},expression:"item.pictureID"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList2,"list-type":"picture"}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("简介")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入简介内容"},model:{value:t.memo,callback:function(a){e.$set(t,"memo",a)},expression:"item.memo"}})],1)])]):e._e(),e._v(" "),2==t.activityType?a("div",[a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("名称")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("div",{staticClass:"aviation_text"},[e._v("活动时间")]),e._v(" "),a("div",{staticClass:"city_input"},[a("el-input",{attrs:{placeholder:""},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"item.time"}})],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")])]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("营业产品")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入营业产品"},model:{value:t.typeExt,callback:function(a){e.$set(t,"typeExt",a)},expression:"item.typeExt"}})],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("详细说明")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入详细说明"},model:{value:t.details,callback:function(a){e.$set(t,"details",a)},expression:"item.details"}})],1)]),e._v(" "),a("div",{staticClass:"dashed"},[e._v(" ")]),e._v(" "),a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"aviation_text"},[e._v("图片")]),e._v(" "),a("div",{staticClass:"aviation_input",staticStyle:{position:"relative"}},[a("el-input",{attrs:{placeholder:"请输入图片内容"},model:{value:t.pictureID,callback:function(a){e.$set(t,"pictureID",a)},expression:"item.pictureID"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList2,"list-type":"picture"}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("简介")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入简介内容"},model:{value:t.memo,callback:function(a){e.$set(t,"memo",a)},expression:"item.memo"}})],1)])]):e._e(),e._v(" "),3==t.activityType?a("div",[a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("名称")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("div",{staticClass:"aviation_text"},[e._v("活动时间")]),e._v(" "),a("div",{staticClass:"city_input"},[a("el-input",{attrs:{placeholder:""},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"item.time"}})],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")])]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("参考价格")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入参考价格"},model:{value:t.typeExt,callback:function(a){e.$set(t,"typeExt",a)},expression:"item.typeExt"}})],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("元/人")])]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("详细说明")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入详细说明"},model:{value:t.details,callback:function(a){e.$set(t,"details",a)},expression:"item.details"}})],1)]),e._v(" "),a("div",{staticClass:"dashed"},[e._v(" ")]),e._v(" "),a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"aviation_text"},[e._v("图片")]),e._v(" "),a("div",{staticClass:"aviation_input",staticStyle:{position:"relative"}},[a("el-input",{attrs:{placeholder:"请输入图片内容"},model:{value:t.pictureID,callback:function(a){e.$set(t,"pictureID",a)},expression:"item.pictureID"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList2,"list-type":"picture"}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("简介")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入简介内容"},model:{value:t.memo,callback:function(a){e.$set(t,"memo",a)},expression:"item.memo"}})],1)])]):e._e(),e._v(" "),a("div",{staticClass:"stop"},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deleteDetails(l,i)}}},[e._v("删除详情")])],1)])])])])}))],2)])}),e._v(" "),a("div",{staticClass:"DAY"},e._l(e.myTravelDay,function(t,i){return a("div",{key:i,staticClass:"DAY_two",class:{myactive:i==e.mynumber},on:{click:function(t){e.tabTravel(i)}}},[e._v("DAY"+e._s(t+1))])}))],2)])],1)}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.comboshow,expression:"comboshow"}],staticClass:"popup"},[a("div",{staticClass:"mask"}),e._v(" "),a("div",{staticClass:"add"},[a("div",{staticClass:"label"},[a("div",{staticClass:"left"},[e._v("信息")]),e._v(" "),a("div",{staticClass:"right",on:{click:e.close}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"text"},[e._v("是否删除该套餐")]),e._v(" "),a("div",{staticClass:"judge"},[a("el-button",{on:{click:e.close}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hotelshow,expression:"hotelshow"}],staticClass:"popup"},[a("div",{staticClass:"mask"}),e._v(" "),a("div",{staticClass:"add"},[a("div",{staticClass:"label"},[a("div",{staticClass:"left"},[e._v("信息")]),e._v(" "),a("div",{staticClass:"right",on:{click:e.cloceHotel}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"text"},[e._v("是否删除该酒店套餐")]),e._v(" "),a("div",{staticClass:"judge"},[a("el-button",{on:{click:e.cloceHotel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.shutHotel}},[e._v("确定")])],1)])])])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"费用说明",name:"third"}},[a("div",{staticClass:"cost"},[e._v("费用说明")]),e._v(" "),a("div",{staticClass:"cost_button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getUEContent()}}},[e._v("添加说明")])],1),e._v(" "),e._l(e.explain,function(t){return a("div",{staticClass:"cost_bg"},[a("div",{staticClass:"cost_title"},[e._v(e._s(t.title))]),e._v(" "),a("div",{staticClass:"cost_content"},[a("vue-editor",{staticClass:"content_explain",model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1)])}),e._v(" "),e._l(e.domains,function(t,i){return a("div",{staticClass:"cost_bg"},[a("div",{staticClass:"cost_title"},[a("span",[e._v("名称：")]),a("el-input",{staticStyle:{width:"750px"},attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"domain.title"}})],1),e._v(" "),a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"domain.content"}})],1),e._v(" "),a("div",{staticClass:"delete_button"},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.deleteState_01(i)}}},[e._v("删除信息")])],1)])})],2),e._v(" "),a("el-tab-pane",{attrs:{label:"其他信息",name:"fourth"}},[a("div",{staticClass:"cost"},[e._v("预订须知")]),e._v(" "),a("div",[a("div",{staticClass:"cost_button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getUEContent0()}}},[e._v("添加说明")])],1),e._v(" "),e._l(e.notes,function(t,i){return a("div",{staticClass:"cost_bg"},[a("div",{staticClass:"cost_title"},[a("span",[e._v("名称：")]),a("el-input",{staticStyle:{width:"750px"},attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"note.title"}})],1),e._v(" "),a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"note.content"}})],1),e._v(" "),a("div",{staticClass:"delete_button"},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.deleteNotice(i)}}},[e._v("删除信息")])],1)])})],2),e._v(" "),a("div",{staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"cost"},[e._v("使用说明")]),e._v(" "),a("div",[a("div",{staticClass:"cost_button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getUEContent1()}}},[e._v("添加说明")])],1),e._v(" "),e._l(e.instructions,function(t,i){return a("div",{staticClass:"cost_bg"},[a("div",{staticClass:"cost_title"},[a("span",[e._v("名称：")]),a("el-input",{staticStyle:{width:"750px"},attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"instruction.title"}})],1),e._v(" "),a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"instruction.content"}})],1),e._v(" "),a("div",{staticClass:"delete_button"},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.deleteState(i)}}},[e._v("删除信息")])],1)])})],2)])])],1)],1),e._v(" "),a("el-dialog",{staticClass:"city_list tips",attrs:{title:"提示信息",visible:e.dialogVadi,width:"400px"},on:{"update:visible":function(t){e.dialogVadi=t}}},[a("div",e._l(e.validaError,function(t){return a("ul",[a("li",[e._v(e._s(t))])])}))])],1)},staticRenderFns:[]};var De=function(e){a("9JjY")},Le=a("VU/8")(Fe.a,Ie,!1,De,"data-v-35f7df7e",null).exports,Ee={created:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/template/api/templatetypeget",{}).then(function(t){t.data.objects.forEach(function(t){e.options.push({id:t.id,name:t.name})})});var t=(new Date).getFullYear(),a=(new Date).getMonth()+1,i=(new Date).getDate();a<10&&(a="0"+a),i<10&&(i="0"+i),this.createTime=t+"-"+a+"-"+i,this.initData()},data:function(){var e=this;return{isJudge:!0,input:"",createTime:"",switchNum:!0,attribute:[{id:10,name:"身高（cm）",type:5,DataType:"int",InfoType:1},{id:1,name:"中文名称",type:1,DataType:"string",InfoType:1},{id:2,name:"姓（拼音）",type:1,DataType:"string",InfoType:1},{id:3,name:"名（拼音）",type:1,DataType:"string",InfoType:1},{id:4,name:"证件类型",type:2,DataType:"single",InfoType:1},{id:5,name:"有效期",type:5,DataType:"datetime",InfoType:1},{id:6,name:"出生年月日",type:5,DataType:"datetime",InfoType:1},{id:7,name:"性别",type:3,DataType:"single",InfoType:1},{id:8,name:"国籍",type:5,DataType:"string",InfoType:1},{id:9,name:"联系电话",type:5,DataType:"tel",InfoType:1},{id:11,name:"体重（kg）",type:5,DataType:"float",InfoType:1},{id:12,name:"鞋码(欧码)",type:3,DataType:"single",InfoType:1},{id:13,name:"左眼视力",type:5,DataType:"string",InfoType:1},{id:14,name:"右眼视力",type:5,DataType:"string",InfoType:1}],attribute1:[{id:23,name:"到达地点",type:5,DataType:"string",InfoType:2},{id:15,name:"境外联系电话",type:5,DataType:"string",InfoType:2},{id:16,name:"微信号",type:5,DataType:"string",InfoType:2},{id:17,name:"预约时间",type:5,DataType:"datetime",InfoType:2},{id:18,name:"出行人数",type:5,DataType:"int",InfoType:2},{id:19,name:"行李数",type:5,DataType:"int",InfoType:2},{id:20,name:"接人时间",type:5,DataType:"datetime",InfoType:2},{id:21,name:"接人地点",type:5,DataType:"string",InfoType:2},{id:22,name:"接人地点（英文）",type:5,DataType:"string",InfoType:2},{id:24,name:"到达地点（英文）",type:5,DataType:"string",InfoType:2},{id:25,name:"接人酒店名称",type:5,DataType:"string",InfoType:2},{id:26,name:"接人酒店名称（英文）",type:5,DataType:"string",InfoType:2},{id:27,name:"接人酒店地址",type:5,DataType:"string",InfoType:2},{id:28,name:"接人酒店地址（英文）",type:5,DataType:"string",InfoType:2},{id:29,name:"接人酒店电话",type:5,DataType:"tel",InfoType:2},{id:30,name:"接机航班号",type:5,DataType:"string",InfoType:2},{id:31,name:"航班抵达日期",type:5,DataType:"datetime",InfoType:2},{id:32,name:"送达酒店名称",type:5,DataType:"string",InfoType:2},{id:33,name:"送达酒店地址",type:5,DataType:"string",InfoType:2},{id:34,name:"送达酒店名称（英文）",type:5,DataType:"string",InfoType:2},{id:35,name:"接送酒店电话",type:5,DataType:"string",InfoType:2},{id:36,name:"过夜酒店名称",type:5,DataType:"string",InfoType:2},{id:37,name:"过夜酒店名称（英文）",type:5,DataType:"string",InfoType:2},{id:38,name:"用车时间",type:5,DataType:"datetime",InfoType:2},{id:39,name:"用车地点",type:5,DataType:"string",InfoType:2},{id:40,name:"接机、送机航班号",type:5,DataType:"string",InfoType:2},{id:41,name:"接机航班/接站车次",type:5,DataType:"string",InfoType:2},{id:42,name:"降落、起飞时间",type:5,DataType:"datetime",InfoType:2},{id:43,name:"接人送达地点",type:5,DataType:"string",InfoType:2},{id:44,name:"用车人数",type:5,DataType:"int",InfoType:2},{id:45,name:"返回酒店名称（英文）",type:5,DataType:"string",InfoType:2},{id:46,name:"返回酒店地址（英文）",type:5,DataType:"string",InfoType:2},{id:47,name:"返回酒店电话",type:5,DataType:"tel",InfoType:2},{id:48,name:"行程计划",type:5,DataType:"string",InfoType:2},{id:49,name:"返程送回酒店名称（英文）",type:5,DataType:"string",InfoType:2},{id:50,name:"返程送回酒店地址（英文）",type:5,DataType:"string",InfoType:2},{id:51,name:"返程送回酒店电话",type:5,DataType:"string",InfoType:2},{id:52,name:"酒店名称（英文）",type:5,DataType:"string",InfoType:2},{id:53,name:"酒店联系电话",type:5,DataType:"tel",InfoType:2},{id:54,name:"入住酒店日期",type:5,DataType:"datetime",InfoType:2},{id:55,name:"离开酒店日期",type:5,DataType:"datetime",InfoType:2},{id:56,name:"返程航班号/火车列次",type:5,DataType:"string",InfoType:2},{id:57,name:"返程日期",type:5,DataType:"datetime",InfoType:2},{id:58,name:"返程航班/列次时间",type:5,DataType:"string",InfoType:2},{id:59,name:"取还设备地址",type:5,DataType:"string",InfoType:2},{id:60,name:"预计出行日期",type:5,DataType:"datetime",InfoType:2},{id:61,name:"到达火车车次",type:5,DataType:"string",InfoType:2},{id:62,name:"到达车站",type:5,DataType:"string",InfoType:2},{id:63,name:"出发时间(单选)",type:4,DataType:"single",InfoType:2},{id:64,name:"出发班次",type:4,DataType:"single",InfoType:2},{id:65,name:"出发酒店所在区域",type:4,DataType:"single",InfoType:2},{id:66,name:"用餐时间",type:5,DataType:"datetime",InfoType:2},{id:67,name:"场次",type:4,DataType:"single",InfoType:2},{id:68,name:"上车地点(去程)",type:4,DataType:"single",InfoType:2},{id:69,name:"集合地点",type:4,DataType:"single",InfoType:2},{id:70,name:"集合时间",type:4,DataType:"single",InfoType:2},{id:71,name:"下车地点(去程)",type:4,DataType:"single",InfoType:2},{id:72,name:"成人人数",type:5,DataType:"int",InfoType:2},{id:73,name:"儿童人数",type:5,DataType:"int",InfoType:2},{id:74,name:"上车地点(回程)",type:4,DataType:"single",InfoType:2},{id:75,name:"下车地点(回程)",type:4,DataType:"single",InfoType:2},{id:76,name:"婴儿人数",type:5,DataType:"int",InfoType:2},{id:77,name:"使用地点",type:4,DataType:"single",InfoType:2},{id:78,name:"备选时间/场次",type:4,DataType:"single",InfoType:2}],attribute2:[{id:80,name:"还件地址",type:4,DataType:"single",InfoType:3},{id:79,name:"取件地址",type:4,DataType:"single",InfoType:3}],attribute3:[{id:83,name:"收货地址",type:5,DataType:"string",InfoType:4},{id:81,name:"收货人姓名",type:5,DataType:"string",InfoType:4},{id:82,name:"收货人电话",type:5,DataType:"tel",InfoType:4}],options:[],searchValue:"",tableData:[],tableHead:{height:"60px",color:"#555555"},tableHeight:{padding:"0",height:"40px"},pagesize:10,currentPage:1,total:1,addProducts:!1,typeTwo:!1,typeThree:!1,typeFour:!1,typeFive:!1,sex:0,dataProducts:{id:"",templateName:"",templateType:"",travelNum:"",traveFillIn:"",travelInfo:[]},formLabelWidth:"140px",tableProducts:[],typeThreeTables:[],typeThreeTable:[],typeFourList:[],fourDepartureTime:[],fourDepartureShifts:[],fourDepartureHotelArea:[],fourScene:[],fourBoardingLocation:[],fourCollectionPlace:[],fourCollectionTime:[],fourDropOffArea:[],fourBoardingLocations:[],fourDropOffAreas:[],fourPlaceUse:[],fourAlternativeTime:[],fourPickAddress:[],fourReturnAddress:[],typeTwoList:[],typeThreeList:[],typeThreeLists:[],typeTwoData:{name:"",requirement:"必填",certificates:[],documents:[]},typeThreeData:{name:"",requirement:"必填"},typeFourData:{id:"",name:"",requirement:"必填",time:""},typeFiveData:{name:"",requirement:"必填"},dataProductsRules:{templateName:[{required:!0,message:"请填写模板名称"}],templateType:[{required:!0,message:"请选择模板类型"}],travelNum:[{required:!0,message:"请选择出行人个数"}],traveFillIn:[{required:!0,message:"请选择出行人填写配置"}]},typeTwoRules:{certificates:[{validator:function(t,a,i){""==e.typeTwoData.certificates&&"必填"==e.typeTwoData.requirement?i(new Error("请选择证件")):i()}}]}}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},initData:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/template/api/templatepage",{pageIndex:this.currentPage,pageSize:this.pagesize,object:{}}).then(function(t){e.tableData=t.data.objects,e.total=t.data.total,e.tableData.forEach(function(t){var a="";e.options.forEach(function(e){t.productType==e.id&&(a=e.name)}),t.productType=a})}).catch(function(e){console.log(e)})},travelInfos:function(e){var t=this;setTimeout(function(a){if(t.switchNum){var i=t.attribute.concat(t.attribute1).concat(t.attribute2).concat(t.attribute3);if(""==t.tableProducts.length||t.tableProducts.length<t.dataProducts.travelInfo.length)i.forEach(function(a){a.id==e&&t.tableProducts.push({id:a.id,name:a.name,type:a.type,selection:"必填",InfoType:a.InfoType,selectionValue:[]})});else for(var l=0;l<t.tableProducts.length;l++)t.tableProducts[l].id==e&&t.tableProducts.splice(l,1);t.switchNum=!1}else t.switchNum=!0,t.fourDataTable(e,"clare"),4==e&&(t.typeTwoData.certificates=[])},100)},fourDataTable:function(e,t,a){var i=void 0!==a?a:this.typeFourData.time;switch(this.typeFourList=[],e){case 63:"time"==t&&this.fourDepartureTime.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourDepartureTime=[]),this.typeFourList=this.fourDepartureTime;break;case 64:"time"==t&&this.fourDepartureShifts.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourDepartureShifts=[]),this.typeFourList=this.fourDepartureShifts;break;case 65:"time"==t&&this.fourDepartureHotelArea.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourDepartureHotelArea=[]),this.typeFourList=this.fourDepartureHotelArea;break;case 67:"time"==t&&this.fourScene.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourScene=[]),this.typeFourList=this.fourScene;break;case 68:"time"==t&&this.fourBoardingLocation.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourBoardingLocation=[]),this.typeFourList=this.fourBoardingLocation;break;case 69:"time"==t&&this.fourCollectionPlace.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourCollectionPlace=[]),this.typeFourList=this.fourCollectionPlace;break;case 70:"time"==t&&this.fourCollectionTime.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourCollectionTime=[]),this.typeFourList=this.fourCollectionTime;break;case 71:"time"==t&&this.fourDropOffArea.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourDropOffArea=[]),this.typeFourList=this.fourDropOffArea;break;case 74:"time"==t&&this.fourBoardingLocations.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourBoardingLocations=[]),this.typeFourList=this.fourBoardingLocations;break;case 75:"time"==t&&this.fourDropOffAreas.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourDropOffAreas=[]),this.typeFourList=this.fourDropOffAreas;break;case 77:"time"==t&&this.fourPlaceUse.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourPlaceUse=[]),this.typeFourList=this.fourPlaceUse;break;case 78:"time"==t&&this.fourAlternativeTime.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourAlternativeTime=[]),this.typeFourList=this.fourAlternativeTime;break;case 79:"time"==t&&this.fourPickAddress.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourPickAddress=[]),this.typeFourList=this.fourPickAddress;break;case 80:"time"==t&&this.fourReturnAddress.push({name:i,createTime:this.createTime}),"clare"==t&&(this.fourReturnAddress=[]),this.typeFourList=this.fourReturnAddress}},templateEmpty:function(){this.tableProducts=[],this.dataProducts={id:"",templateName:"",templateType:"",travelNum:"",traveFillIn:"",travelInfo:[]},this.typeTwoData={name:"",requirement:"必填",certificates:[],documents:[]},this.typeThreeData={name:"",requirement:"必填"},this.typeFourData={id:"",name:"",requirement:"必填",time:""},this.typeFiveData={name:"",requirement:"必填"},this.fourDepartureTime=[],this.fourDepartureShifts=[],this.fourDepartureHotelArea=[],this.fourScene=[],this.fourBoardingLocation=[],this.fourCollectionPlace=[],this.fourCollectionTime=[],this.fourDropOffArea=[],this.fourBoardingLocations=[],this.fourDropOffAreas=[],this.fourPlaceUse=[],this.fourAlternativeTime=[],this.fourPickAddress=[],this.fourReturnAddress=[]},insertProducts:function(){this.addProducts=!0,this.isJudge=!0,void 0!==this.$refs.dataProducts&&this.$refs.dataProducts.resetFields(),this.templateEmpty()},editProducts:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/template/api/templateget",{object:{id:e.id,properties:[{loadOption:!0}],loadProperty:!0}}).then(function(e){var a="",i=[];t.addProducts=!0,t.isJudge=!1,t.templateEmpty(),t.dataProducts.id=e.data.object.id,t.dataProducts.templateType=e.data.object.productType,t.dataProducts.templateName=e.data.object.name,t.dataProducts.travelNum=String(e.data.object.isOne),t.dataProducts.traveFillIn=String(e.data.object.isRequired),0!=e.data.object.properties.length&&e.data.object.properties.forEach(function(e){t.dataProducts.travelInfo.push(e.propertyListID),0!=e.options.length&&e.options.forEach(function(a){i.push(a.name),t.fourDataTable(e.propertyListID,"time",a.name),2==e.type&&t.typeTwoData.certificates.push(a.optionID)}),a=1==e.isRequired?"必填":"选填",t.tableProducts.push({id:e.propertyListID,name:e.name,type:e.type,selection:a,InfoType:e.infoType,selectionValue:i.join("，")}),i=[]})}).catch(function(e){console.log(e)})},handleEdit:function(e,t){var a=this;"2"==t.type?(this.$http.post(this.GLOBAL.serverSrc+"/universal/template/api/optionlist",{object:{propertyListID:t.id}}).then(function(e){a.typeTwoData.documents=[],e.data.objects.forEach(function(e){a.typeTwoData.documents.push({id:e.id,name:e.name,propertyListID:e.propertyListID,propertyListType:e.propertyListType})})}).catch(function(e){console.log(e)}),this.typeTwo=!0,this.typeTwoData.name=t.name,this.typeTwoData.key=e):"3"==t.type?(this.$http.post(this.GLOBAL.serverSrc+"/universal/template/api/optionlist",{object:{propertyListID:t.id}}).then(function(e){"性别"==t.name?(a.typeThreeTable=[],e.data.objects.forEach(function(e){a.typeThreeTable.push({id:e.id,name:e.name,propertyListID:e.propertyListID,propertyListType:e.propertyListType})}),a.sex=1):"鞋码(欧码)"==t.name&&(a.typeThreeTables=[],e.data.objects.forEach(function(e){a.typeThreeTables.push({id:e.id,name:e.name,propertyListID:e.propertyListID,propertyListType:e.propertyListType})}),a.sex=0)}).catch(function(e){console.log(e)}),this.typeThree=!0,this.typeThreeData.name=t.name,this.typeThreeData.key=e):"4"==t.type?(this.typeFour=!0,this.fourDataTable(t.id),this.typeFourData.name=t.name,this.typeFourData.id=t.id,this.typeFourData.key=e):"5"==t.type&&(this.typeFive=!0,this.typeFiveData.name=t.name,this.typeFiveData.key=e)},typeTwoClick:function(e,t){var a=this;this.$refs[e].validate(function(e){if(e){var i=[];a.typeTwoList=[],a.typeTwoData.certificates.forEach(function(e){a.typeTwoData.documents.forEach(function(t){e==t.id&&(i.push(t.name),a.typeTwoList.push({optionID:t.id,name:t.name,propertyID:t.propertyListID,createTime:a.createTime}))})}),a.tableProducts[t].selection=a.typeTwoData.requirement,a.tableProducts[t].selectionValue=i.join("，"),a.typeTwo=!1}})},typeThreeClick:function(e,t){var a=this;if("typeThreeTable"==e){var i=[];this.typeThreeList=[],this.typeThreeTable.forEach(function(e){i.push(e.name),a.typeThreeList.push({optionID:e.id,name:e.name,propertyID:e.propertyListID,createTime:a.createTime})}),this.tableProducts[t].selection=this.typeThreeData.requirement,this.tableProducts[t].selectionValue=i.join("，")}else if("typeThreeTables"==e){var l=[];this.typeThreeLists=[],this.typeThreeTables.forEach(function(e){l.push(e.name),a.typeThreeLists.push({optionID:e.id,name:e.name,propertyID:e.propertyListID,createTime:a.createTime})}),this.tableProducts[t].selection=this.typeThreeData.requirement,this.tableProducts[t].selectionValue=l.join("，")}this.typeThree=!1},addTime:function(e){this.fourDataTable(e,"time"),this.typeFourData.time=""},typeFourDelete:function(e,t){t.splice(e,1)},typeFourClick:function(e,t,a){this.tableProducts[t].selection=this.typeFourData.requirement;for(var i=[],l=0;l<e.length;l++)i.push(e[l].name);this.tableProducts[t].selectionValue=i.join("，"),this.typeFour=!1},typeFiveClick:function(e){this.tableProducts[e].selection=this.typeFiveData.requirement,this.typeFive=!1},pagesizes:function(e){this.currentPage=1,this.pagesize=e,this.initData()},handleCurrentChange:function(e){this.currentPage=e,this.initData()},addTemplate:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=[],i="",l=[];t.tableProducts.forEach(function(e){switch(i="必填"==e.selection?1:2,e.id){case 4:l=t.typeTwoList;break;case 7:l=t.typeThreeList;break;case 12:l=t.typeThreeLists;break;case 63:l=t.fourDepartureTime;break;case 64:l=t.fourDepartureShifts;break;case 65:l=t.fourDepartureHotelArea;break;case 67:l=t.fourScene;break;case 68:l=t.fourBoardingLocation;break;case 69:l=t.fourCollectionPlace;break;case 70:l=t.fourCollectionTime;break;case 71:l=t.fourDropOffArea;break;case 74:l=t.fourBoardingLocations;break;case 75:l=t.fourDropOffAreas;break;case 77:l=t.fourPlaceUse;break;case 78:l=t.fourAlternativeTime;break;case 79:l=t.fourPickAddress;break;case 80:l=t.fourReturnAddress}a.push({propertyListID:e.id,name:e.name,type:e.type,infoType:e.InfoType,isRequired:i,createTime:t.createTime,dataType:"string",options:l}),l=[]}),t.isJudge?t.$http.post(t.GLOBAL.serverSrc+"/universal/template/api/templateinsert",{object:{name:t.dataProducts.templateName,productType:t.dataProducts.templateType,isOne:t.dataProducts.travelNum,isRequired:t.dataProducts.traveFillIn,createTime:t.createTime,properties:a}}).then(function(e){t.addProducts=!1,t.$message.success("添加成功！"),t.initData(),t.$refs.dataProducts.resetFields()}).catch(function(e){console.log(e)}):t.$http.post(t.GLOBAL.serverSrc+"/universal/template/api/templatesave",{object:{id:t.dataProducts.id,name:t.dataProducts.templateName,productType:t.dataProducts.templateType,isOne:t.dataProducts.travelNum,isRequired:t.dataProducts.traveFillIn,createTime:t.createTime,properties:a}}).then(function(e){t.addProducts=!1,t.$message.success("编辑成功！"),t.initData(),t.$refs.dataProducts.resetFields()}).catch(function(e){console.log(e)})}})},deleteProducts:function(e){var t=this;this.$confirm("此操作将删除该模板","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(t.GLOBAL.serverSrc+"/universal/template/api/templatedelete",{id:e.id}).then(function(e){1==t.tableData.length&&(t.currentPage=t.currentPage-1),t.initData(),t.$message({type:"success",message:"删除成功!"})}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},searResetClick:function(){this.input="",this.searchValue=""}}},Be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"travelTemplate"},[a("div",{staticClass:"head"},[a("div",{staticClass:"search"},[a("div",{staticClass:"searchTemplate"},[a("span",[e._v("模板名称")]),e._v(" "),a("el-input",{staticClass:"searchTemplate_index",attrs:{placeholder:"请输入内容"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),e._v(" "),a("div",{staticClass:"searchState"},[a("span",[e._v("类型")]),e._v(" "),a("el-select",{staticClass:"searchTemplate_index",attrs:{placeholder:"请选择"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},e._l(e.options,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-button",{staticClass:"searReset",attrs:{type:"primary"},on:{click:e.searResetClick}},[e._v("重置")])],1)]),e._v(" "),a("div",{staticClass:"products"},[a("el-button",{staticClass:"products_button",attrs:{type:"primary"},on:{click:function(t){e.insertProducts()}}},[e._v("添加模板")]),e._v(" "),a("el-table",{staticClass:"table_list",staticStyle:{width:"750px"},attrs:{data:e.tableData,border:"","header-row-style":e.tableHead,"cell-style":e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"70%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"模板名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productType",label:"模板类型",align:"center",width:"210%"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"220%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"table_button",attrs:{type:"primary"},on:{click:function(a){e.editProducts(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"table_button",attrs:{type:"danger"},on:{click:function(a){e.deleteProducts(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pages"},[a("el-pagination",{staticClass:"page",attrs:{background:"","current-page":e.currentPage,"page-sizes":[2,4,8,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pagesizes,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{staticClass:"Products_popup",attrs:{visible:e.addProducts,"show-close":!1,width:"75%"},on:{"update:visible":function(t){e.addProducts=t}}},[a("div",[e.isJudge?a("span",{staticClass:"newTemplate"},[e._v("新增模板")]):a("span",{staticClass:"newTemplate"},[e._v("编辑模板")]),e._v(" "),a("div",{staticClass:"button_right"},[a("el-button",{staticClass:"Determine cancel",on:{click:function(t){e.addProducts=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"Determine",attrs:{type:"primary"},on:{click:function(t){e.addTemplate("dataProducts")}}},[e._v("保存")])],1)]),e._v(" "),a("el-form",{ref:"dataProducts",staticClass:"Products_form",attrs:{model:e.dataProducts,"status-icon":"",rules:e.dataProductsRules}},[a("el-form-item",{attrs:{label:"模板名称:","label-width":e.formLabelWidth,prop:"templateName"}},[a("el-input",{staticClass:"Products_input",attrs:{clearable:""},model:{value:e.dataProducts.templateName,callback:function(t){e.$set(e.dataProducts,"templateName",t)},expression:"dataProducts.templateName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板类型:",prop:"templateType","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"Products_select",attrs:{placeholder:"请选择"},model:{value:e.dataProducts.templateType,callback:function(t){e.$set(e.dataProducts,"templateType",t)},expression:"dataProducts.templateType"}},e._l(e.options,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"出行人个数:",prop:"travelNum","label-width":e.formLabelWidth}},[a("el-radio-group",{staticClass:"travelNum",model:{value:e.dataProducts.travelNum,callback:function(t){e.$set(e.dataProducts,"travelNum",t)},expression:"dataProducts.travelNum"}},[a("el-radio",{attrs:{label:"1"}},[e._v("一个出行人")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("多个出行人(仅出行人信息需要填写多份)")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出行人填写配置:",prop:"traveFillIn","label-width":e.formLabelWidth}},[a("el-radio-group",{staticClass:"travelNum",model:{value:e.dataProducts.traveFillIn,callback:function(t){e.$set(e.dataProducts,"traveFillIn",t)},expression:"dataProducts.traveFillIn"}},[a("el-radio",{attrs:{label:"1"}},[e._v("一个出行人")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("多个出行人(仅出行人信息需要填写多份)")])],1)],1),e._v(" "),""!==e.dataProducts.templateName&&""!==e.dataProducts.templateType&&""!==e.dataProducts.travelNum&&""!==e.dataProducts.traveFillIn?[a("div",{staticClass:"detailed"},[a("el-form-item",{attrs:{label:"出行人信息:","label-width":e.formLabelWidth}},[a("el-checkbox-group",{staticClass:"selection",model:{value:e.dataProducts.travelInfo,callback:function(t){e.$set(e.dataProducts,"travelInfo",t)},expression:"dataProducts.travelInfo"}},e._l(e.attribute,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.id,name:"type"},nativeOn:{click:function(a){e.travelInfos(t.id)}}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"行程信息:","label-width":e.formLabelWidth}},[a("el-checkbox-group",{staticClass:"selection",model:{value:e.dataProducts.travelInfo,callback:function(t){e.$set(e.dataProducts,"travelInfo",t)},expression:"dataProducts.travelInfo"}},e._l(e.attribute1,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.id,name:"type"},nativeOn:{click:function(a){e.travelInfos(t.id)}}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"取还地址:","label-width":e.formLabelWidth}},[a("el-checkbox-group",{staticClass:"selection",model:{value:e.dataProducts.travelInfo,callback:function(t){e.$set(e.dataProducts,"travelInfo",t)},expression:"dataProducts.travelInfo"}},e._l(e.attribute2,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.id,name:"type"},nativeOn:{click:function(a){e.travelInfos(t.id)}}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"收货地址:","label-width":e.formLabelWidth}},[a("el-checkbox-group",{staticClass:"selection",model:{value:e.dataProducts.travelInfo,callback:function(t){e.$set(e.dataProducts,"travelInfo",t)},expression:"dataProducts.travelInfo"}},e._l(e.attribute3,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.id,name:"type"},nativeOn:{click:function(a){e.travelInfos(t.id)}}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),a("el-table",{staticClass:"table_lists",staticStyle:{width:"65%"},attrs:{data:e.tableProducts,border:"","header-row-style":e.tableHead,"cell-style":e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"name",label:"字段名称",width:"260%",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"selection",label:"选填/必填",width:"160%",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"selectionValue",label:"选项值",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"160%",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!==t.row.id&&2!==t.row.id&&3!==t.row.id?[a("el-button",{staticClass:"table_button",attrs:{type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]:e._e()]}}])})],1)]:e._e()],2)],1),e._v(" "),a("el-dialog",{staticClass:"TypeTwo_popup",attrs:{visible:e.typeTwo,"show-close":!1},on:{"update:visible":function(t){e.typeTwo=t}}},[a("el-button",{staticClass:"typeTwo_button",attrs:{type:"primary"},on:{click:function(t){e.typeTwoClick("typeTwoData",e.typeTwoData.key)}}},[e._v("保存")]),e._v(" "),a("el-form",{ref:"typeTwoData",staticClass:"Products_form",attrs:{model:e.typeTwoData,"status-icon":"",rules:e.typeTwoRules}},[a("el-form-item",{attrs:{label:"字段名称:","label-width":e.formLabelWidth}},[a("span",{staticClass:"typeTwo_span"},[e._v(e._s(e.typeTwoData.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"填写要求:","label-width":e.formLabelWidth}},[a("el-radio-group",{staticClass:"typeTwoNum",model:{value:e.typeTwoData.requirement,callback:function(t){e.$set(e.typeTwoData,"requirement",t)},expression:"typeTwoData.requirement"}},[a("el-radio",{attrs:{label:"选填"}},[e._v("选填")]),e._v(" "),a("el-radio",{attrs:{label:"必填"}},[e._v("必填")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"certificates"}},[a("el-checkbox-group",{staticClass:"selections typeTwo_select",model:{value:e.typeTwoData.certificates,callback:function(t){e.$set(e.typeTwoData,"certificates",t)},expression:"typeTwoData.certificates"}},[e._l(e.typeTwoData.documents,function(t,i){return[a("el-checkbox",{key:i,attrs:{label:t.id,name:"type"}},[e._v(e._s(t.name))])]})],2)],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"TypeThree_popup",attrs:{visible:e.typeThree,"show-close":!1,width:"40%"},on:{"update:visible":function(t){e.typeThree=t}}},[1==e.sex?[a("el-button",{staticClass:"typeTwo_button",attrs:{type:"primary"},on:{click:function(t){e.typeThreeClick("typeThreeTable",e.typeThreeData.key)}}},[e._v("保存")])]:e._e(),e._v(" "),0==e.sex?[a("el-button",{staticClass:"typeTwo_button",attrs:{type:"primary"},on:{click:function(t){e.typeThreeClick("typeThreeTables",e.typeThreeData.key)}}},[e._v("保存")])]:e._e(),e._v(" "),a("el-form",{ref:"typeTwoData",staticClass:"Products_form",attrs:{model:e.typeThreeData,"status-icon":""}},[a("el-form-item",{attrs:{label:"字段名称:","label-width":e.formLabelWidth}},[a("span",{staticClass:"typeTwo_span"},[e._v(e._s(e.typeThreeData.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"填写要求:","label-width":e.formLabelWidth}},[a("el-radio-group",{staticClass:"typeTwoNum",model:{value:e.typeThreeData.requirement,callback:function(t){e.$set(e.typeThreeData,"requirement",t)},expression:"typeThreeData.requirement"}},[a("el-radio",{attrs:{label:"选填"}},[e._v("选填")]),e._v(" "),a("el-radio",{attrs:{label:"必填"}},[e._v("必填")])],1)],1),e._v(" "),1==e.sex?[a("el-table",{staticClass:"typeThree_list",staticStyle:{width:"40%"},attrs:{data:e.typeThreeTable,border:"","header-row-style":e.tableHead,"cell-style":e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"name",label:"选项值",width:"",align:"center"}})],1)]:0==e.sex?[a("el-table",{staticClass:"typeThree_list",staticStyle:{width:"40%"},attrs:{data:e.typeThreeTables,border:"","header-row-style":e.tableHead,"cell-style":e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"name",label:"选项值",width:"",align:"center"}})],1)]:e._e()],2)],2),e._v(" "),a("el-dialog",{staticClass:"TypeFour_popup",attrs:{visible:e.typeFour,"show-close":!1,width:"40%"},on:{"update:visible":function(t){e.typeFour=t}}},[a("el-button",{staticClass:"typeTwo_button",attrs:{type:"primary"},on:{click:function(t){e.typeFourClick(e.typeFourList,e.typeFourData.key,e.typeFourData.id)}}},[e._v("保存")]),e._v(" "),a("el-form",{ref:"typeFourTable",staticClass:"Products_form",attrs:{model:e.typeFourData,"status-icon":""}},[a("el-form-item",{attrs:{label:"字段名称:","label-width":e.formLabelWidth}},[a("span",{staticClass:"typeTwo_span"},[e._v(e._s(e.typeFourData.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"填写要求:","label-width":e.formLabelWidth}},[a("el-radio-group",{staticClass:"typeTwoNum",model:{value:e.typeFourData.requirement,callback:function(t){e.$set(e.typeFourData,"requirement",t)},expression:"typeFourData.requirement"}},[a("el-radio",{attrs:{label:"选填"}},[e._v("选填")]),e._v(" "),a("el-radio",{attrs:{label:"必填"}},[e._v("必填")])],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"-5px",prop:"timeFormat"}},[a("el-input",{staticClass:"typeFour_input",attrs:{placeholder:"请输入内容"},model:{value:e.typeFourData.time,callback:function(t){e.$set(e.typeFourData,"time",t)},expression:"typeFourData.time"}}),e._v(" "),a("el-button",{staticClass:"typeFour_time",attrs:{type:"primary"},on:{click:function(t){e.addTime(e.typeFourData.id)}}},[e._v("添加选项时间")])],1),e._v(" "),a("el-table",{staticClass:"typeThree_list",staticStyle:{width:"60%"},attrs:{data:e.typeFourList,border:"","header-row-style":e.tableHead,"cell-style":e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"name",label:"选项值",width:"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"table_button",attrs:{type:"primary"},on:{click:function(a){e.typeFourDelete(t.$index,e.typeFourList)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"TypeFive_popup",attrs:{visible:e.typeFive,"show-close":!1,width:"40%"},on:{"update:visible":function(t){e.typeFive=t}}},[a("el-button",{staticClass:"typeTwo_button",attrs:{type:"primary"},on:{click:function(t){e.typeFiveClick(e.typeFiveData.key)}}},[e._v("保存")]),e._v(" "),a("el-form",{staticClass:"Products_form",attrs:{model:e.typeFiveData,"status-icon":""}},[a("el-form-item",{attrs:{label:"字段名称:","label-width":e.formLabelWidth}},[a("span",{staticClass:"typeTwo_span"},[e._v(e._s(e.typeFiveData.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"填写要求:","label-width":e.formLabelWidth}},[a("el-radio-group",{staticClass:"typeTwoNum",model:{value:e.typeFiveData.requirement,callback:function(t){e.$set(e.typeFiveData,"requirement",t)},expression:"typeFiveData.requirement"}},[a("el-radio",{attrs:{label:"选填"}},[e._v("选填")]),e._v(" "),a("el-radio",{attrs:{label:"必填"}},[e._v("必填")])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var Pe=a("VU/8")(Ee,Be,!1,function(e){a("0pnv")},"data-v-76080b62",null).exports,Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"跟团游",name:"1"}})],1),e._v(" "),a("router-view")],1)},staticRenderFns:[]};var $e=a("VU/8")({data:function(){return{activeName:"1"}},methods:{handleClick:function(e,t){1==e.name&&this.$router.push({path:"/regimentPlan/teamPlanList"})}}},Ae,!1,function(e){a("uVQ1")},"data-v-bc4ddb1a",null).exports,Ue={data:function(){return{groupCode:"",startTime:"",endTime:"",pageSize:10,pageIndex:1,total:0,teamqueryList:[],multipleSelection:[],costList:[{id:1,serno:1,state:"已审",type:"公摊",costType:"机票",abstract:"升级套房",supplierInfo:"大运通国际旅行社",price:"2000",num:"20",enclosure:"查看"},{id:2,serno:1,state:"已审",type:"公摊",costType:"机票",abstract:"升级套房",supplierInfo:"大运通国际旅行社",price:"2000",num:"20",enclosure:"查看"}],dialogCost:!1,costSelection:[],dialogFormVisible:!1,form:{radio:""},formLabelWidth:"120px",forbidden1:!0,forbidden2:!0,dialogFormOrder:!1,ruleForm:{orderRadio:"3",sale:"",travel:"",price:"1",price1:"",price2:"",price3:"",price4:"",otherCost:0,otherCostRemark:"",allDiscount:0,allDisRemark:"",totalPrice:0,type:"1",contactName:"",contactPhone:"",remark:""},quota:[],enrolNum:[],enrolNums:!1,dialogFormTour:!1,salePrice:[],salePriceNum:[],tourType:0,fillIndex:0,preLength:[],tour:[],winTitle:"",conForm:{id:0,isDeleted:0,code:"",cnName:"",enName:"",sex:"",mobile:"",idCard:"",bornDate:0,credType:"",credCode:"",credTOV:0,orderID:0,orderCode:"string",orgID:sessionStorage.getItem("orgID"),userID:sessionStorage.getItem("id")},orderSuc:!1,teampreviewData:{},orderCode:"",ifOrderInsert:!0,rules:{orderRadio:[{required:!0,message:"请选择订单来源",trigger:"change"}],sale:[{required:!0,message:"请选择销售",trigger:"change"}],travel:[{required:!0,message:"请选择同业社",trigger:"change"}],price:[{required:!0,message:"请选择价格",trigger:"change"}],price1:[{pattern:/^[+]{0,1}(\d+)$/,message:"价格必须为数字值"}],price2:[{pattern:/^[+]{0,1}(\d+)$/,message:"价格必须为数字值"}],price3:[{pattern:/^[+]{0,1}(\d+)$/,message:"价格必须为数字值"}],price4:[{pattern:/^[+]{0,1}(\d+)$/,message:"价格必须为数字值"}],totalPrice:[{required:!0,message:"价格不能为空"}],otherCost:[{required:!0,message:"请输入其他费用",trigger:"blur"},{pattern:/^(([+]?\d*$)|(^[+]?\d+(\.\d+)?$))/,message:"必须为数字值，并且不允许是负数"}],allDiscount:[{required:!0,message:"请输入整体优惠",trigger:"blur"},{pattern:/^(([+]?\d*$)|(^[+]?\d+(\.\d+)?$))/,message:"必须为数字值，并且不允许是负数"}],num:[{required:!0,message:"请输入数量",trigger:"blur"}],type:[{required:!0,message:"请选择下单方式",trigger:"change"}],contactName:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系人电话",trigger:"blur"}],cnName:[{required:!0,message:"请输入姓名",trigger:"blur"}],enName:[{required:!0,message:"请输入姓（拼音）",trigger:"blur"},{pattern:/(a[io]?|ou?|e[inr]?|ang?|ng|[bmp](a[io]?|[aei]ng?|ei|ie?|ia[no]|o|u)|pou|me|m[io]u|[fw](a|[ae]ng?|ei|o|u)|fou|wai|[dt](a[io]?|an|e|[aeio]ng|ie?|ia[no]|ou|u[ino]?|uan)|dei|diu|[nl](a[io]?|ei?|[eio]ng|i[eu]?|i?ang?|iao|in|ou|u[eo]?|ve?|uan)|nen|lia|lun|[ghk](a[io]?|[ae]ng?|e|ong|ou|u[aino]?|uai|uang?)|[gh]ei|[jqx](i(ao?|ang?|e|ng?|ong|u)?|u[en]?|uan)|([csz]h?|r)([ae]ng?|ao|e|i|ou|u[ino]?|uan)|[csz](ai?|ong)|[csz]h(ai?|uai|uang)|zei|[sz]hua|([cz]h|r)ong|y(ao?|[ai]ng?|e|i|ong|ou|u[en]?|uan))/,message:"姓（拼音）格式不正确"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/,message:"手机号格式不正确"}],idCard:[{required:!0,message:"身份证号不能为空",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"身份证号格式不正确",trigger:"blur"}]}}},created:function(){this.teamQueryList()},watch:{enrolNum:function(e){this.changeQuota(),this.compPrice()},"ruleForm.otherCost":function(e){this.compPrice()},"ruleForm.allDiscount":function(e){this.compPrice()},"ruleForm.type":function(e){this.changeQuota()}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},changeFun:function(e){this.multipleSelection=e,1==this.multipleSelection.length?this.forbidden2=!1:this.forbidden2=!0,this.multipleSelection.length>0?this.forbidden1=!1:this.forbidden1=!0},clickRow:function(e){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(e)},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.multipleSelection.length;a++)if(this.multipleSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},handleSizeChange:function(e){this.pageSize=e,this.pageIndex=1,this.teamQueryList(1,e,this.groupCode)},handleCurrentChange:function(e){this.teamQueryList(e,this.pageSize,this.groupCode)},teamQueryList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex,t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.groupCode;this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/page",{pageIndex:e,pageSize:a,object:{groupCode:i}}).then(function(e){t.teamqueryList=[],t.total=e.data.total,1==e.data.isSuccess&&(t.teamqueryList=e.data.objects)}).catch(function(e){console.log(e)})},getCostClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#f6f6f6;height:25px;textAlign:center;fontSize:15px":""},costrowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.costSelection.length;a++)if(this.costSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},changeFunCost:function(e){this.costSelection=e,this.costSelection.length},clickRowCost:function(e){this.$refs.costTable.toggleRowSelection(e)},teamOrder:function(){this.teamEnrolls(),this.teampreview(),this.dialogFormOrder=!0,this.enrolNums=!1,this.ruleForm.remark="",this.ruleForm.otherCostRemark="",this.ruleForm.allDisRemark=""},changeQuota:function(){this.salePrice=JSON.parse(JSON.stringify(this.salePriceNum));for(var e=JSON.parse(JSON.stringify(this.salePriceNum)),t={},a=0;a<this.salePrice.length;a++)1==this.ruleForm.type||2==this.ruleForm.type?(this.salePrice[a].quota=parseInt(this.salePrice[a].quota)-parseInt(this.enrolNum[a]),t=this.salePrice[a]):(e[a].quota=parseInt(e[a].quota)-parseInt(this.enrolNum[a]),t=e[a]),t.quota<0?this.quota[a]=!0:this.quota[a]=!1},teamEnrolls:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/enrolls",{id:this.multipleSelection[0].id}).then(function(t){if(1==t.data.isSuccess){e.salePrice=t.data.objects,e.salePriceNum=t.data.objects,e.preLength=[],e.enrolNum=[],e.quota=[],e.tour=[];for(var a=0;a<t.data.objects.length;a++)e.preLength.push("0"),e.enrolNum.push(0),e.quota.push(!1),e.tour.push([])}})},teampreview:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/teampreview",{id:this.multipleSelection[0].id}).then(function(t){1==t.data.isSuccess&&(e.teampreviewData=t.data.object)})},peoNum:function(e,t,a){var i,l,s;if(l=this.preLength[e],i=this.enrolNum[e],this.preLength[e]=this.enrolNum[e],i>l){s=i-l;for(var o=0;o<s;o++)this.tour[e].push({enrollID:t,enrollName:a,id:0,isDeleted:0,code:"string",cnName:"点击填写",enName:"string",sex:0,idCard:"string",singlePrice:0,mobile:"string",bornDate:0,credType:1,credCode:"string",credTOV:0,orderID:0,orderCode:"string",orgID:0,userID:0})}else this.tour[e].splice(i-l,l-i)},fillTour:function(e,t){this.winTitle=this.salePrice[e].enrollName,"点击填写"!=this.tour[e][t].cnName&&(this.conForm=JSON.parse(JSON.stringify(this.tour[e][t]))),this.tourType=e,this.fillIndex=t,this.dialogFormTour=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){for(var i="0",l=0;l<t.quota.length;l++)1==t.quota[l]&&(i="1");if("1"==i)return!1;for(var s=0,o=0;o<t.enrolNum.length;o++)t.enrolNum[o]&&(s+=parseInt(t.enrolNum[o]));if(0==s)return t.enrolNums=!0,!1;t.enrolNums=!1;var r=[];if(!a)return console.log("error submit!!"),t.ifOrderInsert=!0,!1;for(var n=0;n<t.tour.length;n++)for(var c=0;c<t.tour[n].length;c++)r.push(t.tour[n][c]);for(var d=[],u=0;u<r.length;u++)"点击填写"!=r[u].cnName?(d.push(r[u]),d[u].bornDate=new Date(d[u].bornDate).getTime()/1e3,d[u].credTOV=new Date(d[u].credTOV).getTime()/1e3,""==d[u].credType&&(d[u].credType=0)):d.push(r[u]);if(0==t.ifOrderInsert)return!1;t.ifOrderInsert=!1,t.$http.post(t.GLOBAL.serverSrc+"/order/all/api/orderinsert",{object:{id:0,isDeleted:0,code:"",orderCode:"",proID:t.teampreviewData.teamID,planID:t.multipleSelection[0].id,orderStatus:0,refundStatus:0,occupyStatus:t.ruleForm.type,payable:t.ruleForm.totalPrice,favourable:[{id:0,orderID:0,price:t.ruleForm.otherCost,title:"其他费用",favMode:1,mark:t.ruleForm.otherCostRemark},{id:0,orderID:0,price:t.ruleForm.allDiscount,title:"整体优惠",favMode:2,mark:t.ruleForm.allDisRemark}],contact:'{"Name":"'+t.ruleForm.contactName+'","Tel":"'+t.ruleForm.contactPhone+'"}',endTime:1==t.ruleForm.type?0:(new Date).getTime()/1e3+86400,orderChannel:t.ruleForm.orderRadio,orgID:sessionStorage.getItem("orgID"),userID:sessionStorage.getItem("id"),mark:t.ruleForm.remark,guest:d,number:s}}).then(function(a){if(1==a.data.isSuccess){t.$message.success("提交成功");var i=JSON.parse(a.data.result.details);t.orderCode=i.OrderCode,t.orderSuc=!0,t.$refs[e].resetFields(),t.dialogFormOrder=!1,t.ifOrderInsert=!0,t.startUpWorkFlowForJQ(i.OrderID,i.FlowModel,i.FlowModelName,i.Usercode)}else _this.$message.success("下单失败"),t.ifOrderInsert=!0})})},startUpWorkFlowForJQ:function(e,t,a,i){var l=this;this.$http.post(this.GLOBAL.jqUrl+"/api/JQ/StartUpWorkFlowForJQ",{jQ_ID:e,jQ_Type:t,workflowCode:a,userCode:i}).then(function(e){l.submitWAForJQ(i,JSON.parse(e.data).data.workItemID)})},submitWAForJQ:function(e,t){this.$http.post(this.GLOBAL.jqUrl+"/api/JQ/GettingUnfinishedTasksForJQ",{userCode:e,workItemID:t,commentText:"测试"}).then(function(e){})},subInfo:function(e){var t=this;this.$refs[e].validate(function(a){if(a){var i=JSON.parse(JSON.stringify(t.conForm));i.enrollID=t.salePrice[t.tourType].enrollID,i.enrollName=t.salePrice[t.tourType].enrollName,1==t.ruleForm.price?i.singlePrice=t.salePrice[t.tourType].price_01:i.singlePrice=t.salePrice[t.tourType].price_02,t.tour[t.tourType][t.fillIndex]=i,t.dialogFormTour=!1,t.$refs[e].resetFields()}})},cancelInfo:function(e){this.dialogFormTour=!1,this.$refs[e].resetFields()},cancelInfoOrder:function(e){this.dialogFormOrder=!1,this.$refs[e].resetFields()},compPrice:function(){this.ruleForm.totalPrice=0;for(var e=0;e<this.enrolNum.length;e++)this.ruleForm.totalPrice+=this.enrolNum[e]*(1==this.ruleForm.price?this.salePrice[e].price_01:this.salePrice[e].price_02);this.ruleForm.totalPrice+=parseInt(this.ruleForm.otherCost),this.ruleForm.totalPrice-=parseInt(this.ruleForm.allDiscount)}}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"search-title"},[e._v("团号计划")]),e._v(" "),a("el-input",{staticClass:"group-no",attrs:{placeholder:"输入团号"},model:{value:e.groupCode,callback:function(t){e.groupCode=t},expression:"groupCode"}}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("div",{staticClass:"date-line"}),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"终止日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),e._v(" "),a("el-button",{staticClass:"search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.teamQueryList(1,e.pageSize,e.groupCode)}}})],1),e._v(" "),a("div",{staticClass:"main"},[a("el-row",{staticClass:"button"},[a("el-button",{attrs:{disabled:e.forbidden2},on:{click:e.teamOrder}},[e._v("下单")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.teamqueryList,"header-cell-style":e.getRowClass,border:"","row-style":e.rowClass},on:{"selection-change":e.changeFun,"row-click":e.clickRow}},[a("el-table-column",{attrs:{prop:"id",label:"",fixed:"",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名称","min-width":"340"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团号",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dateFormat",label:"出行日期",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"week",label:"周",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"day",label:"天数",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"refPrice",label:"参考价",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"计划位",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remaining",label:"余位",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shareCN",label:"是否共享",width:"85"}}),e._v(" "),a("el-table-column",{attrs:{prop:"op",label:"操作",width:"80"}})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:"更改状态",visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[a("span",{staticClass:"fs"},[e._v("正常")])]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[a("span",{staticClass:"fs"},[e._v("停售")])])],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:"报账单",visible:e.dialogCost,width:"60%"},on:{"update:visible":function(t){e.dialogCost=t}}},[a("el-table",{ref:"costTable",staticClass:"costTable",attrs:{data:e.costList,"header-cell-style":e.getCostClass,border:"","row-style":e.costrowClass},on:{"selection-change":e.changeFunCost,"row-click":e.clickRowCost}},[a("el-table-column",{attrs:{prop:"id",label:"",fixed:"",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serno",label:"序号","min-width":"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"审核状态","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"费用类型","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"costType",label:"成本类型","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierInfo",label:"供应商","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"金额","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"数量","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"enclosure",label:"附件","min-width":"70"}})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-100px"},attrs:{title:"下单",visible:e.dialogFormOrder,"custom-class":"city_list dialogOrder","append-to-body":"",width:"1000px"},on:{"update:visible":function(t){e.dialogFormOrder=t},close:function(t){e.cancelInfoOrder("ruleForm")}}},[a("div",{staticClass:"main1"},[a("div",{staticClass:"order-title"},[a("h2",[e._v("订单信息")])]),e._v(" "),a("div",{staticClass:"pro-info"},[a("table",[a("tr",[a("td",{attrs:{width:"80"}},[e._v("产品：")]),e._v(" "),a("td",[e._v(e._s(e.teampreviewData.title))])]),e._v(" "),a("tr",[a("td",[e._v("团期计划：")]),e._v(" "),a("td",[e._v(e._s(e.teampreviewData.groupCode))])]),e._v(" "),a("tr",[a("td",[e._v("套餐名称：")]),e._v(" "),a("td",[e._v(e._s(e.teampreviewData.package))])]),e._v(" "),a("tr",[a("td",[e._v("出发地：")]),e._v(" "),a("td",[e._v(e._s(e.teampreviewData.pod))])]),e._v(" "),a("tr",[a("td",[e._v("目的地：")]),e._v(" "),a("td",[e._v(e._s(e.teampreviewData.destination))])]),e._v(" "),a("tr",[a("td",[e._v("出发日期：")]),e._v(" "),a("td",[e._v(e._s(e.teampreviewData.date))])]),e._v(" "),a("tr",[a("td",[e._v("余位：")]),e._v(" "),a("td",[e._v(e._s(e.teampreviewData.remaining))])]),e._v(" "),a("tr",[a("td",[e._v("参考结算：")]),e._v(" "),a("td",[e._v(e._s(e.teampreviewData.refPrice))])])])]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"订单来源",prop:"orderRadio"}},[a("div",{staticClass:"ml13"},[e._v("线下直客")])]),e._v(" "),a("el-form-item",{staticClass:"cb price",attrs:{label:"价格",prop:"price"}},[a("el-radio-group",{model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}},[e._l(e.salePrice,function(t){return a("span",{staticStyle:{margin:"14px 18px 0 13px"}},[e._v(e._s(t.enrollName)+"：￥"+e._s(t.price_01))])}),a("br")],2)],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"报名人数"}},[a("div",{staticClass:"num-req"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"fl"},[a("table",{staticStyle:{margin:"-7px 0 17px 13px"}},e._l(e.salePrice,function(t,i){return a("tr",[a("td",{attrs:{height:"45"}},[e._v(e._s(t.enrollName))]),e._v(" "),a("td",{attrs:{height:"45"}},[a("el-input",{staticClass:"numw",attrs:{type:"number",min:0},on:{input:function(a){e.peoNum(i,t.enrollID,t.enrollName)}},model:{value:e.enrolNum[i],callback:function(t){e.$set(e.enrolNum,i,t)},expression:"enrolNum[index]"}}),e._v(" "),a("span",{class:{red:e.quota[i]}},[e._v("\n                    余（"+e._s(t.quota)+"）\n                    ￥"),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.ruleForm.price,expression:"ruleForm.price==1"}]},[e._v(e._s(t.price_01))]),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.ruleForm.price,expression:"ruleForm.price==2"}]},[e._v(e._s(t.price_02))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.quota[i],expression:"quota[index]"}]},[e._v("库存不足")])])],1)])})),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.enrolNums,expression:"enrolNums"}],staticClass:"red ml13",staticStyle:{"margin-top":"-30px"}},[e._v("报名人数不能为空")])]),e._v(" "),a("el-form-item",{staticClass:"fl cb",attrs:{label:"其他费用",prop:"otherCost"}},[a("el-input",{staticClass:"numw",attrs:{type:"number",min:0},model:{value:e.ruleForm.otherCost,callback:function(t){e.$set(e.ruleForm,"otherCost",t)},expression:"ruleForm.otherCost"}})],1),e._v(" "),a("div",{staticClass:"fl mtn5"},[e._v("            \n            备注"),a("el-input",{staticClass:"cost-remark",model:{value:e.ruleForm.otherCostRemark,callback:function(t){e.$set(e.ruleForm,"otherCostRemark",t)},expression:"ruleForm.otherCostRemark"}})],1),e._v(" "),a("el-form-item",{staticClass:"cb fl",attrs:{label:"整体优惠",prop:"allDiscount"}},[a("el-input",{staticClass:"numw",attrs:{type:"number",min:0},model:{value:e.ruleForm.allDiscount,callback:function(t){e.$set(e.ruleForm,"allDiscount",t)},expression:"ruleForm.allDiscount"}})],1),e._v(" "),a("div",{staticClass:"fl mtn5"},[e._v("            \n            备注"),a("el-input",{staticClass:"cost-remark",model:{value:e.ruleForm.allDisRemark,callback:function(t){e.$set(e.ruleForm,"allDisRemark",t)},expression:"ruleForm.allDisRemark"}})],1),e._v(" "),a("el-form-item",{staticClass:"cb",attrs:{label:"总计",prop:"totalPrice"}},[a("div",{staticClass:"ml13"},[e._v(e._s(e.ruleForm.totalPrice))])]),e._v(" "),a("el-form-item",{attrs:{label:"下单方式",prop:"type"}},[a("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-radio",{staticClass:"radiomar",attrs:{label:"1"}},[e._v("确认占位 （同业社额度： 总欠款 270,164 元）")]),a("br"),e._v(" "),a("el-radio",{staticClass:"radiomar",attrs:{label:"2"}},[e._v("预定占位 （订单保留24小时，到期提醒）")]),a("br"),e._v(" "),a("el-radio",{staticClass:"radiomar",attrs:{label:"3"}},[e._v("预定不占 （订单保留24小时，到期提醒）")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"订单联系人",prop:"contactName"}},[a("span",{staticClass:"ml13"},[e._v("姓名")]),a("el-input",{staticClass:"numw",attrs:{maxlength:"10"},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",staticStyle:{"margin-left":"-80px"},attrs:{prop:"contactPhone"}},[e._v("            \n               电话"),a("el-input",{staticClass:"numw",attrs:{maxlength:"20"},model:{value:e.ruleForm.contactPhone,callback:function(t){e.$set(e.ruleForm,"contactPhone",t)},expression:"ruleForm.contactPhone"}})],1),e._v(" "),a("el-form-item",{staticClass:"cb",attrs:{label:"出行人信息"}},e._l(e.salePrice,function(t,i){return a("div",{staticClass:"oh"},[a("div",{staticClass:"tour-til"},[e._v(e._s(t.enrollName))]),e._v(" "),a("div",{staticClass:"tourist"},e._l(e.tour[i],function(t,l){return a("input",{directives:[{name:"model",rawName:"v-model",value:t.cnName,expression:"item.cnName"}],attrs:{placeholder:"点击填写"},domProps:{value:t.cnName},on:{click:function(t){e.fillTour(i,l)},input:function(a){a.target.composing||e.$set(t,"cnName",a.target.value)}}})}))])})),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:""}},[a("el-input",{staticClass:"remark",attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"ml13",on:{click:function(t){e.cancelInfoOrder("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"ml13",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("下单")])],1)],1)]),e._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:"出行人信息（"+e.winTitle+"）",visible:e.dialogFormTour,width:"700px"},on:{"update:visible":function(t){e.dialogFormTour=t},close:function(t){e.cancelInfo("conForm")}}},[a("el-form",{ref:"conForm",attrs:{model:e.conForm,rules:e.rules}},[a("el-form-item",{staticClass:"fl",attrs:{label:"中文姓名",prop:"cnName","label-width":"110px"}},[a("el-input",{staticClass:"w200 fl",attrs:{type:"text"},model:{value:e.conForm.cnName,callback:function(t){e.$set(e.conForm,"cnName",t)},expression:"conForm.cnName"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"英文姓名",prop:"enName","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:e.conForm.enName,callback:function(t){e.$set(e.conForm,"enName",t)},expression:"conForm.enName"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",staticStyle:{width:"310px"},attrs:{label:"性别",prop:"sex","label-width":"110px"}},[a("el-radio-group",{model:{value:e.conForm.sex,callback:function(t){e.$set(e.conForm,"sex",t)},expression:"conForm.sex"}},[a("el-radio",{attrs:{label:0}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"电话",prop:"mobile","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:e.conForm.mobile,callback:function(t){e.$set(e.conForm,"mobile",t)},expression:"conForm.mobile"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"身份证",prop:"idCard","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:e.conForm.idCard,callback:function(t){e.$set(e.conForm,"idCard",t)},expression:"conForm.idCard"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"出生日期",prop:"bornDate","label-width":"110px"}},[a("el-date-picker",{staticClass:"w200",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.conForm.bornDate,callback:function(t){e.$set(e.conForm,"bornDate",t)},expression:"conForm.bornDate"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件类型",prop:"credType","label-width":"110px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.conForm.credType,callback:function(t){e.$set(e.conForm,"credType",t)},expression:"conForm.credType"}},[a("el-option",{attrs:{label:"护照",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"港澳通行证",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"军官证",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件号码",prop:"credCode","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:e.conForm.credCode,callback:function(t){e.$set(e.conForm,"credCode",t)},expression:"conForm.credCode"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件有效期",prop:"credTOV","label-width":"110px"}},[a("el-date-picker",{staticClass:"w200",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.conForm.credTOV,callback:function(t){e.$set(e.conForm,"credTOV",t)},expression:"conForm.credTOV"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer cb",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelInfo("conForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.subInfo("conForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.orderSuc,width:"500px"},on:{"update:visible":function(t){e.orderSuc=t}}},[a("h3",{staticClass:"ordersuc-title"},[e._v("下单成功")]),e._v(" "),a("div",{staticClass:"text item"},[e._v("订单号："+e._s(e.orderCode))]),e._v(" "),a("div",{staticClass:"text item"},[e._v("产品名称："+e._s(e.teampreviewData.title))]),e._v(" "),a("div",{staticClass:"text item"},[e._v("团期计划："+e._s(e.teampreviewData.groupCode))]),e._v(" "),a("el-button",{staticStyle:{margin:"20px 0 10px 200px"},attrs:{type:"primary"},on:{click:function(t){e.orderSuc=!1}}},[e._v("关闭")])],1)],1)])},staticRenderFns:[]};var je=a("VU/8")(Ue,Re,!1,function(e){a("0MHw")},"data-v-2ecc2851",null).exports,Oe={created:function(){this.initData(null)},data:function(){return{input:"",checked:"",today:new Date,days:[],n:[],arr:[],formLabelWidth:"100px",currentYear:1970,currentMonth:1,currentDay:1,currentWeek:1,dialogVisible:!1,dialogStock:!1,planningInfo:[],addStock:{name:"",count:""},addStocks:{name:"",count:""},listStock:{},rules:{name:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:20,message:"字数超过8汉字限制"}],count:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}]},rules1:{name:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:20,message:"字数超过8汉字限制"}],count:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}]}}},methods:{pickPre:function(e,t){if(this.today.getMonth()+1<this.currentMonth||this.today.getFullYear()<this.currentYear){var a=new Date(this.formatDate(e,t,1));a.setDate(0),this.initData(this.formatDate(a.getFullYear(),a.getMonth()+1,1)),this.n=[]}else this.$message({message:"不能选择以前的",type:"warning"})},pickNext:function(e,t){var a=new Date(this.formatDate(e,t,1));a.setDate(35),this.initData(this.formatDate(a.getFullYear(),a.getMonth()+1,1)),this.n=[]},initData:function(e){var t,a=this;if(e)t=new Date(e);else{var i=new Date;(o=new Date(this.formatDate(i.getFullYear(),i.getMonth()+1,1))).setDate(35),t=new Date(this.formatDate(o.getFullYear(),o.getMonth(),1))}this.currentDay=t.getDate(),this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()+1,this.currentWeek=t.getDay(),0==this.currentWeek&&(this.currentWeek=7);var l=this.formatDate(this.currentYear,this.currentMonth,this.currentDay);this.days.length=0;for(var s=this.currentWeek;s>=0;s--){(o=new Date(l)).setDate(o.getDate()-s),(r={}).day=o,r.index=this.days.length,this.days.push(r)}for(s=1;s<=41-this.currentWeek;s++){var o,r;(o=new Date(l)).setDate(o.getDate()+s),(r={}).day=o,r.index=this.days.length,this.days.push(r),this.days.map(function(e){return e.data={person:[],children:{}}})}this.$http.post(this.GLOBAL.serverSrc+"/team/api/inventorylist",{object:{share:1}}).then(function(e){a.days.forEach(function(t){var i=a.formatDates(t.day.getFullYear(),t.day.getMonth()+1,t.day.getDate());a.arr=[],e.data.objects.forEach(function(e){i==e.date&&(a.arr.push({id:e.id,name:e.name,count:e.count}),t.data.person=a.arr)})}),a.n=[]}).catch(function(e){console.log(e)})},formatDate:function(e,t,a){var i=t;i<10&&(i="0"+i);var l=a;return l<10&&(l="0"+l),e+"-"+i+"-"+l},formatDates:function(e,t,a){return t<10&&(t="0"+t),a<10&&(a="0"+a),e+""+t+a},handleallclick:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.formatDates(t.n[0].day.getFullYear(),t.n[0].day.getMonth()+1,t.n[0].day.getDate());t.$http.post(t.GLOBAL.serverSrc+"/team/api/inventoryinsert",{object:{name:t.addStock.name,count:t.addStock.count,date:a,share:1}}).then(function(e){if(0==t.days[t.n[0].index].data.person.length)t.days[t.n[0].index].data.person.push({name:t.addStock.name,count:t.addStock.count});else{var a=[];t.days[t.n[0].index].data.person.forEach(function(e){a.push({name:e.name,count:e.count})}),a.push({name:t.addStock.name,count:t.addStock.count}),t.days[t.n[0].index].data.person=a}t.$message.success("添加成功"),t.n=[],t.dialogVisible=!1,t.addStock.name="",t.addStock.count="",t.$refs.addStock.resetFields()}).catch(function(e){console.log(e)})}})},clickStock:function(){0!=this.n.length?this.dialogVisible=!0:this.$message({message:"请先选择日期",type:"warning"})},handleitemclick:function(e){this.n.includes(e)?this.n=this.n.filter(function(t){return t!=e}):(this.n=[],e.name=e.day.getDay(),this.n.push(e),this.dialogStock&&(this.n=[]))},countClick:function(e){var t=this;this.dialogStock=!0,this.addStocks.name=e.name,this.addStocks.count=e.count,this.$http.post(this.GLOBAL.serverSrc+"/team/plan/api/list",{object:{inventoryID:e.id,loadPlan_Enroll:!0}}).then(function(e){console.log(e),t.planningInfo=[],t.planningInfo.push({})})}}},Me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"calendar"}},[a("div",{staticClass:"month"},[a("ul",{staticClass:"date"},[a("li",{staticClass:"arrow",on:{click:function(t){e.pickPre(e.currentYear,e.currentMonth)}}},[e._v("<")]),e._v(" "),a("li",{staticClass:"year-month"},[e._v("\n             "+e._s(e.currentYear)+"-"+e._s(e.currentMonth)+"月\n          ")]),e._v(" "),a("li",{staticClass:"arrow",on:{click:function(t){e.pickNext(e.currentYear,e.currentMonth)}}},[e._v(">")])]),e._v(" "),a("el-button",{staticClass:"all-month",attrs:{plain:""},on:{click:e.clickStock}},[e._v("添加共享库存")])],1),e._v(" "),e._m(0),e._v(" "),a("ul",{staticClass:"days"},[e._l(e.days,function(t,i){return[t.day.getMonth()+1!=e.currentMonth||t.day.getTime()<e.today.getTime()-864e5?[a("li",{key:i,staticStyle:{background:"#F6F6F6",border:"solid 1px #E7E7E7","border-left":"none","border-top":"none",cursor:"not-allowed"}},[t.day.getMonth()+1!=e.currentMonth?a("span",{staticClass:"other-month"},[e._v(e._s(t.day.getDate()))]):a("div",[t.day.getFullYear()==(new Date).getFullYear()&&t.day.getMonth()==(new Date).getMonth()&&t.day.getDate()==(new Date).getDate()?a("span",{staticClass:"active"},[e._v(e._s(t.day.getDate()))]):a("span",[e._v(e._s(t.day.getDate()))]),e._v(" "),e._l(t.data.person,function(t,i){return a("div",{key:i,staticClass:"person"},[a("p",[e._v(e._s(t.name))]),e._v(" "),a("p",{staticStyle:{width:"113px"}},[e._v("库存余位:"+e._s(t.count)+"/100")]),e._v(" "),a("p",[e._v("关联团期: 1")])])})],2)])]:[a("li",{key:i,class:{checked:e.n.includes(t)},staticStyle:{border:"solid 1px #E7E7E7","border-left":"none","border-top":"none"},on:{click:function(a){e.handleitemclick(t)}}},[t.day.getMonth()+1!=e.currentMonth?a("span",{staticClass:"other-month"},[e._v(e._s(t.day.getDate()))]):a("div",[t.day.getFullYear()==(new Date).getFullYear()&&t.day.getMonth()==(new Date).getMonth()&&t.day.getDate()==(new Date).getDate()?a("span",{staticClass:"active"},[e._v(e._s(t.day.getDate()))]):a("span",[e._v(e._s(t.day.getDate()))]),e._v(" "),e._l(t.data.person,function(i,l){return a("div",{key:l,staticClass:"person persons",on:{click:function(a){e.countClick(t.data.person[l])}}},[a("p",[e._v(e._s(i.name))]),e._v(" "),a("p",{staticStyle:{width:"113px"}},[e._v("库存余位:"+e._s(i.count)+"/100")]),e._v(" "),a("p",[e._v("关联团期: 1")])])})],2)])]]})],2)]),e._v(" "),a("el-dialog",{attrs:{title:"新增共享库存",visible:e.dialogVisible,width:"578px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addStock",attrs:{model:e.addStock,rules:e.rules}},[a("el-form-item",{attrs:{label:"库存名称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"addStorkInput",attrs:{maxlength:"20"},model:{value:e.addStock.name,callback:function(t){e.$set(e.addStock,"name",t)},expression:"addStock.name"}}),e._v(" "),a("span",{staticClass:"addStock-number"},[e._v(e._s(e.addStock.name.length)+"/20字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"库存",prop:"count","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"addStorkInput",model:{value:e.addStock.count,callback:function(t){e.$set(e.addStock,"count",t)},expression:"addStock.count"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleallclick("addStock")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogStock,"show-close":!1,width:"1270px"},on:{"update:visible":function(t){e.dialogStock=t}}},[a("div",{staticClass:"countStock"},[a("el-form",{ref:"listStock",attrs:{model:e.addStocks,rules:e.rules1}},[a("el-form-item",{staticClass:"editStock",attrs:{label:"库存名称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"addStorkInputs",attrs:{disabled:!0,maxlength:"20"},model:{value:e.addStocks.name,callback:function(t){e.$set(e.addStocks,"name",t)},expression:"addStocks.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"editStock",attrs:{label:"库存",prop:"count","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"addStorkInputs",model:{value:e.addStocks.count,callback:function(t){e.$set(e.addStocks,"count",t)},expression:"addStocks.count"}})],1),e._v(" "),a("div",{staticClass:"surplus"},[a("span",{staticClass:"surplus1"},[e._v("剩余")]),e._v(" "),a("span",{staticClass:"surplus2"},[e._v("50")])]),e._v(" "),a("div",{staticClass:"operation"},[a("span",{staticClass:"surplus1"},[e._v("操作")]),e._v(" "),a("span",{staticClass:"operation2"},[e._v("杨阳")])])],1)],1),e._v(" "),a("div",{staticClass:"proList"},[a("div",{staticClass:"proListHeight"},[a("span",{staticStyle:{"font-weight":"700"}},[e._v("团期")]),e._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("24093932018091010185273")]),e._v(" "),a("span",{staticStyle:{"font-weight":"700","margin-left":"50px"}},[e._v("产品")]),e._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("扬州直飞普吉7/8天往返含税特价机票（往返各15kg行李+赠送电子地图攻略）")])]),e._v(" "),a("div",{staticClass:"stockList"},[a("div",{staticStyle:{"margin-left":"30px"}},[a("span",{staticStyle:{color:"red"}},[e._v("成人")]),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("已售")]),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("25")])]),e._v(" "),a("div",{staticStyle:{"margin-left":"38px"}},[a("span",{staticStyle:{"margin-left":"-10px"}},[e._v("库存")]),e._v(" "),a("el-input",{staticStyle:{width:"120px","margin-left":"30px"},attrs:{disabled:""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" "),a("el-checkbox",{staticStyle:{"margin-left":"30px"},attrs:{disabled:""},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("配额")])],1),e._v(" "),a("div",[a("span",[e._v("销售价格")]),e._v(" "),a("el-input",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{disabled:""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),e._v(" "),a("div",[a("span",[e._v("同业价格")]),e._v(" "),a("el-input",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{disabled:""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])]),e._v(" "),a("div",{staticClass:"frameBottom"},[a("el-button",{staticClass:"frameBottom-delete",attrs:{type:"danger",plain:""}},[e._v("删除库存")]),e._v(" "),a("div",{staticClass:"frameBottom-right "},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialogStock=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{plain:""}},[e._v("保存")])],1)],1)])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"weekdays"},[a("li",{staticStyle:{color:"red"}},[e._v("日")]),e._v(" "),a("li",[e._v("一")]),e._v(" "),a("li",[e._v("二")]),e._v(" "),a("li",[e._v("三")]),e._v(" "),a("li",[e._v("四")]),e._v(" "),a("li",[e._v("五")]),e._v(" "),a("li",{staticStyle:{color:"red"}},[e._v("六")])])}]};var ze,qe=a("VU/8")(Oe,Me,!1,function(e){a("6pCd")},"data-v-120611e2",null).exports,Ve=a("aYpo");function He(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var We={name:"listInfo",components:{VueEditor:Ve.VueEditor},data:function(){var e,t;return{qqq:[],activeID:[],schedulsLeng:"",mealID:"",tabInformation:"traffic",isActive:!1,content_01:"",content_02:"",tabIndex:2,notes:[{title:"",content:""}],instructions:[{title:"",content:""}],explain:[{title:"费用包含",content:""},{title:"费用不包含",content:""},{title:"温馨提示",content:""},{title:"儿童政策",content:""},{title:"购物场所",content:""},{title:"自费项目",content:""}],domains:[],isShowImg:!1,imgUrl:"",isSlideshow:!1,slideshowUrl:"",vague:[],tableData1:[],list:[],excurList:[],dynamicTags1:[],inputVisible1:!1,inputValue1:"",content:"",content1:"<h1>Some initial content111</h1>",editableTabsValue:"1",editableTabs:[{title:"行程套餐",name:"1",content:"Tab 1 content"}],number:"0/10",items:{text:""},goRoad:[{value:"1",label:"飞机"},{value:"2",label:"火车"},{value:"3",label:"汽车"},{value:"4",label:"轮船"}],selectedOptions:["2"],goDate:[],returnRoad:[{value:"1",label:"飞机"},{value:"2",label:"火车"},{value:"3",label:"汽车"},{value:"4",label:"轮船"}],selectedOptions_01:["1"],goDay:[{value:"选项1",label:"当日"},{value:"选项2",label:"第一天"},{value:"选项3",label:"第一天"},{value:"选项4",label:"第一天"}],hotelStars:[{value:"选项1",label:"三星"},{value:"选项2",label:"四星"},{value:"选项3",label:"五星"}],hotelDays:[{value:"选项1",label:"一宿"},{value:"选项2",label:"两宿"},{value:"选项3",label:"三宿"}],hotelRoom:[{value:"选项1",label:"单人间"},{value:"选项2",label:"双人间"},{value:"选项3",label:"三人间"}],hotelType:[{value:"选项1",label:"双人床"},{value:"选项2",label:"双人床"},{value:"选项3",label:"双人床"}],restaurants:[],info:"",ruleForm:(e={mudidi:"",chufadi:"",productNamel:"",destinations:"",travelType:"1",placeDeparture:"",travelDays:"",travelNight:"",orderConfirmationType:"",operationLabel:"",Excursion:"",excurList:"",advanceRegistrationDays:"",timeHour:"",timeMinute:"",highlightWords1:"",highlightWords2:"",highlightWords3:"",highlightWords4:"",avatarImages:"",slideshow:"",hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:"",pod:"",company:"",theNumber:""},He(e,"pod",""),He(e,"podPlace",""),He(e,"podTime",""),He(e,"arriveCity",""),He(e,"arrivePlace",""),He(e,"arriveTime",""),He(e,"planeDay",""),He(e,"trafficMode","1"),He(e,"day",""),He(e,"typeExt",""),He(e,"time",""),He(e,"name",""),He(e,"details",""),He(e,"memo",""),He(e,"pictureID",""),He(e,"highlightWords",""),He(e,"theme",""),He(e,"subject",""),He(e,"origin",""),He(e,"podID",""),He(e,"destinationID",""),He(e,"bourn",""),He(e,"plane",[{pod:"",id:0,goOrBack:1,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[],www:["2"]}]),He(e,"nackPlane",[{pod:"",id:0,goOrBack:2,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[],www:["2"]}]),He(e,"schedules",[]),e),rules:(t={productNamel:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:30,message:"字数超过30汉字限制",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9【】，+/（]{1,29}([\u4e00-\u9fa5a-zA-Z0-9【】，+/）]{0,1})$/,message:"请输入正确产品名称，含中括号【】中文逗号，英文+/可用，中文小括号（）仅能用在句尾",trigger:"blur"}],travelType:[{required:!0,message:"不能为空",trigger:"blur"}],orderConfirmationType:[{required:!0,message:"不能为空",trigger:"change"}],advanceRegistrationDays:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],highlightWords1:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:8,message:"字数超过8汉字限制",trigger:"blur"}],highlightWords2:[{min:0,max:8,message:"字数超过8汉字限制",trigger:"blur"}],highlightWords3:[{min:0,max:8,message:"字数超过8汉字限制",trigger:"blur"}],highlightWords4:[{min:0,max:8,message:"字数超过8汉字限制",trigger:"blur"}],travelDays:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],travelNight:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],timeHour:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],timeMinute:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],operationLabel:[{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]{1,300}$/,message:"不能有标点符号"}],highlightWords:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:10,message:"字数超过10汉字限制",trigger:"blur"}],origin:[{required:!0,message:"不能为空",trigger:"change"}],bourn:[{required:!0,message:"不能为空",trigger:"change"}],hotelAuto:[{required:!0,message:"不能为空",trigger:"blur"}],hotelChinese:[{required:!0,message:"不能为空",trigger:"blur"}],hotelEnglish:[{required:!0,message:"不能为空",trigger:"blur"}],hotelAddress:[{required:!0,message:"不能为空",trigger:"blur"}],hotelStar:[{required:!0,message:"不能为空",trigger:"blur"}],hotelDay:[{required:!0,message:"不能为空",trigger:"blur"}],hotelHouse:[{required:!0,message:"不能为空",trigger:"blur"}],hotelBed:[{required:!0,message:"不能为空",trigger:"blur"}],pod:[{required:!0,message:"不能为空",trigger:"blur"}],company:[{required:!0,message:"不能为空",trigger:"blur"}],theNumber:[{required:!0,message:"不能为空",trigger:"blur"}],podCity:[{required:!0,message:"不能为空",trigger:"blur"}]},He(t,"pod",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"podPlace",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"podTime",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"arriveCity",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"arrivePlace",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"arriveTime",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"planeDay",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"trafficMode",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"day",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"typeExt",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"time",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"name",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"details",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"memo",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"details",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"pictureID",[{required:!0,message:"不能为空",trigger:"blur"}]),He(t,"subject",[{required:!0,message:"不能为空",trigger:"blur"}]),t),fileList2:[],radio:"1",radio1:"1",radio2:"1",radio3:"1",radio4:"1",tabContents:[{id:0,name:"酒店1"},{id:1,name:"酒店2"}],num:0,num1:0,param:"1",tabPosition:"right",comboshow:!1,aindex:0,editableTabsValue3:"2",editableTabs3:[{content:""}],describe:["详细说明","简要说明"],pattern:["",""],matter_radio:"0",form:[],form1:[],lineshow:!1,Stopline:!1,transit:["1"],deleteTransit:!0,place:[{value:"选项1",id:"1"},{value:"选项2",id:"2"},{value:"选项3",id:"3"}],destination:[{value:"选项1",id:"1"},{value:"选项2",id:"2"},{value:"选项3",id:"3"}],information:["1"],hotelshow:!1,hotel:[{hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:""}],details:[{value:"1",label:"景点"},{value:"2",label:"购物"},{value:"3",label:"自费项目"}],teturnBack:[],Returnline:!1,num6:0,schedule_radio:"0",num7:0,details_radio:"0",schedule_details:["","",""],mynumber:0,mydate:"2",myTravelDay:[],myxiangnumber:0,hotell:!0,otherl:!1,myradio:[],activeName:"first",travelDays:"",dynamicTags2:[],inputVisible2:!1,inputVal:"",empty:"",dynamicTags3:[],inputVisible3:!1,inputVal3:"",noNull:!1,dynamicTags4:[],inputVisible4:!1,inputVal4:"",errorNull:""}},watch:{items:{handler:function(){this.$refs.count.setAttribute("maxlength",10),this.number=10-this.$refs.count.value.length},deep:!1},"ruleForm.travelDays":{handler:function(e,t){this.myTravelDay=[];for(var a=0;a<e;a++)this.myTravelDay.push(a);if(e>t){this.mydate=e-t;for(var i=0;i<this.mydate;i++)this.ruleForm.schedules.push({day:i+1,subject:"",info:"",createTime:this.formatDate(new Date),ext_Meals:[{label:"早餐",Myself:"0",Detail:""},{label:"午餐",Myself:"0",Detail:""},{label:"晚餐",Myself:"0",Detail:""}],activitys:[{typeExt:"",time:"",name:"",details:"",memo:"",pictureID:"",activityType:"1",createTime:this.formatDate(new Date)}],ext_Hotel:[{IsHotel:0,Details:""}]}),this.myradio.push({lable:"1"})}else this.ruleForm.schedules.splice(e,t-e),this.myradio.splice(e,t-e)}}},mounted:function(){this.guid(),this.restaurants=this.loadAll()},created:function(){this.themeList(),this.itemList(),this.oneInfo()},methods:(ze={oneInfo:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamget",{id:this.$route.query.id}).then(function(t){console.log(t.data.object),e.schedulsLeng=t.data.object.package[0].schedules.length;for(var a=0;a<e.schedulsLeng;a++)e.activeID.push(t.data.object.package[0].schedules[a].id);e.mealID=t.data.object.package[0].id,e.ruleForm.productNamel=t.data.object.title,e.ruleForm.travelType=String(t.data.object.isForeign),e.dynamicTags3=t.data.object.pods,e.dynamicTags4=t.data.object.destinations,e.ruleForm.travelDays=t.data.object.day,e.ruleForm.travelNight=t.data.object.night,e.ruleForm.orderConfirmationType=String(t.data.object.confirmType),""!==t.data.object.strengths[0]&&(e.ruleForm.highlightWords1=t.data.object.strengths[0].strength),t.data.object.strengths[1]&&(e.ruleForm.highlightWords2=t.data.object.strengths[1].strength),t.data.object.strengths[2]&&(e.ruleForm.highlightWords3=t.data.object.strengths[2].strength),t.data.object.strengths[3]&&(e.ruleForm.highlightWords4=t.data.object.strengths[3].strength),e.dynamicTags2=t.data.object.label,e.ruleForm.avatarImages=t.data.object.pictureID,e.ruleForm.video=t.data.object.vedioID,e.ruleForm.slideshow="",e.ruleForm.Excursion=t.data.object.crowdID,e.ruleForm.theme=t.data.object.themeID,e.content_01=t.data.object.mark,e.ruleForm.advanceRegistrationDays=t.data.object.advanceDay,e.ruleForm.timeHour=t.data.object.advanceHour,e.ruleForm.timeMinute=t.data.object.advanceMinute,e.ruleForm.highlightWords=t.data.object.package[0].name,e.ruleForm.origin=t.data.object.package[0].pod,e.ruleForm.bourn=t.data.object.package[0].destination,e.ruleForm.podID=t.data.object.package[0].podID,e.ruleForm.destinationID=t.data.object.package[0].destinationID,e.ruleForm.plane=[],e.ruleForm.nackPlane=[];for(var i=0;i<t.data.object.package[0].traffic.length;i++){var l=[];1==t.data.object.package[0].traffic[i].goOrBack?(t.data.object.package[0].traffic[i].ext_Stopover=[],e.ruleForm.plane.push(t.data.object.package[0].traffic[i]),l.push(String(t.data.object.package[0].traffic[i].trafficMode)),e.ruleForm.plane[i].www=l):(t.data.object.package[0].traffic[i].ext_Stopover=[],l.push(String(t.data.object.package[0].traffic[i].trafficMode)),t.data.object.package[0].traffic[i].www=l,e.ruleForm.nackPlane.push(t.data.object.package[0].traffic[i]))}for(var s=function(a){setTimeout(function(i){e.ruleForm.schedules[a].subject=t.data.object.package[0].schedules[a].subject,e.content_02=t.data.object.package[0].schedules[a].info,"早餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].label&&"0"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].Myself?e.ruleForm.schedules[a].ext_Meals[0].Myself="0":"早餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].label&&"1"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].Myself&&(e.ruleForm.schedules[a].ext_Meals[0].Myself="1",e.ruleForm.schedules[a].ext_Meals[0].Detail=JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].Detail),"午餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].label&&"0"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].Myself?e.ruleForm.schedules[a].ext_Meals[1].Myself="0":"午餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].label&&"1"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].Myself&&(e.ruleForm.schedules[a].ext_Meals[1].Myself="1",e.ruleForm.schedules[a].ext_Meals[1].Detail=JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].Detail),"晚餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].label&&"0"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].Myself?e.ruleForm.schedules[a].ext_Meals[2].Myself="0":"晚餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].label&&"1"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].Myself&&(e.ruleForm.schedules[a].ext_Meals[2].Myself="1",e.ruleForm.schedules[a].ext_Meals[2].Detail=JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].Detail),e.ruleForm.schedules[a].activitys=[];for(var l=0;l<t.data.object.package[0].schedules[a].activitys.length;l++)e.ruleForm.schedules[a].activitys.push(t.data.object.package[0].schedules[a].activitys[l]),e.ruleForm.schedules[a].activitys[l].activityType=String(e.ruleForm.schedules[a].activitys[l].activityType);console.log()},100)},o=0;o<t.data.object.package[0].schedules.length;o++)s(o);e.explain=[];for(var r=0;r<t.data.object.instructions.length;r++)e.explain.push(t.data.object.instructions[r])}).catch(function(e){console.log(e)})},handClick:function(e,t){console.log(e,t)},myInput:function(){this.ruleForm.productNamel.length>30?this.isActive=!0:this.isActive=!1},getUEContent0:function(){this.notes.push({title:"",content:""})},getUEContent1:function(){this.instructions.push({title:"",content:""})},deleteNotice:function(e){this.notes.splice(e,1)},deleteState:function(e){this.instructions.splice(e,1)},deleteState_01:function(e){this.domains.splice(e,1)},getUEContent:function(){this.domains.push({title:"",content:""})},addsave:function(e){var t=this,a=[];""!=this.ruleForm.highlightWords1&&a.push({strength:this.ruleForm.highlightWords1}),""!=this.ruleForm.highlightWords2&&a.push({strength:this.ruleForm.highlightWords2}),""!=this.ruleForm.highlightWords3&&a.push({strength:this.ruleForm.highlightWords3}),""!=this.ruleForm.highlightWords4&&a.push({strength:this.ruleForm.highlightWords4});for(var i=[],l=0;l<this.dynamicTags2.length;l++)i.push({label:this.dynamicTags2[l]});var s=JSON.stringify(this.ruleForm.plane.concat(this.ruleForm.nackPlane)),o=JSON.parse(s);for(l=0;l<o.length;l++)o[l].ext_Stopover=JSON.stringify(o[l].ext_Stopover);var r=JSON.stringify(this.ruleForm.schedules),n=JSON.parse(r);for(l=0;l<n.length;l++)n[l].ext_Meals=JSON.stringify(n[l].ext_Meals);for(l=0;l<n.length;l++)n[l].ext_Hotel=JSON.stringify(n[l].ext_Hotel);var c={id:this.$route.query.id,createTime:Date.parse(new Date),title:this.ruleForm.productNamel,isForeign:this.ruleForm.travelType,day:this.ruleForm.travelDays,night:this.ruleForm.travelNight,pods:this.dynamicTags3,destinations:this.dynamicTags4,isDeleted:0,confirmType:this.ruleForm.orderConfirmationType,strengths:a,label:this.dynamicTags2,pictureID:0,vedioID:0,pepeatpic:"",advanceDay:this.ruleForm.advanceRegistrationDays,advanceHour:this.ruleForm.timeHour,advanceMinute:this.ruleForm.timeMinute,createUser:sessionStorage.getItem("id"),proStat:1,crowdID:this.ruleForm.Excursion,themeID:this.ruleForm.theme,mark:this.content_01,guid:localStorage.getItem("guid"),instructions:this.explain.concat(this.domains),instructions1:this.notes,instructions2:this.instructions,loadPackage:!0};this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teamsave",{object:c}).then(function(e){1==e.data.isSuccess?(a.$message.success("修改成功"),a.$router.push({path:"productList"})):a.$message.success("修改失败")}).catch(function(e){console.log(e)})}})},handleSetMeal:function(e){for(var t=this,a=JSON.stringify(this.ruleForm.plane.concat(this.ruleForm.nackPlane)),i=JSON.parse(a),l=0;l<i.length;l++)i[l].ext_Stopover=JSON.stringify(i[l].ext_Stopover);var s=JSON.stringify(this.ruleForm.schedules),o=JSON.parse(s);for(l=0;l<o.length;l++)o[l].ext_Meals=JSON.stringify(o[l].ext_Meals);for(l=0;l<o.length;l++)o[l].ext_Hotel=JSON.stringify(o[l].ext_Hotel);void 0==this.ruleForm.bourn.destination?this.ruleForm.mudidi=this.ruleForm.bourn:this.ruleForm.mudidi=this.ruleForm.bourn.destination,void 0==this.ruleForm.origin.pod?this.ruleForm.chufadi=this.ruleForm.origin:this.ruleForm.chufadi=this.ruleForm.origin.pod;var r={id:this.mealID,name:this.ruleForm.highlightWords,podID:this.ruleForm.podID,destinationID:this.ruleForm.destinationID,pod:this.ruleForm.chufadi,destination:this.ruleForm.mudidi,createTime:this.formatDate(new Date),traffic:i,loadPackage:!0,briefMark:"string",loadPlan:!0,codePrefix:"string",codeSuffix:"string"};this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teampackagesave",{object:r}).then(function(e){1==e.data.isSuccess?a.$message.success("修改成功"):a.$message.success("修改失败")}).catch(function(e){console.log(e)})}})},handleNote:function(e){for(var t=this,a=JSON.stringify(this.ruleForm.schedules),i=JSON.parse(a),l=0;l<i.length;l++)i[l].ext_Meals=JSON.stringify(i[l].ext_Meals);for(l=0;l<i.length;l++)i[l].ext_Hotel=JSON.stringify(i[l].ext_Hotel);for(var s=0;s<this.schedulsLeng;s++){var o={id:this.activeID[s],packageID:this.mealID,day:this.ruleForm.schedules[s].day,subject:this.ruleForm.schedules[s].subject,ext_Meals:JSON.stringify(this.ruleForm.schedules[s].ext_Meals),info:this.ruleForm.schedules[s].info,ext_Hotel:JSON.stringify(this.ruleForm.schedules[s].ext_Hotel),activitys:this.ruleForm.schedules[s].activitys,createTime:this.formatDate(new Date),loadPlan:!1,code:"string"};this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teamschedulesave",{object:o}).then(function(e){1==e.data.isSuccess?a.$message.success("修改成功"):a.$message.success("修改失败")}).catch(function(e){console.log(e)})}})}},cancel:function(){this.$router.push({path:"productList"})},handleClick:function(e,t){if("tab-second"==t.target.getAttribute("id")){this.goDate=[];for(var a=0;a<this.ruleForm.travelDays;a++)this.goDate.push({value:a+1,label:a+1})}},childByValue:function(e){this.travelDays=e},otherNumber:function(){this.hotell=!1,this.otherl=!0},tabTravel:function(e){this.mynumber=e},stopping:function(e){this.ruleForm.plane[e].ext_Stopover.push({stopCity:"",stopDate:""})},deleteItem:function(e,t){this.ruleForm.plane[t].ext_Stopover.splice(e,1)},deletePanel:function(e){this.ruleForm.plane.splice(e,1)},reDeleteItem:function(e,t){this.ruleForm.nackPlane[t].ext_Stopover.splice(e,1)},reDeletePanel:function(e){this.ruleForm.nackPlane.splice(e,1)},reStopping:function(e){this.ruleForm.nackPlane[e].ext_Stopover.push({stopCity:"",stopDate:""})},addTransit:function(e){this.ruleForm.plane.push({pod:"",id:0,goOrBack:1,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[]})},addRTransit:function(e){this.ruleForm.nackPlane.push({pod:"",id:0,goOrBack:2,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"",ext_Stopover:[]})},addHotel:function(){this.hotel.push({hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:"",hotelAbstract:"",hotelPicture:""})},deleteHotel:function(e){this.hotelshow=!0},shutHotel:function(e){this.hotel.splice(e,1),this.hotelshow=!1},cloceHotel:function(){this.hotelshow=!1},tabHotel:function(e){this.num6=e},tabDetails:function(e,t,a){},handleClose2:function(e){this.dynamicTags2.splice(this.dynamicTags2.indexOf(e),1)},showInput2:function(){var e=this;this.inputVisible2=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleImgClick:function(e){this.isShowImg=!this.isShowImg,this.imgUrl=e.url},handleRemove:function(e,t){this.isShowImg=!1},slideshowClick:function(e){this.isSlideshow=!0,this.slideshowUrl==e.url?(this.isSlideshow=!1,this.slideshowUrl=""):this.slideshowUrl=e.url},handleRemove2:function(e,t){this.isSlideshow=!1},handleRemoves:function(e,t){},handleRemoves1:function(e,t){},loadAll:function(){return[{value:"三全鲜食（北新泾店）",id:"1"},{value:"Hot honey 首尔炸鸡（仙霞路）",id:"2"},{value:"新旺角茶餐厅",id:"3"},{value:"泷千家(天山西路店)",id:"4"},{value:"胖仙女纸杯蛋糕（上海凌空店）",id:"5"}]},addDetails:function(e){this.ruleForm.schedules[e].activitys.push({typeExt:"",time:"",name:"",details:"",memo:"",pictureID:0,activityType:"1",createTime:this.formatDate(new Date)})},deleteDetails:function(e,t){this.ruleForm.schedules[t].activitys.splice(e,1)},diaoyong:function(e,t,a){this.ruleForm.schedules[a].activitys[t].activityType=e},baocun:function(e,t){this.ruleForm.schedules[t].ext_Hotel[0].Details=e,this.ruleForm.schedules[t].ext_Hotel[0].IsHotel=0},close:function(){this.comboshow=!1},confirm:function(){this.handleTabsEdit(this.aindex,"remove"),this.comboshow=!1},tab:function(e){this.num=e},tab1:function(e){this.num1=e},handleTabsEdit:function(e,t){if("add"===t){var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a,content:"New Tab content"}),this.editableTabsValue=a}if("remove"===t){if(0==this.comboshow)return this.comboshow=!0,this.aindex=e,!1;var i=this.editableTabs,l=this.editableTabsValue;l===e&&(i.forEach(function(t,a){if(t.name===e){var s=i[a+1]||i[a-1];s&&(l=s.name)}}),this.editableTabsValue=l,this.editableTabs=i.filter(function(t){return t.name!==e}))}},querySearch:function(e,t){var a=this.restaurants;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){}},He(ze,"handleRemove",function(e,t){console.log(e,t)}),He(ze,"handlePreview",function(e){console.log(e)}),He(ze,"querySearch1",function(e,t){t(e?this.tableData1.filter(this.createFilter(e)):[])}),He(ze,"beforeUploadVideo",function(e){var t=e.size/1024/1024<20;return-1==["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb"].indexOf(e.type)?(this.$message.error("请上传正确的视频格式"),!1):t?void 0:(this.$message.error("上传视频大小不能超过20MB哦!"),!1)}),He(ze,"uploadVideoProcess",function(e,t,a){this.videoFlag=!0,this.videoUploadPercent=t.percentage.toFixed(0)}),He(ze,"handleImgClick",function(e){this.isShowImg=!this.isShowImg,this.imgUrl=e.url}),He(ze,"handleRemove",function(e,t){this.isShowImg=!1}),He(ze,"slideshowClick",function(e){this.isSlideshow=!0,this.slideshowUrl==e.url?(this.isSlideshow=!1,this.slideshowUrl=""):this.slideshowUrl=e.url}),He(ze,"handleRemove2",function(e,t){this.isSlideshow=!1}),He(ze,"handleRemoves",function(e,t){}),He(ze,"handleRemoves1",function(e,t){}),He(ze,"handleClose2",function(e){this.dynamicTags2.splice(this.dynamicTags2.indexOf(e),1)}),He(ze,"showInput2",function(){var e=this;this.inputVisible2=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),He(ze,"handleInputConfirm2",function(){var e=this;this.$refs.operationLabel.validate(),""!==this.ruleForm.operationLabel?setTimeout(function(t){e.ruleForm.operationLabel;e.inputVisible2=!1,e.ruleForm.operationLabel="",e.empty=!1},200):0==this.dynamicTags2.length?(this.empty=!0,document.getElementById("input-error").style.border="solid 1px red"):this.inputVisible2=!1}),He(ze,"querySearch5",function(e,t){var a=this;this.tableData2=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/olabel/api/olabelfuzzy",{object:{labelName:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.tableData2.push({value:i.data.objects[l].labelName,id:i.data.objects[l].id});var s=e?a.tableData2.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),He(ze,"dest_01",function(e){this.dynamicTags2.push({labelID:e.id,label:e.value,teamID:0}),this.ruleForm.operationLabel="",this.inputVisible2=!1}),He(ze,"querySearch3",function(e,t){var a=this;this.vague=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.vague.push({id:i.data.objects[l].id,value:i.data.objects[l].areaName});var s=e?a.vague.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),He(ze,"createFilter",function(e){return function(e){return e.value}}),He(ze,"querySearch2",function(e,t){var a=this;this.tableData1=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.tableData1.push({value:i.data.objects[l].areaName,id:i.data.objects[l].id});var s=e?a.tableData1.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),He(ze,"createFilter",function(e){return function(e){return e.value}}),He(ze,"themeList",function(){var e=this;this.excurList=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/crowd/api/crowdlist",{object:{isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.excurList.push(t.data.objects[a].name)}).catch(function(e){console.log(e)})}),He(ze,"itemList",function(){this.list=[];var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/theme/api/themelist",{object:{isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.list.push(t.data.objects[a].name)}).catch(function(e){console.log(e)})}),He(ze,"guid",function(){this.$http.post(this.GLOBAL.serverSrc+"/universal/utinity/api/getguid",{object:!0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){localStorage.setItem("guid",e.data.object)}).catch(function(e){console.log(e)})}),He(ze,"handleClose3",function(e){e.id==this.ruleForm.origin.id&&(this.ruleForm.origin=[]),this.dynamicTags3.splice(this.dynamicTags3.indexOf(e),1)}),He(ze,"showInput3",function(){var e=this;this.inputVisible3=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),He(ze,"departure",function(e){this.dynamicTags3.push({podID:e.id,pod:e.value}),this.ruleForm.placeDeparture="",this.inputVisible3=!1}),He(ze,"handleInputConfirm3",function(){var e=this;this.$refs.placeDeparture.validate(),""!==this.ruleForm.placeDeparture?setTimeout(function(t){e.ruleForm.placeDeparture;e.inputVisible3=!1,e.ruleForm.placeDeparture="",e.noNull=!1},200):0==this.dynamicTags3.length?(this.noNull=!0,document.getElementById("ddd").style.border="solid 1px red"):this.inputVisible3=!1}),He(ze,"handleClose4",function(e){e.id==this.ruleForm.bourn.id&&(this.ruleForm.bourn=[]),this.dynamicTags4.splice(this.dynamicTags4.indexOf(e),1)}),He(ze,"showInput4",function(){var e=this;this.inputVisible4=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),He(ze,"dest",function(e){this.dynamicTags4.push({destinationID:e.id,destination:e.value}),this.ruleForm.destinations="",this.inputVisible4=!1}),He(ze,"handleInputConfirm4",function(){var e=this;this.$refs.destinations.validate(),""!==this.ruleForm.destinations?setTimeout(function(t){e.ruleForm.destinations;e.inputVisible4=!1,e.ruleForm.destinations="",e.errorNull=!1},200):0==this.dynamicTags4.length?(this.errorNull=!0,document.getElementById("input-error").style.border="solid 1px red"):this.inputVisible4=!1}),He(ze,"formatDate",function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate();i=i<10?"0"+i:i;var l=e.getHours();l=l<10?"0"+l:l;var s=e.getMinutes();s=s<10?"0"+s:s;var o=e.getSeconds();return o=o<10?"0"+o:o,t+"-"+a+"-"+i+" "+l+":"+s}),ze)},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("div",{staticClass:"btn",staticStyle:{width:"200px",position:"absolute","z-index":"99",top:"0px",left:"50%"}},[a("el-button",{staticClass:"btn-button",attrs:{plain:""},on:{click:function(t){e.cancel()}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"btn-button",staticStyle:{background:"#3095fa",color:"#fff"},on:{click:function(t){e.addsave("ruleForm")}}},[e._v("保存")])],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[a("div",[a("el-form-item",{attrs:{label:"产品名称",prop:"productNamel","label-width":"120px"}},[a("el-input",{staticClass:"productName",attrs:{placeholder:"请输入正确产品名称"},on:{input:e.myInput},model:{value:e.ruleForm.productNamel,callback:function(t){e.$set(e.ruleForm,"productNamel",t)},expression:"ruleForm.productNamel"}}),e._v(" "),a("span",{staticClass:"Numbers"},[a("span",{class:{active:e.isActive}},[e._v(e._s(e.ruleForm.productNamel.length))]),e._v("/30字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"出游类型",prop:"travelType","label-width":"120px"}},[a("el-radio-group",{staticClass:"travelType",model:{value:e.ruleForm.travelType,callback:function(t){e.$set(e.ruleForm,"travelType",t)},expression:"ruleForm.travelType"}},[a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("境外")]),e._v(" "),a("el-radio",{attrs:{label:"2",value:"2"}},[e._v("国内")])],1)],1),e._v(" "),a("el-form-item",{ref:"placeDeparture",staticStyle:{clear:"both"},attrs:{label:"出发地","label-width":"120px"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("div",{staticClass:"destination-input"},[e._l(e.dynamicTags3,function(t){return a("el-tag",{key:t.pod,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose3(t)}}},[e._v("\n                "+e._s(t.pod)+"\n              ")])}),e._v(" "),e.inputVisible3?a("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tags",attrs:{id:"ddd","fetch-suggestions":e.querySearch3,size:"small",placeholder:"请输入出发地","trigger-on-focus":!1},on:{select:e.departure,blur:e.handleInputConfirm3},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm3(t):null}},model:{value:e.ruleForm.placeDeparture,callback:function(t){e.$set(e.ruleForm,"placeDeparture",t)},expression:"ruleForm.placeDeparture"}}):a("el-button",{staticClass:"input-new-tag",attrs:{size:"small"},on:{click:e.showInput3}},[e._v("请输入出发地")])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.noNull,expression:"noNull"}],attrs:{id:"isNull"}},[e._v("不能为空")])]),e._v(" "),a("el-form-item",{ref:"destinations",staticStyle:{clear:"both"},attrs:{label:"目的地","label-width":"120px"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("div",{staticClass:"destination-input"},[e._l(e.dynamicTags4,function(t){return a("el-tag",{key:t.destination,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose4(t)}}},[e._v("\n                "+e._s(t.destination)+"\n              ")])}),e._v(" "),e.inputVisible4?a("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tags",attrs:{id:"input-error",size:"small",placeholder:"请输入目的地","fetch-suggestions":e.querySearch2,"trigger-on-focus":!1},on:{select:e.dest,blur:e.handleInputConfirm4},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm4(t):null}},model:{value:e.ruleForm.destinations,callback:function(t){e.$set(e.ruleForm,"destinations",t)},expression:"ruleForm.destinations"}}):a("el-button",{staticClass:"input-new-tag",attrs:{size:"small"},on:{click:e.showInput4}},[e._v("请输入目的地")])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errorNull,expression:"errorNull"}],attrs:{id:"zero"}},[e._v("不能为空")])]),e._v(" "),a("div",{staticStyle:{overflow:"hidden"}},[a("el-form-item",{staticStyle:{width:"300px",float:"left"},attrs:{label:"行程天数",prop:"travelDays","label-width":"120px"}},[a("el-input",{ref:"travelDays",staticStyle:{width:"105px","margin-left":"-25px"},attrs:{placeholder:"请输入天数"},model:{value:e.ruleForm.travelDays,callback:function(t){e.$set(e.ruleForm,"travelDays",t)},expression:"ruleForm.travelDays"}}),e._v(" "),a("span",{staticClass:"travelDays-span",staticStyle:{"margin-left":"10px",color:"#333"}},[e._v("天")])],1),e._v(" "),a("el-form-item",{staticClass:"number-day",staticStyle:{float:"left","margin-left":"-25px"},attrs:{prop:"travelNight"}},[a("el-input",{staticStyle:{width:"105px",float:"left","margin-right":"10px"},attrs:{placeholder:"请输入晚数"},model:{value:e.ruleForm.travelNight,callback:function(t){e.$set(e.ruleForm,"travelNight",t)},expression:"ruleForm.travelNight"}}),e._v(" "),a("span",{staticClass:"travelNight"},[e._v("晚")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"订单确认类型",prop:"orderConfirmationType","label-width":"120px"}},[a("el-radio-group",{staticClass:"indent",model:{value:e.ruleForm.orderConfirmationType,callback:function(t){e.$set(e.ruleForm,"orderConfirmationType",t)},expression:"ruleForm.orderConfirmationType"}},[a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("及时确认")]),e._v(" "),a("el-radio",{attrs:{label:"2",value:"2"}},[e._v("二次确认")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"亮点词",prop:"highlightWords1","label-width":"120px"}},[a("el-input",{staticClass:"bright",attrs:{maxlength:"8",placeholder:"8个字以内"},model:{value:e.ruleForm.highlightWords1,callback:function(t){e.$set(e.ruleForm,"highlightWords1",t)},expression:"ruleForm.highlightWords1"}}),e._v(" "),a("span",{staticClass:"bright-number"},[e._v(e._s(e.ruleForm.highlightWords1.length)+"/8字")])],1),e._v(" "),a("el-form-item",{staticClass:"bright_b",staticStyle:{float:"left"},attrs:{prop:"highlightWords2","label-width":"120px"}},[a("el-input",{staticClass:"lightspot",attrs:{maxlength:"8",placeholder:"8个字以内"},model:{value:e.ruleForm.highlightWords2,callback:function(t){e.$set(e.ruleForm,"highlightWords2",t)},expression:"ruleForm.highlightWords2"}}),e._v(" "),a("span",{staticClass:"lightspot-span"},[e._v(e._s(e.ruleForm.highlightWords2.length)+"/8字")])],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{prop:"highlightWords3","label-width":"120px"}},[a("el-input",{staticStyle:{width:"210px",float:"left",margin:"0 0 0 10px"},attrs:{maxlength:"8",placeholder:"8个字以内"},model:{value:e.ruleForm.highlightWords3,callback:function(t){e.$set(e.ruleForm,"highlightWords3",t)},expression:"ruleForm.highlightWords3"}}),e._v(" "),a("span",{staticClass:"lightspot-span"},[e._v(e._s(e.ruleForm.highlightWords3.length)+"/8字")])],1),e._v(" "),a("el-form-item",{staticClass:"bright_b",attrs:{prop:"highlightWords4","label-width":"120px"}},[a("el-input",{staticClass:"lightspot",attrs:{maxlength:"8",placeholder:"8个字以内"},model:{value:e.ruleForm.highlightWords4,callback:function(t){e.$set(e.ruleForm,"highlightWords4",t)},expression:"ruleForm.highlightWords4"}}),e._v(" "),a("span",{staticClass:"lightspot-span"},[e._v(e._s(e.ruleForm.highlightWords4.length)+"/8字")])],1),e._v(" "),a("el-form-item",{ref:"operationLabel",staticStyle:{clear:"both"},attrs:{label:"运营标签","label-width":"120px"}},[a("div",{staticClass:"destination-input"},[e._l(e.dynamicTags2,function(t){return a("el-tag",{key:t.id,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose2(t)}}},[e._v("\n                "+e._s(t.label)+"\n              ")])}),e._v(" "),e.inputVisible2?a("el-autocomplete",{ref:"saveTagInput",staticClass:"lable_input",attrs:{id:"input-error",size:"small",placeholder:"请输入运营标签","fetch-suggestions":e.querySearch5,"trigger-on-focus":!1},on:{select:e.dest_01,blur:e.handleInputConfirm2},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm2(t):null}},model:{value:e.ruleForm.operationLabel,callback:function(t){e.$set(e.ruleForm,"operationLabel",t)},expression:"ruleForm.operationLabel"}}):a("el-button",{staticClass:"operation_Label",attrs:{size:"small"},on:{click:e.showInput2}},[e._v("请输入运营标签")])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.empty,expression:"empty"}],attrs:{id:"empty"}},[e._v("不能为空")])]),e._v(" "),a("el-form-item",{attrs:{label:"头图",prop:"avatarImages","label-width":"120px"}},[a("el-input",{staticStyle:{width:"110px",float:"left","margin-left":"10px",position:"relative"},attrs:{disabled:""},model:{value:e.ruleForm.avatarImages,callback:function(t){e.$set(e.ruleForm,"avatarImages",t)},expression:"ruleForm.avatarImages"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo uploadimage",attrs:{"on-preview":e.handleImgClick,action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture",limit:1,accept:".jpg,.png,.gif","on-remove":e.handleRemove}},[a("el-button",{staticClass:"upload-btn",attrs:{type:"info"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowImg,expression:"isShowImg"}],staticStyle:{height:"215px",width:"330px",position:"absolute","z-index":"9999",top:"50px",left:"-111px",border:"10px solid #D7D7D7",background:"#fdfdfd"}},[a("img",{staticStyle:{display:"block",width:"100%",height:"100%"},attrs:{src:this.imgUrl,alt:""}})]),e._v("\n                上传\n              ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"视频",prop:"video","label-width":"120px"}},[a("el-input",{staticStyle:{width:"110px",float:"left","margin-left":"10px",position:"relative"},attrs:{disabled:""},model:{value:e.ruleForm.video,callback:function(t){e.$set(e.ruleForm,"video",t)},expression:"ruleForm.video"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo uploadimage",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture",limit:1,"on-remove":e.handleRemoves1,"before-upload":e.beforeUploadVideo,"on-progress":e.uploadVideoProcess}},[a("el-button",{staticClass:"upload-btn",attrs:{type:"info"}},[e._v("上传")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"轮播图",prop:"slideshow","label-width":"120px"}},[a("el-input",{staticClass:"banner",attrs:{disabled:"",placeholder:"3-6张图片"},model:{value:e.ruleForm.slideshow,callback:function(t){e.$set(e.ruleForm,"slideshow",t)},expression:"ruleForm.slideshow"}}),e._v(" "),a("el-upload",{staticStyle:{float:"left"},attrs:{"on-preview":e.slideshowClick,method:"post",action:"http://192.168.1.168:6012/universal/supplier/api/upload","list-type":"picture",limit:6,accept:".jpg,.png,.gif","on-remove":e.handleRemove2,multiple:!0}},[a("el-button",{attrs:{type:"info"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSlideshow,expression:"isSlideshow"}],staticClass:"upload_div"},[a("img",{staticClass:"upload_img",attrs:{src:this.slideshowUrl,alt:""}})]),e._v("\n                上传")])],1),e._v(" "),a("input",{staticStyle:{float:"left","margin-left":"10px"},attrs:{id:"fileItem",type:"file",multiple:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出游人群",prop:"Excursion","label-width":"120px"}},[a("el-select",{staticClass:"Excursion-select",attrs:{placeholder:"请选择"},model:{value:e.ruleForm.Excursion,callback:function(t){e.$set(e.ruleForm,"Excursion",t)},expression:"ruleForm.Excursion"}},e._l(e.excurList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"主题",prop:"theme","label-width":"120px"}},[a("el-select",{staticClass:"Excursion-select",attrs:{placeholder:"请选择"},model:{value:e.ruleForm.theme,callback:function(t){e.$set(e.ruleForm,"theme",t)},expression:"ruleForm.theme"}},e._l(e.list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"提前报名天数",prop:"advanceRegistrationDays","label-width":"120px"}},[a("el-input",{staticClass:"applyDay",attrs:{placeholder:"请输入天数"},model:{value:e.ruleForm.advanceRegistrationDays,callback:function(t){e.$set(e.ruleForm,"advanceRegistrationDays",t)},expression:"ruleForm.advanceRegistrationDays"}}),e._v(" "),a("span",{staticClass:"apply_day"},[e._v("天")])],1),e._v(" "),a("div",{staticClass:"latest"},[a("el-form-item",{staticStyle:{width:"300px",float:"left"},attrs:{label:"最晚收客时间",prop:"timeHour","label-width":"120px"}},[a("el-input",{staticStyle:{width:"50px",float:"left","margin-left":"10px"},model:{value:e.ruleForm.timeHour,callback:function(t){e.$set(e.ruleForm,"timeHour",t)},expression:"ruleForm.timeHour"}}),e._v(" "),a("span",{staticStyle:{float:"left",color:"#333","margin-left":"10px"}},[e._v("时")])],1),e._v(" "),a("el-form-item",{staticClass:"err_span",staticStyle:{float:"left","margin-left":"-85px"},attrs:{prop:"timeMinute"}},[a("el-input",{staticClass:"err_span",staticStyle:{width:"50px",float:"left"},model:{value:e.ruleForm.timeMinute,callback:function(t){e.$set(e.ruleForm,"timeMinute",t)},expression:"ruleForm.timeMinute"}}),e._v(" "),a("span",{staticStyle:{float:"left",color:"#333","margin-left":"10px"}},[e._v("分")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产品概括",prop:"productSummary","label-width":"120px"}},[a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:e.content_01,callback:function(t){e.content_01=t},expression:"content_01"}})],1)])],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"费用说明",name:"third"}},[a("div",{staticClass:"cost"},[e._v("费用说明")]),e._v(" "),a("div",{staticClass:"cost_button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getUEContent()}}},[e._v("添加说明")])],1),e._v(" "),e._l(e.explain,function(t){return a("div",{staticClass:"cost_bg"},[a("div",{staticClass:"cost_title"},[e._v(e._s(t.title))]),e._v(" "),a("div",{staticClass:"cost_content"},[a("vue-editor",{staticClass:"content_explain",model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1)])}),e._v(" "),e._l(e.domains,function(t,i){return a("div",{staticClass:"cost_bg"},[a("div",{staticClass:"cost_title"},[a("span",[e._v("名称：")]),a("el-input",{staticStyle:{width:"750px"},attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"domain.title"}})],1),e._v(" "),a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"domain.content"}})],1),e._v(" "),a("div",{staticClass:"delete_button"},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.deleteState_01(i)}}},[e._v("删除信息")])],1)])})],2),e._v(" "),a("el-tab-pane",{attrs:{label:"其他信息",name:"fourth"}},[a("div",{staticClass:"cost"},[e._v("预订须知")]),e._v(" "),a("div",[a("div",{staticClass:"cost_button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getUEContent0()}}},[e._v("添加说明")])],1),e._v(" "),e._l(e.notes,function(t,i){return a("div",{staticClass:"cost_bg"},[a("div",{staticClass:"cost_title"},[a("span",[e._v("名称：")]),a("el-input",{staticStyle:{width:"750px"},attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"note.title"}})],1),e._v(" "),a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"note.content"}})],1),e._v(" "),a("div",{staticClass:"delete_button"},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.deleteNotice(i)}}},[e._v("删除信息")])],1)])})],2),e._v(" "),a("div",{staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"cost"},[e._v("使用说明")]),e._v(" "),a("div",[a("div",{staticClass:"cost_button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getUEContent1()}}},[e._v("添加说明")])],1),e._v(" "),e._l(e.instructions,function(t,i){return a("div",{staticClass:"cost_bg"},[a("div",{staticClass:"cost_title"},[a("span",[e._v("名称：")]),a("el-input",{staticStyle:{width:"750px"},attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"instruction.title"}})],1),e._v(" "),a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"instruction.content"}})],1),e._v(" "),a("div",{staticClass:"delete_button"},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.deleteState(i)}}},[e._v("删除信息")])],1)])})],2)])])],1)],1)],1)},staticRenderFns:[]};var Je,Ye=a("VU/8")(We,Ge,!1,function(e){a("DVzi")},"data-v-0717370e",null).exports;function Xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Qe={name:"listInfo",components:{VueEditor:Ve.VueEditor},data:function(){var e,t;return{changeobj:"",changeIndex:0,changeAction:"",packLen:"",qqq:[],activeID:[],schedulsLeng:"",mealID:"",tabInformation:"traffic",isActive:!1,content_01:"",content_02:"",tabIndex:2,notes:[{title:"",content:""}],instructions:[{title:"",content:""}],explain:[{title:"费用包含",content:""},{title:"费用不包含",content:""},{title:"温馨提示",content:""},{title:"儿童政策",content:""},{title:"购物场所",content:""},{title:"自费项目",content:""}],domains:[],isShowImg:!1,imgUrl:"",isSlideshow:!1,slideshowUrl:"",vague:[],tableData1:[],list:[],excurList:[],dynamicTags1:[],inputVisible1:!1,inputValue1:"",content:"",content1:"<h1>Some initial content111</h1>",editableTabsValue:"1",editableTabs:[],number:"0/10",items:{text:""},goRoad:[{value:"1",label:"飞机"},{value:"2",label:"火车"},{value:"3",label:"汽车"},{value:"4",label:"轮船"}],selectedOptions:["2"],goDate:[],returnRoad:[{value:"1",label:"飞机"},{value:"2",label:"火车"},{value:"3",label:"汽车"},{value:"4",label:"轮船"}],selectedOptions_01:["1"],goDay:[{value:"选项1",label:"当日"},{value:"选项2",label:"第一天"},{value:"选项3",label:"第一天"},{value:"选项4",label:"第一天"}],hotelStars:[{value:"选项1",label:"三星"},{value:"选项2",label:"四星"},{value:"选项3",label:"五星"}],hotelDays:[{value:"选项1",label:"一宿"},{value:"选项2",label:"两宿"},{value:"选项3",label:"三宿"}],hotelRoom:[{value:"选项1",label:"单人间"},{value:"选项2",label:"双人间"},{value:"选项3",label:"三人间"}],hotelType:[{value:"选项1",label:"双人床"},{value:"选项2",label:"双人床"},{value:"选项3",label:"双人床"}],restaurants:[],info:"",ruleForm:(e={mudidi:"",chufadi:"",productNamel:"",destinations:"",travelType:"1",placeDeparture:"",travelDays:"",travelNight:"",orderConfirmationType:"",operationLabel:"",Excursion:"",excurList:"",advanceRegistrationDays:"",timeHour:"",timeMinute:"",highlightWords1:"",highlightWords2:"",highlightWords3:"",highlightWords4:"",avatarImages:"",slideshow:"",hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:"",pod:"",company:"",theNumber:""},Xe(e,"pod",""),Xe(e,"podPlace",""),Xe(e,"podTime",""),Xe(e,"arriveCity",""),Xe(e,"arrivePlace",""),Xe(e,"arriveTime",""),Xe(e,"planeDay",""),Xe(e,"trafficMode","1"),Xe(e,"day",""),Xe(e,"typeExt",""),Xe(e,"time",""),Xe(e,"name",""),Xe(e,"details",""),Xe(e,"memo",""),Xe(e,"pictureID",""),Xe(e,"highlightWords",""),Xe(e,"theme",""),Xe(e,"subject",""),Xe(e,"origin",""),Xe(e,"podID",""),Xe(e,"destinationID",""),Xe(e,"bourn",""),Xe(e,"plane",[{pod:"",id:0,goOrBack:1,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[],www:["2"]}]),Xe(e,"nackPlane",[{pod:"",id:0,goOrBack:2,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[],www:["2"]}]),Xe(e,"schedules",[]),e),rules:(t={productNamel:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:30,message:"字数超过30汉字限制",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9【】，+/（]{1,29}([\u4e00-\u9fa5a-zA-Z0-9【】，+/）]{0,1})$/,message:"请输入正确产品名称，含中括号【】中文逗号，英文+/可用，中文小括号（）仅能用在句尾",trigger:"blur"}],travelType:[{required:!0,message:"不能为空",trigger:"blur"}],orderConfirmationType:[{required:!0,message:"不能为空",trigger:"change"}],advanceRegistrationDays:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],highlightWords1:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:8,message:"字数超过8汉字限制",trigger:"blur"}],highlightWords2:[{min:0,max:8,message:"字数超过8汉字限制",trigger:"blur"}],highlightWords3:[{min:0,max:8,message:"字数超过8汉字限制",trigger:"blur"}],highlightWords4:[{min:0,max:8,message:"字数超过8汉字限制",trigger:"blur"}],travelDays:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],travelNight:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],timeHour:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],timeMinute:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"请输入正整数"}],operationLabel:[{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]{1,300}$/,message:"不能有标点符号"}],highlightWords:[{required:!0,message:"不能为空",trigger:"blur"},{min:0,max:10,message:"字数超过10汉字限制",trigger:"blur"}],origin:[{required:!0,message:"不能为空",trigger:"change"}],bourn:[{required:!0,message:"不能为空",trigger:"change"}],hotelAuto:[{required:!0,message:"不能为空",trigger:"blur"}],hotelChinese:[{required:!0,message:"不能为空",trigger:"blur"}],hotelEnglish:[{required:!0,message:"不能为空",trigger:"blur"}],hotelAddress:[{required:!0,message:"不能为空",trigger:"blur"}],hotelStar:[{required:!0,message:"不能为空",trigger:"blur"}],hotelDay:[{required:!0,message:"不能为空",trigger:"blur"}],hotelHouse:[{required:!0,message:"不能为空",trigger:"blur"}],hotelBed:[{required:!0,message:"不能为空",trigger:"blur"}],pod:[{required:!0,message:"不能为空",trigger:"blur"}],company:[{required:!0,message:"不能为空",trigger:"blur"}],theNumber:[{required:!0,message:"不能为空",trigger:"blur"}],podCity:[{required:!0,message:"不能为空",trigger:"blur"}]},Xe(t,"pod",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"podPlace",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"podTime",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"arriveCity",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"arrivePlace",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"arriveTime",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"planeDay",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"trafficMode",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"day",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"typeExt",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"time",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"name",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"details",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"memo",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"details",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"pictureID",[{required:!0,message:"不能为空",trigger:"blur"}]),Xe(t,"subject",[{required:!0,message:"不能为空",trigger:"blur"}]),t),fileList2:[],radio:"1",radio1:"1",radio2:"1",radio3:"1",radio4:"1",tabContents:[{id:0,name:"酒店1"},{id:1,name:"酒店2"}],num:0,num1:0,param:"1",tabPosition:"right",comboshow:!1,aindex:0,editableTabsValue3:"2",editableTabs3:[{content:""}],describe:["详细说明","简要说明"],pattern:["",""],matter_radio:"0",form:[],form1:[],lineshow:!1,Stopline:!1,transit:["1"],deleteTransit:!0,place:[{value:"选项1",id:"1"},{value:"选项2",id:"2"},{value:"选项3",id:"3"}],destination:[{value:"选项1",id:"1"},{value:"选项2",id:"2"},{value:"选项3",id:"3"}],information:["1"],hotelshow:!1,hotel:[{hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:""}],details:[{value:"1",label:"景点"},{value:"2",label:"购物"},{value:"3",label:"自费项目"}],teturnBack:[],Returnline:!1,num6:0,schedule_radio:"0",num7:0,details_radio:"0",schedule_details:["","",""],mynumber:0,mydate:"2",myTravelDay:[],myxiangnumber:0,hotell:!0,otherl:!1,myradio:[],activeName:"second",travelDays:"",dynamicTags2:[],inputVisible2:!1,inputVal:"",empty:"",dynamicTags3:[],inputVisible3:!1,inputVal3:"",noNull:!1,dynamicTags4:[],inputVisible4:!1,inputVal4:"",errorNull:""}},watch:{items:{handler:function(){this.$refs.count.setAttribute("maxlength",10),this.number=10-this.$refs.count.value.length},deep:!1},"ruleForm.travelDays":{handler:function(e,t){this.myTravelDay=[];for(var a=0;a<e;a++)this.myTravelDay.push(a);if(e>t){this.mydate=e-t;for(var i=0;i<this.mydate;i++)this.ruleForm.schedules.push({day:i+1,subject:"",info:"",createTime:this.formatDate(new Date),ext_Meals:[{label:"早餐",Myself:"0",Detail:""},{label:"午餐",Myself:"0",Detail:""},{label:"晚餐",Myself:"0",Detail:""}],activitys:[{typeExt:"",time:"",name:"",details:"",memo:"",pictureID:"",activityType:"1",createTime:this.formatDate(new Date)}],ext_Hotel:[{IsHotel:0,Details:""}]}),this.myradio.push({lable:"1"})}else this.ruleForm.schedules.splice(e,t-e),this.myradio.splice(e,t-e)}}},mounted:function(){this.guid(),this.restaurants=this.loadAll()},created:function(){this.themeList(),this.itemList(),this.oneInfo()},methods:(Je={oneInfo:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teaminfoget",{object:{id:this.$route.query.id,loadPackage:!0}}).then(function(t){console.log(t.data.object),e.ruleForm.travelDays=t.data.object.day,e.ruleForm.travelNight=t.data.object.night,e.dynamicTags3=t.data.object.pods,e.dynamicTags4=t.data.object.destinations,e.ruleForm.highlightWords=t.data.object.package[0].name,e.ruleForm.origin=t.data.object.package[0].pod,e.ruleForm.bourn=t.data.object.package[0].destination,e.ruleForm.podID=t.data.object.package[0].podID,e.ruleForm.destinationID=t.data.object.package[0].destinationID,e.packLen=t.data.object.package.length;for(var a=0;a<t.data.object.package.length;a++){var i=++e.tabIndex+"";e.editableTabs.push({title:"套餐"+a,name:i,content:"New Tab content"})}e.editableTabsValue="3",e.ruleForm.plane=[],e.ruleForm.nackPlane=[];for(var l=0;l<t.data.object.package[0].traffic.length;l++){var s=[];1==t.data.object.package[0].traffic[l].goOrBack?(t.data.object.package[0].traffic[l].ext_Stopover=[],e.ruleForm.plane.push(t.data.object.package[0].traffic[l]),s.push(String(t.data.object.package[0].traffic[l].trafficMode)),e.ruleForm.plane[l].www=s):(t.data.object.package[0].traffic[l].ext_Stopover=[],s.push(String(t.data.object.package[0].traffic[l].trafficMode)),t.data.object.package[0].traffic[l].www=s,e.ruleForm.nackPlane.push(t.data.object.package[0].traffic[l]))}for(var o=function(a){setTimeout(function(i){e.ruleForm.schedules[a].subject=t.data.object.package[0].schedules[a].subject,e.content_02=t.data.object.package[0].schedules[a].info,"早餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].label&&"0"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].Myself?e.ruleForm.schedules[a].ext_Meals[0].Myself="0":"早餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].label&&"1"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].Myself&&(e.ruleForm.schedules[a].ext_Meals[0].Myself="1",e.ruleForm.schedules[a].ext_Meals[0].Detail=JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[0].Detail),"午餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].label&&"0"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].Myself?e.ruleForm.schedules[a].ext_Meals[1].Myself="0":"午餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].label&&"1"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].Myself&&(e.ruleForm.schedules[a].ext_Meals[1].Myself="1",e.ruleForm.schedules[a].ext_Meals[1].Detail=JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[1].Detail),"晚餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].label&&"0"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].Myself?e.ruleForm.schedules[a].ext_Meals[2].Myself="0":"晚餐"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].label&&"1"==JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].Myself&&(e.ruleForm.schedules[a].ext_Meals[2].Myself="1",e.ruleForm.schedules[a].ext_Meals[2].Detail=JSON.parse(t.data.object.package[0].schedules[a].ext_Meals)[2].Detail),e.ruleForm.schedules[a].activitys=[];for(var l=0;l<t.data.object.package[0].schedules[a].activitys.length;l++)e.ruleForm.schedules[a].activitys.push(t.data.object.package[0].schedules[a].activitys[l]),e.ruleForm.schedules[a].activitys[l].activityType=String(e.ruleForm.schedules[a].activitys[l].activityType);console.log()},100)},r=0;r<t.data.object.package[0].schedules.length;r++)o(r);e.mealID=t.data.object.package[e.changeIndex].id,e.ruleForm.productNamel=t.data.object.title,e.ruleForm.travelType=String(t.data.object.isForeign),e.explain=[];for(var n=0;n<t.data.object.instructions.length;n++)e.explain.push(t.data.object.instructions[n])}).catch(function(e){console.log(e)})},handClick:function(e,t){console.log(e,t)},myInput:function(){this.ruleForm.productNamel.length>30?this.isActive=!0:this.isActive=!1},getUEContent0:function(){this.notes.push({title:"",content:""})},getUEContent1:function(){this.instructions.push({title:"",content:""})},deleteNotice:function(e){this.notes.splice(e,1)},deleteState:function(e){this.instructions.splice(e,1)},deleteState_01:function(e){this.domains.splice(e,1)},getUEContent:function(){this.domains.push({title:"",content:""})},addsave:function(e){var t=this;if(this.changeIndex<this.packLen&&(this.changeAction="update"),"add"==this.changeAction){for(var a=JSON.stringify(this.ruleForm.plane.concat(this.ruleForm.nackPlane)),i=JSON.parse(a),l=0;l<i.length;l++)i[l].ext_Stopover=JSON.stringify(i[l].ext_Stopover);var s=JSON.stringify(this.ruleForm.schedules),o=JSON.parse(s);for(l=0;l<o.length;l++)o[l].ext_Meals=JSON.stringify(o[l].ext_Meals);for(l=0;l<o.length;l++)o[l].ext_Hotel=JSON.stringify(o[l].ext_Hotel);void 0==this.ruleForm.bourn.destination?this.ruleForm.mudidi=this.ruleForm.bourn:this.ruleForm.mudidi=this.ruleForm.bourn.destination,void 0==this.ruleForm.origin.pod?this.ruleForm.chufadi=this.ruleForm.origin:this.ruleForm.chufadi=this.ruleForm.origin.pod;var r={teamID:this.$route.query.id,name:this.ruleForm.highlightWords,podID:this.ruleForm.podID,destinationID:this.ruleForm.destinationID,pod:this.ruleForm.chufadi,destination:this.ruleForm.mudidi,createTime:this.formatDate(new Date),traffic:i,schedules:o,loadPackage:!0,briefMark:"string",loadPlan:!0,codePrefix:"string",codeSuffix:"string"};this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teampackageinsert",{object:r}).then(function(e){1==e.data.isSuccess?a.$message.success("添加成功"):a.$message.success("添加失败")}).catch(function(e){console.log(e)})}})}else{var n=JSON.stringify(this.ruleForm.plane.concat(this.ruleForm.nackPlane)),c=JSON.parse(n);for(l=0;l<c.length;l++)c[l].ext_Stopover=JSON.stringify(c[l].ext_Stopover);var d=JSON.stringify(this.ruleForm.schedules),u=JSON.parse(d);for(l=0;l<u.length;l++)u[l].ext_Meals=JSON.stringify(u[l].ext_Meals);for(l=0;l<u.length;l++)u[l].ext_Hotel=JSON.stringify(u[l].ext_Hotel);void 0==this.ruleForm.bourn.destination?this.ruleForm.mudidi=this.ruleForm.bourn:this.ruleForm.mudidi=this.ruleForm.bourn.destination,void 0==this.ruleForm.origin.pod?this.ruleForm.chufadi=this.ruleForm.origin:this.ruleForm.chufadi=this.ruleForm.origin.pod;r={id:this.mealID,teamID:this.$route.query.id,name:this.ruleForm.highlightWords,podID:this.ruleForm.podID,destinationID:this.ruleForm.destinationID,pod:this.ruleForm.chufadi,destination:this.ruleForm.mudidi,createTime:this.formatDate(new Date),traffic:c,schedules:u,loadPackage:!0,briefMark:"string",loadPlan:!0,codePrefix:"string",codeSuffix:"string"};console.log(r),this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teampackagesave",{object:r}).then(function(e){1==e.data.isSuccess?a.$message.success("修改成功"):a.$message.success("修改失败")}).catch(function(e){console.log(e)})}})}},handleSetMeal:function(e){for(var t=this,a=JSON.stringify(this.ruleForm.plane.concat(this.ruleForm.nackPlane)),i=JSON.parse(a),l=0;l<i.length;l++)i[l].ext_Stopover=JSON.stringify(i[l].ext_Stopover);var s=JSON.stringify(this.ruleForm.schedules),o=JSON.parse(s);for(l=0;l<o.length;l++)o[l].ext_Meals=JSON.stringify(o[l].ext_Meals);for(l=0;l<o.length;l++)o[l].ext_Hotel=JSON.stringify(o[l].ext_Hotel);void 0==this.ruleForm.bourn.destination?this.ruleForm.mudidi=this.ruleForm.bourn:this.ruleForm.mudidi=this.ruleForm.bourn.destination,void 0==this.ruleForm.origin.pod?this.ruleForm.chufadi=this.ruleForm.origin:this.ruleForm.chufadi=this.ruleForm.origin.pod;var r={id:this.mealID,name:this.ruleForm.highlightWords,podID:this.ruleForm.podID,destinationID:this.ruleForm.destinationID,pod:this.ruleForm.chufadi,destination:this.ruleForm.mudidi,createTime:this.formatDate(new Date),traffic:i,loadPackage:!0,briefMark:"string",loadPlan:!0,codePrefix:"string",codeSuffix:"string"};this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teampackagesave",{object:r}).then(function(e){1==e.data.isSuccess?a.$message.success("修改成功"):a.$message.success("修改失败")}).catch(function(e){console.log(e)})}})},handleNote:function(e){for(var t=this,a=JSON.stringify(this.ruleForm.schedules),i=JSON.parse(a),l=0;l<i.length;l++)i[l].ext_Meals=JSON.stringify(i[l].ext_Meals);for(l=0;l<i.length;l++)i[l].ext_Hotel=JSON.stringify(i[l].ext_Hotel);for(var s=0;s<this.schedulsLeng;s++){var o={id:this.activeID[s],packageID:this.mealID,day:this.ruleForm.schedules[s].day,subject:this.ruleForm.schedules[s].subject,ext_Meals:JSON.stringify(this.ruleForm.schedules[s].ext_Meals),info:this.ruleForm.schedules[s].info,ext_Hotel:JSON.stringify(this.ruleForm.schedules[s].ext_Hotel),activitys:this.ruleForm.schedules[s].activitys,createTime:this.formatDate(new Date),loadPlan:!1,code:"string"};this.$refs[e].validate(function(e){if(e){var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teamschedulesave",{object:o}).then(function(e){1==e.data.isSuccess?a.$message.success("修改成功"):a.$message.success("修改失败")}).catch(function(e){console.log(e)})}})}},cancel:function(){this.$router.push({path:"productList"})},handleClick:function(e,t){if("tab-second"==t.target.getAttribute("id")){this.goDate=[];for(var a=0;a<this.ruleForm.travelDays;a++)this.goDate.push({value:a+1,label:a+1})}},childByValue:function(e){this.travelDays=e},otherNumber:function(){this.hotell=!1,this.otherl=!0},tabTravel:function(e){this.mynumber=e},stopping:function(e){this.ruleForm.plane[e].ext_Stopover.push({stopCity:"",stopDate:""})},deleteItem:function(e,t){this.ruleForm.plane[t].ext_Stopover.splice(e,1)},deletePanel:function(e){this.ruleForm.plane.splice(e,1)},reDeleteItem:function(e,t){this.ruleForm.nackPlane[t].ext_Stopover.splice(e,1)},reDeletePanel:function(e){this.ruleForm.nackPlane.splice(e,1)},reStopping:function(e){this.ruleForm.nackPlane[e].ext_Stopover.push({stopCity:"",stopDate:""})},addTransit:function(e){this.ruleForm.plane.push({pod:"",id:0,goOrBack:1,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[]})},trafficClear:function(e){this.ruleForm.plane[e].pod="",this.ruleForm.plane[e].company="",this.ruleForm.plane[e].theNumber="",this.ruleForm.plane[e].podCity="",this.ruleForm.plane[e].podPlace="",this.ruleForm.plane[e].podTime="",this.ruleForm.plane[e].arriveCity="",this.ruleForm.plane[e].arrivePlace="",this.ruleForm.plane[e].arriveTime="",this.ruleForm.plane[e].planeDay="",this.ruleForm.plane[e].day=""},clearBle:function(e){this.ruleForm.plane[e].company="",this.ruleForm.plane[e].theNumber="",this.ruleForm.plane[e].podCity="",this.ruleForm.plane[e].podPlace="",this.ruleForm.plane[e].podTime="",this.ruleForm.plane[e].arriveCity="",this.ruleForm.plane[e].arrivePlace="",this.ruleForm.plane[e].arriveTime="",this.ruleForm.plane[e].planeDay="",this.ruleForm.plane[e].day=""},clearBle_01:function(e){this.ruleForm.nackPlane[e].company="",this.ruleForm.nackPlane[e].theNumber="",this.ruleForm.nackPlane[e].podCity="",this.ruleForm.nackPlane[e].podPlace="",this.ruleForm.nackPlane[e].podTime="",this.ruleForm.nackPlane[e].arriveCity="",this.ruleForm.nackPlane[e].arrivePlace="",this.ruleForm.nackPlane[e].arriveTime="",this.ruleForm.nackPlane[e].planeDay="",this.ruleForm.nackPlane[e].day=""},trafficGoClear:function(e){this.ruleForm.nackPlane[e].pod="",this.ruleForm.nackPlane[e].company="",this.ruleForm.nackPlane[e].theNumber="",this.ruleForm.nackPlane[e].podCity="",this.ruleForm.nackPlane[e].podPlace="",this.ruleForm.nackPlane[e].podTime="",this.ruleForm.nackPlane[e].arriveCity="",this.ruleForm.nackPlane[e].arrivePlace="",this.ruleForm.nackPlane[e].arriveTime="",this.ruleForm.nackPlane[e].planeDay="",this.ruleForm.nackPlane[e].day=""},addRTransit:function(e){this.ruleForm.nackPlane.push({pod:"",id:0,goOrBack:2,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"",ext_Stopover:[]})},addHotel:function(){this.hotel.push({hotelAuto:"",hotelChinese:"",hotelEnglish:"",hotelAddress:"",hotelStar:"",hotelDay:"",hotelHouse:"",hotelBed:"",hotelAbstract:"",hotelPicture:""})},deleteHotel:function(e){this.hotelshow=!0},shutHotel:function(e){this.hotel.splice(e,1),this.hotelshow=!1},cloceHotel:function(){this.hotelshow=!1},tabHotel:function(e){this.num6=e},tabDetails:function(e,t,a){},handleClose2:function(e){this.dynamicTags2.splice(this.dynamicTags2.indexOf(e),1)},showInput2:function(){var e=this;this.inputVisible2=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleImgClick:function(e){this.isShowImg=!this.isShowImg,this.imgUrl=e.url},handleRemove:function(e,t){this.isShowImg=!1},slideshowClick:function(e){this.isSlideshow=!0,this.slideshowUrl==e.url?(this.isSlideshow=!1,this.slideshowUrl=""):this.slideshowUrl=e.url},handleRemove2:function(e,t){this.isSlideshow=!1},handleRemoves:function(e,t){},handleRemoves1:function(e,t){},loadAll:function(){return[{value:"三全鲜食（北新泾店）",id:"1"},{value:"Hot honey 首尔炸鸡（仙霞路）",id:"2"},{value:"新旺角茶餐厅",id:"3"},{value:"泷千家(天山西路店)",id:"4"},{value:"胖仙女纸杯蛋糕（上海凌空店）",id:"5"}]},addDetails:function(e){this.ruleForm.schedules[e].activitys.push({typeExt:"",time:"",name:"",details:"",memo:"",pictureID:0,activityType:"1",createTime:this.formatDate(new Date)})},deleteDetails:function(e,t){this.ruleForm.schedules[t].activitys.splice(e,1)},diaoyong:function(e,t,a){this.ruleForm.schedules[a].activitys[t].activityType=e},baocun:function(e,t){this.ruleForm.schedules[t].ext_Hotel[0].Details=e,this.ruleForm.schedules[t].ext_Hotel[0].IsHotel=0},close:function(){this.comboshow=!1},confirm:function(){this.handleTabsEdit(this.aindex,"remove");var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teaminfoget",{object:{id:this.$route.query.id,loadPackage:!0}}).then(function(t){e.mealID=t.data.object.package[e.aindex-3].id}).catch(function(e){console.log(e)}),this.$http.post(this.GLOBAL.serverSrc+"/team/api/teampackagedelete",{id:e.mealID}).then(function(e){}).catch(function(e){}),this.comboshow=!1},tab:function(e){this.num=e},tab1:function(e){this.num1=e},handleTabsEdit:function(e,t){if("add"===t){this.changeIndex=this.packLen+1,this.changeAction=t;var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a,content:"New Tab content"}),this.editableTabsValue=a,this.ruleForm.highlightWords="",this.ruleForm.plane=[{pod:"",id:0,goOrBack:1,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[],www:["2"]}],this.ruleForm.nackPlane=[{pod:"",id:0,goOrBack:2,company:"",theNumber:"",podCity:"",podPlace:"",podTime:"",arriveCity:"",arrivePlace:"",arriveTime:"",planeDay:"",trafficMode:"1",day:"1",ext_Stopover:[],www:["2"]}];for(var i=0;i<this.ruleForm.schedules.length;i++)this.ruleForm.schedules[i].ext_Meals[0].Detail="",this.ruleForm.schedules[i].ext_Meals[0].Myself="0",this.ruleForm.schedules[i].ext_Meals[0].label="早餐",this.ruleForm.schedules[i].ext_Meals[1].Detail="",this.ruleForm.schedules[i].ext_Meals[1].Myself="0",this.ruleForm.schedules[i].ext_Meals[1].label="午餐",this.ruleForm.schedules[i].ext_Meals[2].Detail="",this.ruleForm.schedules[i].ext_Meals[2].Myself="0",this.ruleForm.schedules[i].ext_Meals[2].label="晚餐",this.ruleForm.schedules[i].subject="",this.content_02="",this.ruleForm.schedules[i].activitys=[]}if("remove"===t){if(0==this.comboshow)return this.comboshow=!0,this.aindex=e,!1;var l=this.editableTabs,s=this.editableTabsValue;s===e&&(l.forEach(function(t,a){if(t.name===e){var i=l[a+1]||l[a-1];i&&(s=i.name)}}),this.editableTabsValue=s,this.editableTabs=l.filter(function(t){return t.name!==e}))}},handleSelectPod_01:function(e){var t=this;if(""==this.ruleForm.plane[e].pod)return this.clearBle(e),!1;this.$http.post(this.GLOBAL.serverSrc+"/Flight/flighs/api/getnum",{number:this.ruleForm.plane[e].pod}).then(function(a){if(1==a.data.isSuccess){var i=a.data.object;t.ruleForm.plane[e].company=i.company,t.ruleForm.plane[e].theNumber=i.number,t.ruleForm.plane[e].podCity=i.departureCity,t.ruleForm.plane[e].podPlace=i.departureAirport,t.ruleForm.plane[e].podTime=i.departureTime,t.ruleForm.plane[e].arriveCity=i.reachingCity,t.ruleForm.plane[e].arrivePlace=i.arrivalAirport,t.ruleForm.plane[e].arriveTime=i.arrivalTime,t.ruleForm.plane[e].planeDay=i.day,t.ruleForm.plane[e].trafficMode=i.byType}})},handleSelectPod_02:function(e){var t=this;if(""==this.ruleForm.nackPlane[e].pod)return this.clearBle_01(e),!1;this.$http.post(this.GLOBAL.serverSrc+"/Flight/flighs/api/getnum",{number:this.ruleForm.nackPlane[e].pod}).then(function(a){if(1==a.data.isSuccess){var i=a.data.object;t.ruleForm.nackPlane[e].company=i.company,t.ruleForm.nackPlane[e].theNumber=i.number,t.ruleForm.nackPlane[e].podCity=i.departureCity,t.ruleForm.nackPlane[e].podPlace=i.departureAirport,t.ruleForm.nackPlane[e].podTime=i.departureTime,t.ruleForm.nackPlane[e].arriveCity=i.reachingCity,t.ruleForm.nackPlane[e].arrivePlace=i.arrivalAirport,t.ruleForm.nackPlane[e].arriveTime=i.arrivalTime,t.ruleForm.nackPlane[e].planeDay=i.day,t.ruleForm.nackPlane[e].trafficMode=i.byType}})},querySearch:function(e,t){var a=this;this.$http.post(this.GLOBAL.serverSrc+"/flight/api/list",{object:{id:0,byType:0,day:0,company:"",number:"",departureCity:"",departureAirport:"",departureTime:"",reachingCity:"",arrivalAirport:"",arrivalTime:"",createTime:"2019-03-21T01:58:24.499Z",code:"",isDeleted:0,isForeign:0}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.flightsList.push({value:i.data.objects[l].number+a.ruleForm.plane[l].company,id:i.data.objects[l].id});var s=e?a.flightsList.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})},handledelete:function(e){},handlePoint:function(e){var t=this;if(this.changeIndex>=this.packLen)this.$confirm("套餐未保存切换将丢失数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"删除成功!"}),t.changeIndex=e.index;var a=t;t.$http.post(t.GLOBAL.serverSrc+"/team/api/teaminfoget",{object:{id:t.$route.query.id,loadPackage:!0}}).then(function(e){console.log(e.data.object),a.ruleForm.travelDays=e.data.object.day,a.ruleForm.travelNight=e.data.object.night,a.dynamicTags3=e.data.object.pods,a.dynamicTags4=e.data.object.destinations,a.ruleForm.highlightWords=e.data.object.package[a.changeIndex].name,a.ruleForm.origin=e.data.object.package[a.changeIndex].pod,a.ruleForm.bourn=e.data.object.package[a.changeIndex].destination,a.ruleForm.podID=e.data.object.package[a.changeIndex].podID,a.ruleForm.destinationID=e.data.object.package[a.changeIndex].destinationID,a.packLen=e.data.object.package.length,a.ruleForm.plane=[],a.ruleForm.nackPlane=[];for(var t=0;t<e.data.object.package[a.changeIndex].traffic.length;t++){var i=[];1==e.data.object.package[a.changeIndex].traffic[t].goOrBack?(e.data.object.package[a.changeIndex].traffic[t].ext_Stopover=[],a.ruleForm.plane.push(e.data.object.package[a.changeIndex].traffic[t]),i.push(String(e.data.object.package[a.changeIndex].traffic[t].trafficMode)),a.ruleForm.plane[t].www=i):(e.data.object.package[a.changeIndex].traffic[t].ext_Stopover=[],i.push(String(e.data.object.package[a.changeIndex].traffic[t].trafficMode)),e.data.object.package[a.changeIndex].traffic[t].www=i,a.ruleForm.nackPlane.push(e.data.object.package[a.changeIndex].traffic[t]))}for(var l=function(t){setTimeout(function(i){a.ruleForm.schedules[t].subject=e.data.object.package[a.changeIndex].schedules[t].subject,a.content_02=e.data.object.package[a.changeIndex].schedules[t].info,"早餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].label&&"0"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].Myself?a.ruleForm.schedules[t].ext_Meals[0].Myself="0":"早餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].label&&"1"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].Myself&&(a.ruleForm.schedules[t].ext_Meals[0].Myself="1",a.ruleForm.schedules[t].ext_Meals[0].Detail=JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].Detail),"午餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[1].label&&"0"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[1].Myself?a.ruleForm.schedules[t].ext_Meals[1].Myself="0":"午餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[1].label&&"1"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[1].Myself&&(a.ruleForm.schedules[t].ext_Meals[1].Myself="1",a.ruleForm.schedules[t].ext_Meals[1].Detail=JSON.parse(e.data.object.package[0].schedules[t].ext_Meals)[1].Detail),"晚餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].label&&"0"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].Myself?a.ruleForm.schedules[t].ext_Meals[2].Myself="0":"晚餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].label&&"1"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].Myself&&(a.ruleForm.schedules[t].ext_Meals[2].Myself="1",a.ruleForm.schedules[t].ext_Meals[2].Detail=JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].Detail),a.ruleForm.schedules[t].activitys=[];for(var l=0;l<e.data.object.package[a.changeIndex].schedules[t].activitys.length;l++)a.ruleForm.schedules[t].activitys.push(e.data.object.package[a.changeIndex].schedules[t].activitys[l]),a.ruleForm.schedules[t].activitys[l].activityType=String(a.ruleForm.schedules[t].activitys[l].activityType);console.log()},100)},s=0;s<e.data.object.package[a.changeIndex].schedules.length;s++)l(s);a.mealID=e.data.object.package[a.changeIndex].id,a.ruleForm.productNamel=e.data.object.title,a.ruleForm.travelType=String(e.data.object.isForeign),a.explain=[];for(var o=0;o<e.data.object.instructions.length;o++)a.explain.push(e.data.object.instructions[o])}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消"}),t.editableTabsValue=String(parseInt(t.editableTabsValue)+1)});else{this.changeIndex=e.index;var a=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teaminfoget",{object:{id:this.$route.query.id,loadPackage:!0}}).then(function(e){console.log(e.data.object),a.ruleForm.travelDays=e.data.object.day,a.ruleForm.travelNight=e.data.object.night,a.dynamicTags3=e.data.object.pods,a.dynamicTags4=e.data.object.destinations,a.ruleForm.highlightWords=e.data.object.package[a.changeIndex].name,a.ruleForm.origin=e.data.object.package[a.changeIndex].pod,a.ruleForm.bourn=e.data.object.package[a.changeIndex].destination,a.ruleForm.podID=e.data.object.package[a.changeIndex].podID,a.ruleForm.destinationID=e.data.object.package[a.changeIndex].destinationID,a.packLen=e.data.object.package.length,a.ruleForm.plane=[],a.ruleForm.nackPlane=[];for(var t=0;t<e.data.object.package[a.changeIndex].traffic.length;t++){var i=[];1==e.data.object.package[a.changeIndex].traffic[t].goOrBack?(e.data.object.package[a.changeIndex].traffic[t].ext_Stopover=[],a.ruleForm.plane.push(e.data.object.package[a.changeIndex].traffic[t]),i.push(String(e.data.object.package[a.changeIndex].traffic[t].trafficMode)),a.ruleForm.plane[t].www=i):(e.data.object.package[a.changeIndex].traffic[t].ext_Stopover=[],i.push(String(e.data.object.package[a.changeIndex].traffic[t].trafficMode)),e.data.object.package[a.changeIndex].traffic[t].www=i,a.ruleForm.nackPlane.push(e.data.object.package[a.changeIndex].traffic[t]))}for(var l=function(t){setTimeout(function(i){a.ruleForm.schedules[t].subject=e.data.object.package[a.changeIndex].schedules[t].subject,a.content_02=e.data.object.package[a.changeIndex].schedules[t].info,"早餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].label&&"0"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].Myself?a.ruleForm.schedules[t].ext_Meals[0].Myself="0":"早餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].label&&"1"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].Myself&&(a.ruleForm.schedules[t].ext_Meals[0].Myself="1",a.ruleForm.schedules[t].ext_Meals[0].Detail=JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[0].Detail),"午餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[1].label&&"0"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[1].Myself?a.ruleForm.schedules[t].ext_Meals[1].Myself="0":"午餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[1].label&&"1"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[1].Myself&&(a.ruleForm.schedules[t].ext_Meals[1].Myself="1",a.ruleForm.schedules[t].ext_Meals[1].Detail=JSON.parse(e.data.object.package[0].schedules[t].ext_Meals)[1].Detail),"晚餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].label&&"0"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].Myself?a.ruleForm.schedules[t].ext_Meals[2].Myself="0":"晚餐"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].label&&"1"==JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].Myself&&(a.ruleForm.schedules[t].ext_Meals[2].Myself="1",a.ruleForm.schedules[t].ext_Meals[2].Detail=JSON.parse(e.data.object.package[a.changeIndex].schedules[t].ext_Meals)[2].Detail),a.ruleForm.schedules[t].activitys=[];for(var l=0;l<e.data.object.package[a.changeIndex].schedules[t].activitys.length;l++)a.ruleForm.schedules[t].activitys.push(e.data.object.package[a.changeIndex].schedules[t].activitys[l]),a.ruleForm.schedules[t].activitys[l].activityType=String(a.ruleForm.schedules[t].activitys[l].activityType);console.log()},100)},s=0;s<e.data.object.package[a.changeIndex].schedules.length;s++)l(s);a.mealID=e.data.object.package[a.changeIndex].id,a.ruleForm.productNamel=e.data.object.title,a.ruleForm.travelType=String(e.data.object.isForeign),a.explain=[];for(var o=0;o<e.data.object.instructions.length;o++)a.explain.push(e.data.object.instructions[o])}).catch(function(e){console.log(e)})}}},Xe(Je,"querySearch",function(e,t){var a=this.restaurants;t(e?a.filter(this.createFilter(e)):a)}),Xe(Je,"createFilter",function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}}),Xe(Je,"handleSelect",function(e){}),Xe(Je,"handleRemove",function(e,t){console.log(e,t)}),Xe(Je,"handlePreview",function(e){console.log(e)}),Xe(Je,"querySearch1",function(e,t){t(e?this.tableData1.filter(this.createFilter(e)):[])}),Xe(Je,"beforeUploadVideo",function(e){var t=e.size/1024/1024<20;return-1==["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb"].indexOf(e.type)?(this.$message.error("请上传正确的视频格式"),!1):t?void 0:(this.$message.error("上传视频大小不能超过20MB哦!"),!1)}),Xe(Je,"uploadVideoProcess",function(e,t,a){this.videoFlag=!0,this.videoUploadPercent=t.percentage.toFixed(0)}),Xe(Je,"handleImgClick",function(e){this.isShowImg=!this.isShowImg,this.imgUrl=e.url}),Xe(Je,"handleRemove",function(e,t){this.isShowImg=!1}),Xe(Je,"slideshowClick",function(e){this.isSlideshow=!0,this.slideshowUrl==e.url?(this.isSlideshow=!1,this.slideshowUrl=""):this.slideshowUrl=e.url}),Xe(Je,"handleRemove2",function(e,t){this.isSlideshow=!1}),Xe(Je,"handleRemoves",function(e,t){}),Xe(Je,"handleRemoves1",function(e,t){}),Xe(Je,"handleClose2",function(e){this.dynamicTags2.splice(this.dynamicTags2.indexOf(e),1)}),Xe(Je,"showInput2",function(){var e=this;this.inputVisible2=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),Xe(Je,"handleInputConfirm2",function(){var e=this;this.$refs.operationLabel.validate(),""!==this.ruleForm.operationLabel?setTimeout(function(t){e.ruleForm.operationLabel;e.inputVisible2=!1,e.ruleForm.operationLabel="",e.empty=!1},200):0==this.dynamicTags2.length?(this.empty=!0,document.getElementById("input-error").style.border="solid 1px red"):this.inputVisible2=!1}),Xe(Je,"querySearch5",function(e,t){var a=this;this.tableData2=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/olabel/api/olabelfuzzy",{object:{labelName:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.tableData2.push({value:i.data.objects[l].labelName,id:i.data.objects[l].id});var s=e?a.tableData2.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),Xe(Je,"dest_01",function(e){this.dynamicTags2.push({labelID:e.id,label:e.value,teamID:0}),this.ruleForm.operationLabel="",this.inputVisible2=!1}),Xe(Je,"querySearch3",function(e,t){var a=this;this.vague=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.vague.push({id:i.data.objects[l].id,value:i.data.objects[l].areaName});var s=e?a.vague.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),Xe(Je,"createFilter",function(e){return function(e){return e.value}}),Xe(Je,"querySearch2",function(e,t){var a=this;this.tableData1=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/fuzzy",{object:{areaName:e}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.tableData1.push({value:i.data.objects[l].areaName,id:i.data.objects[l].id});var s=e?a.tableData1.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})}),Xe(Je,"createFilter",function(e){return function(e){return e.value}}),Xe(Je,"themeList",function(){var e=this;this.excurList=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/crowd/api/crowdlist",{object:{isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.excurList.push(t.data.objects[a].name)}).catch(function(e){console.log(e)})}),Xe(Je,"itemList",function(){this.list=[];var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/theme/api/themelist",{object:{isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.list.push(t.data.objects[a].name)}).catch(function(e){console.log(e)})}),Xe(Je,"guid",function(){this.$http.post(this.GLOBAL.serverSrc+"/universal/utinity/api/getguid",{object:!0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){localStorage.setItem("guid",e.data.object)}).catch(function(e){console.log(e)})}),Xe(Je,"handleClose3",function(e){e.id==this.ruleForm.origin.id&&(this.ruleForm.origin=[]),this.dynamicTags3.splice(this.dynamicTags3.indexOf(e),1)}),Xe(Je,"showInput3",function(){var e=this;this.inputVisible3=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),Xe(Je,"departure",function(e){this.dynamicTags3.push({podID:e.id,pod:e.value}),this.ruleForm.placeDeparture="",this.inputVisible3=!1}),Xe(Je,"handleInputConfirm3",function(){var e=this;this.$refs.placeDeparture.validate(),""!==this.ruleForm.placeDeparture?setTimeout(function(t){e.ruleForm.placeDeparture;e.inputVisible3=!1,e.ruleForm.placeDeparture="",e.noNull=!1},200):0==this.dynamicTags3.length?(this.noNull=!0,document.getElementById("ddd").style.border="solid 1px red"):this.inputVisible3=!1}),Xe(Je,"handleClose4",function(e){e.id==this.ruleForm.bourn.id&&(this.ruleForm.bourn=[]),this.dynamicTags4.splice(this.dynamicTags4.indexOf(e),1)}),Xe(Je,"showInput4",function(){var e=this;this.inputVisible4=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})}),Xe(Je,"dest",function(e){this.dynamicTags4.push({destinationID:e.id,destination:e.value}),this.ruleForm.destinations="",this.inputVisible4=!1}),Xe(Je,"handleInputConfirm4",function(){var e=this;this.$refs.destinations.validate(),""!==this.ruleForm.destinations?setTimeout(function(t){e.ruleForm.destinations;e.inputVisible4=!1,e.ruleForm.destinations="",e.errorNull=!1},200):0==this.dynamicTags4.length?(this.errorNull=!0,document.getElementById("input-error").style.border="solid 1px red"):this.inputVisible4=!1}),Xe(Je,"formatDate",function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate();i=i<10?"0"+i:i;var l=e.getHours();l=l<10?"0"+l:l;var s=e.getMinutes();s=s<10?"0"+s:s;var o=e.getSeconds();return o=o<10?"0"+o:o,t+"-"+a+"-"+i+" "+l+":"+s}),Je)},Ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("div",{staticClass:"btn",staticStyle:{width:"200px",position:"absolute","z-index":"99",top:"0px",left:"50%"}},[a("el-button",{staticClass:"btn-button",attrs:{plain:""},on:{click:function(t){e.cancel()}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"btn-button",staticStyle:{background:"#3095fa",color:"#fff"},on:{click:function(t){e.addsave("ruleForm")}}},[e._v("保存")])],1),e._v("\n    "+e._s(e.changeobj)+"\n    "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"行程信息",name:"second"}},[a("div",{staticClass:"tripInfo"},[a("div",{staticClass:"outline"},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:e.handleTabsEdit,"tab-click":e.handlePoint,"tab-remove":e.handledelete},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.title,name:t.name}},[a("div",{staticClass:"border_side"},[a("el-form-item",{staticClass:"setmeal",attrs:{label:"套餐名","label-width":"100px"}},[a("el-input",{staticClass:"highlightWords-input1",attrs:{maxlength:"10",placeholder:"10个字以内"},model:{value:e.ruleForm.highlightWords,callback:function(t){e.$set(e.ruleForm,"highlightWords",t)},expression:"ruleForm.highlightWords"}}),e._v(" "),a("span",{staticClass:"span1"},[e._v(e._s(e.ruleForm.highlightWords.length)+"/10字")])],1),e._v(" "),a("div",{staticClass:"setout"},[a("span",[e._v("*")]),e._v("出发地")]),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"origin"}},[a("el-select",{staticClass:"depart",attrs:{placeholder:"出发地","value-key":"id"},model:{value:e.ruleForm.origin,callback:function(t){e.$set(e.ruleForm,"origin",t)},expression:"ruleForm.origin"}},e._l(e.dynamicTags3,function(e){return a("el-option",{key:e.pod,attrs:{label:e.pod,value:e}})}))],1),e._v(" "),a("div",{staticClass:"aid_address",staticStyle:{float:"left"}},[a("div",{staticClass:"setout"},[a("span",[e._v("*")]),e._v("目的地")]),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"bourn"}},[a("el-select",{staticClass:"depart",attrs:{placeholder:"目的地","value-key":"id"},model:{value:e.ruleForm.bourn,callback:function(t){e.$set(e.ruleForm,"bourn",t)},expression:"ruleForm.bourn"}},e._l(e.dynamicTags4,function(e){return a("el-option",{key:e.destination,attrs:{label:e.destination,value:e}})}))],1)],1)],1),e._v(" "),a("div",{staticClass:"tab_size",staticStyle:{float:"left",width:"1262px","margin-top":"35px","margin-left":"35px"}},[a("el-tabs",{on:{"tab-click":e.handClick},model:{value:e.tabInformation,callback:function(t){e.tabInformation=t},expression:"tabInformation"}},[a("el-tab-pane",{attrs:{label:"交通信息",name:"traffic"}},[a("div",{staticClass:"traffic"},[a("div",{staticClass:"traffic_title"},[e._v("交通信息")]),e._v(" "),a("div",{staticClass:"describe_way"},[e._v("描述方式")]),e._v(" "),a("ul",{staticClass:"description"},e._l(e.describe,function(t,i){return a("li",{key:i,class:{active:i==e.num},on:{click:function(t){e.tab(i)}}},["0"==i?a("span",[a("el-radio",{attrs:{label:"0",checked:""},model:{value:e.matter_radio,callback:function(t){e.matter_radio=t},expression:"matter_radio"}},[e._v(e._s(t))])],1):e._e(),e._v(" "),"1"==i?a("span",[a("el-radio",{attrs:{label:"1"},model:{value:e.matter_radio,callback:function(t){e.matter_radio=t},expression:"matter_radio"}},[e._v(e._s(t))])],1):e._e()])})),e._v(" "),e._l(e.pattern,function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i==e.num,expression:"index == num"}],key:i},[0==i?a("div",{staticClass:"traffic_border"},[a("div",[a("div",{staticClass:"traffic_button"},[e._v("去程")]),e._v(" "),a("div",{staticClass:"traffic_button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addTransit}},[e._v("添加中转")])],1)]),e._v(" "),e._l(e.ruleForm.plane,function(t,i){return a("div",{key:t.index,staticClass:"plane"},[a("div",{staticStyle:{clear:"both",margin:"0 0 0 0",position:"relative"}},[a("el-cascader",{staticClass:"plane_type",attrs:{options:e.goRoad,placeholder:"飞机"},on:{change:function(e){t.trafficMode=e[0]},blur:function(t){e.trafficClear(i)}},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}}),e._v(" "),a("span",{staticClass:"plane_text"},[e._v("第")]),e._v(" "),a("el-select",{staticClass:"plane_type",staticStyle:{"margin-left":"20px"},attrs:{"collapse-tags":"",placeholder:"1"},model:{value:t.day,callback:function(a){e.$set(t,"day",a)},expression:"item.day"}},e._l(e.goDate,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"plane_text"},[e._v("天")]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{position:"absolute",top:"20px",left:"300px"}},[a("el-form",{staticStyle:{float:"left"},attrs:{model:t,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"自动填充",prop:"pod"}},[a("el-input",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航班号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},on:{clear:function(t){e.clearBle(i)},blur:function(t){e.handleSelectPod_01(i)}},model:{value:t.pod,callback:function(a){e.$set(t,"pod",a)},expression:"item.pod"}})],1)],1)],1)],1),e._v(" "),"1"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{prop:"plane."+i+".company",rules:e.rules.company,label:"航空公司","label-width":"100px"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航空公司","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-form-item",{staticStyle:{width:"280px"},attrs:{"label-width":"100px",label:"航班号",prop:"plane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航班号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"plane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发机场","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发机场","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"plane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"plane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达机场","label-width":"100px",prop:"plane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达机场","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"plane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{attrs:{closable:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.lineshow,expression:"lineshow"}],staticClass:"transit_border"}),e._v(" "),e._l(t.ext_Stopover,function(t,l){return a("div",{key:l,staticClass:"abc",attrs:{type:"text"}},[a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停城市",prop:"stopCity"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopCity,callback:function(a){e.$set(t,"stopCity",a)},expression:"iteml.stopCity"}})],1)],1),e._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停时间",prop:"stopDate"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopDate,callback:function(a){e.$set(t,"stopDate",a)},expression:"iteml.stopDate"}})],1)],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(t){e.deleteItem(l,i)}}},[e._v("删除")])],1)})],2),e._v(" "),a("div",{staticClass:"transit"},[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},on:{click:function(t){e.stopping(i)}}},[e._v("添加经停")])],1),e._v(" "),a("div",{staticClass:"addTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"2"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{attrs:{label:"车次","label-width":"100px",prop:"plane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车次","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"plane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发车站","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"plane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"plane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达车站","label-width":"100px",prop:"plane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"plane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"stop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"3"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"plane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发车站","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"plane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"plane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达车站",prop:"podPlace","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"plane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"stop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"4"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px",position:"relative"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"游轮公司",prop:"plane."+i+".company",rules:e.rules.company,"label-width":"100px"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入游轮公司","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"游轮号","label-width":"100px",prop:"plane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入游轮号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"plane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发码头","label-width":"100px",prop:"plane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发码头","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"plane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"plane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达码头","label-width":"100px",prop:"plane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达码头","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"plane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{attrs:{closable:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.lineshow,expression:"lineshow"}],staticClass:"transit_border"}),e._v(" "),e._l(t.ext_Stopover,function(t,l){return a("div",{key:l,staticClass:"abc",attrs:{type:"text"}},[a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停城市",prop:"stopCity"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopCity,callback:function(a){e.$set(t,"stopCity",a)},expression:"iteml.stopCity"}})],1)],1),e._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停时间",prop:"stopDate"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopDate,callback:function(a){e.$set(t,"stopDate",a)},expression:"iteml.stopDate"}})],1)],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(t){e.deleteItem(l,i)}}},[e._v("删除")])],1)})],2),e._v(" "),a("div",{staticClass:"transit"},[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},on:{click:function(t){e.stopping(i)}}},[e._v("添加经停")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteTransit,expression:"deleteTransit"}],staticClass:"addTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index !='0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e()])}),e._v(" "),a("div",{staticStyle:{clear:"both"}},[a("div",{staticClass:"traffic_button"},[e._v("返程")]),e._v(" "),a("div",{staticClass:"traffic_button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRTransit}},[e._v("添加中转")])],1)]),e._v(" "),e._l(e.ruleForm.nackPlane,function(t,i){return a("div",{key:t.index,staticClass:"plane"},[a("div",{staticStyle:{clear:"both",margin:"0 0 0 0",position:"relative"}},[a("el-cascader",{staticClass:"plane_type",attrs:{options:e.goRoad,placeholder:"飞机"},on:{change:function(e){t.trafficMode=e[0]},blur:function(t){e.trafficGoClear(i)}},model:{value:e.selectedOptions_01,callback:function(t){e.selectedOptions_01=t},expression:"selectedOptions_01"}}),e._v(" "),a("span",{staticClass:"plane_text"},[e._v("第")]),e._v(" "),a("el-select",{staticClass:"plane_type",staticStyle:{"margin-left":"20px"},attrs:{"collapse-tags":"",placeholder:"1"},model:{value:t.day,callback:function(a){e.$set(t,"day",a)},expression:"item.day"}},e._l(e.goDate,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"plane_text"},[e._v("天")]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{position:"absolute",top:"20px",left:"300px"}},[a("el-form",{staticStyle:{float:"left"},attrs:{model:t,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"自动填充",prop:"pod"}},[a("el-input",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航班号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},on:{clear:function(t){e.clearBle_01(i)},blur:function(t){e.handleSelectPod_02(i)}},model:{value:t.pod,callback:function(a){e.$set(t,"pod",a)},expression:"item.pod"}})],1)],1)],1)],1),e._v(" "),"1"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"航空公司","label-width":"100px",prop:"nackPlane."+i+".company",rules:e.rules.company}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航空公司","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"航班号","label-width":"100px",prop:"nackPlane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入航班号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"nackPlane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发机场","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发机场","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"nackPlane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"nackPlane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达机场","label-width":"100px",prop:"nackPlane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达机场","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"nackPlane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{attrs:{type:"card",closable:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.Returnline,expression:"Returnline"}],staticClass:"transit_border"}),e._v(" "),e._l(t.ext_Stopover,function(t,l){return a("div",{key:l,staticClass:"abc",attrs:{type:"text"}},[a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停城市",prop:"stopCity"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopCity,callback:function(a){e.$set(t,"stopCity",a)},expression:"iteml.stopCity"}})],1)],1),e._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停时间",prop:"stopDate"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopDate,callback:function(a){e.$set(t,"stopDate",a)},expression:"iteml.stopDate"}})],1)],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(t){e.reDeleteItem(l,i)}}},[e._v("删除")])],1)})],2),e._v(" "),a("div",{staticClass:"transit"},[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},on:{click:function(t){e.reStopping(i)}}},[e._v("添加经停")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteTransit,expression:"deleteTransit"}],staticClass:"addTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.reDeletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"2"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"车次","label-width":"100px",prop:"nackPlane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入车次","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"nackPlane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发车站","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"nackPlane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"nackPlane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达车站","label-width":"100px",prop:"nackPlane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"nackPlane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"stop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.reDeletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"3"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"nackPlane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发车站","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"nackPlane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"nackPlane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达车站","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达车站","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"nackPlane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"stop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index != '0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.reDeletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e(),e._v(" "),"4"==t.trafficMode?a("div",[a("div",{staticClass:"aviation",staticStyle:{"margin-top":"20px",position:"relative"}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"游轮公司","label-width":"100px",prop:"nackPlane."+i+".company",rules:e.rules.company}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入游轮公司","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"游轮号","label-width":"100px",prop:"nackPlane."+i+".theNumber",rules:e.rules.theNumber}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入游轮号","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.theNumber,callback:function(a){e.$set(t,"theNumber",a)},expression:"item.theNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发城市","label-width":"100px",prop:"nackPlane."+i+".podCity",rules:e.rules.podCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podCity,callback:function(a){e.$set(t,"podCity",a)},expression:"item.podCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发码头","label-width":"100px",prop:"nackPlane."+i+".podPlace",rules:e.rules.podPlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发码头","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podPlace,callback:function(a){e.$set(t,"podPlace",a)},expression:"item.podPlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"出发时间","label-width":"100px",prop:"nackPlane."+i+".podTime",rules:e.rules.podTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入出发时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.podTime,callback:function(a){e.$set(t,"podTime",a)},expression:"item.podTime"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达城市","label-width":"100px",prop:"nackPlane."+i+".arriveCity",rules:e.rules.arriveCity}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveCity,callback:function(a){e.$set(t,"arriveCity",a)},expression:"item.arriveCity"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达码头","label-width":"100px",prop:"nackPlane."+i+".arrivePlace",rules:e.rules.arrivePlace}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达码头","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arrivePlace,callback:function(a){e.$set(t,"arrivePlace",a)},expression:"item.arrivePlace"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"到达时间","label-width":"100px",prop:"nackPlane."+i+".arriveTime",rules:e.rules.arriveTime}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入到达时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.arriveTime,callback:function(a){e.$set(t,"arriveTime",a)},expression:"item.arriveTime"}})],1),e._v(" "),a("el-select",{staticClass:"day",attrs:{placeholder:"当日"},model:{value:t.planeDay,callback:function(a){e.$set(t,"planeDay",a)},expression:"item.planeDay"}},e._l(e.goDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{attrs:{type:"card",closable:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.lineshow,expression:"lineshow"}],staticClass:"transit_border"}),e._v(" "),e._l(t.ext_Stopover,function(t,l){return a("div",{key:l,staticClass:"abc",attrs:{type:"text"}},[a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停城市",prop:"stopCity"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停城市","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopCity,callback:function(a){e.$set(t,"stopCity",a)},expression:"iteml.stopCity"}})],1)],1),e._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经停时间",prop:"stopDate"}},[a("el-autocomplete",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入经停时间","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.stopDate,callback:function(a){e.$set(t,"stopDate",a)},expression:"iteml.stopDate"}})],1)],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(t){e.reDeleteItem(l,i)}}},[e._v("删除")])],1)})],2),e._v(" "),a("div",{staticClass:"transit"},[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},on:{click:function(t){e.reStopping(i)}}},[e._v("添加经停")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteTransit,expression:"deleteTransit"}],staticClass:"addTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=i,expression:"index !='0'"}]},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.reDeletePanel(i)}}},[e._v("删除中转")])],1)])]):e._e()])})],2):e._e(),e._v(" "),1==i?a("div",{staticClass:"traffic_border"},[a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)]):e._e()])})],2)]),e._v(" "),a("el-tab-pane",{attrs:{label:"日程信息",name:"note"}},[a("div",{staticClass:"traffic"},[a("div",{staticClass:"traffic_title"},[e._v("日程信息")]),e._v(" "),a("div",{staticClass:"details_border"},[e._l(e.ruleForm.schedules,function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i==e.mynumber,expression:" index == mynumber"}],key:i},[a("div",{staticClass:"date"},[e._v("DAY"+e._s(i+1))]),e._v(" "),a("div",{staticClass:"plane"},[a("div",{staticClass:"aviation"},[a("el-form-item",{staticStyle:{float:"left",margin:"30px 0 0 0"},attrs:{label:"主题","label-width":"100px",prop:"schedules."+i+".subject",rules:e.rules.subject}},[a("el-input",{staticClass:"inputBox",attrs:{clearable:"",placeholder:"请输入主题","fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:t.subject,callback:function(a){e.$set(t,"subject",a)},expression:"item.subject"}})],1)],1),e._v(" "),a("div",{staticClass:"aviation"},[a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"aviation_text"},[e._v("住宿")]),e._v(" "),a("div",{staticClass:"type_radio",staticStyle:{margin:"10px 0 0 0"}},[a("div",[a("span",[a("el-radio",{attrs:{label:"0"},model:{value:e.myradio[i].lable,callback:function(t){e.$set(e.myradio[i],"lable",t)},expression:"myradio[index].lable"}},[e._v("酒店")])],1),e._v(" "),a("span",[a("el-radio",{attrs:{label:"1"},model:{value:e.myradio[i].lable,callback:function(t){e.$set(e.myradio[i],"lable",t)},expression:"myradio[index].lable"}},[e._v("其他")])],1),e._v(" "),a("div",{staticClass:"explain"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.myradio[i].lable,expression:"myradio[index].lable=='1'"}]},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.ext_Hotel.Details,callback:function(a){e.$set(t.ext_Hotel,"Details",a)},expression:"item.ext_Hotel.Details"}})],1)])])])])]),e._v(" "),a("div",{staticClass:"aviation"},[a("div",{staticClass:"food_text"},[e._v("餐饮")])]),e._v(" "),e._l(t.ext_Meals,function(t,i){return a("div",{key:i,staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"food_radio",staticStyle:{"line-height":"40px"}},[a("div",{staticClass:"repast"},[e._v(e._s(t.label))]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:t.Myself,callback:function(a){e.$set(t,"Myself",a)},expression:"it.Myself"}},[e._v("自理")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.Myself,callback:function(a){e.$set(t,"Myself",a)},expression:"it.Myself"}},[e._v("详细说明")])],1),e._v(" "),a("div",{staticClass:"aviation_first"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.Myself,expression:"it.Myself=='1'"}]},[a("el-input",{staticClass:"state",attrs:{placeholder:"餐饮说明"},model:{value:t.Detail,callback:function(a){e.$set(t,"Detail",a)},expression:"it.Detail"}})],1)])])])}),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("详情")]),e._v(" "),a("div",{staticClass:"cost_content",staticStyle:{background:"#FFFFFF"}},[a("vue-editor",{model:{value:e.content_02,callback:function(t){e.content_02=t},expression:"content_02"}})],1)]),e._v(" "),a("div",{staticClass:"date"},[e._v("活动详情")]),e._v(" "),a("div",{staticClass:"hotel_button"},[a("el-button",{staticStyle:{margin:"20px 0 0 20px"},attrs:{type:"primary"},on:{click:function(t){e.addDetails(i)}}},[e._v("添加详情")])],1),e._v(" "),a("div",{staticClass:"aviation"},e._l(t.activitys,function(t,l){return a("div",{key:l,staticStyle:{width:"100%"}},[a("div",{staticClass:"explain"},[a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("el-radio-group",{staticStyle:{"margin-left":"55px"},on:{change:function(a){e.diaoyong(t.activityType,l,i)}},model:{value:t.activityType,callback:function(a){e.$set(t,"activityType",a)},expression:"item.activityType"}},e._l(e.details,function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",[a("div",{staticClass:"explain"},[1==t.activityType?a("div",[a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("城市")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入城市"},model:{value:t.typeExt,callback:function(a){e.$set(t,"typeExt",a)},expression:"item.typeExt"}})],1),e._v(" "),a("div",{staticClass:"aviation_text"},[e._v("活动时间")]),e._v(" "),a("div",{staticClass:"city_input"},[a("el-input",{attrs:{placeholder:""},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"item.time"}})],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")])]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("景点名称")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入景点名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("详细说明")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入详细说明"},model:{value:t.details,callback:function(a){e.$set(t,"details",a)},expression:"item.details"}})],1)]),e._v(" "),a("div",{staticClass:"dashed"},[e._v(" ")]),e._v(" "),a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"aviation_text"},[e._v("图片")]),e._v(" "),a("div",{staticClass:"aviation_input",staticStyle:{position:"relative"}},[a("el-input",{attrs:{placeholder:"请输入图片内容"},model:{value:t.pictureID,callback:function(a){e.$set(t,"pictureID",a)},expression:"item.pictureID"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList2,"list-type":"picture"}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("简介")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入简介内容"},model:{value:t.memo,callback:function(a){e.$set(t,"memo",a)},expression:"item.memo"}})],1)])]):e._e(),e._v(" "),2==t.activityType?a("div",[a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("名称")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("div",{staticClass:"aviation_text"},[e._v("活动时间")]),e._v(" "),a("div",{staticClass:"city_input"},[a("el-input",{attrs:{placeholder:""},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"item.time"}})],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")])]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("营业产品")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入营业产品"},model:{value:t.typeExt,callback:function(a){e.$set(t,"typeExt",a)},expression:"item.typeExt"}})],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("详细说明")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入详细说明"},model:{value:t.details,callback:function(a){e.$set(t,"details",a)},expression:"item.details"}})],1)]),e._v(" "),a("div",{staticClass:"dashed"},[e._v(" ")]),e._v(" "),a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"aviation_text"},[e._v("图片")]),e._v(" "),a("div",{staticClass:"aviation_input",staticStyle:{position:"relative"}},[a("el-input",{attrs:{placeholder:"请输入图片内容"},model:{value:t.pictureID,callback:function(a){e.$set(t,"pictureID",a)},expression:"item.pictureID"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList2,"list-type":"picture"}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("简介")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入简介内容"},model:{value:t.memo,callback:function(a){e.$set(t,"memo",a)},expression:"item.memo"}})],1)])]):e._e(),e._v(" "),3==t.activityType?a("div",[a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("名称")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("div",{staticClass:"aviation_text"},[e._v("活动时间")]),e._v(" "),a("div",{staticClass:"city_input"},[a("el-input",{attrs:{placeholder:""},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"item.time"}})],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("分钟")])]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{padding:"20px 0 0 0"}},[a("div",{staticClass:"aviation_text"},[e._v("参考价格")]),e._v(" "),a("div",{staticClass:"aviation_input"},[a("el-input",{attrs:{placeholder:"请输入参考价格"},model:{value:t.typeExt,callback:function(a){e.$set(t,"typeExt",a)},expression:"item.typeExt"}})],1),e._v(" "),a("div",{staticClass:"minutes"},[e._v("元/人")])]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("详细说明")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入详细说明"},model:{value:t.details,callback:function(a){e.$set(t,"details",a)},expression:"item.details"}})],1)]),e._v(" "),a("div",{staticClass:"dashed"},[e._v(" ")]),e._v(" "),a("div",{staticClass:"aviation_first"},[a("div",{staticClass:"aviation_text"},[e._v("图片")]),e._v(" "),a("div",{staticClass:"aviation_input",staticStyle:{position:"relative"}},[a("el-input",{attrs:{placeholder:"请输入图片内容"},model:{value:t.pictureID,callback:function(a){e.$set(t,"pictureID",a)},expression:"item.pictureID"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList2,"list-type":"picture"}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"aviation",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"aviation_text"},[e._v("简介")]),e._v(" "),a("div",{staticClass:"textarea"},[a("el-input",{staticClass:"text_input",attrs:{type:"textarea",rows:3,placeholder:"请输入简介内容"},model:{value:t.memo,callback:function(a){e.$set(t,"memo",a)},expression:"item.memo"}})],1)])]):e._e(),e._v(" "),a("div",{staticClass:"stop"},[a("el-button",{staticClass:"stop_button",on:{click:function(t){e.deleteDetails(l,i)}}},[e._v("删除详情")])],1)])])])])}))],2)])}),e._v(" "),a("div",{staticClass:"DAY"},e._l(e.myTravelDay,function(t,i){return a("div",{key:i,staticClass:"DAY_two",class:{myactive:i==e.mynumber},on:{click:function(t){e.tabTravel(i)}}},[e._v("DAY"+e._s(t+1))])}))],2)])])],1)],1)])}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.comboshow,expression:"comboshow"}],staticClass:"popup"},[a("div",{staticClass:"mask"}),e._v(" "),a("div",{staticClass:"add"},[a("div",{staticClass:"label"},[a("div",{staticClass:"left"},[e._v("信息")]),e._v(" "),a("div",{staticClass:"right",on:{click:e.close}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"text"},[e._v("是否删除该套餐")]),e._v(" "),a("div",{staticClass:"judge"},[a("el-button",{on:{click:e.close}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hotelshow,expression:"hotelshow"}],staticClass:"popup"},[a("div",{staticClass:"mask"}),e._v(" "),a("div",{staticClass:"add"},[a("div",{staticClass:"label"},[a("div",{staticClass:"left"},[e._v("信息")]),e._v(" "),a("div",{staticClass:"right",on:{click:e.cloceHotel}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"text"},[e._v("是否删除该酒店套餐")]),e._v(" "),a("div",{staticClass:"judge"},[a("el-button",{on:{click:e.cloceHotel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.shutHotel}},[e._v("确定")])],1)])])])])])],1)],1)],1)},staticRenderFns:[]};var Ke=a("VU/8")(Qe,Ze,!1,function(e){a("79vw")},"data-v-0fe8aa54",null).exports,et={data:function(){return{guid:"",groupList:[],multipleSelection:[],forbidden:!0,currentPage:1,pagesize:10,pageIndex:1,total:0,title:"",dialogFormVisible:!1,rformA:{name:"",mobile:"",idCard:"",passport:"",source:"",sex:"",reason:"",cityID:"",mark:""},rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],mobile:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^1(3|4|5|7|8)\d{9}$/,message:"请输入11位正确的手机号码"}],idCard:[{required:!0,message:"不能为空",trigger:"blur"}],passport:[{required:!0,message:"不能为空",trigger:"blur"}],source:[{required:!0,message:"不能为空",trigger:"blur"}],sex:[{required:!0,message:"不能为空",trigger:"blur"}],reason:[{required:!0,message:"不能为空",trigger:"blur"}],cityID:[{required:!0,message:"不能为空",trigger:"blur"}]}}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},changeFun:function(e){this.multipleSelection=e,1==this.multipleSelection.length?this.forbidden=!1:this.forbidden=!0},clickRow:function(e){this.$refs.multipleTable.toggleRowSelection(e)},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.multipleSelection.length;a++)if(this.multipleSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},handleSizeChange:function(e){this.pageSize=e,this.pageIndex=1},handleCurrentChange:function(e){this.pageIndex=e},saveModule:function(e){"添加黑名单"==this.title?this.addLabelTheme(e):this.editLabelTheme(e)},addBlackList:function(){this.title="添加黑名单",this.dialogFormVisible=!0},editBlackList:function(){this.getLabel(),this.title="编辑黑名单",this.dialogFormVisible=!0},cancel:function(){this.dialogFormVisible=!1,this.$refs.rformA.resetFields()},getLabel:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/order/blacklist/api/get",{id:this.multipleSelection[0].id}).then(function(t){if(1==t.data.isSuccess){var a=t.data.object;e.rformA.name=a.name,e.rformA.mobile=a.mobile,e.rformA.idCard=a.idCard,e.rformA.passport=a.passport,e.rformA.source=a.source,e.rformA.sex=a.sex,e.rformA.reason=a.reason,e.rformA.cityID=a.cityID,e.rformA.mark=a.mark}})},addLabelTheme:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;t.$http.post(t.GLOBAL.serverSrc+"/order/blacklist/api/insert",{object:{id:0,isDeleted:0,name:t.rformA.name,mobile:t.rformA.mobile,idCard:t.rformA.idCard,passport:t.rformA.passport,source:t.rformA.source,sex:t.rformA.sex,reason:t.rformA.reason,cityID:t.rformA.cityID,mark:t.rformA.mark,createTime:0}}).then(function(a){1==a.data.isSuccess?(t.pageList(),t.dialogFormVisible=!1,t.$refs[e].resetFields()):t.$message.success("添加失败")})})},editLabelTheme:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/order/blacklist/api/save",{object:{id:this.multipleSelection[0].id,isDeleted:0,name:this.rformA.name,mobile:this.rformA.mobile,idCard:this.rformA.idCard,passport:this.rformA.passport,source:this.rformA.source,sex:this.rformA.sex,reason:this.rformA.reason,cityID:this.rformA.cityID,mark:this.rformA.mark,createTime:0}}).then(function(a){1==a.data.isSuccess?(t.pageList(),t.dialogFormVisible=!1,t.$refs[e].resetFields()):t.$message.success(a.data.result.message)}).catch(function(e){console.log(e)})},deleteLabel:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.GLOBAL.serverSrc+"/order/blacklist/api/delete",{id:e.multipleSelection[0].id}).then(function(t){1==t.data.isSuccess&&(e.$message.success("删除成功"),e.pageList())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},pageList:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/order/blacklist/api/page",{object:{isDeleted:0},pageSize:this.pagesize,pageIndex:this.currentPage}).then(function(t){e.total=t.data.total,e.groupList=t.data.objects,e.groupList.forEach(function(e,t,a){0==a[t].sex?a[t].sex="男":1==a[t].sex&&(a[t].sex="女"),0==a[t].reason?a[t].reason="未选择":1==a[t].reason?a[t].reason="游客恶意报名":2==a[t].reason?a[t].reason="同业恶意下单":3==a[t].reason?a[t].reason="同业恶意占位":4==a[t].reason?a[t].reason="游客黑名单":5==a[t].reason&&(a[t].reason="同业黑名单")}),console.log(t.data.objects)}).catch(function(e){console.log(e)})}},mounted:function(){this.pageList()}},tt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"button"},[a("el-button",{on:{click:function(t){e.addBlackList()}}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:function(t){e.editBlackList()}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:e.deleteLabel}},[e._v("删除")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.groupList,"header-cell-style":e.getRowClass,border:"","row-style":e.rowClass},on:{"selection-change":e.changeFun,"row-click":e.clickRow}},[a("el-table-column",{attrs:{prop:"number",fixed:"",label:"",type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"黑名单名称","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话","min-width":"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCard",label:"身份证号","min-width":"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"passport",label:"护照","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"原因","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityID",label:"城市","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",label:"黑名单备注信息","min-width":"180",align:"center"}})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"page-sizes":[10,20,30,50],background:"","page-size":e.pagesize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px",center:"","custom-class":"city_list"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancel}},[a("el-form",{ref:"rformA",attrs:{model:e.rformA,"label-width":"100px",rules:e.rules}},[a("el-form-item",{staticClass:"addContact_span",attrs:{label:"黑名单名称",prop:"name"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入黑名单名称"},model:{value:e.rformA.name,callback:function(t){e.$set(e.rformA,"name",t)},expression:"rformA.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"联系电话",prop:"mobile"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入联系电话"},model:{value:e.rformA.mobile,callback:function(t){e.$set(e.rformA,"mobile",t)},expression:"rformA.mobile"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入身份证号"},model:{value:e.rformA.idCard,callback:function(t){e.$set(e.rformA,"idCard",t)},expression:"rformA.idCard"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"护照",prop:"passport"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入护照"},model:{value:e.rformA.passport,callback:function(t){e.$set(e.rformA,"passport",t)},expression:"rformA.passport"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"来源",prop:"source"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入来源"},model:{value:e.rformA.source,callback:function(t){e.$set(e.rformA,"source",t)},expression:"rformA.source"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"性别",prop:"sex"}},[a("el-select",{staticClass:"addContact_name",attrs:{placeholder:"请选择性别"},model:{value:e.rformA.sex,callback:function(t){e.$set(e.rformA,"sex",t)},expression:"rformA.sex"}},[a("el-option",{attrs:{label:"男",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"原因",prop:"reason"}},[a("el-select",{staticClass:"addContact_name",attrs:{placeholder:"请选择原因"},model:{value:e.rformA.reason,callback:function(t){e.$set(e.rformA,"reason",t)},expression:"rformA.reason"}},[a("el-option",{attrs:{label:"未选择",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"游客恶意报名",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"同业恶意下单",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"同业恶意占位",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"游客黑名单",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"同业黑名单",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"城市",prop:"cityID"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入城市"},model:{value:e.rformA.cityID,callback:function(t){e.$set(e.rformA,"cityID",t)},expression:"rformA.cityID"}})],1),e._v(" "),a("el-form-item",{staticClass:"addContact_span",attrs:{label:"备注",prop:"mark"}},[a("el-input",{staticClass:"addContact_name",attrs:{"auto-complete":"off",placeholder:"请输入备注"},model:{value:e.rformA.mark,callback:function(t){e.$set(e.rformA,"mark",t)},expression:"rformA.mark"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveModule("rformA")}}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var at=a("VU/8")(et,tt,!1,function(e){a("g8D9")},"data-v-47e7b86c",null).exports,it={name:"merchantInfo",data:function(){return{tid:0,pagesize:10,total:1,currentPage4:4,ruleForm:{name:"",localCompType:"",state:"",expTime:"",settlementType:"",quota:"",department:"",people:"",scopeExt:[],address:"",linker:"",phone:"",publicName:"",bankName:"",bankcardNo:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:40,message:"不要超过40个字符",trigger:"blur"}],localCompType:[{required:!0,message:"请选择类型",trigger:"change"}],state:[{required:!0,message:"请选择状态",trigger:"change"}],expTime:[{type:"string",required:!0,message:"请选择日期",trigger:"change"}],settlementType:[{required:!0,message:"请选择结算方式",trigger:"change"}],quota:[{required:!0,message:"请输入额度",trigger:"blur"},{pattern:/(^[\-0-9][0-9]*(.[0-9]+)?)$/,message:"请输入自然数"}],department:[{required:!0,message:"请选择类型",trigger:"change"}],people:[{required:!0,message:"请选择类型",trigger:"change"}],scopeExt:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],linker:[{required:!0,message:"请输入联系人姓名",trigger:"blur"},{max:4,message:"不要超过4个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系人电话",trigger:"blur"},{min:11,max:11,message:"请输入11位数字",trigger:"blur"},{pattern:/(^[\-0-9][0-9]*(.[0-9]+)?)$/,message:"请输入数字"}],publicName:[{required:!0,message:"请输入对公户名",trigger:"blur"},{max:40,message:"不要超过40个字符",trigger:"blur"}],bankName:[{required:!0,message:"请输入开户行",trigger:"blur"},{max:80,message:"不要超过80个字符",trigger:"blur"}],bankcardNo:[{required:!0,message:"请输入对公账户",trigger:"blur"},{max:30,message:"不要超过30个字符",trigger:"blur"}]},dialogFormVisible:!1,input:"",tableData:[]}},methods:{handleSizeChange:function(e){this.pagesize=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/localcomp/api/page",{pageIndex:1,pageSize:e,total:0,object:{}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,t,a){a[t].department="XXX",a[t].manager="阳阳",0==a[t].state?a[t].state="正常":a[t].state="停用",0==a[t].localCompType?a[t].localCompType="门店":1==a[t].localCompType?a[t].localCompType="同业":a[t].localCompType="翻盘门店",0==a[t].settlementType?a[t].settlementType="非月结":a[t].settlementType="月结"}),console.log(e.data.total)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/localcomp/api/page",{pageIndex:e,pageSize:this.pagesize,total:0,object:{}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,t,a){a[t].department="XXX",a[t].manager="阳阳",0==a[t].state?a[t].state="正常":a[t].state="停用",0==a[t].localCompType?a[t].localCompType="门店":1==a[t].localCompType?a[t].localCompType="同业":a[t].localCompType="翻盘门店",0==a[t].settlementType?a[t].settlementType="非月结":a[t].settlementType="月结"}),console.log(e.data.total)}).catch(function(e){console.log(e)}),console.log("当前页: "+e)},add_info:function(){this.tid=0,this.clear(),this.dialogFormVisible=!0},edit_info:function(){this.getOneMess(),this.dialogFormVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),console.log(t.ruleForm),!1;t.addMerchan(),t.dialogFormVisible=!1})},resetForm:function(e){this.ruleForm={name:"",localCompType:"",state:"",expTime:"",settlementType:"",quota:"",department:"",people:"",scopeExt:[],address:"",linker:"",phone:"",publicName:"",bankName:"",bankcardNo:""},this.$refs.ruleForm.resetFields(),this.dialogFormVisible=!1},editorForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),console.log(t.ruleForm),!1;t.editMerchan(),t.tid=0,t.dialogFormVisible=!1})},list:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/localcomp/api/page",{pageIndex:1,pageSize:this.pagesize,object:{}}).then(function(t){console.log(t),e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(e,t,a){a[t].department="XXX",a[t].manager="阳阳",0==a[t].state?a[t].state="正常":a[t].state="停用",0==a[t].localCompType?a[t].localCompType="门店":1==a[t].localCompType?a[t].localCompType="同业":a[t].localCompType="翻盘门店",0==a[t].settlementType?a[t].settlementType="非月结":a[t].settlementType="月结"}),console.log(t.data.total)}).catch(function(e){console.log(e)})},addMerchan:function(){"停用"==this.ruleForm.state?this.ruleForm.state=1:this.ruleForm.state=0,"非月结"==this.ruleForm.settlementType?this.ruleForm.settlementType=0:this.ruleForm.settlementType=1,0==this.ruleForm.settlementType&&(this.ruleForm.quota=0),this.ruleForm.scopeExt=this.ruleForm.scopeExt.join(",");var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/localcomp/api/insert",{object:this.ruleForm}).then(function(t){e.list()}).catch(function(e){console.log(e)})},editMerchan:function(){if("停用"==this.ruleForm.state?this.ruleForm.state=1:this.ruleForm.state=0,"非月结"==this.ruleForm.settlementType?this.ruleForm.settlementType=0:this.ruleForm.settlementType=1,0==this.ruleForm.settlementType&&(this.ruleForm.quota=0),this.ruleForm.scopeExt=this.ruleForm.scopeExt.join(","),this.ruleForm.expTime.indexOf("-")>0){var e;e=this.ruleForm.expTime.substring(0,4)+this.ruleForm.expTime.substring(5,7)+this.ruleForm.expTime.substring(8,10),this.ruleForm.expTime=e}this.ruleForm.id=this.tid;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/localcomp/api/save",{object:this.ruleForm}).then(function(e){t.list()}).catch(function(e){console.log(e)}),console.log(this.ruleForm)},clear:function(){this.ruleForm={name:"",localCompType:"",state:"",expTime:"",settlementType:"",quota:"",department:"",people:"",scopeExt:[],address:"",linker:"",phone:"",publicName:"",bankName:"",bankcardNo:""},void 0!==this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},getOneMess:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/localcomp/api/get",{id:this.tid}).then(function(t){e.ruleForm.name=t.data.object.name,e.ruleForm.localCompType=String(t.data.object.localCompType),0==t.data.object.state?e.ruleForm.state="正常":e.ruleForm.state="停用";var a;a=String(t.data.object.expTime).substring(0,4)+"-"+String(t.data.object.expTime).substring(4,6)+"-"+String(t.data.object.expTime).substring(6,8),e.ruleForm.expTime=String(a),0==t.data.object.settlementType?e.ruleForm.settlementType="非月结":e.ruleForm.settlementType="月结",e.ruleForm.quota=t.data.object.quota,e.ruleForm.department="1",e.ruleForm.people="2",e.ruleForm.scopeExt=t.data.object.scopeExt.split(","),e.ruleForm.address=t.data.object.address,e.ruleForm.linker=t.data.object.linker,e.ruleForm.phone=t.data.object.phone,e.ruleForm.publicName=t.data.object.publicName,e.ruleForm.bankName=t.data.object.bankName,e.ruleForm.bankcardNo=t.data.object.bankcardNo}).catch(function(e){console.log(e)})},rowDelete:function(){this.$http.post(this.GLOBAL.serverSrc+"/universal/localcomp/api/delete",{id:this.tid}).then(function(e){}).catch(function(e){console.log(e)})},open7:function(){var e=this;this.$confirm("此操作将永久删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.rowDelete(),e.list(),e.tid=0,e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleClick:function(e,t,a){this.tid=e.id}},created:function(){this.list()}},lt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"search"},[e._v("\n      搜索\n      "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入商户名称"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)]),e._v(" "),a("div",{staticClass:"button_style"},[a("el-button",{attrs:{type:"primary"},on:{click:e.add_info}},[e._v("添加")]),e._v(" "),e.tid<=0?a("el-button",{attrs:{type:"primary",disabled:""}},[e._v("编辑")]):a("el-button",{attrs:{type:"primary"},on:{click:e.edit_info}},[e._v("编辑")]),e._v(" "),e.tid<=0?a("el-button",{attrs:{type:"danger",disabled:"",plain:""},on:{click:e.open7}},[e._v("删除")]):a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.open7}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"info_table"},[a("el-table",{staticStyle:{width:"82%"},attrs:{data:e.tableData,border:"","highlight-current-row":!0},on:{"row-click":e.handleClick}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["停用"==t.row.state?[a("div",{staticStyle:{color:"red"}},[e._v(e._s(t.row.state))])]:[a("div",[e._v(e._s(t.row.state))])]]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"localCompType",label:"商户类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"linker",label:"联系人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"所属部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"manager",label:"区域经理",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"settlementType",label:"结算方式",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quota",label:"额度",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrears",label:"剩余额度",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"总欠款",width:"120",align:"center"}})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage4=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"商户信息",visible:e.dialogFormVisible,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticStyle:{height:"600px",width:"900px"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("div",{staticClass:"saf",staticStyle:{float:"left"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"localCompType"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.localCompType,callback:function(t){e.$set(e.ruleForm,"localCompType",t)},expression:"ruleForm.localCompType"}},[a("el-option",{attrs:{label:"门店",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"同业",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"翻盘门店",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-radio-group",{model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},[a("el-radio",{attrs:{label:"停用"}}),e._v(" "),a("el-radio",{attrs:{label:"正常"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时间",required:""}},[a("el-form-item",{attrs:{prop:"expTime"}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyyMMdd",format:"yyyy-MM-dd"},model:{value:e.ruleForm.expTime,callback:function(t){e.$set(e.ruleForm,"expTime",t)},expression:"ruleForm.expTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"结算方式",prop:"settlementType"}},[a("el-radio-group",{model:{value:e.ruleForm.settlementType,callback:function(t){e.$set(e.ruleForm,"settlementType",t)},expression:"ruleForm.settlementType"}},[a("el-radio",{attrs:{label:"月结"}}),e._v(" "),a("el-radio",{attrs:{label:"非月结"}})],1)],1),e._v(" "),"月结"==e.ruleForm.settlementType?a("el-form-item",{attrs:{label:"额度",prop:"quota"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.quota,callback:function(t){e.$set(e.ruleForm,"quota",t)},expression:"ruleForm.quota"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"部们-管理",prop:"department"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择部门"},model:{value:e.ruleForm.department,callback:function(t){e.$set(e.ruleForm,"department",t)},expression:"ruleForm.department"}},[a("el-option",{attrs:{label:"门店",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"同业",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"翻盘门店",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"people"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择人员"},model:{value:e.ruleForm.people,callback:function(t){e.$set(e.ruleForm,"people",t)},expression:"ruleForm.people"}},[a("el-option",{attrs:{label:"门店",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"同业",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"翻盘门店",value:"2"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"ty",staticStyle:{float:"left","margin-left":"100px"}},[a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人姓名",prop:"linker"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.linker,callback:function(t){e.$set(e.ruleForm,"linker",t)},expression:"ruleForm.linker"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人电话",prop:"phone"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"对公户名",prop:"publicName"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.publicName,callback:function(t){e.$set(e.ruleForm,"publicName",t)},expression:"ruleForm.publicName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户行",prop:"bankName"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.bankName,callback:function(t){e.$set(e.ruleForm,"bankName",t)},expression:"ruleForm.bankName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"对公账号",prop:"bankcardNo"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.bankcardNo,callback:function(t){e.$set(e.ruleForm,"bankcardNo",t)},expression:"ruleForm.bankcardNo"}})],1)],1),e._v(" "),a("div",{staticClass:"rrr",staticStyle:{float:"left"}},[a("el-form-item",{attrs:{label:"经营范围",prop:"scopeExt"}},[a("el-checkbox-group",{model:{value:e.ruleForm.scopeExt,callback:function(t){e.$set(e.ruleForm,"scopeExt",t)},expression:"ruleForm.scopeExt"}},[a("el-checkbox",{attrs:{label:"出境",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"入境",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"国内",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"赴台游",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"住宿",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"票务",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"邮轮",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"汽车租赁",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"保险",name:"scopeExt"}}),e._v(" "),a("el-checkbox",{attrs:{label:"其他",name:"scopeExt"}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"ButtonCls"},[0==e.tid?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editorForm("ruleForm")}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)])],1)},staticRenderFns:[]};var st=a("VU/8")(it,lt,!1,function(e){a("jah/")},"data-v-1cca19ff",null).exports;function ot(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate();i=i<10?"0"+i:i;var l=e.getHours();l=l<10?"0"+l:l;var s=e.getMinutes();s=s<10?"0"+s:s;var o=e.getSeconds();return t+"-"+a+"-"+i+" "+l+":"+s+":"+(o=o<10?"0"+o:o)}var rt={data:function(){return{guid:"",groupList:[],multipleSelection:[],forbidden:!0,title:"",dialogFormVisible:!1,rformB:{name:"",route:"",key:""},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],route:[{required:!0,message:"路径不能为空",trigger:"blur"}],key:[{required:!0,message:"控件ID不能为空",trigger:"blur"}]}}},created:function(){this.controlList()},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},changeFun:function(e){this.multipleSelection=e,this.multipleSelection.length>0?this.forbidden=!1:this.forbidden=!0},clickRow:function(e){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(e)},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.multipleSelection.length;a++)if(this.multipleSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},controlList:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/control/api/list",{object:{guid:this.$route.query.guid}}).then(function(t){1==t.data.isSuccess&&(e.groupList=t.data.objects)})},delControl:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.GLOBAL.serverSrc+"/org/control/api/delete",{id:e.multipleSelection[0].id}).then(function(t){1==t.data.isSuccess&&(e.$message.success("删除成功"),e.controlList())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},saveControl:function(e){"增加权限"==this.title?this.insertControl(e):this.editControl(e)},editControlO:function(){this.getControl(),this.title="编辑权限",this.dialogFormVisible=!0},getControl:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/control/api/get",{id:this.multipleSelection[0].id}).then(function(t){if(1==t.data.isSuccess){var a=t.data.object;e.rformB=a}})},editControl:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;t.$http.post(t.GLOBAL.serverSrc+"/org/control/api/save",{object:{id:t.multipleSelection[0].id,createTime:ot(new Date),isDeleted:0,code:"string",name:t.rformB.name,route:t.rformB.route,guid:t.multipleSelection[0].guid,key:t.rformB.key,leaf:0}}).then(function(a){1==a.data.isSuccess?(t.controlList(),t.dialogFormVisible=!1,t.$refs[e].resetFields()):t.$message.success(a.data.result.message)})})},insertControlO:function(){this.title="增加权限",this.dialogFormVisible=!0},insertControl:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;t.$http.post(t.GLOBAL.serverSrc+"/org/control/api/insert",{object:{id:0,name:t.rformB.name,route:t.rformB.route,key:t.rformB.key,guid:t.$route.query.guid}}).then(function(a){1==a.data.isSuccess?(t.controlList(),t.dialogFormVisible=!1,t.$refs[e].resetFields()):t.$message.success(a.data.result.message)})})},cancel:function(){this.dialogFormVisible=!1,this.$refs.rformB.resetFields()}}},nt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"button"},[a("el-button",{on:{click:e.insertControlO}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:e.delControl}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:e.editControlO}},[e._v("编辑")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.groupList,"header-cell-style":e.getRowClass,border:"","row-style":e.rowClass},on:{"selection-change":e.changeFun,"row-click":e.clickRow}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"route",label:"路径","min-width":"280"}}),e._v(" "),a("el-table-column",{attrs:{prop:"key",label:"控件ID","min-width":"150"}})],1),e._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancel}},[a("el-form",{ref:"rformB",staticClass:"demo-ruleForm",attrs:{model:e.rformB,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.rformB.name,callback:function(t){e.$set(e.rformB,"name",t)},expression:"rformB.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路径",prop:"route"}},[a("el-input",{model:{value:e.rformB.route,callback:function(t){e.$set(e.rformB,"route",t)},expression:"rformB.route"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"控件ID",prop:"key"}},[a("el-input",{model:{value:e.rformB.key,callback:function(t){e.$set(e.rformB,"key",t)},expression:"rformB.key"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){e.saveControl("rformB")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ct=a("VU/8")(rt,nt,!1,function(e){a("E4Hy")},"data-v-64e3e1c6",null).exports,dt={data:function(){return{guid:"",groupList:[],multipleSelection:[],forbidden:!0,pageSize:10,pageIndex:1,total:0,title:"",dialogFormVisible:!1,rformA:{name:"",uri:"",parentID:""},rules:{name:[{required:!0,message:"功能名称不能为空",trigger:"blur"}],uri:[{required:!0,message:"页面地址不能为空",trigger:"blur"}],parentID:[{required:!0,message:"唯一标识不能为空",trigger:"blur"}]}}},created:function(){this.moduleList()},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},changeFun:function(e){this.multipleSelection=e,this.multipleSelection.length>0?this.forbidden=!1:this.forbidden=!0},clickRow:function(e){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(e)},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.multipleSelection.length;a++)if(this.multipleSelection[a].id==t.id)return{"background-color":"#ecf5ff"}},moduleList:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/module/api/page",{pageIndex:this.pageIndex,pageSize:this.pageSize,object:{isDeleted:0}}).then(function(t){1==t.data.isSuccess&&(e.groupList=t.data.objects,e.total=t.data.total)})},delModule:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.GLOBAL.serverSrc+"/org/module/api/delete",{id:e.multipleSelection[0].id}).then(function(t){1==t.data.isSuccess&&(e.$message.success("删除成功"),e.moduleList())})}).catch(function(){e.$message({type:"info",message:"已取消"})})},controlList:function(){this.$router.push({path:"/controlList?guid="+this.multipleSelection[0].guid})},handleSizeChange:function(e){this.pageSize=e,this.pageIndex=1,this.moduleList()},handleCurrentChange:function(e){this.pageIndex=e,this.moduleList()},saveModule:function(e){"增加模块"==this.title?this.insertModule(e):this.editModule(e)},editModuleO:function(){this.getModule(),this.title="编辑模块",this.dialogFormVisible=!0},getModule:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/module/api/get",{id:this.multipleSelection[0].id}).then(function(t){if(1==t.data.isSuccess){var a=t.data.object;e.rformA=a}})},editModule:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;t.$http.post(t.GLOBAL.serverSrc+"/org/module/api/save",{object:{id:t.multipleSelection[0].id,createTime:ot(new Date),isDeleted:0,code:"string",name:t.rformA.name,uri:t.rformA.uri,guid:t.multipleSelection[0].guid,parentID:t.rformA.parentID,leaf:0}}).then(function(a){1==a.data.isSuccess?(t.moduleList(),t.dialogFormVisible=!1,t.$refs[e].resetFields()):t.$message.success(a.data.result.message)})})},insertModuleO:function(){this.title="增加模块",this.dialogFormVisible=!0},insertModule:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;t.$http.post(t.GLOBAL.serverSrc+"/universal/utinity/api/getguid",{object:!0}).then(function(a){1==a.data.isSuccess?(t.guid=a.data.object,t.$http.post(t.GLOBAL.serverSrc+"/org/module/api/insert",{object:{id:0,createTime:ot(new Date),isDeleted:0,code:"string",name:t.rformA.name,uri:t.rformA.uri,guid:t.guid,parentID:t.rformA.parentID,leaf:0}}).then(function(a){1==a.data.isSuccess?(t.moduleList(),t.dialogFormVisible=!1,t.$refs[e].resetFields()):t.$message.success(a.data.result.message)})):t.$message.success(a.data.result.message)})})},cancel:function(){this.dialogFormVisible=!1,this.$refs.rformA.resetFields()}}},ut={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"button"},[a("el-button",{on:{click:e.insertModuleO}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:e.delModule}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:e.editModuleO}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{disabled:e.forbidden},on:{click:e.controlList}},[e._v("权限配置")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.groupList,"header-cell-style":e.getRowClass,border:"","row-style":e.rowClass},on:{"selection-change":e.changeFun,"row-click":e.clickRow}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"功能名称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uri",label:"页面地址","min-width":"280"}}),e._v(" "),a("el-table-column",{attrs:{prop:"guid",label:"唯一标识","min-width":"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentID",label:"所属上级","min-width":"150"}})],1),e._v(" "),a("div",{staticStyle:{width:"1100px",overflow:"hidden"}},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancel}},[a("el-form",{ref:"rformA",staticClass:"demo-ruleForm",attrs:{model:e.rformA,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"功能名称",prop:"name"}},[a("el-input",{model:{value:e.rformA.name,callback:function(t){e.$set(e.rformA,"name",t)},expression:"rformA.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"页面地址",prop:"uri"}},[a("el-input",{model:{value:e.rformA.uri,callback:function(t){e.$set(e.rformA,"uri",t)},expression:"rformA.uri"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属上级",prop:"parentID"}},[a("el-input",{model:{value:e.rformA.parentID,callback:function(t){e.$set(e.rformA,"parentID",t)},expression:"rformA.parentID"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){e.saveModule("rformA")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var pt=a("VU/8")(dt,ut,!1,function(e){a("wHZD")},"data-v-79c759d4",null).exports,mt={data:function(){return{props1:{label:"name",isLeaf:"leaf"},data:"",theContinent:"",node:"",resolve:"",level:"",file:[{name:"账户管理",fileList:[{content:"用户列表"},{content:"组织列表"},{content:"职位列表"},{content:"角色列表"},{content:"用户列表"},{content:"用户列表"},{content:"组织列表"},{content:"职位列表"},{content:"角色列表"},{content:"用户列表"},{content:"用户列表"},{content:"组织列表"},{content:"职位列表"},{content:"角色列表"},{content:"用户列表"},{content:"用户列表"},{content:"组织列表"},{content:"职位列表"},{content:"角色列表"},{content:"用户列表"}]}]}},methods:{loadNode1:function(e,t){var a=this;this.node=e.data,this.resolve=t,this.level=e.level,0===e.level&&(this.list=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:-1}}).then(function(e){for(var i=0;i<e.data.objects.length;i++)a.list.push({name:e.data.objects[i].areaName,key:i,id:e.data.objects[i].id,isLeaf:e.data.objects[i].isLeaf,Hierarchy:0});t(a.list)}).catch(function(e){console.log(e)})),e.level>=1&&this.getSon(e.data.key,e.data.label,e.data.id,e.data.isLeaf,t,e.level)},getSon:function(e,t,a,i,l,s){var o=this;this.$http.post(this.GLOBAL.serverSrc+"/universal/area/api/areainforlist",{object:{parentID:a}}).then(function(e){if(o.lists=[],1==e.data.isSuccess)for(var t=0;t<e.data.objects.length;t++)0==e.data.objects[t].isDeleted&&(2==e.data.objects[t].isLeaf?o.lists.push({name:e.data.objects[t].areaName,key:t,id:e.data.objects[t].id,isLeaf:e.data.objects[t].isLeaf,leaf:!1,Hierarchy:s}):o.lists.push({name:e.data.objects[t].areaName,key:t,id:e.data.objects[t].id,isLeaf:e.data.objects[t].isLeaf,leaf:!0,Hierarchy:s}));setTimeout(function(){l(o.lists)},200)}).catch(function(e){console.log(e)})},treeClick:function(e,t){this.data=e,1==e.isLeaf&&(0==this.addAlbum?(this.geography=1,this.albumPage()):(this.picForm.destination=this.data.name,this.picForm.destinationId=this.data.id,this.leftTree1=!1))}}},ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main-container"},[a("div",{staticClass:"left-tree"},[a("el-tree",{ref:"refTree",staticClass:"treeDemo",attrs:{props:e.props1,load:e.loadNode1,lazy:"","expand-on-click-node":!1,"node-key":"id"},on:{"node-click":e.treeClick}})],1),e._v(" "),a("div",{staticStyle:{float:"left",margin:"0 0 0 30px"}},e._l(e.file,function(t){return a("div",{staticClass:"check"},[a("div",{staticClass:"checkTitle"},[a("i",{staticClass:"el-icon-caret-right",staticStyle:{color:"#F38F00"}}),e._v(" "),a("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.fileList,function(t){return a("el-checkbox",{key:t.value,staticStyle:{margin:"0 30px 0 0"}},[e._v(e._s(t.content))])})],2)}))])])},staticRenderFns:[]};var ft=a("VU/8")(mt,ht,!1,function(e){a("++fU")},"data-v-f1f80150",null).exports;function gt(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var vt={props:{orderId:0,variable:0,dialogType:0},data:function(){return{dialogFormProcess:!1,orderget:{},teampreviewData:{},ruleForm:{contactName:"",contactPhone:"",type:0,remark:"",price:"1",otherCost:0,otherCostRemark:"",allDiscount:0,allDisRemark:""},dialogFormNum:!1,cancelType:1,quota:[],enrolNum:[],enrolNumCopy:[],enrolNums:!1,number:0,dialogFormTour:!1,salePrice:[],salePriceNum:[],tourType:0,fillIndex:0,preLength:[],preLengthCopy:[],tour:[],tourCopy:[],winTitle:"",conForm:{id:0,isDeleted:0,code:"",cnName:"",enName:"",sex:"",mobile:"",idCard:"",bornDate:0,credType:"",credCode:"",credTOV:0,orderID:0,orderCode:"string",orgID:0,userID:0},rules:{price:[{required:!0,message:"请选择价格",trigger:"change"}],otherCost:[{required:!0,message:"请输入其他费用",trigger:"blur"},{pattern:/^(([+]?\d*$)|(^[+]?\d+(\.\d+)?$))/,message:"必须为数字值，并且不允许是负数"}],allDiscount:[{required:!0,message:"请输入整体优惠",trigger:"blur"},{pattern:/^(([+]?\d*$)|(^[+]?\d+(\.\d+)?$))/,message:"必须为数字值，并且不允许是负数"}],payable:[{required:!0,message:"价格不能为空"}],cnName:[{required:!0,message:"请输入姓名",trigger:"blur"}],enName:[{required:!0,message:"请输入姓（拼音）",trigger:"blur"},{pattern:/(a[io]?|ou?|e[inr]?|ang?|ng|[bmp](a[io]?|[aei]ng?|ei|ie?|ia[no]|o|u)|pou|me|m[io]u|[fw](a|[ae]ng?|ei|o|u)|fou|wai|[dt](a[io]?|an|e|[aeio]ng|ie?|ia[no]|ou|u[ino]?|uan)|dei|diu|[nl](a[io]?|ei?|[eio]ng|i[eu]?|i?ang?|iao|in|ou|u[eo]?|ve?|uan)|nen|lia|lun|[ghk](a[io]?|[ae]ng?|e|ong|ou|u[aino]?|uai|uang?)|[gh]ei|[jqx](i(ao?|ang?|e|ng?|ong|u)?|u[en]?|uan)|([csz]h?|r)([ae]ng?|ao|e|i|ou|u[ino]?|uan)|[csz](ai?|ong)|[csz]h(ai?|uai|uang)|zei|[sz]hua|([cz]h|r)ong|y(ao?|[ai]ng?|e|i|ong|ou|u[en]?|uan))/,message:"姓（拼音）格式不正确",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/,message:"手机号格式不正确",trigger:"blur"}],idCard:[{required:!0,message:"身份证号不能为空",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"身份证号格式不正确",trigger:"blur"}]}}},created:function(){},watch:{variable:function(){1==this.dialogType&&(this.processManage(this.orderId),this.dialogFormProcess=!0)},enrolNum:function(e){this.changeQuota(),this.compPrice()},"ruleForm.otherCost":function(e){this.compPrice()},"ruleForm.allDiscount":function(e){this.compPrice()},"ruleForm.type":function(e){this.changeQuota()}},methods:{processManage:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/order/all/api/orderget",{id:e}).then(function(e){if(1==e.data.isSuccess){switch(t.orderget=e.data.object,t.orderget.orderStatus){case 7:t.ruleForm.type=10;break;case 10:t.ruleForm.type=1;break;case 1:t.ruleForm.type=2;break;case 3:t.ruleForm.type=9}t.ruleForm.contactName=JSON.parse(e.data.object.contact).Name,t.ruleForm.contactPhone=JSON.parse(e.data.object.contact).Tel,t.dialogFormProcess=!0,t.teamEnrolls(e.data.object.planID),t.teampreview(e.data.object.planID)}}).catch(function(e){console.log(e)})},orderModification:function(e){var t=this,a="/order/stat/api";switch(e){case 10:a+="/confirmed";break;case 1:a+="/material";break;case 2:a+="/econtract";break;case 9:a+="/invalid"}if(this.ordersave(),0==e)return!1;this.$http.post(this.GLOBAL.serverSrc+a,{object:{id:this.orderget.id}}).then(function(e){1==e.data.isSuccess&&(t.$message({message:"提交成功",type:"success"}),t.processManage(t.orderId),t.$emit("orderPage"))})},changeNum:function(){this.ruleForm.otherCost=this.orderget.favourable[0].price,this.ruleForm.otherCostRemark=this.orderget.favourable[0].mark,this.ruleForm.allDiscount=this.orderget.favourable[1].price,this.ruleForm.allDisRemark=this.orderget.favourable[1].mark,this.enrolNumCopy=[].concat(gt(this.enrolNum)),this.tourCopy=JSON.parse(JSON.stringify(this.tour)),this.preLengthCopy=[].concat(gt(this.preLength)),this.dialogFormNum=!0},subNum:function(){for(var e=0;e<this.enrolNum.length;e++)this.enrolNum[e]&&(this.number+=parseInt(this.enrolNum[e]));if(0==this.number)return this.enrolNums=!0,!1;this.enrolNums=!1,this.orderget.favourable[0].price=this.ruleForm.otherCost,this.orderget.favourable[0].mark=this.ruleForm.otherCostRemark,this.orderget.favourable[1].price=this.ruleForm.allDiscount,this.orderget.favourable[1].mark=this.ruleForm.allDisRemark,this.cancelType=2,this.dialogFormNum=!1},cancelNum:function(){1==this.cancelType&&(this.enrolNum=[].concat(gt(this.enrolNumCopy)),this.tour=JSON.parse(JSON.stringify(this.tourCopy)),this.preLength=[].concat(gt(this.preLengthCopy))),this.dialogFormNum=!1,this.cancelType=1},getOrderStatus:function(e){switch(e){case 1:return"签订电子合同";case 2:case 3:return"待出行";case 4:return"旅行中";case 5:return"待评价";case 6:return"已完成";case 7:return"确认占位";case 8:return"签署合同";case 9:return"订单作废";case 10:return"补充游客材料"}},changeQuota:function(){this.salePrice=JSON.parse(JSON.stringify(this.salePriceNum));for(var e=0;e<this.salePrice.length;e++)this.salePrice[e].quota=parseInt(this.salePrice[e].quota)-parseInt(this.enrolNum[e]),this.salePrice[e].quota<0?this.quota[e]=!0:this.quota[e]=!1},peoNum:function(e,t,a){var i,l,s;if(l=this.preLength[e],i=this.enrolNum[e],this.preLength[e]=this.enrolNum[e],i>l){s=i-l;for(var o=0;o<s;o++)this.tour[e].push({enrollID:t,enrollName:a,id:0,isDeleted:0,code:"string",cnName:"点击填写",enName:"string",sex:"0",idCard:"string",singlePrice:0,mobile:"string",bornDate:0,credType:1,credCode:"string",credTOV:0,orderID:0,orderCode:"string",orgID:0,userID:0})}else this.tour[e].splice(i-l,l-i)},fillTour:function(e,t){this.winTitle=this.salePrice[e].enrollName,"点击填写"!=this.tour[e][t].cnName?this.conForm=JSON.parse(JSON.stringify(this.tour[e][t])):this.conForm={id:this.tour[e][t].id,isDeleted:0,code:"",cnName:"",enName:"",sex:"",mobile:"",idCard:"",bornDate:0,credType:"",credCode:"",credTOV:0,orderID:0,orderCode:"string",orgID:0,userID:0},this.tourType=e,this.fillIndex=t,this.dialogFormTour=!0},subInfo:function(e){var t=this;this.$refs[e].validate(function(a){if(a){var i=JSON.parse(JSON.stringify(t.conForm));i.enrollID=t.salePrice[t.tourType].enrollID,i.enrollName=t.salePrice[t.tourType].enrollName,1==t.ruleForm.price?i.singlePrice=t.salePrice[t.tourType].price_01:i.singlePrice=t.salePrice[t.tourType].price_02,i.bornDate=new Date(i.bornDate).getTime()/1e3,i.credTOV=new Date(i.credTOV).getTime()/1e3,""==i.credType&&(i.credType=0),t.tour[t.tourType][t.fillIndex]=i,t.dialogFormTour=!1,t.$refs[e].resetFields()}})},cancelInfo:function(e){var t=this;this.dialogFormTour=!1,setTimeout(function(){t.$refs[e].resetFields()},500)},teamEnrolls:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/enrolls",{id:e}).then(function(e){if(1==e.data.isSuccess){t.salePrice=e.data.objects,t.salePriceNum=e.data.objects,t.preLength=[],t.enrolNum=[],t.quota=[],t.tour=[];for(var a=0;a<e.data.objects.length;a++)t.quota.push(!1),t.tour.push([]);for(var i=t.orderget.guest,l=0;l<i.length;l++)l>0&&i[l].enrollName!=i[l-1].enrollName?t.tour[1].push(i[l]):t.tour[0].push(i[l]);for(var s=0;s<t.tour.length;s++)t.preLength.push(t.tour[s].length),t.enrolNum.push(t.tour[s].length)}})},teampreview:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/teampreview",{id:e}).then(function(e){1==e.data.isSuccess&&(t.teampreviewData=e.data.object)})},compPrice:function(){this.orderget.payable=0;for(var e=0;e<this.enrolNum.length;e++)this.orderget.payable+=this.enrolNum[e]*(1==this.ruleForm.price?this.salePrice[e].price_01:this.salePrice[e].price_02);this.orderget.payable+=parseInt(this.ruleForm.otherCost),this.orderget.payable-=parseInt(this.ruleForm.allDiscount)},ordersave:function(){var e=this,t=JSON.parse(JSON.stringify(this.orderget));t.contact='{"Name":"'+this.ruleForm.contactName+'","Tel":"'+this.ruleForm.contactPhone+'"}',t.number=this.number;for(var a=[],i=0;i<this.tour.length;i++)for(var l=0;l<this.tour[i].length;l++)a.push(this.tour[i][l]);if(t.guest=a,JSON.stringify(t)==JSON.stringify(this.orderget))return!1;console.log(123),this.$http.post(this.GLOBAL.serverSrc+"/order/all/api/ordersave",{object:t}).then(function(t){1==t.data.isSuccess&&e.processManage(e.orderId)})}}},bt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"city_list",staticStyle:{"margin-top":"-50px"},attrs:{title:"流程管理",visible:e.dialogFormProcess,width:"800px"},on:{"update:visible":function(t){e.dialogFormProcess=t}}},[a("div",{staticClass:"process-sta"},[e._v("订单状态："),a("span",[e._v(e._s(e.getOrderStatus(e.orderget.orderStatus)))])]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"订单联系人"}},[a("div",{staticClass:"ml13"},[e._v("姓名"),a("el-input",{staticClass:"numw",model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"ml13"},[e._v("电话"),a("el-input",{staticClass:"numw",model:{value:e.ruleForm.contactPhone,callback:function(t){e.$set(e.ruleForm,"contactPhone",t)},expression:"ruleForm.contactPhone"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"cb",attrs:{label:"出行人信息"}},e._l(e.salePrice,function(t,i){return a("div",{staticClass:"oh"},[a("div",{staticClass:"tour-til"},[e._v(e._s(t.enrollName))]),e._v(" "),a("div",{staticClass:"tourist"},e._l(e.tour[i],function(t,l){return a("input",{directives:[{name:"model",rawName:"v-model",value:t.cnName,expression:"item.cnName"}],attrs:{placeholder:"点击填写",disabled:4==e.orderget.orderStatus||5==e.orderget.orderStatus||6==e.orderget.orderStatus||9==e.orderget.orderStatus},domProps:{value:t.cnName},on:{click:function(t){e.fillTour(i,l)},input:function(a){a.target.composing||e.$set(t,"cnName",a.target.value)}}})}))])})),e._v(" "),a("el-form-item",{staticClass:"cb",attrs:{label:""}},[4!=e.orderget.orderStatus&&5!=e.orderget.orderStatus&&6!=e.orderget.orderStatus&&9!=e.orderget.orderStatus?a("div",{staticClass:"change-num",on:{click:e.changeNum}},[e._v("变更数量")]):e._e(),e._v(" "),7!=e.orderget.orderStatus&&10!=e.orderget.orderStatus?a("div",{staticClass:"change-num"},[e._v("查看合同")]):e._e()]),e._v(" "),4!=e.orderget.orderStatus&&5!=e.orderget.orderStatus&&6!=e.orderget.orderStatus&&9!=e.orderget.orderStatus?a("el-form-item",{attrs:{label:"更改订单状态",prop:"type"}},[e._e(),e._v(" "),a("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("br"),e._v(" "),e._e(),a("br"),e._v(" "),e._e(),a("br"),e._v(" "),7==e.orderget.orderStatus?a("el-radio",{staticClass:"radiomar",attrs:{label:10}},[e._v("确认订单")]):e._e(),a("br"),e._v(" "),10==e.orderget.orderStatus?a("el-radio",{staticClass:"radiomar",attrs:{label:1}},[e._v("提交用户信息")]):e._e(),a("br"),e._v(" "),1==e.orderget.orderStatus?a("el-radio",{staticClass:"radiomar",attrs:{label:2}},[e._v("发送电子合同给客人")]):e._e(),a("br"),e._v(" "),7==e.orderget.orderStatus||10==e.orderget.orderStatus||1==e.orderget.orderStatus||2==e.orderget.orderStatus?a("el-radio",{staticClass:"radiomar",attrs:{label:9}},[e._v("作废订单")]):e._e()],1)],1):e._e(),e._v(" "),6==e.orderget.orderStatus?a("el-form-item",{attrs:{label:"评价信息",prop:""}},[a("el-input",{staticClass:"remark",attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请输入内容",disabled:!0},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1):e._e()],1),e._v(" "),4!=e.orderget.orderStatus&&5!=e.orderget.orderStatus&&6!=e.orderget.orderStatus&&9!=e.orderget.orderStatus?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormProcess=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){e.orderModification(e.ruleForm.type)}}},[e._v("保存修改")])],1):e._e(),e._v(" "),4==e.orderget.orderStatus||5==e.orderget.orderStatus||6==e.orderget.orderStatus||9==e.orderget.orderStatus?a("div",{staticClass:"dialog-footer1",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormProcess=!1}}},[a("span",[e._v("关 闭")])])],1):e._e()],1),e._v(" "),a("el-dialog",{staticClass:"city_list",staticStyle:{"margin-top":"-50px"},attrs:{title:"变更数量",visible:e.dialogFormNum,width:"800px"},on:{"update:visible":function(t){e.dialogFormNum=t},close:e.cancelNum}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm numForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"",prop:""}},[a("div",{staticClass:"ml13"},[e._v("结算参考 "),a("span",{staticClass:"color-red"},[e._v("￥"+e._s(e.teampreviewData.refPrice))])])]),e._v(" "),a("el-form-item",{staticClass:"cb price",attrs:{label:"价格",prop:"price"}},[e._l(e.salePrice,function(t){return a("span",{staticStyle:{margin:"14px 18px 0 13px"}},[e._v(e._s(t.enrollName)+"：￥"+e._s(t.price_01))])}),a("br")],2),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"报名人数"}},[a("div",{staticClass:"num-req"},[e._v("*")])]),e._v(" "),a("div",{staticClass:"fl"},[a("table",{staticStyle:{margin:"-7px 0 17px 13px"}},e._l(e.salePrice,function(t,i){return a("tr",[a("td",{attrs:{height:"45"}},[e._v(e._s(t.enrollName))]),e._v(" "),a("td",{attrs:{height:"45"}},[a("el-input",{staticClass:"numw",attrs:{type:"number",min:0,disabled:!0},on:{input:function(a){e.peoNum(i,t.enrollID,t.enrollName)}},model:{value:e.enrolNum[i],callback:function(t){e.$set(e.enrolNum,i,t)},expression:"enrolNum[index]"}}),e._v(" "),a("span",{class:{red:e.quota[i]}},[e._v("\n                    余（"+e._s(t.quota)+"）\n                    ￥"),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.ruleForm.price,expression:"ruleForm.price==1"}]},[e._v(e._s(t.price_01))]),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.ruleForm.price,expression:"ruleForm.price==2"}]},[e._v(e._s(t.price_02))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.quota[i],expression:"quota[index]"}]},[e._v("库存不足")])])],1)])})),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.enrolNums,expression:"enrolNums"}],staticClass:"red ml13",staticStyle:{height:"35px"}},[e._v("报名人数不能为空")])]),e._v(" "),a("div",{staticClass:"cb",staticStyle:{height:"60px"}},[a("el-form-item",{staticClass:"fl cb",attrs:{label:"其他费用",prop:"otherCost"}},[a("el-input",{staticClass:"numw",attrs:{type:"number",min:0},model:{value:e.ruleForm.otherCost,callback:function(t){e.$set(e.ruleForm,"otherCost",t)},expression:"ruleForm.otherCost"}})],1),e._v(" "),a("div",{staticClass:"fl"},[e._v("            \n              备注"),a("el-input",{staticClass:"cost-remark",model:{value:e.ruleForm.otherCostRemark,callback:function(t){e.$set(e.ruleForm,"otherCostRemark",t)},expression:"ruleForm.otherCostRemark"}})],1)],1),e._v(" "),a("div",{staticClass:"cb"},[a("el-form-item",{staticClass:"fl cb",attrs:{label:"整体优惠",prop:"allDiscount"}},[a("el-input",{staticClass:"numw",attrs:{type:"number",min:0},model:{value:e.ruleForm.allDiscount,callback:function(t){e.$set(e.ruleForm,"allDiscount",t)},expression:"ruleForm.allDiscount"}})],1),e._v(" "),a("div",{staticClass:"fl"},[e._v("            \n              备注"),a("el-input",{staticClass:"cost-remark",model:{value:e.ruleForm.allDisRemark,callback:function(t){e.$set(e.ruleForm,"allDisRemark",t)},expression:"ruleForm.allDisRemark"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"cb",attrs:{label:"总计",prop:"payable"}},[a("div",{staticClass:"ml13"},[a("span",{staticClass:"color-red"},[e._v("￥"+e._s(e.orderget.payable))])])])],1),e._v(" "),a("div",{staticClass:"numdialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelNum}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){e.subNum(2)}}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:"出行人信息（"+e.winTitle+"）",visible:e.dialogFormTour,width:"700px",height:"500"},on:{"update:visible":function(t){e.dialogFormTour=t},close:function(t){e.cancelInfo("conForm")}}},[a("el-form",{ref:"conForm",attrs:{model:e.conForm,rules:e.rules}},[a("el-form-item",{staticClass:"fl",attrs:{label:"中文姓名",prop:"cnName","label-width":"110px"}},[a("el-input",{staticClass:"w200 fl",attrs:{type:"text"},model:{value:e.conForm.cnName,callback:function(t){e.$set(e.conForm,"cnName",t)},expression:"conForm.cnName"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"英文姓名",prop:"enName","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:e.conForm.enName,callback:function(t){e.$set(e.conForm,"enName",t)},expression:"conForm.enName"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",staticStyle:{width:"310px"},attrs:{label:"性别",prop:"sex","label-width":"110px"}},[a("el-radio-group",{model:{value:e.conForm.sex,callback:function(t){e.$set(e.conForm,"sex",t)},expression:"conForm.sex"}},[a("el-radio",{attrs:{label:0}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"电话",prop:"mobile","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:e.conForm.mobile,callback:function(t){e.$set(e.conForm,"mobile",t)},expression:"conForm.mobile"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"身份证",prop:"idCard","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:e.conForm.idCard,callback:function(t){e.$set(e.conForm,"idCard",t)},expression:"conForm.idCard"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"出生日期",prop:"bornDate","label-width":"110px"}},[a("el-date-picker",{staticClass:"w200",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.conForm.bornDate,callback:function(t){e.$set(e.conForm,"bornDate",t)},expression:"conForm.bornDate"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件类型",prop:"credType","label-width":"110px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.conForm.credType,callback:function(t){e.$set(e.conForm,"credType",t)},expression:"conForm.credType"}},[a("el-option",{attrs:{label:"请选择",value:0}}),e._v(" "),a("el-option",{attrs:{label:"护照",value:1}}),e._v(" "),a("el-option",{attrs:{label:"港澳通行证",value:2}}),e._v(" "),a("el-option",{attrs:{label:"军官证",value:3}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件号码",prop:"credCode","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:e.conForm.credCode,callback:function(t){e.$set(e.conForm,"credCode",t)},expression:"conForm.credCode"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件有效期",prop:"credTOV","label-width":"110px"}},[a("el-date-picker",{staticClass:"w200",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.conForm.credTOV,callback:function(t){e.$set(e.conForm,"credTOV",t)},expression:"conForm.credTOV"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer cb",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelInfo("conForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.subInfo("conForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var yt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"city_list",attrs:{title:"订单备注",visible:e.dialogFormMark,width:"780px"},on:{"update:visible":function(t){e.dialogFormMark=t}}},[a("el-form",{ref:"markForm",staticClass:"demo-ruleForm",attrs:{model:e.markForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"客人："}},[a("el-input",{staticClass:"remark",attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:e.markForm.remark,callback:function(t){e.$set(e.markForm,"remark",t)},expression:"markForm.remark"}}),e._v(" "),a("div",{staticClass:"time"},[e._v("2018-10-11 17:23:23")])],1),e._v(" "),a("el-form-item",{attrs:{label:"阳阳："}},[a("el-input",{staticClass:"remark",attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:e.markForm.remark,callback:function(t){e.$set(e.markForm,"remark",t)},expression:"markForm.remark"}}),e._v(" "),a("div",{staticClass:"time"},[e._v("2018-10-11 17:23:23")])],1),e._v(" "),a("el-form-item",{attrs:{label:"填写备注"}},[a("el-input",{staticClass:"remark",attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:e.markForm.remark,callback:function(t){e.$set(e.markForm,"remark",t)},expression:"markForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"submitMark",attrs:{type:"info",size:"medium"}},[e._v("提交备注")])],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"colse"},[e._v("关闭")])],1)],1)],1)],1)},staticRenderFns:[]};var _t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"city_list",attrs:{title:"转团",visible:e.dialogFormTransfer,width:"780px"},on:{"update:visible":function(t){e.dialogFormTransfer=t}}},[a("el-form",{ref:"markForm",staticClass:"demo-ruleForm",attrs:{model:e.markForm,"label-width":"80px"}},[e._v("\n          123\n        ")])],1)],1)},staticRenderFns:[]};var Ct={components:{"process-manage":a("VU/8")(vt,bt,!1,function(e){a("IAe6")},"data-v-f83ac66c",null).exports,"remarks-infor":a("VU/8")({props:{orderId:0,variable:0,dialogType:0},data:function(){return{dialogFormMark:!1,markForm:{}}},created:function(){},watch:{variable:function(){2==this.dialogType&&(this.dialogFormMark=!0)}},methods:{}},yt,!1,function(e){a("Ee6j")},"data-v-46b90f8e",null).exports,"order-transfer":a("VU/8")({props:{orderId:0,variable:0,dialogType:0},data:function(){return{dialogFormTransfer:!1,markForm:{}}},created:function(){},watch:{variable:function(){4==this.dialogType&&(this.dialogFormTransfer=!0)}},methods:{}},_t,!1,function(e){a("FbIm")},"data-v-da5b3956",null).exports},data:function(){return{orderStatus:["全部","未确认（3）","签署合同（2）","出行中（3）","待点评（3）","完成订单","作废订单"],orderNum:"0",refundStatus:["全部","申请退款（3）","退款中（3）","完成退款","拒绝退款"],refundNum:"0",proType:[{value:"0",label:"跟团游"},{value:"1",label:"自由行"},{value:"2",label:"签证"},{value:"3",label:"邮轮"},{value:"4",label:"周边游"}],proTypevalue:"",groupNo:"",startTime:"",endTime:"",pageSize:10,pageIndex:1,total:0,orderpage:[],orderId:0,variable:0,dialogType:0}},created:function(){this.orderPage()},methods:{statusTab:function(e,t){1==e&&(this.orderNum=t),2==e&&(this.refundNum=t)},handleSizeChange:function(e){this.pageSize=e,this.pageIndex=1,this.orderPage(1,e)},handleCurrentChange:function(e){this.orderPage(e,this.pageSize),this.pageIndex=e},orderPage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize;this.$http.post(this.GLOBAL.serverSrc+"/order/all/api/orderpage",{pageIndex:t,pageSize:a,object:{}}).then(function(t){e.orderpage=[],e.total=t.data.total,1==t.data.isSuccess&&(e.orderpage=t.data.objects)}).catch(function(e){console.log(e)})},getOrderStatus:function(e){switch(e){case 1:return"签订电子合同";case 2:case 3:return"待出行";case 4:return"旅行中";case 5:return"待评价";case 6:return"已完成";case 7:return"确认占位";case 8:return"签署合同";case 9:return"订单作废";case 10:return"补充游客材料"}},formatDate:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate();i=i<10?"0"+i:i;var l=e.getHours();l=l<10?"0"+l:l;var s=e.getMinutes();s=s<10?"0"+s:s;var o=e.getSeconds();return t+"-"+a+"-"+i+" "+l+":"+s+":"+(o=o<10?"0"+o:o)},operation:function(e,t){this.orderId=e,this.variable++,1==t?this.dialogType=1:2==t?this.dialogType=2:4==t&&(this.dialogType=4)}}},xt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"search-title"},[e._v("订单ID")]),e._v(" "),a("el-input",{staticClass:"input",model:{value:e.groupNo,callback:function(t){e.groupNo=t},expression:"groupNo"}}),e._v(" "),a("span",{staticClass:"search-title"},[e._v("产品ID")]),e._v(" "),a("el-input",{staticClass:"input",model:{value:e.groupNo,callback:function(t){e.groupNo=t},expression:"groupNo"}}),e._v(" "),a("span",{staticClass:"search-title"},[e._v("团期计划ID")]),e._v(" "),a("el-input",{staticClass:"input",model:{value:e.groupNo,callback:function(t){e.groupNo=t},expression:"groupNo"}}),e._v(" "),a("span",{staticClass:"search-title"},[e._v("订单时间")]),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("div",{staticClass:"date-line"}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"终止日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),a("br"),e._v(" "),a("span",{staticClass:"search-title"},[e._v("产品名称")]),e._v(" "),a("el-input",{staticClass:"input",model:{value:e.groupNo,callback:function(t){e.groupNo=t},expression:"groupNo"}}),e._v(" "),a("span",{staticClass:"search-title"},[e._v("目的地")]),e._v(" "),a("el-input",{staticClass:"input",model:{value:e.groupNo,callback:function(t){e.groupNo=t},expression:"groupNo"}}),e._v(" "),a("span",{staticClass:"search-title"},[e._v("销售")]),e._v(" "),a("el-input",{staticClass:"input",model:{value:e.groupNo,callback:function(t){e.groupNo=t},expression:"groupNo"}}),e._v(" "),a("span",{staticClass:"search-title"},[e._v("产品类型")]),e._v(" "),a("el-select",{staticClass:"sec-type",attrs:{placeholder:"请选择"},model:{value:e.proTypevalue,callback:function(t){e.proTypevalue=t},expression:"proTypevalue"}},e._l(e.proType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),a("br"),e._v(" "),a("div",{staticClass:"status-title"},[e._v("订单状态")]),e._v(" "),a("ul",{staticClass:"order-status"},e._l(e.orderStatus,function(t,i){return a("li",{class:{statusbg:e.orderNum==i},on:{click:function(t){e.statusTab(1,i)}}},[e._v(e._s(t))])})),a("br"),e._v(" "),a("div",{staticClass:"status-title"},[e._v("退款状态")]),e._v(" "),a("ul",{staticClass:"order-status"},e._l(e.refundStatus,function(t,i){return a("li",{class:{statusbg:e.refundNum==i},on:{click:function(t){e.statusTab(2,i)}}},[e._v(e._s(t))])})),a("br"),e._v(" "),a("el-button",{staticClass:"search-but",attrs:{type:"primary"}},[e._v("搜索")]),e._v(" "),e._l(e.orderpage,function(t,i){return a("div",{staticClass:"pro-info"},[a("table",{attrs:{cellpadding:"5"}},[a("tr",[a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("订单ID")]),e._v(" "),a("td",[e._v(e._s(t.orderCode))]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("产品ID")]),e._v(" "),a("td",{attrs:{width:"220"}},[e._v(e._s(t.teamID))]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"85"}},[e._v("订单状态")]),e._v(" "),a("td",{attrs:{width:"90"}},[e._v(e._s(e.getOrderStatus(t.orderStatus)))]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("退款状态")]),e._v(" "),a("td",{attrs:{width:"60"}},[e._v("未退款")]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("订单时间")]),e._v(" "),a("td",[e._v(e._s(e.formatDate(new Date(t.createTime))))])]),e._v(" "),a("tr",[a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("产品名")]),e._v(" "),a("td",{attrs:{colspan:"9"}},[e._v(e._s(t.name))])]),e._v(" "),a("tr",[a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("套餐名称")]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e._v(e._s(t.package))]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("团号")]),e._v(" "),a("td",{attrs:{colspan:"5"}},[e._v(e._s(t.groupCode))])]),e._v(" "),a("tr",[a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("应付")]),e._v(" "),a("td",[e._v(e._s(t.payable))]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("单价")]),e._v(" "),a("td",{attrs:{rowspan:"2",valign:"top"}},[e._v("成人3000.00*1 单房差 500.00*1")]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("优惠")]),e._v(" "),a("td",{attrs:{colspan:"4",rowspan:"2",valign:"top"}},[e._v(e._s(t.favTitle))]),e._v(" "),a("td",{attrs:{rowspan:"2"}},[e._v(" ")])]),e._v(" "),a("tr",[a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("已付")]),e._v(" "),a("td",[e._v(e._s(t.paid))]),e._v(" "),a("td",[e._v(" ")]),e._v(" "),a("td",[e._v(" ")])]),e._v(" "),a("tr",[a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("平台")]),e._v(" "),a("td",[e._v("苹果")]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("支付方式")]),e._v(" "),a("td",[e._v("微信支付")]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("订单来源")]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e._v("xxx旅行社")]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("销售")]),e._v(" "),a("td",[e._v(e._s(t.saler))])]),e._v(" "),a("tr",[a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("用户姓名")]),e._v(" "),a("td",[e._v(e._s(t.contactName))]),e._v(" "),a("td",{staticClass:"tr",attrs:{width:"60"}},[e._v("电话")]),e._v(" "),a("td",[e._v(e._s(t.contactTel))]),e._v(" "),a("td",[e._v(" ")]),e._v(" "),a("td",[e._v(" ")]),e._v(" "),a("td",[e._v(" ")]),e._v(" "),a("td",[e._v(" ")]),e._v(" "),a("td",[e._v(" ")]),e._v(" "),a("td",[e._v(" ")])])]),e._v(" "),e._m(0,!0),e._v(" "),a("el-row",{staticClass:"but-row"},[a("el-button",[e._v("联系客人")]),e._v(" "),a("el-button",{on:{click:function(a){e.operation(t.id,1)}}},[e._v("流程管理")]),e._v(" "),a("el-button",{on:{click:function(a){e.operation(t.id,2)}}},[e._v("备注信息")]),e._v(" "),a("el-button",[e._v("未申请退款")]),e._v(" "),a("el-button",{on:{click:function(a){e.operation(t.id,4)}}},[e._v("转团")])],1)],1)}),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("process-manage",{attrs:{orderId:e.orderId,variable:e.variable,dialogType:e.dialogType},on:{orderPage:e.orderPage}}),e._v(" "),a("remarks-infor",{attrs:{orderId:e.orderId,variable:e.variable,dialogType:e.dialogType}}),e._v(" "),a("order-transfer",{attrs:{orderId:e.orderId,variable:e.variable,dialogType:e.dialogType}})],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"confirm-time"},[this._v("待确认剩余"),t("span",[this._v("1天22:33:33")])])}]};var kt=a("VU/8")(Ct,xt,!1,function(e){a("BfIj")},"data-v-01976641",null).exports,wt={props:{paymentID:0,groupCode:""},data:function(){return{empty:"",people:"",planTime:"",planData:"",forbidden:!0,multipleSelection:[],tableData:[],pagesize:10,pageIndex:1,total:0,currentPage:1,noIncomeShow:!1,ruleForm:{createUser:"",groupCode:"",plan_01:"",supplierName:"",supplierTypeEX:"",price:"",mark:"",cardNumber:"",bankName:"",cardName:"",payway:"",files:""},borrowingType:[{value:"选项1",label:"地接"},{value:"选项2",label:"机票（本公司）"},{value:"选项3",label:"机票（非本公司）"},{value:"选项4",label:"小费"},{value:"选项5",label:"签证"}],payment_01:[{value:"选项1",label:"网银"},{value:"选项2",label:"现金"},{value:"选项3",label:"支付宝"},{value:"选项4",label:"微信"}],rules:{name:[{required:!0,message:"请输入借款人名字",trigger:"blur"}],plan:[{required:!0,message:"请输入团期计划",trigger:"blur"}],plan_01:[{required:!0,message:"请输入团期计划",trigger:"blur"}],supplier:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],planType:[{required:!0,message:"请选择付款方式",trigger:"blur"}],planAmount:[{required:!0,message:"请输入类型",trigger:"blur"}],abstract:[{required:!0,message:"请输入摘要",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"}],accountBank:[{required:!0,message:"请输入开户行",trigger:"blur"}],accountOpenName:[{required:!0,message:"请输入开户名",trigger:"blur"}],payment:[{required:!0,message:"请选择付款方式",trigger:"blur"}]},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],dialogFormVisible1:!1,number_name:"",tableName:[{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"}],dialogFormVisible_plan:!1,plan_stage:"",plan_name:"",plan_data:"",plan_data01:"",tablePlan:[{id:"TC-GTY-1001-01-180806-01",name:"美国西海岸三城双奥莱10日之旅",destination:"西雅图",travelDates:"2019-01-01",department:"辽宁大运通-北美部",productionPerson:"洋洋"},{id:"TC-GTY-1001-01-180806-01",name:"美国西海岸三城双奥莱10日之旅",destination:"西雅图",travelDates:"2019-01-01",department:"辽宁大运通-北美部",productionPerson:"洋洋"}],dialogFormVisible_account:!1,tableAccount:[{accountNumber:"1234 1234 1234 1234 1234",openBank:"建行",accountName:"洋洋"}],tableMoney:[{totalOrder:"17800",approval:"17800",examination:"17800",received:"17800",arrears:"7800"}],tablePayment:[{id:"1",state:"通过",type:"小费",supplier:"国旅",paymentAmount:"5000.00",people:"5",department:"国内部",applicant:"洋洋",times:"2019-01-01",digest:"小费款",process:"查看",verification:"1000.00"}],dialogFormVisible_paymenrt:!1,tableApprove:[{times:" 2019-1-14 19:00:00",people:"洋洋",result:"通过",opinion:"不同意"}],tableIncome:[{id:"1",state:"通过",type:"小费",supplier:"国旅",paymentAmount:"5000.00",department:"国内部",applicant:"洋洋",times:"2019-01-01",digest:"小费款",process:"查看",verification:"1000.00"}],dialogFormVisible_Income:!1,tableIncomeCheck:[{times:" 2019-1-14 19:00:00",people:"洋洋1",result:"通过",opinion:"不同意"}],tableEarning:[{number:"123",source:"国旅",contact:"洋洋",people:"5",figure:"17800",received:"7800",arrears:"10000",numbers:"123",dates:"2019-01-01",shouldAlso:"2019-01-30"}],tableCourse:[{people:"1",result:"通过",opinion:"同意",times:"2019-04-25"}]}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},changeFun:function(e){this.multipleSelection=e,1==this.multipleSelection.length?this.forbidden=!1:this.forbidden=!0},clickRow:function(e){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(e)},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.multipleSelection.length;a++)if(this.multipleSelection[a].paymentID==t.paymentID)return{"background-color":"#ecf5ff"}},planStage:function(){this.plan_stage="",this.plan_name="",this.plan_data="",this.plan_data01=""},IncomeAccount:function(){this.dialogFormVisible_account=!0},accountCancel:function(){this.dialogFormVisible_account=!1},processPaymenrt:function(e,t){this.dialogFormVisible_paymenrt=!0},processIncome:function(e,t){this.dialogFormVisible_Income=!0},checkIncome:function(){this.checkIncomeShow=!0},CloseCheckIncomeShow:function(){this.checkIncomeShow=!1},getLabel:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/payment/api/get",{id:this.paymentID}).then(function(t){if(1==t.data.isSuccess){var a=t.data.object;e.ruleForm.createUser=a.createUser,e.ruleForm.groupCode=a.groupCode,e.ruleForm.supplierName=a.supplierName,e.ruleForm.supplierTypeEX=a.supplierTypeEX,e.ruleForm.price=a.price,e.ruleForm.mark=a.mark,e.ruleForm.cardNumber=a.cardNumber,e.ruleForm.bankName=a.bankName,e.ruleForm.cardName=a.cardName,e.ruleForm.payway=a.payway,e.ruleForm.files=a.files}}).catch(function(e){})},getTourByPlanId:function(){var e=this;e.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/planfinancelist",{object:{groupCode:this.groupCode}}).then(function(t){1==t.data.isSuccess&&(e.ruleForm.groupCode=t.data.objects[0].groupCode,e.ruleForm.plan_01=t.data.objects[0].title)}).catch(function(e){console.log(e)})}},watch:{paymentID:{immediate:!0,handler:function(){this.getLabel(),this.getTourByPlanId()}}},mounted:function(){}},St={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loanManagement"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"借款人",prop:"createUser"}},[a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.createUser,callback:function(t){e.$set(e.ruleForm,"createUser",t)},expression:"ruleForm.createUser"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"团期计划",prop:"groupCode"}},[a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.groupCode,callback:function(t){e.$set(e.ruleForm,"groupCode",t)},expression:"ruleForm.groupCode"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left","margin-left":"-90px"},attrs:{prop:"plan_01"}},[a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.plan_01,callback:function(t){e.$set(e.ruleForm,"plan_01",t)},expression:"ruleForm.plan_01"}})],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"供应商",prop:"supplierName"}},[a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.supplierName,callback:function(t){e.$set(e.ruleForm,"supplierName",t)},expression:"ruleForm.supplierName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"supplierTypeEX"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.supplierTypeEX,callback:function(t){e.$set(e.ruleForm,"supplierTypeEX",t)},expression:"ruleForm.supplierTypeEX"}},e._l(e.borrowingType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:""}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"借款金额",prop:"price"}},[a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"摘要",prop:"mark"}},[a("el-input",{staticClass:"name_input01",attrs:{disabled:""},model:{value:e.ruleForm.mark,callback:function(t){e.$set(e.ruleForm,"mark",t)},expression:"ruleForm.mark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"cardNumber"}},[a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.cardNumber,callback:function(t){e.$set(e.ruleForm,"cardNumber",t)},expression:"ruleForm.cardNumber"}})],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"开户行",prop:"bankName"}},[a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.bankName,callback:function(t){e.$set(e.ruleForm,"bankName",t)},expression:"ruleForm.bankName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"开户名",prop:"cardName"}},[a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.cardName,callback:function(t){e.$set(e.ruleForm,"cardName",t)},expression:"ruleForm.cardName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"payway"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.payway,callback:function(t){e.$set(e.ruleForm,"payway",t)},expression:"ruleForm.payway"}},e._l(e.payment_01,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:""}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"附件",prop:"files"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","file-list":e.fileList,disabled:""}},[a("el-button",{attrs:{type:"primary",disabled:""}},[e._v("选择文件")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"70%",margin:"30px 0 20px 25px"},attrs:{data:e.tableMoney,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"totalOrder",label:"订单总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approval",label:"已审批总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"examination",label:"审批中总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"received",label:"已收总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrears",label:"供应商欠款总额",align:"center"}})],1),e._v(" "),a("div",{staticStyle:{margin:"0 0 0 25px"}},[e._v("预付款明细")]),e._v(" "),a("el-table",{staticStyle:{width:"95%",margin:"30px 0 20px 25px"},attrs:{data:e.tablePayment,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplier",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentAmount",label:"付款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"people",label:"人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applicant",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"times",label:"日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"digest",label:"摘要",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"process",label:"审批过程",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.processPaymenrt(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"verification",label:"已核销金额",align:"center"}})],1),e._v(" "),a("div",{staticStyle:{margin:"0 0 0 25px"}},[e._v("无收入借款明细")]),e._v(" "),a("el-table",{staticStyle:{width:"95%",margin:"30px 0 20px 25px"},attrs:{data:e.tableIncome,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplier",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentAmount",label:"付款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applicant",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"times",label:"日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"digest",label:"摘要",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"process",label:"审批过程",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.processIncome(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"verification",label:"已核销金额",align:"center"}})],1),e._v(" "),a("div",{staticStyle:{margin:"0 0 0 25px"}},[e._v("收入明细")]),e._v(" "),a("el-table",{staticStyle:{width:"90%",margin:"30px 0 20px 25px"},attrs:{data:e.tableEarning,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"number",label:"订单编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contact",label:"联系人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"people",label:"人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"figure",label:"订单金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"received",label:"已收",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrears",label:"欠款",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"numbers",label:"收款单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dates",label:"欠款日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shouldAlso",label:"应还日期",align:"center"}})],1),e._v(" "),a("div",{staticStyle:{margin:"0 0 0 25px"}},[e._v("审批过程")]),e._v(" "),a("el-table",{staticStyle:{width:"90%",margin:"30px 0 20px 25px"},attrs:{data:e.tableCourse,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"people",label:"审批人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"result",label:"审批结果",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"opinion",label:"审批意见",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"times",label:"审批时间",align:"center"}})],1)],1)],1)},staticRenderFns:[]};var Tt={name:"borrowing",components:{checkLoanManagement:a("VU/8")(wt,St,!1,function(e){a("TZQY")},"data-v-2de395a5",null).exports},data:function(){return{empty:"",people:"",planTime:"",planData:"",forbidden:!0,multipleSelection:[],paymentID:0,groupCode:0,tableData:[],pagesize:10,pageIndex:1,total:0,currentPage:1,noIncomeShow:!1,ruleForm:{name:"",plan:"",plan_01:"",supplier:"",planType:"",planAmount:"",abstract:"",account:"",accountBank:"",accountOpenName:"",payment:"",accessory:""},tour_id:0,supplier_id:0,borrowingType:[{value:"选项1",label:"地接"},{value:"选项2",label:"机票（本公司）"},{value:"选项3",label:"机票（非本公司）"},{value:"选项4",label:"小费"},{value:"选项5",label:"签证"}],payment_01:[{value:"选项1",label:"网银"},{value:"选项2",label:"现金"},{value:"选项3",label:"支付宝"},{value:"选项4",label:"微信"}],rules:{name:[{required:!0,message:"请输入借款人名字",trigger:"blur"}],plan:[{required:!0,message:"请输入团期计划",trigger:"blur"}],plan_01:[{required:!0,message:"请输入团期计划",trigger:"blur"}],supplier:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],planType:[{required:!0,message:"请选择付款方式",trigger:"blur"}],planAmount:[{required:!0,message:"请输入类型",trigger:"blur"}],abstract:[{required:!0,message:"请输入摘要",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"}],accountBank:[{required:!0,message:"请输入开户行",trigger:"blur"}],accountOpenName:[{required:!0,message:"请输入开户名",trigger:"blur"}],payment:[{required:!0,message:"请选择付款方式",trigger:"blur"}]},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],dialogFormVisible1:!1,number_name:"",tableName:[],dialogFormVisible_plan:!1,plan_stage:"",plan_name:"",plan_data:"",plan_data01:"",tablePlan:[{id:"TC-GTY-1001-01-180806-01",name:"美国西海岸三城双奥莱10日之旅",destination:"西雅图",travelDates:"2019-01-01",department:"辽宁大运通-北美部",productionPerson:"洋洋"},{id:"TC-GTY-1001-01-180806-01",name:"美国西海岸三城双奥莱10日之旅",destination:"西雅图",travelDates:"2019-01-01",department:"辽宁大运通-北美部",productionPerson:"洋洋"}],dialogFormVisible_account:!1,tableAccount:[{accountNumber:"1234 1234 1234 1234 1234",openBank:"建行",accountName:"洋洋"}],tableMoney:[{totalOrder:"17800",approval:"17800",examination:"17800",received:"17800",arrears:"7800"}],tablePayment:[{id:"1",state:"通过",type:"小费",supplier:"国旅",paymentAmount:"5000.00",people:"5",department:"国内部",applicant:"洋洋",times:"2019-01-01",digest:"小费款",process:"查看",verification:"1000.00"}],dialogFormVisible_paymenrt:!1,tableApprove:[{times:" 2019-1-14 19:00:00",people:"洋洋",result:"通过",opinion:"不同意"}],tableIncome:[{id:"1",state:"通过",type:"小费",supplier:"国旅",paymentAmount:"5000.00",department:"国内部",applicant:"洋洋",times:"2019-01-01",digest:"小费款",process:"查看",verification:"1000.00"}],dialogFormVisible_Income:!1,tableIncomeCheck:[{times:" 2019-1-14 19:00:00",people:"洋洋1",result:"通过",opinion:"不同意"}],tableEarning:[{number:"123",source:"国旅",contact:"洋洋",people:"5",figure:"17800",received:"7800",arrears:"10000",numbers:"123",dates:"2019-01-01",shouldAlso:"2019-01-30"}],checkIncomeShow:!1,tableCourse:[{people:"1",result:"通过",opinion:"同意",times:"2019-04-25"}]}},methods:{handleClick:function(e,t){console.log(e,t)},emptyButton:function(){this.empty="",this.people="",this.planTime="",this.planData=""},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},changeFun:function(e){this.multipleSelection=e,1==this.multipleSelection.length?this.forbidden=!1:this.forbidden=!0},clickRow:function(e){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(e),this.paymentID=e.paymentID,this.groupCode=e.groupCode},rowClass:function(e){for(var t=e.row,a=(e.rowIndex,0);a<this.multipleSelection.length;a++)if(this.multipleSelection[a].paymentID==t.paymentID)return{"background-color":"#ecf5ff"}},handleSizeChange:function(e){this.pageSize=e,this.pageIndex=1},handleCurrentChange:function(e){this.pageIndex=e},noIncome:function(){this.noIncomeShow=!0},CloseNoIncomeShow:function(){this.noIncomeShow=!1},IncomeName:function(){this.dialogFormVisible1=!0,this.incomeNameList()},incomeNameList:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userlist",{object:{isDeleted:0},isGetAll:!0,id:0}).then(function(t){e.total=t.data.total,e.tableName=t.data.objects,console.log(t.data.objects)}).catch(function(e){console.log(e)})},numberCancel:function(){this.dialogFormVisible1=!1},IncomePlan:function(){this.dialogFormVisible_plan=!0},planCancel:function(){this.dialogFormVisible_plan=!1},planStage:function(){this.plan_stage="",this.plan_name="",this.plan_data="",this.plan_data01=""},IncomeAccount:function(){this.dialogFormVisible_account=!0},accountCancel:function(){this.dialogFormVisible_account=!1},processPaymenrt:function(e,t){this.dialogFormVisible_paymenrt=!0},processIncome:function(e,t){this.dialogFormVisible_Income=!0},checkIncome:function(){this.checkIncomeShow=!0},CloseCheckIncomeShow:function(){this.checkIncomeShow=!1},pageList:function(){var e={paymentType:1},t=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/payment/api/page",{pageSize:this.pagesize,pageIndex:this.currentPage,total:0,object:e}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,console.log(e.data.objects)}).catch(function(e){console.log(e)})},ensureIncome:function(e){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;for(var a=[],i=0;i<t.fileList.length;i++){var l={};l.url=t.fileList[i].url1,l.name=t.fileList[i].name,a.push(l)}t.$http.post(t.GLOBAL.serverSrc+"/finance/payment/api/insert",{object:{createUser:t.ruleForm.name,paymentType:1,planID:t.tour_id,supplierID:t.supplier_id,supplierName:t.ruleForm.supplier,supplierType:t.ruleForm.planType,price:t.ruleForm.planAmount,mark:t.ruleForm.abstract,cardNumber:t.ruleForm.account,bankName:t.ruleForm.accountBank,cardName:t.ruleForm.accountOpenName,payway:t.ruleForm.payment,files:a}}).then(function(e){1==res.data.isSuccess?(this.pageList(),this.noIncomeShow=!1):this.$message.success("添加失败")})})},payment:function(){var e=this;this.payment_01=[],this.$http.post(this.GLOBAL.serverSrc+"/finance/payway/api/get",{}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.payment_01.push({value:t.data.objects[a].id,label:t.data.objects[a].name})}).then(function(t){e.payment_01=t.data.objects}).catch(function(e){console.log(e)})},themeList:function(){var e=this;this.borrowingType=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/suppliertype/api/get",{}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.borrowingType.push({value:t.data.objects[a].id,label:t.data.objects[a].name})}).then(function(t){e.borrowingType=t.data.objects}).catch(function(e){console.log(e)})}},mounted:function(){this.pageList()},created:function(){this.themeList(),this.payment()}},Nt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loanManagement"},[a("div",{staticClass:"loanBorder"},[a("div",{staticClass:"plan"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"emptyPlan"},[e._v("团期计划")]),e._v(" "),a("el-input",{staticClass:"empty",attrs:{clearable:""},model:{value:e.empty,callback:function(t){e.empty=t},expression:"empty"}})],1),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"emptyPlan"},[e._v("申请人")]),e._v(" "),a("el-input",{staticClass:"empty",attrs:{clearable:""},model:{value:e.people,callback:function(t){e.people=t},expression:"people"}})],1),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"emptyPlan"},[e._v("发起时间")]),e._v(" "),a("el-date-picker",{staticClass:"planTime",attrs:{type:"date",placeholder:"日期"},model:{value:e.planTime,callback:function(t){e.planTime=t},expression:"planTime"}}),e._v(" "),a("span",{staticClass:"time"},[e._v("——")]),e._v(" "),a("el-date-picker",{staticClass:"planTime",attrs:{type:"date",placeholder:"日期"},model:{value:e.planData,callback:function(t){e.planData=t},expression:"planData"}})],1)]),e._v(" "),a("div",{staticClass:"primary"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.emptyButton()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"primary"},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.noIncome()}}},[e._v("申请无收入借款")]),e._v(" "),a("el-button",{attrs:{plain:"",disabled:e.forbidden},on:{click:function(t){e.checkIncome()}}},[e._v("查看借款")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"labelTable",attrs:{data:e.tableData,"header-cell-style":e.getRowClass,border:"","row-style":e.rowClass},on:{"selection-change":e.changeFun,"row-click":e.clickRow}},[a("el-table-column",{attrs:{prop:"paymentID",label:"借款单号",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkTypeEX",label:"状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["申请中"==t.row.checkTypeEX?a("div",{staticStyle:{color:"#7F7F7F"}},[e._v(e._s(t.row.checkTypeEX))]):e._e(),e._v(" "),"驳回"==t.row.checkTypeEX?a("div",{staticStyle:{color:"#FF4A3D"}},[e._v(e._s(t.row.checkTypeEX))]):e._e(),e._v(" "),"通过"==t.row.checkTypeEX?a("div",{staticStyle:{color:"#33D174"}},[e._v(e._s(t.row.checkTypeEX))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"beginTime",label:"发起时间",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierTypeEX",label:"类型",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"借款金额",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expensePrice",label:"已核销金额",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionPrice",label:"已付款金额",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"申请组织",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"申请人",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvalOpinion",label:"审批意见",width:"180",align:"center"}})],1),e._v(" "),a("el-pagination",{staticClass:"pageList",attrs:{"page-sizes":[10,1,30,50],background:"","page-size":e.pagesize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"借款申请",visible:e.noIncomeShow,width:"1100px","custom-class":"city_list","show-close":!1},on:{"update:visible":function(t){e.noIncomeShow=t}}},[a("div",{staticStyle:{position:"absolute",top:"8px",right:"10px"}},[a("el-button",{on:{click:function(t){e.CloseNoIncomeShow()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ensureIncome()}}},[e._v("申请")])],1),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"借款人",prop:"name"}},[a("el-input",{staticClass:"name_input",model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}}),e._v(" "),a("el-button",{staticClass:"name_button",on:{click:function(t){e.IncomeName()}}},[e._v("选择")])],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"团期计划",prop:"plan"}},[a("el-input",{staticClass:"name_input",model:{value:e.ruleForm.plan,callback:function(t){e.$set(e.ruleForm,"plan",t)},expression:"ruleForm.plan"}}),e._v(" "),a("el-input",{staticClass:"name_input",attrs:{disabled:""},model:{value:e.ruleForm.plan_01,callback:function(t){e.$set(e.ruleForm,"plan_01",t)},expression:"ruleForm.plan_01"}}),e._v(" "),a("el-button",{staticClass:"name_button",on:{click:function(t){e.IncomePlan()}}},[e._v("选择")])],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"供应商",prop:"supplier"}},[a("el-input",{staticClass:"name_input",model:{value:e.ruleForm.supplier,callback:function(t){e.$set(e.ruleForm,"supplier",t)},expression:"ruleForm.supplier"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"planType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.planType,callback:function(t){e.$set(e.ruleForm,"planType",t)},expression:"ruleForm.planType"}},e._l(e.borrowingType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"借款金额",prop:"planAmount"}},[a("el-input",{staticClass:"name_input",model:{value:e.ruleForm.planAmount,callback:function(t){e.$set(e.ruleForm,"planAmount",t)},expression:"ruleForm.planAmount"}})],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"摘要",prop:"abstract"}},[a("el-input",{staticClass:"name_input01",model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{staticClass:"name_input",model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}}),e._v(" "),a("el-button",{staticClass:"name_button",on:{click:function(t){e.IncomeAccount()}}},[e._v("选择")])],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"开户行",prop:"accountBank"}},[a("el-input",{staticClass:"name_input",model:{value:e.ruleForm.accountBank,callback:function(t){e.$set(e.ruleForm,"accountBank",t)},expression:"ruleForm.accountBank"}})],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"开户名",prop:"accountOpenName"}},[a("el-input",{staticClass:"name_input",model:{value:e.ruleForm.accountOpenName,callback:function(t){e.$set(e.ruleForm,"accountOpenName",t)},expression:"ruleForm.accountOpenName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"payment"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.payment,callback:function(t){e.$set(e.ruleForm,"payment",t)},expression:"ruleForm.payment"}},e._l(e.payment_01,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"附件",prop:"accessory"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","file-list":e.fileList}},[a("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"70%",margin:"30px 0 20px 25px"},attrs:{data:e.tableMoney,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"totalOrder",label:"订单总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approval",label:"已审批总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"examination",label:"审批中总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"received",label:"已收总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrears",label:"供应商欠款总额",align:"center"}})],1),e._v(" "),a("div",{staticStyle:{margin:"0 0 0 25px"}},[e._v("预付款明细")]),e._v(" "),a("el-table",{staticStyle:{width:"95%",margin:"30px 0 20px 25px"},attrs:{data:e.tablePayment,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplier",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentAmount",label:"付款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"people",label:"人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applicant",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"times",label:"日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"digest",label:"摘要",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"process",label:"审批过程",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.processPaymenrt(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"verification",label:"已核销金额",align:"center"}})],1),e._v(" "),a("div",{staticStyle:{margin:"0 0 0 25px"}},[e._v("无收入借款明细")]),e._v(" "),a("el-table",{staticStyle:{width:"95%",margin:"30px 0 20px 25px"},attrs:{data:e.tableIncome,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplier",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentAmount",label:"付款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applicant",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"times",label:"日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"digest",label:"摘要",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"process",label:"审批过程",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.processIncome(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"verification",label:"已核销金额",align:"center"}})],1),e._v(" "),a("div",{staticStyle:{margin:"0 0 0 25px"}},[e._v("收入明细")]),e._v(" "),a("el-table",{staticStyle:{width:"90%",margin:"30px 0 20px 25px"},attrs:{data:e.tableEarning,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"number",label:"订单编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contact",label:"联系人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"people",label:"人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"figure",label:"订单金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"received",label:"已收",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrears",label:"欠款",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"numbers",label:"收款单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dates",label:"欠款日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shouldAlso",label:"应还日期",align:"center"}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"45%",title:"选择报销的人",visible:e.dialogFormVisible1,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("div",{staticClass:"indialog"},[a("div",{staticClass:"indialog_search"},[a("el-input",{staticClass:"name_input",attrs:{placeholder:"请输入内容"},model:{value:e.number_name,callback:function(t){e.number_name=t},expression:"number_name"}}),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("搜索")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%",margin:"30px 0 20px 0"},attrs:{data:e.tableName,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"组织",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userStateCN",label:"状态",align:"center"}})],1),e._v(" "),a("div",{staticClass:"number_button"},[a("el-button",{on:{click:function(t){e.numberCancel()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("申请")])],1)],1)]),e._v(" "),a("el-dialog",{attrs:{width:"70%",title:"选择报销的人",visible:e.dialogFormVisible_plan,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible_plan=t}}},[a("div",{staticClass:"indialog"},[a("div",{staticClass:"indialog_search"},[a("div",{staticClass:"plan_indialog"},[a("span",{staticClass:"indialog_plan"},[e._v("团期计划")]),e._v(" "),a("el-input",{staticClass:"indialog_input",attrs:{clearable:""},model:{value:e.plan_stage,callback:function(t){e.plan_stage=t},expression:"plan_stage"}})],1),e._v(" "),a("div",{staticClass:"plan_indialog"},[a("span",{staticClass:"indialog_plan"},[e._v("产品名称")]),e._v(" "),a("el-input",{staticClass:"indialog_input",attrs:{clearable:""},model:{value:e.plan_name,callback:function(t){e.plan_name=t},expression:"plan_name"}})],1),e._v(" "),a("div",{staticClass:"plan_indialog"},[a("span",{staticClass:"indialog_plan"},[e._v("出行日期")]),e._v(" "),a("el-input",{staticClass:"indialog_input01",attrs:{clearable:""},model:{value:e.plan_data,callback:function(t){e.plan_data=t},expression:"plan_data"}}),e._v(" "),a("span",[e._v("——")]),e._v(" "),a("el-input",{staticClass:"indialog_input01",attrs:{clearable:""},model:{value:e.plan_data01,callback:function(t){e.plan_data01=t},expression:"plan_data01"}})],1),e._v(" "),a("el-button",{staticClass:"indialog_button",attrs:{type:"primary"},on:{click:function(t){e.planStage()}}},[e._v("重置")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%",margin:"30px 0 20px 0"},attrs:{data:e.tablePlan,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"团期计划ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"产品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"destination",label:"目的地",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"travelDates",label:"出行日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionPerson",label:"产品录入人",align:"center"}})],1),e._v(" "),a("div",{staticClass:"number_button"},[a("el-button",{on:{click:function(t){e.planCancel()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("申请")])],1)],1)]),e._v(" "),a("el-dialog",{attrs:{width:"45%",title:"选择账户",visible:e.dialogFormVisible_account,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible_account=t}}},[a("div",{staticClass:"indialog"},[a("el-tabs",{staticStyle:{margin:"30px 0 20px 0"},attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"供应商"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableAccount,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"accountNumber",width:"200",label:"账户",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openBank",label:"开户行",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountName",label:"开户名",align:"center"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"个人"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableAccount,border:""}},[a("el-table-column",{attrs:{prop:"accountNumber",width:"200",label:"账户",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openBank",label:"开户行",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountName",label:"开户名",align:"center"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"number_button"},[a("el-button",{on:{click:function(t){e.accountCancel()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("申请")])],1)],1)]),e._v(" "),a("el-dialog",{attrs:{width:"45%",title:"预付款明细",visible:e.dialogFormVisible_paymenrt,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible_paymenrt=t}}},[a("div",{staticClass:"indialog"},[a("el-table",{staticStyle:{width:"90%",margin:"30px 0 20px 25px"},attrs:{data:e.tableApprove,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"times",label:"审批时间",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"people",label:"审批人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"result",label:"审批结果",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"opinion",label:"审批意见",align:"center"}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{width:"45%",title:"无收入借款明细",visible:e.dialogFormVisible_Income,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible_Income=t}}},[a("div",{staticClass:"indialog"},[a("el-table",{staticStyle:{width:"90%",margin:"30px 0 20px 25px"},attrs:{data:e.tableIncomeCheck,border:"","header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"times",label:"审批时间",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"people",label:"审批人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"result",label:"审批结果",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"opinion",label:"审批意见",align:"center"}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"借款申请",visible:e.checkIncomeShow,width:"1100px","custom-class":"city_list","show-close":!1},on:{"update:visible":function(t){e.checkIncomeShow=t}}},[a("div",{staticStyle:{"line-height":"30px",background:"#d2d2d2",padding:"0 10px","border-radius":"5px",position:"absolute",top:"13px",left:"100px"}},[e._v("审核中")]),e._v(" "),a("div",{staticStyle:{position:"absolute",top:"8px",right:"10px"}},[a("el-button",{on:{click:function(t){e.CloseCheckIncomeShow()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"danger",plain:""}},[e._v("撤销借款")])],1),e._v(" "),a("checkLoanManagement",{attrs:{paymentID:e.paymentID,groupCode:e.groupCode}})],1)],1)},staticRenderFns:[]};var Ft={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loanBorder"},[a("div",{staticClass:"plan"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"emptyPlan"},[e._v("团期计划")]),e._v(" "),a("el-input",{staticClass:"empty",attrs:{clearable:""},model:{value:e.empty_01,callback:function(t){e.empty_01=t},expression:"empty_01"}})],1),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"emptyPlan"},[e._v("申请人")]),e._v(" "),a("el-input",{staticClass:"empty",attrs:{clearable:""},model:{value:e.people_01,callback:function(t){e.people_01=t},expression:"people_01"}})],1),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"emptyPlan"},[e._v("发起时间")]),e._v(" "),a("el-date-picker",{staticClass:"planTime",attrs:{type:"date",placeholder:"日期"},model:{value:e.planTime_01,callback:function(t){e.planTime_01=t},expression:"planTime_01"}}),e._v(" "),a("span",{staticClass:"time"},[e._v("——")]),e._v(" "),a("el-date-picker",{staticClass:"planTime",attrs:{type:"date",placeholder:"日期"},model:{value:e.planData_01,callback:function(t){e.planData_01=t},expression:"planData_01"}})],1)]),e._v(" "),a("div",{staticClass:"primary"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.emptyButton_01()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"primary"},[a("el-button",{attrs:{plain:""}},[e._v("审批")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"multipleTable",attrs:{data:e.tableData,"header-cell-style":e.getRowClass,border:""}},[a("el-table-column",{attrs:{prop:"order",label:"借款单号",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startingTime",label:"发起时间",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupPlan",label:"团期计划",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"genre",label:"类型",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"借款金额",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"organization",label:"申请组织",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proposer",label:"申请人",width:"100",align:"center"}})],1),e._v(" "),a("el-pagination",{staticClass:"pageList",attrs:{"page-sizes":[10,1,30,50],background:"","page-size":e.pagesize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var It={name:"loanManagement",components:{borrowing:a("VU/8")(Tt,Nt,!1,function(e){a("WTm8")},"data-v-72743cfe",null).exports,approvalToBorrow:a("VU/8")({data:function(){return{empty_01:"",people_01:"",planTime_01:"",planData_01:"",tableData:[{order:"1",state:"申请中",startingTime:"2019-01-09 09:37",groupPlan:"TC-GTY-1001-01-180806-01",supplierName:"国旅",genre:"地接",amount:"17800.00",verification:"0",payment:"0",organization:"辽宁大运通-国内部",proposer:"养养",approvalOpinion:""},{order:"2",state:"申请中",startingTime:"2019-01-09 09:37",groupPlan:"TC-GTY-1001-01-180806-01",supplierName:"国旅",genre:"签证",amount:"17800.00",verification:"0",payment:"0",organization:"辽宁大运通-国内部",proposer:"养养",approvalOpinion:"郑总：信息不全"},{order:"3",state:"申请中",startingTime:"2019-01-09 09:37",groupPlan:"TC-GTY-1001-01-180806-01",supplierName:"国旅",genre:"地接",amount:"17800.00",verification:"0",payment:"0",organization:"辽宁大运通-国内部",proposer:"养养",approvalOpinion:""}],currentPage:1,total:0,pagesize:10}},methods:{emptyButton_01:function(){this.empty_01="",this.people_01="",this.planTime_01="",this.planData_01=""},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;return e.columnIndex,0==t?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},handleSizeChange:function(e){},handleCurrentChange:function(e){}}},Ft,!1,function(e){a("gSqT")},"data-v-a1d907e0",null).exports},data:function(){return{activeName:"first"}},methods:{}},Dt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"借款",name:"first"}},[a("borrowing")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"需要您审批的",name:"second"}},[a("approvalToBorrow")],1)],1)],1)},staticRenderFns:[]};var Lt,Et=a("VU/8")(It,Dt,!1,function(e){a("OmjD")},"data-v-2bb0b16b",null).exports;function Bt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Pt={name:"needApproval",data:function(){var e,t=this;return Bt(e={apply_user_input:"",pageIndex:1,pageSize:10,total:0,total2:0,find:0,change:!1,radio:"1",dialogFormVisible2:!1,dialogFormVisible3:!1,dialogFormVisible:!1,dialogFormVisible1:!1,dialogFormVisible4:!1,planNum:"",planName:"",planTime:"",planTime1:"",domains:[{type:"地接",money:"9000.00"}],ruleForm:{name:[{tt:"大运通-日本",peo:"阳阳"}],plan:{planId:"",planName:""},money:{type:"小费",count:"1000.00"},content:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],plan:[{validator:function(e,a,i){if(console.log(t.ruleForm),""==t.ruleForm.plan.planId||""==t.ruleForm.plan.planName)return i(new Error("团期计划不能为空"));i()},trigger:"blur"}],money:[{validator:function(e,a,i){if(console.log(t.ruleForm),""==t.ruleForm.money.type||""==t.ruleForm.money.count)return i(new Error("报销金额不能为空"));i()},trigger:"blur"}],contents:[{required:!0,message:"请输入摘要信息",trigger:"blur"}]},reimData:[{reier:"",reisult:"",info:"",time:""}],formLabelWidth:"120px",currentPage4:1,currentPage2:1,activeName:"first",number:"",plan:"",accepter:"",startTime:"",endTime:"",tableData:[{number:"1",type:"申请中",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",money:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:""},{number:"1",type:"驳回",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",money:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:"郑总：信息补全"},{number:"1",type:"通过",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",money:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:""}],tableData1:[{id:"001",name:"张三",phone:"15566447881",orinaze:"辽宁大运通-销售部-主管 辽宁大运通-销售部-主管",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"}],planData:[{id:"TC-GTY-1001-01-180806-01",name:"美国西海岸三城双奥莱10日之旅",address:"西雅图",time:"2019-01-09",ornize:"辽宁大运通-北美部",proer:"阳阳"},{id:"TC-GTY-1001-01-180806-01",name:"美国西海岸三城双奥莱10日之旅",address:"西雅图",time:"2019-01-09",ornize:"辽宁大运通-北美部",proer:"阳阳"}],joinData:[{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:"17800.00"},{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:"17800.00"}],joinData1:[{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:""},{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:""}],tableData3:[],tableData4:[{id:1,status:1,time:"2016-05-03",tour_plan:"泰国曼谷+芭提雅+沙美岛+清迈小镇7日游",supplier:"我是供应商",type:"地接",money:"20",surplus:"20",org:"国内部",user:"tester申请人",opinion:"统一"},{id:2,status:2,time:"2018-05-03",tour_plan:"泰国曼谷+芭提雅+沙美岛+清迈小镇7日游",supplier:"我是供应商",type:"地接",money:"20",surplus:"20",org:"国内部",user:"tester申请人",opinion:"统一"}],tableData5:[{total:"订单总额",isTotal:"已审批总额",onTotal:"审批中总额",sucTotal:"已收总额",supTotal:"供应商欠款总额"}],tableData6:[{id:"ID",status:"状态",type:"类型",supplier:"供应商",price:"付款金额",number:"人数",org:"部门",user:"申请人",createTime:"申请日期",abstract:"摘要",approval:"审批过程",cancellationMoney:"已核销金额"}],tableData7:[{id:"ID",status:"状态",type:"类型",supplier:"供应商",price:"付款金额",org:"部门",user:"申请人",createTime:"申请日期",abstract:"摘要",approval:"审批过程",cancellationMoney:"已核销金额"}],tableData8:[{oNo:"订单编号",source:"来源",user:"联系人",number:"人数",total:"订单金额",accepted:"已收",arrears:"欠款",aNo:"收款单号",arrearsTime:"欠款日期",repaymentTime:"应还日期"}],tableData10:[{id:"1",createTime:"审批时间",user:"审批人",status:"审批结果",abstract:"审批意见"},{id:"2",createTime:"审批时间",user:"审批人",status:"审批结果",abstract:"审批意见"}],tableData11:[{id:"1",createTime:"审批时间",user:"审批人",status:"审批结果",abstract:"审批意见"},{id:"2",createTime:"审批时间",user:"审批人",status:"审批结果",abstract:"审批意见"}],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],editableTabsValue:"1",editableTabs:[{title:"Tab 1",name:"1",content:"Tab 1 content"}],tabIndex:1,reable:!0,pid:0,dynamicTags3:[],dynamicTags2:[],inputVisible3:!1,noNull:"",empty:"",inputVisible2:!1,supplierLength:!0,type:"",typeList:[{value:"选项1",label:"地接"},{value:"选项2",label:"机票（本公司）"},{value:"选项3",label:"机票（非本公司）"},{value:"选项4",label:"小费"},{value:"选项5",label:"签证"},{value:"选项6",label:"火车票"},{value:"选项7",label:"汽车票"},{value:"选项8",label:"船票"},{value:"选项9",label:"其他"},{value:"选项10",label:"返款"}],payMode:"",payModeList:[{value:"选项1",label:"网银"},{value:"选项2",label:"现金"},{value:"选项3",label:"支付宝"},{value:"选项4",label:"微信"}]},"tableData5",[]),Bt(e,"tableData6",[{id:"ID",status:"状态",type:"类型",supplier:"供应商",price:"付款金额",number:"人数",org:"部门",user:"申请人",createTime:"申请日期",abstract:"摘要",approval:"审批过程",cancellationMoney:"已核销金额"}]),Bt(e,"tableData7",[{id:"ID",status:"状态",type:"类型",supplier:"供应商",price:"付款金额",org:"部门",user:"申请人",createTime:"申请日期",abstract:"摘要",approval:"审批过程",cancellationMoney:"已核销金额"}]),Bt(e,"tableData8",[{oNo:"订单编号",source:"来源",user:"联系人",number:"人数",total:"订单金额",accepted:"已收",arrears:"欠款",aNo:"收款单号",arrearsTime:"欠款日期",repaymentTime:"应还日期"}]),Bt(e,"dialogVisible5",!1),Bt(e,"dialogVisible6",!1),e},methods:(Lt={advanceProcess2:function(e){console.log(e),this.dialogVisible6=!0},advanceProcess:function(e){console.log(e),this.dialogVisible5=!0},showInput2:function(){var e=this;this.dynamicTags2.length<1&&(this.inputVisible2=!0,this.ruleForm.supplier,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})),this.$refs.ruleForm.validateField("supplier")},tour_check:function(){var e=this;""!=this.ruleForm.tour?this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/page",{pageIndex:1,pageSize:1,object:{title:this.tour}}).then(function(t){1==t.data.isSuccess&&(e.product_name_pre=t.data.objects[0].groupCode,e.ruleForm.productName=t.data.objects[0].groupCode)}).catch(function(e){console.log(e)}):this.ruleForm.productName=""},showInput4:function(){this.dialogVisible2=!0},showInput3:function(){this.dialogVisible=!0},handlePreview:function(e,t){console.log(e)},handleRemove:function(e,t){this.fileList=t},handleChange:function(e,t){this.fileList=t.slice(-3)},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},getRowClass2:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},clickBanle:function(e,t,a){this.pid=e.id,this.reable=!1},clickBanle2:function(e,t,a){this.user_id=e.id,this.user_name=e.name,this.reable=!1},removeDomain:function(e){var t=this.domains.indexOf(e);-1!==t&&this.domains.splice(t,1)},addDomain:function(){this.domains.push({type:"",money:""})},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},Transfer:function(){this.dialogFormVisible1=!0},boSubmit:function(){this.dialogFormVisible4=!0},chanelSubmit:function(){var e=this;this.$confirm("是否撤销该条借款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"撤销成功!"})}).catch(function(){e.$message({type:"info",message:"已取消撤销"})})},text:function(e){console.log(this.joinData1)},dialogchange:function(){this.find=0,this.change=!1,this.dialogFormVisible=!0},dialogFind:function(){this.find=1,this.change=!0,this.dialogFormVisible=!0},addbx:function(){this.dialogFormVisible3=!0},adddialog:function(){this.dialogFormVisible1=!0},routerHandle2:function(){var e=this;this.$confirm("是否转办该条审批, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"转办成功!"})}).catch(function(){e.$message({type:"info",message:"已取消转办"})})},planDialog:function(){this.dialogFormVisible2=!0},handleClick:function(e,t){console.log(e,t)},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)}},Bt(Lt,"handleChange",function(e,t){this.fileList=t.slice(-3)}),Bt(Lt,"handleTabsEdit",function(e,t){if("add"===t){var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a,content:"New Tab content"}),this.editableTabsValue=a}if("remove"===t){var i=this.editableTabs,l=this.editableTabsValue;l===e&&i.forEach(function(t,a){if(t.name===e){var s=i[a+1]||i[a-1];s&&(l=s.name)}}),this.editableTabsValue=l,this.editableTabs=i.filter(function(t){return t.name!==e})}}),Bt(Lt,"searchHand",function(){this.pageNum=1,this.productBehind?this.pageNum=1:this.productBehind=0;var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{id:0,title:"",createUser:"",minPrice:0,maxPrice:0,podID:0,destinationID:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(e,t,a){a[t].number="付款单号",a[t].status="状态",a[t].createtime="发起时间",a[t].plan="团期计划",a[t].supplier="供应商",a[t].type="类型",a[t].money="金额",a[t].orinaze="申请组织",a[t].accpter="申请人"})}).catch(function(e){console.log(e)})}),Bt(Lt,"handleCurrentChange",function(e){this.pageNum=e,this.firstTab&&(this.firstIndex=e),this.secondTab&&(this.secondIndex=e);var t=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:e,pageSize:this.pageSize,total:0,object:{id:0,title:"",createUser:"",minPrice:0,maxPrice:0,podID:0,destinationID:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,t,a){a[t].number="付款单号",a[t].status="状态",a[t].createtime="发起时间",a[t].plan="团期计划",a[t].supplier="供应商",a[t].type="类型",a[t].money="金额",a[t].orinaze="申请组织",a[t].accpter="申请人"})}).catch(function(e){console.log(e)})}),Bt(Lt,"handleSizeChange",function(e){this.pagesize=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:1,pageSize:e,total:0,object:{id:0,title:"",createUser:"",minPrice:0,maxPrice:0,podID:0,destinationID:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){console.log(e.data),t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,t,a){a[t].number="付款单号",a[t].status="状态",a[t].createtime="发起时间",a[t].plan="团期计划",a[t].supplier="供应商",a[t].type="类型",a[t].money="金额",a[t].orinaze="申请组织",a[t].accpter="申请人"})}).catch(function(e){console.log(e)})}),Bt(Lt,"searchHand2",function(){this.pageNum=1;var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total2=t.data.total,e.tableData3=t.data.objects,e.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})}),Bt(Lt,"handleSizeChange2",function(e){this.pagesize2=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total2=e.data.total,t.tableData3=e.data.objects,t.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})}),Bt(Lt,"handleCurrentChange2",function(e){this.pageNum=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total2=e.data.total,t.tableData3=e.data.objects,t.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})}),Lt),created:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:1,pageSize:this.pageSize,total:0,object:{id:0,title:"",createUser:"",minPrice:0,maxPrice:0,podID:0,destinationID:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(e,t,a){a[t].number="付款单号",a[t].status="状态",a[t].createtime="发起时间",a[t].plan="团期计划",a[t].supplier="供应商",a[t].type="类型",a[t].money="金额",a[t].orinaze="申请组织",a[t].accpter="申请人"})}).catch(function(e){console.log(e)})}},At={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all",staticStyle:{position:"relative"}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"borders",staticStyle:{"margin-bottom":"100px"}},[a("div",[a("div",{staticClass:"search"},[a("span",{staticClass:"search_style"},[e._v("团期计划：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.plan,callback:function(t){e.plan=t},expression:"plan"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("申请人：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.accepter,callback:function(t){e.accepter=t},expression:"accepter"}}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("div",{staticClass:"date-line"}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"终止日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.searchHand()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.resetHand()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary",disabled:e.reable,plain:""},on:{click:e.dialogFind}},[e._v("审批")])],1)]),e._v(" "),a("div",{staticClass:"table_style"},[a("el-table",{staticStyle:{width:"70%"},attrs:{data:e.tableData,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass},on:{"row-click":e.clickBanle}},[a("el-table-column",{attrs:{prop:"number",label:"付款单号",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"发起时间",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plan",label:"团期计划",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplier",label:"供应商",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"money",label:"金额",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orinaze",label:"申请组织",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accpter",label:"申请人",width:"100",align:"center"}})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","margin-left":"-30%","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage4=t}}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"申请预付款",visible:e.dialogFormVisible,width:"60%","show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[1==this.find?a("div",{staticClass:"sh_style"},[e._v("审核中")]):e._e(),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("div",{staticClass:"btn",staticStyle:{position:"absolute","z-index":"9",top:"20px",right:"5%"}},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),1==this.find?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.Transfer("ruleForm")}}},[e._v("转办")]):e._e(),e._v(" "),1==this.find?a("el-button",{attrs:{type:"success"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")]):e._e(),e._v(" "),1==this.find?a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.boSubmit("ruleForm")}}},[e._v("驳回")]):e._e()],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"预付款申请",name:"first"}},[a("div",[a("el-form-item",{ref:"user",attrs:{label:"申请人",prop:"user","label-width":"120px"}},[a("div",{staticClass:"destination-input"},[e._l(e.dynamicTags3,function(t){return a("el-tag",{key:t.pod,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose3(t)}}},[e._v("\n                    "+e._s(t.pod)+"\n                  ")])}),e._v(" "),e.inputVisible3?a("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tags",attrs:{id:"ddd",size:"small",placeholder:"请输入申请人","trigger-on-focus":!1},model:{value:e.ruleForm.user,callback:function(t){e.$set(e.ruleForm,"user",t)},expression:"ruleForm.user"}}):a("el-button",{staticClass:"input-new-tag",attrs:{size:"small",disabled:e.change},on:{click:e.showInput3}},[e._v("请输入申请人")])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.noNull,expression:"noNull"}],attrs:{id:"isNull"}},[e._v("不能为空")])]),e._v(" "),a("el-form-item",{attrs:{label:"团期计划",prop:"tour","label-width":"120px"}},[a("el-input",{staticClass:"productName",attrs:{disabled:!0,placeholder:"请输入或者选择团期计划"},on:{blur:e.tour_check},model:{value:e.ruleForm.tour,callback:function(t){e.$set(e.ruleForm,"tour",t)},expression:"ruleForm.tour"}}),e._v(" "),a("el-input",{staticClass:"productName",staticStyle:{width:"30%"},attrs:{disabled:!0,placeholder:"自动补充产品名称"},model:{value:e.ruleForm.productName,callback:function(t){e.$set(e.ruleForm,"productName",t)},expression:"ruleForm.productName"}}),e._v(" "),a("el-button",{staticClass:"input-new-tag2",attrs:{size:"small",disabled:e.change},on:{click:e.showInput4}},[e._v("选择")])],1),e._v(" "),a("el-form-item",{ref:"supplier",attrs:{label:"供应商",prop:"supplier","label-width":"120px"}},[a("div",{staticClass:"destination-input"},[e._l(e.dynamicTags2,function(t){return a("el-tag",{key:t.id,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose2(t)}}},[e._v("\n                    "+e._s(t.label)+"\n                  ")])}),e._v(" "),e.inputVisible2?a("el-autocomplete",{ref:"saveTagInput",staticClass:"lable_input",attrs:{id:"input-error",disabled:e.change,size:"small",placeholder:"请输入供应商","fetch-suggestions":e.querySearch5,"trigger-on-focus":!1},on:{select:e.dest_01,blur:e.handleInputConfirm2},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm2(t):null}},model:{value:e.ruleForm.supplier,callback:function(t){e.$set(e.ruleForm,"supplier",t)},expression:"ruleForm.supplier"}}):a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.supplierLength,expression:"supplierLength"}],staticClass:"operation_Label",attrs:{disabled:e.change,size:"small"},on:{click:e.showInput2}},[e._v("请输入供应商")])],2),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.empty,expression:"empty"}],attrs:{id:"empty"}},[e._v("不能为空")])]),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type","label-width":"120px"}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择",disabled:e.change},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"借款金额",prop:"loanMoney","label-width":"120px"}},[a("el-input",{staticClass:"bright",attrs:{type:"number",placeholder:"借款金额",disabled:e.change},model:{value:e.ruleForm.loanMoney,callback:function(t){e.$set(e.ruleForm,"loanMoney",t)},expression:"ruleForm.loanMoney"}})],1),e._v(" "),a("el-form-item",{staticClass:"bright_b",staticStyle:{"margin-left":"35%"},attrs:{label:"借款数量",prop:"loanNumber","label-width":"120px"}},[a("el-input",{staticClass:"lightspot",staticStyle:{"margin-left":"10px"},attrs:{type:"number",placeholder:"借款数量",disabled:e.change},model:{value:e.ruleForm.loanNumber,callback:function(t){e.$set(e.ruleForm,"loanNumber",t)},expression:"ruleForm.loanNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"摘要",prop:"abstract","label-width":"120px"}},[a("el-input",{staticClass:"bright",attrs:{placeholder:"摘要",disabled:e.change},model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户",prop:"account","label-width":"120px"}},[a("el-input",{staticClass:"bright",attrs:{placeholder:"账户",disabled:e.change},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户行",prop:"bank","label-width":"120px"}},[a("el-input",{staticClass:"bright",attrs:{placeholder:"开户行",disabled:e.change},model:{value:e.ruleForm.bank,callback:function(t){e.$set(e.ruleForm,"bank",t)},expression:"ruleForm.bank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户名",prop:"bankName","label-width":"120px"}},[a("el-input",{staticClass:"bright",attrs:{placeholder:"开户名",disabled:e.change},model:{value:e.ruleForm.bankName,callback:function(t){e.$set(e.ruleForm,"bankName",t)},expression:"ruleForm.bankName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"payMode","label-width":"120px"}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择",disabled:e.change},model:{value:e.ruleForm.payMode,callback:function(t){e.$set(e.ruleForm,"payMode",t)},expression:"ruleForm.payMode"}},e._l(e.payModeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"附件","label-width":"120px"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",disabled:e.change,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"","label-width":"120px","label-height":"auto"}},[a("el-table",{staticStyle:{width:"70%"},attrs:{data:e.tableData5,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"total",label:"订单总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isTotal",label:"已审批总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"onTotal",label:"审批中总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sucTotal",label:"已收总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supTotal",label:"供应商欠款总额",align:"center"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款明细","label-width":"120px","label-height":"auto"}},[a("br"),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData6,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplier",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"付款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"org",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"审批过程",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"blue"},on:{click:function(a){e.advanceProcess2(t.row.id)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cancellationMoney",label:"已核销金额",align:"center"}})],1)],1),e._v(" "),e.dialogVisible6?a("el-form-item",{staticStyle:{"margin-top":"-21px"},attrs:{label:"","label-width":"120px","label-height":"auto"}},[a("el-table",{staticStyle:{width:"55%"},attrs:{data:e.tableData11,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要",align:"center"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"无收入借款明细","label-width":"120px","label-height":"auto"}},[a("br"),e._v(" "),a("el-table",{staticStyle:{width:"90%"},attrs:{data:e.tableData7,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplier",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"付款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"org",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"审批过程",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"blue"},on:{click:function(a){e.advanceProcess(t.row.id)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cancellationMoney",label:"已核销金额",align:"center"}})],1)],1),e._v(" "),e.dialogVisible5?a("el-form-item",{staticStyle:{"margin-top":"-21px"},attrs:{label:"","label-width":"120px","label-height":"auto"}},[a("el-table",{staticStyle:{width:"55%"},attrs:{data:e.tableData10,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要",align:"center"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"收入明细","label-width":"120px","label-height":"auto"}},[a("br"),e._v(" "),a("el-table",{staticStyle:{width:"85%"},attrs:{data:e.tableData8,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"oNo",label:"订单编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"联系人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"total",label:"订单金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accepted",label:"已收",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrears",label:"欠款",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"aNo",label:"收款单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrearsTime",label:"欠款日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"repaymentTime",label:"应还日期",align:"center"}})],1)],1)],1)])],1)],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"选择协办人:",visible:e.dialogFormVisible1,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"button_select",staticStyle:{"margin-bottom":"30px","margin-top":"-30px"}},[a("el-input",{staticClass:"input",staticStyle:{"margin-left":"0px"},model:{value:e.apply_user_input,callback:function(t){e.apply_user_input=t},expression:"apply_user_input"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.searchHand2()}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"table_trip",staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData3,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass2},on:{"row-click":e.clickBanle2}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"100%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120%",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"org",label:"组织",align:"center"}})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage2,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2,"update:currentPage":function(t){e.currentPage2=t}}})],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.routerHandle2()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{width:"60%",title:"选择报销的人",visible:e.dialogFormVisible2,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("div",{staticClass:"indialog"},[a("div",{staticClass:"indialog_search"},[a("span",{staticClass:"search_style"},[e._v("团期单号：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.planNum,callback:function(t){e.planNum=t},expression:"planNum"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("产品名称：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.planName,callback:function(t){e.planName=t},expression:"planName"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("出行日期：")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{placeholder:"请输入内容"},model:{value:e.planTime,callback:function(t){e.planTime=t},expression:"planTime"}}),e._v(" "),a("span",{staticClass:"search__"},[e._v("—")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{placeholder:"请输入内容"},model:{value:e.planTime1,callback:function(t){e.planTime1=t},expression:"planTime1"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"5px","margin-left":"10px"},attrs:{type:"primary",size:"mini",round:""}},[e._v("重置")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.planData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"团期计划ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"目的地"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"出行日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ornize",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proer",label:"产品录入人"}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{width:"60%",title:"添加报销",visible:e.dialogFormVisible3,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible3=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.joinData1,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"关联单号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gys",label:"供应商",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bm",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accpeter",label:"申请人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"发起日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"摘要"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"金额",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wcount",label:"未报销金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bcount",label:"报销金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100px"},model:{value:t.row.bcount,callback:function(a){e.$set(t.row,"bcount",a)},expression:"scope.row.bcount"}})]}}])})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.text("joinData1")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"请填写审批意见",visible:e.dialogFormVisible4,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible4=t}}},[a("textarea",{staticStyle:{width:"90%",height:"132px",resize:"none","margin-left":"13px"}},[e._v("123123")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var $t=a("VU/8")(Pt,At,!1,function(e){a("6iPZ")},"data-v-6d91c958",null).exports;function Ut(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in a)if(new RegExp("("+i+")").test(t)){var l=a[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?l:Rt(l))}return t}function Rt(e){return("00"+e).substr(e.length)}function jt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ot={name:"advanceInfo",components:{},props:{dialogFormVisible:!1,find:0,change:!1,pid:"",infoStatus:"",typeList:{type:Array,default:function(){return[]}},payModeList:{type:Array,default:function(){return[]}}},data:function(){var e;return jt(e={activeName:"first",activeName2:"three",startTime2:"",endTime2:"",pageSize2:5,total:0,total2:0,pageIndex2:1,currentPage2:1,arr:[],reable2:!0,pid2:0,firstIndex:1,secondIndex:1,firstTab:!0,secondTab:!1,approvalTotal:0,tableData2:[],tableData3:[],tableData4:[],tableData5:[],tableData6:[],tableData7:[],tableData8:[{oNo:"订单编号",source:"来源",user:"联系人",number:"人数",total:"订单金额",accepted:"已收",arrears:"欠款",aNo:"收款单号",arrearsTime:"欠款日期",repaymentTime:"应还日期"}],tableData9:[{account:"账户",bank:"开户行",name:"名称"}],tableData10:[{id:"1",createTime:"审批时间",user:"审批人",status:"审批结果",abstract:"审批意见"},{id:"2",createTime:"审批时间",user:"审批人",status:"审批结果",abstract:"审批意见"}],tableData11:[{id:"1",createTime:"审批时间",user:"审批人",status:"审批结果",abstract:"审批意见"},{id:"2",createTime:"审批时间",user:"审批人",status:"审批结果",abstract:"审批意见"}],supplier:"",supplier_id:0,type:"",payMode:"",ruleForm:{loanMoney:"",loanNumber:"",user:localStorage.getItem("name"),productName:"",tour:"",supplier:"",abstract:"",cardNumber:"",bankName:"",cardName:"",payMode:"",type:""},fileList:[],rules:{type:[{required:!0,message:"类型不能为空",trigger:"change"}],payMode:[{required:!0,message:"付款方式不能为空",trigger:"change"}],loanMoney:[{required:!0,message:"借款金额不能为空",trigger:"blur"}],loanNumber:[{required:!0,message:"借款数量不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"借款数量需为正整数"}],tour:[{required:!0,message:"团期计划不能为空",trigger:"change"}],supplier:[{required:!0,message:"供应商不能为空",trigger:"blur"}],productName:[{required:!0,message:"产品名称不能为空",trigger:"change"}],abstract:[{required:!0,message:"摘要不能为空",trigger:"blur"}],cardNumber:[{required:!0,message:"账户不能为空",trigger:"blur"}],bankName:[{required:!0,message:"开户行不能为空",trigger:"blur"}],cardName:[{required:!0,message:"开户名不能为空",trigger:"blur"}]}},"activeName","first"),jt(e,"inputVisible3",!1),jt(e,"dynamicTags2",[]),jt(e,"noNull",""),jt(e,"validaError",""),jt(e,"empty",""),jt(e,"dialogVadi",!1),jt(e,"supplierLength",!0),jt(e,"inputVisible3",!1),jt(e,"inputVisible2",!1),jt(e,"dialogVisible3",!1),jt(e,"dialogVisible4",!1),jt(e,"dialogVisible5",!1),jt(e,"dialogVisible6",!1),jt(e,"dialogVisible2",!1),jt(e,"dialogVisible",!1),jt(e,"apply_user_input",""),jt(e,"tour_name",""),jt(e,"tour_name_pre",""),jt(e,"tour_id",0),jt(e,"planID",""),jt(e,"product_name_pre",""),jt(e,"product_name",""),jt(e,"dynamicTags3",[]),jt(e,"imgBig",""),jt(e,"imgBigName",""),jt(e,"tour_group",[]),jt(e,"cardNumber_pre",""),jt(e,"bankName_pre",""),jt(e,"cardName_pre",""),jt(e,"time",0),jt(e,"len",0),jt(e,"uid",0),jt(e,"upload_url",this.GLOBAL.imgUrl+"/upload/api/picture"),e},computed:{},watch:{dialogFormVisible:function(){1==this.dialogFormVisible&&"0"!=this.find?this.getPaymentInfo():this.clearForm()}},methods:{closeAdd:function(){this.clearForm(),this.$emit("close",!1)},advanceProcess2:function(e){console.log(e),this.dialogVisible6=!0},advanceProcess:function(e){console.log(e),this.dialogVisible5=!0},getRowClass2:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},routerHandle2:function(){this.dynamicTags3.push({podID:this.user_id,pod:this.user_name}),this.ruleForm.user="1",this.dialogVisible=!1,this.$refs.ruleForm.validateField("user")},handleClose3:function(e){this.dynamicTags3.splice(this.dynamicTags3.indexOf(e),1),this.dynamicTags3.length<=0&&(this.ruleForm.user=""),this.$refs.ruleForm.validateField("user")},handlePreview:function(e,t){this.uid=e.uid,this.dialogVisible4=!0,this.imgBig=e.url,this.imgBigName=e.name},downloadIamge:function(e,t){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas"),i=a.width,l=a.height;(i>1e3||l>1e3)&&(i/l>1?(a.width=1e3,a.height=Math.round(l/i*1e3)):(a.height=1e3,a.width=Math.round(i/l*1e3))),e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0,a.width,a.height);var s=e.toDataURL("image/jpeg"),o=document.createElement("a"),r=new MouseEvent("click");o.download=t||"photo",o.href=s,o.dispatchEvent(r)},a.src=e},downs:function(){window.open(this.imgBig)},handleRemove:function(e,t){this.uid=t[0].uid,this.fileList=t},handleChange:function(e,t){this.fileList=t.slice(-3)},handleError:function(e,t){console.log("失败"),this.fileList=[]},handleSuccess:function(e,t,a){if(this.time!=a.length)if(this.time=a.length,0==this.fileList.length)this.fileList=a;else{this.len=this.fileList.length;for(var i=this.len;i<a.length;i++)this.fileList.push(a[i])}for(var l=null,s=this.len;s<a.length;s++)l=JSON.parse(a[s].response).paths[0],this.$set(this.fileList[s],"width",l.Width),this.$set(this.fileList[s],"height",l.Height),this.$set(this.fileList[s],"url1",l.Url),this.$set(this.fileList[s],"length",l.Length),this.$set(this.fileList[s],"name",l.Name);this.uid=a[0].uid},searchHand2:function(){this.pageNum=1;var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData3=t.data.objects}).catch(function(e){console.log(e)})},handleCurrentChange2:function(e){this.pageNum=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData3=e.data.objects}).catch(function(e){console.log(e)})},handleSizeChange2:function(e){this.pagesize2=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData3=e.data.objects}).catch(function(e){console.log(e)})},handDb:function(){this.$router.push({path:"advanceApply",query:{}})},handDb2:function(){this.$router.push({path:"/changepro",query:{id:this.pid2}})},resetHand:function(){this.groupNo="",this.user="",this.startTime="",this.endTime=""},handleClick:function(e,t){},routerHandle4:function(){this.ruleForm.tour=this.tour_name_pre,this.ruleForm.productName=this.product_name_pre,this.getPaymentdetails(this.planID),this.dialogVisible2=!1},getRowClass4:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},clickBanle2:function(e,t,a){this.user_id=e.id,this.user_name=e.name,this.reable=!1},clickBanle4:function(e,t,a){this.tour_id=e.planID,this.tour_name_pre=e.groupCode,this.product_name_pre=e.title,this.planID=e.planID,this.reable=!1},clickBanle5:function(e,t,a){this.cardNumber_pre=e.cardNumber,this.bankName_pre=e.bankName,this.cardName_pre=e.cardName},routerHandle5:function(){this.ruleForm.cardNumber=this.cardNumber_pre,this.ruleForm.bankName=this.bankName_pre,this.ruleForm.cardName=this.cardName_pre,this.dialogVisible3=!1,this.$refs.ruleForm.validateField("cardNumber"),this.$refs.ruleForm.validateField("bankName"),this.$refs.ruleForm.validateField("cardName")},tour_check:function(){var e=this;""!=this.ruleForm.tour?this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/planfinancelist",{pageIndex:1,pageSize:1,object:{groupCode:this.ruleForm.tour,title:"",beginDate:0,endDate:0}}).then(function(t){1==t.data.isSuccess&&(e.product_name_pre=t.data.objects[0].title,e.ruleForm.productName=t.data.objects[0].title,e.getPaymentdetails(t.data.objects[0].planID))}).catch(function(t){console.log(t),e.product_name_pre="",e.ruleForm.productName=""}):(this.product_name_pre="",this.ruleForm.productName="")},searchHand4:function(){var e=this;this.pageNum=1,this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/planfinancelist",{pageIndex:this.pageIndex,pageSize:this.pageSize2,object:{groupCode:this.tour_name,title:this.product_name,beginDate:this.startTime2?Ut(this.startTime2,"yyyyMMdd"):0,endDate:this.endTime2?Ut(this.endTime2,"yyyyMMdd"):0}}).then(function(t){1==t.data.isSuccess&&(e.tableData4=t.data.objects,e.total=t.data.total)}).catch(function(e){console.log(e)})},handleCurrentChange4:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/planfinancelist",{pageIndex:e,pageSize:this.pageSize2,object:{groupCode:this.tour_name,title:this.product_name,beginDate:this.startTime?Ut(this.startTime,"yyyyMMdd"):0,endDate:this.endTime?Ut(this.endTime,"yyyyMMdd"):0}}).then(function(e){1==e.data.isSuccess&&(t.tableData4=e.data.objects,t.total=e.data.total)}).catch(function(e){console.log(e)})},handleSizeChange4:function(e){var t=this;this.pageSize=e,this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/planfinancelist",{pageIndex:1,pageSize:this.pageSize2,object:{groupCode:this.tour_name,title:this.product_name,beginDate:this.startTime?Ut(this.startTime,"yyyyMMdd"):0,endDate:this.endTime?Ut(this.endTime,"yyyyMMdd"):0}}).then(function(e){1==e.data.isSuccess&&(t.tableData4=e.data.objects,t.total=e.data.total)}).catch(function(e){console.log(e)})},showInput5:function(){var e=this;this.supplier_id?(this.dialogVisible3=!0,this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/banklist",{object:{supplierID:this.supplier_id}}).then(function(t){e.tableData9=t.data.objects}).catch(function(e){console.log(e)})):this.$message.error("供应商未匹配后台数据,请手动输入银行信息!")},showInput4:function(){this.dialogVisible2=!0},showInput3:function(){this.dialogVisible=!0},dest_01:function(e){this.ruleForm.supplier=e.value,this.inputVisible2=!1},handleInputConfirm2:function(){var e=this;""!==this.ruleForm.supplier?(setTimeout(function(t){var a=e.ruleForm.supplier;a&&(e.dynamicTags2.push({labelID:0,label:a,teamID:0}),e.ruleForm.supplier=a),e.inputVisible2=!1,e.empty=!1},200),this.supplierLength=!1):0==this.dynamicTags2.length?(this.empty=!0,document.getElementById("input-error").style.border="solid 1px red"):this.inputVisible2=!1,this.$refs.ruleForm.validateField("supplier")},handleClose2:function(e){this.dynamicTags2.splice(this.dynamicTags2.indexOf(e),1),this.supplierLength=!0,this.dynamicTags2.length<1&&(this.ruleForm.supplier="",this.supplier_id=0),this.$refs.ruleForm.validateField("supplier")},showInput2:function(){var e=this;this.dynamicTags2.length<1&&(this.inputVisible2=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})),this.$refs.ruleForm.validateField("supplier")},querySearch5:function(e,t){var a=this;this.tableData2=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/supplier/api/supplierlist",{object:{name:e}}).then(function(i){for(var l=0;l<i.data.objects.length;l++)a.tableData2.push({value:i.data.objects[l].name,id:i.data.objects[l].id}),a.supplier_id=i.data.objects[l].id?i.data.objects[l].id:0;var s=e?a.tableData2.filter(a.createFilter(e)):[];t(s)}).catch(function(e){console.log(e)})},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;for(var a=[],i=0;i<t.fileList.length;i++){var l={};l.url=t.fileList[i].url1,l.name=t.fileList[i].name,a.push(l)}t.$http.post(t.GLOBAL.serverSrc+"/finance/payment/api/insert",{object:{createUser:sessionStorage.getItem("id"),paymentType:2,planID:t.tour_id,supplierID:t.supplier_id,supplierName:t.ruleForm.supplier,supplierType:t.ruleForm.type,price:t.ruleForm.loanMoney,peopleCount:t.ruleForm.loanNumber,mark:t.ruleForm.abstract,cardNumber:t.ruleForm.cardNumber,bankName:t.ruleForm.bankName,cardName:t.ruleForm.cardName,payway:t.ruleForm.payMode,files:a}}).then(function(e){console.log(e.data),1==e.data.isSuccess?(t.closeAdd(),t.sendBPM(e.data.object),t.$emit("searchHandList",!1)):(console.log("有错误!"),console.log(e.data))}).catch(function(e){console.log(e)}),t.$message({type:"success",message:"创建成功!"})})},sendBPM:function(e){this.$http.post(this.GLOBAL.jqUrl+"/api/JQ/StartUpWorkFlowForJQ",{jQ_ID:e.guid,jQ_Type:e.flowModel,workflowCode:e.flowModelName,userCode:sessionStorage.getItem("account")}).then(function(e){"0"==JSON.parse(e.data).code?console.log("启动工作流成功"):(console.log("启动工作流错误!"),console.log(e.data))}).catch(function(e){console.log(e)})},chanelSubmit:function(){var e=this;this.$confirm("是否撤销该条借款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e;t.$http.post(t.GLOBAL.serverSrc+"/finance/payment/api/delete",{id:t.pid},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){1==e.data.isSuccess?(t.$message({type:"success",message:"撤销成功!"}),thua.closeAdd()):(t.$message.error(e.data.result.message),console.log(e.data.result.message))}).catch(function(e){console.log(e)}),t.$emit("searchHandList",!1)}).catch(function(){e.$message({type:"info",message:"已取消撤销申请!"}),e.$emit("searchHandList",!1)})},getPaymentInfo:function(){var e=this;e.$http.post(e.GLOBAL.serverSrc+"/finance/payment/api/get",{id:this.pid},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.ruleForm.user=t.data.object.createUser,e.ruleForm.supplier=t.data.object.createUser,e.supplier_id=t.data.object.supplierID,e.supplier=t.data.object.supplierName,e.supplierLength=!1,e.tour_id=t.data.object.planID,e.ruleForm.type=t.data.object.supplierType,e.ruleForm.loanMoney=t.data.object.price,e.ruleForm.loanNumber=t.data.object.peopleCount,e.ruleForm.abstract=t.data.object.mark,e.ruleForm.cardNumber=t.data.object.cardNumber,e.ruleForm.bankName=t.data.object.bankName,e.ruleForm.cardName=t.data.object.cardName,e.ruleForm.payMode=t.data.object.payway,e.$set(e.dynamicTags2,0,{labelID:t.data.object.supplierID,label:t.data.object.supplierName,teamID:0}),e.getTourByPlanId(t.data.object.planID),e.getPaymentdetails(t.data.object.planID),t.data.object.files.forEach(function(t,a,i){e.fileList.push({url:e.GLOBAL.imgUrl+"/upload"+i[a].url,name:i[a].name})}),console.log(e.fileList)}).catch(function(e){console.log(e)})},getTourByPlanId:function(e){var t=this;t.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/planfinancelist",{object:{planID:e}}).then(function(e){1==e.data.isSuccess&&(t.ruleForm.tour=e.data.objects[0].groupCode,t.ruleForm.productName=e.data.objects[0].title)}).catch(function(e){console.log(e)})},getPaymentdetails:function(e){var t=this;t.$http.post(this.GLOBAL.serverSrc+"/financequery/get/api/paymentdetails",{object:{paymentType:2,planID:e}}).then(function(e){1==e.data.isSuccess&&(t.tableData6=e.data.objects)}).catch(function(e){console.log(e)}),t.$http.post(this.GLOBAL.serverSrc+"/financequery/get/api/paymentdetails",{object:{paymentType:1,planID:e}}).then(function(e){1==e.data.isSuccess&&(t.tableData7=e.data.objects)}).catch(function(e){console.log(e)}),t.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/fivetotal",{object:{id:e}}).then(function(e){1==e.data.isSuccess&&(t.tableData5=[],t.tableData5.push(e.data.object))}).catch(function(e){console.log(e)})},clearForm:function(){this.ruleForm={loanMoney:"",loanNumber:"",user:localStorage.getItem("name"),productName:"",tour:"",supplier:"",abstract:"",cardNumber:"",bankName:"",cardName:"",payMode:"",type:""},this.supplier_id=0,this.supplier="",this.dynamicTags2.splice(0,1),this.supplierLength=!0,this.tour_id=0,this.fileList=[]}},created:function(){}},Mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-dialog",{attrs:{title:"申请预付款",visible:e.dialogFormVisible,width:"60%","show-close":!1},on:{close:e.closeAdd}},[1==this.find?a("div",{staticClass:"sh_style"},[e._v(e._s(this.infoStatus))]):e._e(),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("div",{staticClass:"btn",staticStyle:{position:"absolute","z-index":"9",top:"20px",right:"1%"}},[a("el-button",{on:{click:e.closeAdd}},[e._v("取 消")]),e._v(" "),0==this.find?a("el-button",{staticStyle:{right:"1%",float:"right"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")]):e._e(),e._v(" "),1==this.find&&"审批中"==this.infoStatus?a("el-button",{staticStyle:{right:"1%",float:"right"},attrs:{type:"danger",plain:""},on:{click:function(t){e.chanelSubmit("ruleForm")}}},[e._v("撤销申请")]):e._e()],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"预付款申请",name:"first"}},[a("div",[a("el-form-item",{ref:"user",attrs:{label:"申请人",prop:"user","label-width":"120px"}},[a("el-input",{staticClass:"inputWidth",attrs:{disabled:"",placeholder:"请输入申请人"},model:{value:e.ruleForm.user,callback:function(t){e.$set(e.ruleForm,"user",t)},expression:"ruleForm.user"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"团期计划",prop:"tour","label-width":"120px"}},[a("el-input",{staticClass:"inputWidth",attrs:{disabled:e.change,placeholder:"请输入或者选择团期计划"},on:{blur:e.tour_check},model:{value:e.ruleForm.tour,callback:function(t){e.$set(e.ruleForm,"tour",t)},expression:"ruleForm.tour"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"left","margin-left":"10px"},attrs:{prop:"productName"}},[a("el-input",{staticClass:"inputWidth",attrs:{disabled:!0,placeholder:"自动补充产品名称"},model:{value:e.ruleForm.productName,callback:function(t){e.$set(e.ruleForm,"productName",t)},expression:"ruleForm.productName"}}),e._v(" "),a("el-button",{staticClass:"input-new-tag2",attrs:{size:"small",disabled:e.change},on:{click:e.showInput4}},[e._v("选择")])],1),e._v(" "),a("el-form-item",{ref:"supplier",staticStyle:{clear:"both"},attrs:{label:"供应商",prop:"supplier","label-width":"120px"}},[a("div",{staticClass:"destination-input inputWidth"},[e._l(e.dynamicTags2,function(t){return a("el-tag",{key:t.id,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose2(t)}}},[e._v("\n                  "+e._s(t.label)+"\n                ")])}),e._v(" "),e.inputVisible2?a("el-autocomplete",{ref:"saveTagInput",staticClass:"lable_input",attrs:{id:"input-error",disabled:e.change,size:"small",placeholder:"请输入供应商","fetch-suggestions":e.querySearch5,"trigger-on-focus":!1},on:{select:e.dest_01,blur:e.handleInputConfirm2},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm2(t):null}},model:{value:e.ruleForm.supplier,callback:function(t){e.$set(e.ruleForm,"supplier",t)},expression:"ruleForm.supplier"}}):a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.supplierLength,expression:"supplierLength"}],staticClass:"operation_Label inputWidth",attrs:{disabled:e.change,size:"small"},on:{click:e.showInput2}},[e._v("请输入供应商")])],2)]),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type","label-width":"120px"}},[a("el-select",{staticClass:"inputWidth",staticStyle:{float:"left"},attrs:{placeholder:"请选择类型",disabled:e.change},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"借款金额",prop:"loanMoney","label-width":"120px"}},[a("el-input",{staticClass:"bright inputWidth",attrs:{type:"number",placeholder:"借款金额",disabled:e.change},model:{value:e.ruleForm.loanMoney,callback:function(t){e.$set(e.ruleForm,"loanMoney",t)},expression:"ruleForm.loanMoney"}})],1),e._v(" "),a("el-form-item",{staticClass:"bright_b",staticStyle:{"margin-left":"30%"},attrs:{label:"借款数量",prop:"loanNumber","label-width":"80px"}},[a("el-input",{staticClass:"lightspot inputWidth",staticStyle:{"margin-left":"10px"},attrs:{type:"number",placeholder:"借款数量",disabled:e.change},model:{value:e.ruleForm.loanNumber,callback:function(t){e.$set(e.ruleForm,"loanNumber",t)},expression:"ruleForm.loanNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"摘要",prop:"abstract","label-width":"120px"}},[a("el-input",{staticClass:"bright inputWidth",attrs:{placeholder:"摘要",disabled:e.change},model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户",prop:"cardNumber","label-width":"120px"}},[a("el-input",{staticClass:"bright inputWidth",attrs:{placeholder:"账户",disabled:e.change},model:{value:e.ruleForm.cardNumber,callback:function(t){e.$set(e.ruleForm,"cardNumber",t)},expression:"ruleForm.cardNumber"}}),e._v(" "),a("el-button",{staticClass:"input-new-tag2 ",attrs:{size:"small",disabled:e.change},on:{click:e.showInput5}},[e._v("选择")])],1),e._v(" "),a("el-form-item",{attrs:{label:"开户行",prop:"bankName","label-width":"120px"}},[a("el-input",{staticClass:"bright inputWidth",attrs:{placeholder:"开户行",disabled:e.change},model:{value:e.ruleForm.bankName,callback:function(t){e.$set(e.ruleForm,"bankName",t)},expression:"ruleForm.bankName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户名",prop:"cardName","label-width":"120px"}},[a("el-input",{staticClass:"bright inputWidth",attrs:{placeholder:"开户名",disabled:e.change},model:{value:e.ruleForm.cardName,callback:function(t){e.$set(e.ruleForm,"cardName",t)},expression:"ruleForm.cardName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"payMode","label-width":"120px"}},[a("el-select",{staticClass:"inputWidth",staticStyle:{float:"left"},attrs:{placeholder:"请选择",disabled:e.change},model:{value:e.ruleForm.payMode,callback:function(t){e.$set(e.ruleForm,"payMode",t)},expression:"ruleForm.payMode"}},e._l(e.payModeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"附件","label-width":"120px"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"files",limit:12,multiple:"",action:this.upload_url,disabled:e.change,"file-list":e.fileList,"on-error":e.handleError,"on-success":e.handleSuccess,"on-remove":e.handleRemove,"on-preview":e.handlePreview,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"","label-width":"120px","label-height":"auto"}},[a("el-table",{staticStyle:{width:"70%"},attrs:{data:e.tableData5,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"payable",label:"订单总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payment",label:"已审批总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentChecking",label:"审批中总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"已收总额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supTotal",label:"供应商欠款总额",align:"center"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"预付付款明细","label-width":"120px","label-height":"auto"}},[a("br"),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData6,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"paymentID",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkType",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentType",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"付款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"peopleCount",label:"人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",label:"摘要",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"审批过程",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"blue"},on:{click:function(a){e.advanceProcess2(t.row.id)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expensePrice",label:"已核销金额",align:"center"}})],1)],1),e._v(" "),e.dialogVisible6?a("el-form-item",{staticStyle:{"margin-top":"-21px"},attrs:{label:"","label-width":"120px","label-height":"auto"}},[a("el-table",{staticStyle:{width:"55%"},attrs:{data:e.tableData11,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要",align:"center"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"无收入借款明细","label-width":"120px","label-height":"auto"}},[a("br"),e._v(" "),a("el-table",{staticStyle:{width:"90%"},attrs:{data:e.tableData7,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"paymentID",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkType",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentType",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"付款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",label:"摘要",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"审批过程",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"blue"},on:{click:function(a){e.advanceProcess(t.row.id)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expensePrice",label:"已核销金额",align:"center"}})],1)],1),e._v(" "),e.dialogVisible5?a("el-form-item",{staticStyle:{"margin-top":"-21px"},attrs:{label:"","label-width":"120px","label-height":"auto"}},[a("el-table",{staticStyle:{width:"55%"},attrs:{data:e.tableData10,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要",align:"center"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"收入明细","label-width":"120px","label-height":"auto"}},[a("br"),e._v(" "),a("el-table",{staticStyle:{width:"85%"},attrs:{data:e.tableData8,border:"","header-cell-style":e.getRowClass2}},[a("el-table-column",{attrs:{prop:"oNo",label:"订单编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"联系人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"total",label:"订单金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accepted",label:"已收",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrears",label:"欠款",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"aNo",label:"收款单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrearsTime",label:"欠款日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"repaymentTime",label:"应还日期",align:"center"}})],1)],1)],1)])],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"city_list tips",attrs:{title:"提示信息",visible:e.dialogVadi,width:"400px"},on:{"update:visible":function(t){e.dialogVadi=t}}},[a("div",e._l(e.validaError,function(t){return a("ul",[a("li",[e._v(e._s(t))])])}))]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"选择申请人:",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"button_select",staticStyle:{"margin-bottom":"30px","margin-top":"-30px"}},[a("el-input",{staticClass:"input",staticStyle:{"margin-left":"0px"},model:{value:e.apply_user_input,callback:function(t){e.apply_user_input=t},expression:"apply_user_input"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.searchHand2()}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"table_trip",staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData3,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass2},on:{"row-click":e.clickBanle2}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"100%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120%",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center",width:"120%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"org",label:"组织",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"110%"}})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage2,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2,"update:currentPage":function(t){e.currentPage2=t}}})],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.routerHandle2()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"选择团期:",visible:e.dialogVisible2,width:"70%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"button_select",staticStyle:{"margin-bottom":"30px","margin-top":"-30px"}},[a("span",{staticClass:"search-title"},[e._v("团期计划")]),e._v(" "),a("el-input",{staticClass:"group-no",staticStyle:{width:"20%"},attrs:{placeholder:"团期计划"},model:{value:e.tour_name,callback:function(t){e.tour_name=t},expression:"tour_name"}}),e._v(" "),a("span",{staticClass:"search-title"},[e._v("产品名称")]),e._v(" "),a("el-input",{staticClass:"group-no",staticStyle:{width:"20%"},attrs:{placeholder:"产品名称"},model:{value:e.product_name,callback:function(t){e.product_name=t},expression:"product_name"}}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startTime2,callback:function(t){e.startTime2=t},expression:"startTime2"}}),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"终止日期"},model:{value:e.endTime2,callback:function(t){e.endTime2=t},expression:"endTime2"}}),e._v(" "),a("el-button",{staticClass:"search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.searchHand4()}}})],1),e._v(" "),a("div",{staticClass:"table_trip",staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData4,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass4},on:{"row-click":e.clickBanle4}},[a("el-table-column",{attrs:{prop:"groupCode",label:"团号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"destination",label:"目的地"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"出行日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作"}})],1)],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.routerHandle4()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"选择账户:",visible:e.dialogVisible3,width:"50%"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"供应商",name:"three"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData9,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass4},on:{"row-click":e.clickBanle5}},[a("el-table-column",{attrs:{prop:"cardNumber",label:"账户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bankName",label:"开户行"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardName",label:"名称"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible3=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.routerHandle5()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"放大图片:",visible:e.dialogVisible4,width:"50%"},on:{"update:visible":function(t){e.dialogVisible4=t}}},[a("el-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"primary"},on:{click:function(t){e.downs()}}},[e._v("点击下载")]),e._v(" "),a("div",[a("img",{staticStyle:{width:"95%"},attrs:{src:e.imgBig,alt:"图片",alt:e.imgBigName}}),e._v(" "),a("br"),a("span",[e._v(e._s(e.imgBigName))])])],1)],1)},staticRenderFns:[]};var zt=a("VU/8")(Ot,Mt,!1,function(e){a("VWbP")},"data-v-77c261e0",null).exports,qt={name:"advancePayment",components:{NeedApproval:$t,AdvanceInfo:zt},data:function(){return{activeName:"first",groupNo:"",user:"",startTime:"",endTime:"",reable:!0,tableData:[],currentPage4:1,total:0,pageIndex:1,pageSize:10,payModeList:[],typeList:[],find:0,change:!1,pid:"",infoStatus:"",dialogFormVisible:!1}},computed:{approval:function(){return this.approvalTotal>0?"您需要审批("+this.approvalTotal+")":"您需要审批"}},methods:{closeAdd:function(){this.dialogFormVisible=!1},clickBanle:function(e,t,a){this.infoStatus=e.checkTypeEX,this.pid=e.paymentID,this.reable=!1},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},handleClick:function(e,t){"first"==e.name&&(this.firstTab=!0,this.secondTab=!1,this.pageIndex=this.firstIndex,this.currentPage4=this.firstIndex),"second"==e.name&&(this.firstTab=!1,this.secondTab=!0,this.pageIndex=this.secondIndex,this.currentPage4=this.secondIndex)},dialogchange:function(){this.find=0,this.change=!1,this.dialogFormVisible=!0},dialogFind:function(){this.find=1,this.change=!0,this.dialogFormVisible=!0},handleSizeChange:function(e){this.pagesize=e;var t={paymentType:2};this.groupNo&&(t.groupCode=this.groupNo),this.user&&(t.createUser=this.user),this.startTime&&(t.beginTime=this.startTime?Ut(this.startTime,"yyyyMMdd"):0),this.endTime&&(t.endTime=this.endTime?Ut(this.endTime,"yyyyMMdd"):0);var a=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/payment/api/page",{pageIndex:1,pageSize:e,total:0,object:t},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){console.log(e.data),a.total=e.data.total,a.tableData=e.data.objects}).catch(function(e){console.log(e)})},searchHand:function(){this.pageNum=1;var e={paymentType:2};this.groupNo&&(e.groupCode=this.groupNo),this.user&&(e.createUser=this.user),this.startTime&&(e.beginTime=this.startTime?Ut(this.startTime,"yyyyMMdd"):0),this.endTime&&(e.endTime=this.endTime?Ut(this.endTime,"yyyyMMdd"):0);var t=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/payment/api/page",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:e},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.pageNum=e,this.firstTab&&(this.firstIndex=e),this.secondTab&&(this.secondIndex=e);var t={paymentType:2};this.groupNo&&(t.groupCode=this.groupNo),this.user&&(t.createUser=this.user),this.startTime&&(t.beginTime=this.startTime?Ut(this.startTime,"yyyyMMdd"):0),this.endTime&&(t.endTime=this.endTime?Ut(this.endTime,"yyyyMMdd"):0);var a=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/payment/api/page",{pageIndex:e,pageSize:this.pageSize,total:0,object:t},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){a.total=e.data.total,a.tableData=e.data.objects}).catch(function(e){console.log(e)})},querySearch6:function(){var e=this;this.typeList=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/suppliertype/api/get",{}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.typeList.push({value:t.data.objects[a].id,label:t.data.objects[a].name})}).catch(function(e){console.log(e)})},querySearch7:function(){var e=this;this.payModeList=[],this.$http.post(this.GLOBAL.serverSrc+"/finance/payway/api/get",{object:{id:1}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.payModeList.push({value:t.data.objects[a].id,label:t.data.objects[a].name})}).catch(function(e){console.log(e)})}},created:function(){this.querySearch6(),this.querySearch7(),this.searchHand()}},Vt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"付款",name:"first"}},[a("span",{staticClass:"search-title"},[e._v("团期计划:")]),e._v(" "),a("el-input",{staticClass:"input",model:{value:e.groupNo,callback:function(t){e.groupNo=t},expression:"groupNo"}}),e._v(" "),a("span",{staticClass:"search-title"},[e._v("申请人:")]),e._v(" "),a("el-input",{staticClass:"input",model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("div",{staticClass:"date-line"}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"终止日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),e._v(" "),a("div",{staticStyle:{border:"0px solid #e9eaea","margin-bottom":"100px","margin-top":"30px","margin-left":"20px",width:"100%"}},[a("div",{staticClass:"button_select"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.searchHand()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.resetHand()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"button_select"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.dialogchange}},[e._v("申请预付款")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",disabled:e.reable},on:{click:e.dialogFind}},[e._v("查看借款")])],1),e._v(" "),a("div",{staticClass:"table_trip",staticStyle:{width:"70%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass},on:{"row-click":e.clickBanle}},[a("el-table-column",{attrs:{prop:"paymentID",label:"付款单号",align:"center",width:"80%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkTypeEX",label:"状态",width:"100%",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发起时间",align:"center",width:"120%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierTypeEX",label:"类型",align:"center",width:"110%"}}),e._v(" "),a("el-table-column",{attrs:{"cell-style":"",prop:"price",label:"金额",align:"center",width:"110%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"申请组织",align:"center",width:"120%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"申请人",align:"center",width:"120%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"opinion",label:"审批意见",align:"center",width:"120%"}})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","margin-left":"-30%","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage4=t}}})],1)])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"需要您审批",name:"second"}},[a("NeedApproval")],1)],1),e._v(" "),a("AdvanceInfo",{attrs:{dialogFormVisible:e.dialogFormVisible,find:e.find,change:e.change,pid:e.pid,typeList:e.typeList,payModeList:e.payModeList,infoStatus:e.infoStatus},on:{close:e.closeAdd,searchHandList:e.searchHand}})],1)},staticRenderFns:[]};var Ht=a("VU/8")(qt,Vt,!1,function(e){a("arYN")},"data-v-2a52d8ec",null).exports,Wt={name:"needApproval",data:function(){var e=this;return{find:0,change:!1,radio:"1",dialogFormVisible2:!1,dialogFormVisible3:!1,dialogFormVisible:!1,dialogFormVisible1:!1,dialogFormVisible4:!1,planNum:"",planName:"",planTime:"",planTime1:"",domains:[{type:"地接",money:"9000.00"}],ruleForm:{name:[{tt:"大运通-日本",peo:"阳阳"}],plan:{planId:"",planName:""},monkey:{type:"小费",count:"1000.00"},content:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],plan:[{validator:function(t,a,i){if(console.log(e.ruleForm),""==e.ruleForm.plan.planId||""==e.ruleForm.plan.planName)return i(new Error("团期计划不能为空"));i()},trigger:"blur"}],monkey:[{validator:function(t,a,i){if(console.log(e.ruleForm),""==e.ruleForm.monkey.type||""==e.ruleForm.monkey.count)return i(new Error("报销金额不能为空"));i()},trigger:"blur"}],contents:[{required:!0,message:"请输入摘要信息",trigger:"blur"}]},reimData:[{reier:"",reisult:"",info:"",time:""}],formLabelWidth:"120px",currentPage4:4,activeName:"first",number:"",plan:"",accepter:"",createtime1:"",createtime2:"",tableData:[{number:"1",type:"申请中",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",monkey:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:""},{number:"1",type:"驳回",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",monkey:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:"郑总：信息补全"},{number:"1",type:"通过",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",monkey:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:""}],tableData1:[{id:"001",name:"张三",phone:"15566447881",orinaze:"辽宁大运通-销售部-主管 辽宁大运通-销售部-主管",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"}],planData:[{id:"TC-GTY-1001-01-180806-01",name:"美国西海岸三城双奥莱10日之旅",address:"西雅图",time:"2019-01-09",ornize:"辽宁大运通-北美部",proer:"阳阳"},{id:"TC-GTY-1001-01-180806-01",name:"美国西海岸三城双奥莱10日之旅",address:"西雅图",time:"2019-01-09",ornize:"辽宁大运通-北美部",proer:"阳阳"}],joinData:[{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:"17800.00"},{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:"17800.00"}],joinData1:[{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:""},{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:""}],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],editableTabsValue:"1",editableTabs:[{title:"Tab 1",name:"1",content:"Tab 1 content"}],tabIndex:1}},methods:{removeDomain:function(e){var t=this.domains.indexOf(e);-1!==t&&this.domains.splice(t,1)},addDomain:function(){this.domains.push({type:"",money:""})},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},Transfer:function(){this.dialogFormVisible1=!0},boSubmit:function(){this.dialogFormVisible4=!0},chanelSubmit:function(){var e=this;this.$confirm("是否撤销该条借款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"撤销成功!"})}).catch(function(){e.$message({type:"info",message:"已取消撤销"})})},text:function(e){console.log(this.joinData1)},dialogchange:function(){this.find=0,this.change=!1,this.dialogFormVisible=!0},dialogFind:function(){this.find=1,this.change=!0,this.dialogFormVisible=!0},addbx:function(){this.dialogFormVisible3=!0},adddialog:function(){this.dialogFormVisible1=!0},planDialog:function(){this.dialogFormVisible2=!0},handleClick:function(e,t){console.log(e,t)},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},handleChange:function(e,t){this.fileList=t.slice(-3)},handleTabsEdit:function(e,t){if("add"===t){var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a,content:"New Tab content"}),this.editableTabsValue=a}if("remove"===t){var i=this.editableTabs,l=this.editableTabsValue;l===e&&i.forEach(function(t,a){if(t.name===e){var s=i[a+1]||i[a-1];s&&(l=s.name)}}),this.editableTabsValue=l,this.editableTabs=i.filter(function(t){return t.name!==e})}}}},Gt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"borders"},[a("div",[a("div",{staticClass:"search"},[a("span",{staticClass:"search_style"},[e._v("报销单号：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("团期计划：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.plan,callback:function(t){e.plan=t},expression:"plan"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("申请人：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.accepter,callback:function(t){e.accepter=t},expression:"accepter"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("发起时间：")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{placeholder:"请输入内容"},model:{value:e.createtime1,callback:function(t){e.createtime1=t},expression:"createtime1"}}),e._v(" "),a("span",{staticClass:"search__"},[e._v("—")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{placeholder:"请输入内容"},model:{value:e.createtime2,callback:function(t){e.createtime2=t},expression:"createtime2"}})],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary"}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.dialogFind}},[e._v("审批")])],1)]),e._v(" "),a("div",{staticClass:"table_style"},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"number",label:"报销单号",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"发起时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plan",label:"团期计划",width:"250",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"monkey",label:"报销金额",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orinaze",label:"申请组织",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accpter",label:"申请人",width:"180",align:"center"}})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[100,200,300,400],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:400,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage4=t}}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"报销申请",visible:e.dialogFormVisible,width:"70%","show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"报销人",prop:"name"}},[a("div",{staticClass:"reimbursementer"},e._l(e.ruleForm.name,function(t,i){return a("div",{staticStyle:{"margin-left":"5px",float:"left"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.tt))]),e._v(" "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.peo))])],1)})),e._v(" "),0==this.find?a("el-button",{attrs:{type:"info"},on:{click:e.adddialog}},[e._v("选择")]):e._e()],1),e._v(" "),a("div",[a("el-tabs",{staticStyle:{border:"1px solid #E4E7ED"},attrs:{type:"card",editable:""},on:{edit:e.handleTabsEdit},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,function(t,i){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[a("el-form-item",{attrs:{label:"团期计划",prop:"plan"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入或者选择团期计划",disabled:e.change},model:{value:e.ruleForm.plan.planId,callback:function(t){e.$set(e.ruleForm.plan,"planId",t)},expression:"ruleForm.plan.planId"}}),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入或者选择团期计划",disabled:e.change},model:{value:e.ruleForm.plan.planName,callback:function(t){e.$set(e.ruleForm.plan,"planName",t)},expression:"ruleForm.plan.planName"}}),e._v(" "),0==e.find?a("el-button",{attrs:{size:"mini"},on:{click:e.planDialog}},[e._v("选择")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"报销金额",prop:"monkey"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入或者选择报销类型",disabled:e.change},model:{value:e.ruleForm.monkey.type,callback:function(t){e.$set(e.ruleForm.monkey,"type",t)},expression:"ruleForm.monkey.type"}}),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入或者选择报销金额",disabled:e.change},model:{value:e.ruleForm.monkey.count,callback:function(t){e.$set(e.ruleForm.monkey,"count",t)},expression:"ruleForm.monkey.count"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"摘要",prop:"contents"}},[a("el-input",{staticStyle:{width:"480px"},attrs:{placeholder:"请输入或者选择报销类型"},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"附件"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.handleChange,"file-list":e.fileList}},[0==e.find?a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"re_style"},[a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("关联单据")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("手添报销单据")])],1),e._v(" "),1==e.radio?a("div",[a("div",{staticClass:"re_style",staticStyle:{"margin-top":"20px"}},[0==e.find?a("el-button",{on:{click:e.addbx}},[e._v("增加")]):e._e(),e._v(" "),0==e.find?a("el-button",{on:{click:e.addbx}},[e._v("修改")]):e._e(),e._v(" "),0==e.find?a("el-button",{attrs:{type:"danger"}},[e._v("删除")]):e._e()],1),e._v(" "),a("div",{staticClass:"re_style"},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.joinData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"关联单号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gys",label:"供应商",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bm",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accpeter",label:"申请人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"发起日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"摘要"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wcount",label:"未报销金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bcount",label:"报销金额"}})],1)],1),e._v(" "),a("div",{staticClass:"re_style",staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[e._v("报销金额：100.00")])]):e._e(),e._v(" "),2==e.radio?a("div",[a("div",{staticClass:"re_style",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{disabled:e.change,placeholder:"请输入或者选择报销类型"},model:{value:e.ruleForm.monkey.type,callback:function(t){e.$set(e.ruleForm.monkey,"type",t)},expression:"ruleForm.monkey.type"}}),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{disabled:e.change,placeholder:"请输入或者选择报销金额"},model:{value:e.ruleForm.monkey.count,callback:function(t){e.$set(e.ruleForm.monkey,"count",t)},expression:"ruleForm.monkey.count"}}),e._v(" "),0==e.find?a("el-button",{attrs:{type:"primary"},on:{click:e.addDomain}},[e._v("添加")]):e._e()],1),e._v(" "),e._l(e.domains,function(t,i){return a("div",{staticClass:"re_style",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{disabled:e.change,placeholder:"请输入或者选择报销类型"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"domain.type"}}),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{disabled:e.change,placeholder:"请输入或者选择报销金额"},model:{value:t.money,callback:function(a){e.$set(t,"money",a)},expression:"domain.money"}}),e._v(" "),0==e.find?a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.removeDomain(t)}}},[e._v("删除")]):e._e()],1)}),e._v(" "),a("div",{staticClass:"re_style",staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[e._v("报销金额：200.00")])],2):e._e()],1)})),e._v(" "),a("div",{staticClass:"re_style",staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reimData,border:""}},[a("el-table-column",{attrs:{prop:"reier",label:"审批人",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reisult",label:"审批结果",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"info",label:"审批意见"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"审批时间"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{position:"absolute",top:"20px",right:"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),1==this.find?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.Transfer("ruleForm")}}},[e._v("转办")]):e._e(),e._v(" "),1==this.find?a("el-button",{attrs:{type:"success"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")]):e._e(),e._v(" "),1==this.find?a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.boSubmit("ruleForm")}}},[e._v("驳回")]):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"25%",title:"选择成员",visible:e.dialogFormVisible1,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("div",[a("div",{staticClass:"indialog"},[a("div",{staticClass:"indialog_search"},[a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"5px","margin-left":"10px"},attrs:{type:"primary",size:"mini",round:""}},[e._v("搜索")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.tableData1,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orinaze",label:"组织",width:"180"}})],1)],1)])]),e._v(" "),a("el-dialog",{attrs:{width:"60%",title:"选择报销的人",visible:e.dialogFormVisible2,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("div",{staticClass:"indialog"},[a("div",{staticClass:"indialog_search"},[a("span",{staticClass:"search_style"},[e._v("团期单号：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.planNum,callback:function(t){e.planNum=t},expression:"planNum"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("产品名称：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.planName,callback:function(t){e.planName=t},expression:"planName"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("出行日期：")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{placeholder:"请输入内容"},model:{value:e.planTime,callback:function(t){e.planTime=t},expression:"planTime"}}),e._v(" "),a("span",{staticClass:"search__"},[e._v("—")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{placeholder:"请输入内容"},model:{value:e.planTime1,callback:function(t){e.planTime1=t},expression:"planTime1"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"5px","margin-left":"10px"},attrs:{type:"primary",size:"mini",round:""}},[e._v("重置")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.planData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"团期计划ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"目的地"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"出行日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ornize",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proer",label:"产品录入人"}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{width:"60%",title:"添加报销",visible:e.dialogFormVisible3,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible3=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.joinData1,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"关联单号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gys",label:"供应商",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bm",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accpeter",label:"申请人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"发起日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"摘要"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"金额",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wcount",label:"未报销金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bcount",label:"报销金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100px"},model:{value:t.row.bcount,callback:function(a){e.$set(t.row,"bcount",a)},expression:"scope.row.bcount"}})]}}])})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.text("joinData1")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"请填写审批意见",visible:e.dialogFormVisible4,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible4=t}}},[a("textarea",{staticStyle:{width:"500px",height:"132px",resize:"none","margin-left":"13px"}},[e._v("123123")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var Jt={name:"reimburseManagement",components:{NeedApproval:a("VU/8")(Wt,Gt,!1,function(e){a("aagO")},"data-v-b3016a32",null).exports},data:function(){var e=this;return{plans:{planNum:"1",planName:"2",pid:""},planTotal:100,userSize:10,userTotal:100,startTime2:"",endTime2:"",pageSize:10,pageCount:100,change:!1,find:0,radio:"1",dialogFormVisible2:!1,dialogFormVisible3:!1,dialogFormVisible:!1,dialogFormVisible1:!1,tour_name:"",product_name:"",planTime:"",planTime1:"",domains:[{type:"地接",money:"9000.00"}],people:{tt:"大运通-日本",peo:"qq"},ruleForm:{name:[],plan:{planId:"",planName:""},monkey:{type:"小费",count:"1000.00"},content:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],plan:[{validator:function(t,a,i){if(console.log(e.ruleForm),""==e.ruleForm.plan.planId||""==e.ruleForm.plan.planName)return i(new Error("团期计划不能为空"));i()},trigger:"blur"}],monkey:[{validator:function(t,a,i){if(console.log(e.ruleForm),""==e.ruleForm.monkey.type||""==e.ruleForm.monkey.count)return i(new Error("报销金额不能为空"));i()},trigger:"blur"}],content:[{required:!0,message:"请输入摘要信息",trigger:"blur"}]},reimData:[{reier:"",reisult:"",info:"",time:""}],formLabelWidth:"120px",currentPage4:1,activeName:"first",number:"",plan:"",accepter:"",createtime1:"",createtime2:"",tableData:[{number:"1",type:"申请中",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",monkey:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:""},{number:"1",type:"驳回",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",monkey:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:"郑总：信息补全"},{number:"1",type:"通过",createtime:"2016-05-02",plan:"TC-GTY-1001-01-180806-01",monkey:"国旅",orinaze:"辽宁大运通-国内部",accpter:"阳阳",info:""}],tableData1:[{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"},{id:"001",name:"张三",phone:"15566447881",orinaze:"大运通-财务部",sex:"男",type:"启用"}],planData:[],joinData:[{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:"17800.00"},{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:"17800.00"}],joinData1:[{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:""},{id:"1",type:"地接",gys:"国旅",bm:"辽宁大运通-北美部",accpeter:"阳阳",time:"2019-01-09 09:37",content:"",count:"17800.00",wcount:"17800.00",bcount:""}],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],editableTabsValue:"1",editableTabs:[{title:"Tab 1",name:"1",content:"Tab 1 content"}],tabIndex:1}},methods:{addplan:function(){this.ruleForm.plan.planId=this.plans.planNum,this.ruleForm.plan.planName=this.plans.planName,this.Associated(this.plans.pid),this.dialogFormVisible2=!1},Associated:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/payment/api/checklist",{object:{planID:e}}).then(function(e){t.joinData=e.data.objects,console.log(e)}).catch(function(e){console.log(e)})},planChange:function(e){console.log(e),this.plans={},this.plans.planName=e.title,this.plans.planNum=e.groupCode,this.plans.pid=e.planID},adduser:function(){this.ruleForm.name.push(this.people),this.dialogFormVisible1=!1},clickBanle:function(e){this.people={},this.people.peo=e.name,this.people.tt=e.orgName},searchHand4:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/planfinancelist",{pageIndex:e,pageSize:this.userSize,object:{groupCode:this.tour_name,title:this.product_name,beginDate:this.startTime2?Ut(this.startTime2,"yyyyMMdd"):0,endDate:this.endTime2?Ut(this.endTime2,"yyyyMMdd"):0}}).then(function(e){console.log(e.data.objects),t.planData=e.data.objects}).catch(function(e){console.log(e)})},removeDomain:function(e){var t=this.domains.indexOf(e);-1!==t&&this.domains.splice(t,1)},addDomain:function(){this.domains.push({type:"",money:""})},submitForm:function(e){console.log(this.ruleForm),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},chanelSubmit:function(){var e=this;this.$confirm("是否撤销该条借款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"撤销成功!"})}).catch(function(){e.$message({type:"info",message:"已取消撤销"})})},text:function(e){console.log(this.joinData1)},dialogchange:function(){this.find=0,this.change=!1,this.dialogFormVisible=!0},dialogFind:function(){this.find=1,this.change=!0,this.dialogFormVisible=!0},addbx:function(){this.dialogFormVisible3=!0},adddialog:function(){this.getUserList(1),this.dialogFormVisible1=!0},getUserList:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{object:{isDeleted:0},pageSize:this.userSize,pageIndex:e,isGetAll:!0,id:0}).then(function(e){t.userTotal=e.data.total,t.tableData1=e.data.objects,console.log(t.tableData1)}).catch(function(e){console.log(e)})},planDialog:function(){this.dialogFormVisible2=!0,this.searchHand4(1)},handleClick:function(e,t){console.log(e,t)},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},handleCurrentChange1:function(e){this.getUserList(e),console.log("当前页: "+e)},handleChange:function(e,t){this.fileList=t.slice(-3)},handleTabsEdit:function(e,t){if("add"===t){var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a,content:"New Tab content"}),this.editableTabsValue=a}if("remove"===t){var i=this.editableTabs,l=this.editableTabsValue;l===e&&i.forEach(function(t,a){if(t.name===e){var s=i[a+1]||i[a-1];s&&(l=s.name)}}),this.editableTabsValue=l,this.editableTabs=i.filter(function(t){return t.name!==e})}},reimList:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/expense/api/page",{pageIndex:this.currentPage4,pageSize:this.pageSize,total:0,object:{}}).then(function(t){e.pageCount=t.data.total,console.log(t.data.objects),e.tableData=t.data.objects}).catch(function(e){console.log(e)})}},created:function(){this.reimList()}},Yt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"报销",name:"first"}},[a("div",{staticClass:"borders"},[a("div",[a("div",{staticClass:"search"},[a("span",{staticClass:"search_style"},[e._v("报销单号：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("团期计划：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.plan,callback:function(t){e.plan=t},expression:"plan"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("申请人：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.accepter,callback:function(t){e.accepter=t},expression:"accepter"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("发起时间：")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{placeholder:"请输入内容"},model:{value:e.createtime1,callback:function(t){e.createtime1=t},expression:"createtime1"}}),e._v(" "),a("span",{staticClass:"search__"},[e._v("—")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{placeholder:"请输入内容"},model:{value:e.createtime2,callback:function(t){e.createtime2=t},expression:"createtime2"}})],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary"}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.dialogchange}},[e._v("申请报销")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.dialogFind}},[e._v("查看")])],1)]),e._v(" "),a("div",{staticClass:"table_style"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"expenseID",label:"报销单号",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkTypeEX",label:"状态",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["审批中"==t.row.checkTypeEX?a("div",{staticStyle:{color:"#7F7F7F"}},[e._v(e._s(t.row.checkTypeEX))]):e._e(),e._v(" "),"驳回"==t.row.checkTypeEX?a("div",{staticStyle:{color:"#FF4A3D"}},[e._v(e._s(t.row.checkTypeEX))]):e._e(),e._v(" "),"通过"==t.row.checkTypeEX?a("div",{staticStyle:{color:"#33D174"}},[e._v(e._s(t.row.checkTypeEX))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发起时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划",width:"250",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"报销金额",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"申请组织",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"申请人",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"info",label:"驳回信息",width:"180",align:"center"}})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageCount,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage4=t}}})],1)])]),e._v(" "),a("el-dialog",{attrs:{title:"报销申请",visible:e.dialogFormVisible,width:"70%","show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"报销人",prop:"name"}},[a("div",{staticClass:"reimbursementer"},e._l(e.ruleForm.name,function(t,i){return a("div",{staticStyle:{"margin-left":"5px",float:"left"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.tt))]),e._v(" "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.peo))])],1)})),e._v(" "),0==this.find?a("el-button",{attrs:{type:"info"},on:{click:e.adddialog}},[e._v("选择")]):e._e()],1),e._v(" "),a("div",[a("el-tabs",{staticStyle:{border:"1px solid #E4E7ED"},attrs:{type:"card",editable:""},on:{edit:e.handleTabsEdit},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,function(t,i){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[a("el-form-item",{attrs:{label:"团期计划",prop:"plan"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入或者选择团期计划",disabled:e.change},model:{value:e.ruleForm.plan.planId,callback:function(t){e.$set(e.ruleForm.plan,"planId",t)},expression:"ruleForm.plan.planId"}}),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入或者选择团期计划",disabled:e.change},model:{value:e.ruleForm.plan.planName,callback:function(t){e.$set(e.ruleForm.plan,"planName",t)},expression:"ruleForm.plan.planName"}}),e._v(" "),0==e.find?a("el-button",{attrs:{size:"mini"},on:{click:e.planDialog}},[e._v("选择")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"报销金额",prop:"monkey"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入或者选择报销类型",disabled:e.change},model:{value:e.ruleForm.monkey.type,callback:function(t){e.$set(e.ruleForm.monkey,"type",t)},expression:"ruleForm.monkey.type"}}),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入或者选择报销金额",disabled:e.change},model:{value:e.ruleForm.monkey.count,callback:function(t){e.$set(e.ruleForm.monkey,"count",t)},expression:"ruleForm.monkey.count"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"摘要",prop:"content"}},[a("el-input",{staticStyle:{width:"480px"},attrs:{placeholder:"请输入或者选择报销类型",disabled:e.change},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"附件"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.handleChange,"file-list":e.fileList}},[0==e.find?a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"re_style"},[a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("关联单据")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("手添报销单据")])],1),e._v(" "),1==e.radio?a("div",[a("div",{staticClass:"re_style",staticStyle:{"margin-top":"20px"}},[0==e.find?a("el-button",{on:{click:e.addbx}},[e._v("增加")]):e._e(),e._v(" "),0==e.find?a("el-button",{on:{click:e.addbx}},[e._v("修改")]):e._e(),e._v(" "),0==e.find?a("el-button",{attrs:{type:"danger"}},[e._v("删除")]):e._e()],1),e._v(" "),a("div",{staticClass:"re_style"},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.joinData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"关联单号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentType",label:"类型",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierType",label:"供应商",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bm",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"申请人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发起日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",label:"摘要"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wcount",label:"未报销金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bcount",label:"报销金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"peopleCount",label:"人数"}})],1)],1),e._v(" "),a("div",{staticClass:"re_style",staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[e._v("报销金额：100.00")])]):e._e(),e._v(" "),2==e.radio?a("div",[a("div",{staticClass:"re_style",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{disabled:e.change,placeholder:"请输入或者选择报销类型"},model:{value:e.ruleForm.monkey.type,callback:function(t){e.$set(e.ruleForm.monkey,"type",t)},expression:"ruleForm.monkey.type"}}),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{disabled:e.change,placeholder:"请输入或者选择报销金额"},model:{value:e.ruleForm.monkey.count,callback:function(t){e.$set(e.ruleForm.monkey,"count",t)},expression:"ruleForm.monkey.count"}}),e._v(" "),0==e.find?a("el-button",{attrs:{type:"primary"},on:{click:e.addDomain}},[e._v("添加")]):e._e()],1),e._v(" "),e._l(e.domains,function(t,i){return a("div",{staticClass:"re_style",staticStyle:{"margin-top":"20px"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{disabled:e.change,placeholder:"请输入或者选择报销类型"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"domain.type"}}),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{disabled:e.change,placeholder:"请输入或者选择报销金额"},model:{value:t.money,callback:function(a){e.$set(t,"money",a)},expression:"domain.money"}}),e._v(" "),0==e.find?a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.removeDomain(t)}}},[e._v("删除")]):e._e()],1)}),e._v(" "),a("div",{staticClass:"re_style",staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[e._v("报销金额：200.00")])],2):e._e()],1)})),e._v(" "),a("div",{staticClass:"re_style",staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reimData,border:""}},[a("el-table-column",{attrs:{prop:"reier",label:"审批人",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reisult",label:"审批结果",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"info",label:"审批意见"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"审批时间"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{position:"absolute",top:"20px",right:"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),0==this.find?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")]):e._e(),e._v(" "),1==this.find?a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.chanelSubmit("ruleForm")}}},[e._v("撤销申请")]):e._e(),e._v(" "),1==this.find?a("div",{staticClass:"sh_style"},[e._v("审核中")]):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"45%",title:"选择报销的人",visible:e.dialogFormVisible1,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("div",{staticClass:"indialog"},[a("div",{staticClass:"indialog_search"},[a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"5px","margin-left":"10px"},attrs:{type:"primary",size:"mini",round:""}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{position:"absolute",right:"22px",top:"75px"}},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.adduser}},[e._v("确 定")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{"highlight-current-row":!0,data:e.tableData1,border:""},on:{"row-click":e.clickBanle}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"组织"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sexCN",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userStateCN",label:"状态"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-size":e.userSize,"pager-count":11,layout:"prev, pager, next",total:e.userTotal},on:{"current-change":e.handleCurrentChange1}})],1)]),e._v(" "),a("el-dialog",{attrs:{width:"60%",title:"获取团期计划",visible:e.dialogFormVisible2,"append-to-body":"","show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("div",{staticClass:"indialog"},[a("div",{staticStyle:{position:"absolute",right:"67px",top:"22px"}},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addplan}},[e._v("确 定")])],1),e._v(" "),a("div",{staticClass:"indialog_search"},[a("span",{staticClass:"search_style"},[e._v("团期单号：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.tour_name,callback:function(t){e.tour_name=t},expression:"tour_name"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("产品名称：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.product_name,callback:function(t){e.product_name=t},expression:"product_name"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("出行日期：")]),e._v(" "),a("el-date-picker",{staticStyle:{float:"left",width:"150px"},attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startTime2,callback:function(t){e.startTime2=t},expression:"startTime2"}}),e._v(" "),a("el-date-picker",{staticStyle:{float:"left",width:"150px"},attrs:{type:"date",placeholder:"终止日期"},model:{value:e.endTime2,callback:function(t){e.endTime2=t},expression:"endTime2"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"5px","margin-left":"10px"},attrs:{type:"primary",size:"mini",round:""},on:{click:function(t){e.searchHand4(1)}}},[e._v("搜索")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.planData,border:"","highlight-current-row":!0},on:{"row-click":e.planChange}},[a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"destination",label:"目的地"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"出行日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"产品录入人"}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{width:"60%",title:"添加报销",visible:e.dialogFormVisible3,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible3=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.joinData1,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"关联单号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gys",label:"供应商",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bm",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accpeter",label:"申请人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"发起日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"摘要"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"金额",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wcount",label:"未报销金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bcount",label:"报销金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100px"},model:{value:t.row.bcount,callback:function(a){e.$set(t.row,"bcount",a)},expression:"scope.row.bcount"}})]}}])})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.text("joinData1")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"需要您审批",name:"second"}},[a("NeedApproval")],1)],1)],1)},staticRenderFns:[]};var Xt=a("VU/8")(Jt,Yt,!1,function(e){a("p4eX")},"data-v-d81dfbb4",null).exports,Qt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"close",attrs:{plain:""},on:{click:function(t){e.$emit("closeButton",!1)}}},[e._v("关闭")]),e._v(" "),e.isForm?a("el-form",{ref:"form",staticClass:"form-list",attrs:{"label-position":"left",model:e.applePeopleForm,"label-width":e.formLabelWidth}},[a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"申请人"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("div",{staticClass:"destination-input"},e._l(e.applePeopleForm.applePeople,function(t,i){return a("el-tag",{key:i,staticStyle:{float:"left",margin:"4px 4px 0 4px"},attrs:{type:"info","disable-transitions":!1}},[e._v("\n          "+e._s(t.name)+"\n        ")])}))]),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"团期计划"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.applePeopleForm.leagueLeft,callback:function(t){e.$set(e.applePeopleForm,"leagueLeft",t)},expression:"applePeopleForm.leagueLeft"}}),e._v(" "),a("el-input",{staticClass:"form-input",staticStyle:{"margin-left":"20px"},attrs:{disabled:""},model:{value:e.applePeopleForm.leagueright,callback:function(t){e.$set(e.applePeopleForm,"leagueright",t)},expression:"applePeopleForm.leagueright"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"供应商"}},[a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.applePeopleForm.supplierName,callback:function(t){e.$set(e.applePeopleForm,"supplierName",t)},expression:"applePeopleForm.supplierName"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"类型"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-select",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.applePeopleForm.type,callback:function(t){e.$set(e.applePeopleForm,"type",t)},expression:"applePeopleForm.type"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"付款金额"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.applePeopleForm.arrearsMoney,callback:function(t){e.$set(e.applePeopleForm,"arrearsMoney",t)},expression:"applePeopleForm.arrearsMoney"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item form-number",attrs:{"label-width":e.formLabelWidth,label:"人数"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input-number",attrs:{disabled:""},model:{value:e.applePeopleForm.number,callback:function(t){e.$set(e.applePeopleForm,"number",t)},expression:"applePeopleForm.number"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"摘要"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-abstract",attrs:{disabled:""},model:{value:e.applePeopleForm.abstract,callback:function(t){e.$set(e.applePeopleForm,"abstract",t)},expression:"applePeopleForm.abstract"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"账号"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.applePeopleForm.account,callback:function(t){e.$set(e.applePeopleForm,"account",t)},expression:"applePeopleForm.account"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"开户行"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.applePeopleForm.openBank,callback:function(t){e.$set(e.applePeopleForm,"openBank",t)},expression:"applePeopleForm.openBank"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"开户名"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.applePeopleForm.openName,callback:function(t){e.$set(e.applePeopleForm,"openName",t)},expression:"applePeopleForm.openName"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"付款方式"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-select",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.applePeopleForm.payment,callback:function(t){e.$set(e.applePeopleForm,"payment",t)},expression:"applePeopleForm.payment"}})],1),e._v(" "),a("el-form-item",{staticClass:"enclosure",attrs:{"label-width":e.formLabelWidth,label:"附件"}},[a("div",{staticClass:"form-enclosure"},[a("span",[e._v("123.bmp")])]),e._v(" "),a("div",{staticClass:"form-enclosure"},[a("span",[e._v("123.bmp")])])])],1):a("el-form",{ref:"form",staticClass:"form-list",attrs:{"label-position":"left",model:e.loanPeopleForm,"label-width":e.formLabelWidth}},[a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"借款人"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("div",{staticClass:"destination-input"},e._l(e.loanPeopleForm.loanPeople,function(t,i){return a("el-tag",{key:i,staticStyle:{float:"left",margin:"4px 4px 0 4px"},attrs:{type:"info","disable-transitions":!1}},[e._v("\n          "+e._s(t.name)+"\n        ")])}))]),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"团期计划"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.loanPeopleForm.leagueLeft,callback:function(t){e.$set(e.loanPeopleForm,"leagueLeft",t)},expression:"loanPeopleForm.leagueLeft"}}),e._v(" "),a("el-input",{staticClass:"form-input",staticStyle:{"margin-left":"20px"},attrs:{disabled:""},model:{value:e.loanPeopleForm.leagueright,callback:function(t){e.$set(e.loanPeopleForm,"leagueright",t)},expression:"loanPeopleForm.leagueright"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"供应商"}},[a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.loanPeopleForm.supplierName,callback:function(t){e.$set(e.loanPeopleForm,"supplierName",t)},expression:"loanPeopleForm.supplierName"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"类型"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-select",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.loanPeopleForm.type,callback:function(t){e.$set(e.loanPeopleForm,"type",t)},expression:"loanPeopleForm.type"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"借款金额"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.loanPeopleForm.loanMoney,callback:function(t){e.$set(e.loanPeopleForm,"loanMoney",t)},expression:"loanPeopleForm.loanMoney"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"摘要"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-abstract",attrs:{disabled:""},model:{value:e.loanPeopleForm.abstract,callback:function(t){e.$set(e.loanPeopleForm,"abstract",t)},expression:"loanPeopleForm.abstract"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"账号"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.loanPeopleForm.account,callback:function(t){e.$set(e.loanPeopleForm,"account",t)},expression:"loanPeopleForm.account"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"开户行"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.loanPeopleForm.openBank,callback:function(t){e.$set(e.loanPeopleForm,"openBank",t)},expression:"loanPeopleForm.openBank"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"开户名"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-input",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.loanPeopleForm.openName,callback:function(t){e.$set(e.loanPeopleForm,"openName",t)},expression:"loanPeopleForm.openName"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{"label-width":e.formLabelWidth,label:"付款方式"}},[a("span",{staticClass:"redStar"},[e._v("*")]),e._v(" "),a("el-select",{staticClass:"form-input",attrs:{disabled:""},model:{value:e.loanPeopleForm.payment,callback:function(t){e.$set(e.loanPeopleForm,"payment",t)},expression:"loanPeopleForm.payment"}})],1),e._v(" "),a("el-form-item",{staticClass:"enclosure",attrs:{"label-width":e.formLabelWidth,label:"附件"}},[a("div",{staticClass:"form-enclosure"},[a("span",[e._v("123.bmp")])]),e._v(" "),a("div",{staticClass:"form-enclosure"},[a("span",[e._v("123.bmp")])])])],1),e._v(" "),a("el-table",{staticClass:"order-table",attrs:{data:e.orderTable,border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"orderTotal",label:"订单总额","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvedTotal",label:"已审批总额","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvalTotal",label:"审批中总额","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"incomeTotal",label:"已收入总额","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrearsTotal",label:"欠款总额","header-align":"center"}})],1),e._v(" "),a("div",{staticClass:"prePayment"},[a("span",[e._v("预付款明细")]),e._v(" "),a("el-table",{staticClass:"payment-table",attrs:{data:e.paymentTable,border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID","header-align":"center","min-width":"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.state?a("div",{staticStyle:{color:"#7F7F7F"}},[e._v("申请中")]):e._e(),e._v(" "),1==t.row.state?a("div",{staticStyle:{color:"#FF4A3D"}},[e._v("驳回")]):e._e(),e._v(" "),2==t.row.state?a("div",{staticStyle:{color:"#33D174"}},[e._v("通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrearsMoney",label:"付款金额","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"人数","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applePeople",label:"申请人","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期","header-align":"center","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrearsTotal",label:"审批过程","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handlePaymentClick(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"writeOffMoney",label:"已核销金额","header-align":"center"}})],1)],1),e._v(" "),a("div",{staticClass:"prePayment"},[a("span",[e._v("无收入借款明细")]),e._v(" "),a("el-table",{staticClass:"noIncome-table",attrs:{data:e.noIncomeTable,border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"ID","header-align":"center","min-width":"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.state?a("div",{staticStyle:{color:"#7F7F7F"}},[e._v("申请中")]):e._e(),e._v(" "),1==t.row.state?a("div",{staticStyle:{color:"#FF4A3D"}},[e._v("驳回")]):e._e(),e._v(" "),2==t.row.state?a("div",{staticStyle:{color:"#33D174"}},[e._v("通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loanMoney",label:"借款金额","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applePeople",label:"申请人","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期","header-align":"center","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrearsTotal",label:"审批过程","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handlePaymentClick(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"writeOffMoney",label:"已核销金额","header-align":"center"}})],1)],1),e._v(" "),a("div",{staticClass:"prePayment"},[a("span",[e._v("收入明细")]),e._v(" "),a("el-table",{staticClass:"income-table",attrs:{data:e.incomeTable,border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"id",label:"订单编号","header-align":"center","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contacts",label:"联系人","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"人数","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderMoney",label:"订单金额","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accepted",label:"已收","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrears",label:"欠款","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receipt",label:"收款单号","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrearsDate",label:"欠款日期","header-align":"center","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shouldDate",label:"应还日期","header-align":"center","min-width":"90"}})],1)],1),e._v(" "),a("div",{staticClass:"prePayment"},[a("span",[e._v("审批流程")]),e._v(" "),a("el-table",{staticClass:"approval-table",attrs:{data:e.approvalTable,border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass}},[a("el-table-column",{attrs:{prop:"approvalPeople",label:"审批人","header-align":"center","min-width":"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvalResult",label:"审批结果","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvalOpinion",label:"审批意见","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvalDate",label:"审批时间","header-align":"center"}})],1)],1)],1)},staticRenderFns:[]};var Zt={name:"arrearsManagement",props:["supplierCurrentRow"],components:{detailsForm:a("VU/8")({name:"detailsForm",props:["currentRow"],data:function(){return{formLabelWidth:"90px",tableHead:{height:"40px",color:"#808080"},tableHeight:{padding:"0",height:"40px"},isForm:!0,applePeopleForm:{applePeople:[{id:1,name:"大运通-日本部"},{id:2,name:"央鸯"}],leagueLeft:"TC-GTY-1001-01-180806-01",leagueright:"13025-雪域云端 5 日定制游",supplierName:"国旅",type:"地接",arrearsMoney:"1000.00",number:"1000",abstract:"地接款",account:"1234 1234 1234",openBank:"建行",openName:"央鸯",payment:"网银"},loanPeopleForm:{loanPeople:[{id:1,name:"大运通-日本部"},{id:2,name:"央鸯"}],leagueLeft:"TC-GTY-1001-01-180806-01",leagueright:"13025-雪域云端 5 日定制游",supplierName:"国旅",type:"地接",loanMoney:"10000.00",abstract:"地接款",account:"1234 1234 1234",openBank:"建行",openName:"央鸯",payment:"网银"},orderTable:[{orderTotal:"20000.00",approvedTotal:"5000.00",approvalTotal:"0.00",incomeTotal:"20000.00",arrearsTotal:"0.00"}],paymentTable:[{id:1,state:2,type:"消费",supplierName:"国旅",arrearsMoney:"1000.00",number:"1000",department:"国内部",applePeople:"央鸯",date:"2019-1-14",abstract:"小费款",writeOffMoney:"0.00"}],noIncomeTable:[{id:1,state:1,type:"小费",supplierName:"国旅",loanMoney:"1000.00",department:"国内部",applePeople:"央鸯",date:"2019-10-14",abstract:"小费款",writeOffMoney:"0.00"}],incomeTable:[{id:1,source:"线上直客",contacts:"央鸯",number:"4",orderMoney:"10000.00",accepted:"10000.00",arrears:"0.00",receipt:"124152",arrearsDate:"2019-01-20",shouldDate:"2019-01-28"}],approvalTable:[{approvalPeople:"央鸯",approvalResult:"结果",approvalOpinion:"意见",approvalDate:"审批时间"}]}},created:function(){this.getData()},watch:{currentRow:function(){this.getData()}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;return e.columnIndex,0==t?"background:#F7F7F7":""},handlePaymentClick:function(e){},getData:function(){}}},Qt,!1,function(e){a("UJsg")},"data-v-037d1444",null).exports},data:function(){return{tableHead:{height:"60px",color:"#555555"},tableHeight:{padding:"0",height:"40px"},activeName:"first",supplier:"",league:"",handle:"",dateLeft:"",dateRight:"",currentPage:1,pagesize:10,total:100,currentRow:"",dialogFormVisible:!1,dialogSupplierVisible:!1,checkLabelList:[{id:"1",league:"TC-GTY-1001-01-180806-01",leagueName:"纯玩纯净-北京",launchDate:"2019-03-17",supplierName:"国旅",type:"地接",apple:"辽宁大运通-国内部",applePeople:"央鸯",arrearsMoney:"1000.00",relationBill:"1"},{id:"1",league:"TC-GTY-1001-01-180806-01",leagueName:"纯玩纯净-北京",launchDate:"2019-03-17",supplierName:"国旅",type:"地接",apple:"辽宁大运通-国内部",applePeople:"央鸯",arrearsMoney:"1000.00",relationBill:"1"}],supplierList:[{supplierName:"国旅",arrearsTotal:"10000.00"},{supplierName:"国旅",arrearsTotal:"10000.00"}]}},created:function(){this.getData(),console.log(this.supplierCurrentRow)},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},getData:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/financequery/get/api/paymentpage",{pageIndex:this.currentPage,pageSize:this.pagesize,object:{}}).then(function(t){e.checkLabelList=t.data.objects})},handleChange:function(e){e&&(this.currentRow=e)},handelList:function(){this.dialogFormVisible=!0},handelSupplierList:function(){this.dialogSupplierVisible=!0},pagesizes:function(e){},handleCurrentChange:function(e){}}},Kt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"arrears"},[a("span",{staticClass:"supplierName"},[e._v(e._s(this.supplierCurrentRow.name))]),e._v(" "),a("el-button",{staticClass:"close",attrs:{plain:""},on:{click:function(t){e.$emit("closeSupplier",!1)}}},[e._v("关闭")]),e._v(" "),a("div",{staticClass:"search_dom"},[a("div",{staticClass:"search_supplier"},[a("span",{staticClass:"keyword"},[e._v("团期计划")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{clearable:"",placeholder:"请输入团期计划"},model:{value:e.league,callback:function(t){e.league=t},expression:"league"}})],1),e._v(" "),a("div",{staticClass:"search_league"},[a("span",{staticClass:"keyword"},[e._v("操作")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{clearable:"",placeholder:"请输入操作"},model:{value:e.handle,callback:function(t){e.handle=t},expression:"handle"}})],1),e._v(" "),a("div",{staticClass:"search_league"},[a("span",{staticClass:"keyword"},[e._v("起始时间")]),e._v(" "),a("el-input",{staticClass:"search_date_left",attrs:{clearable:"",placeholder:"日期"},model:{value:e.dateLeft,callback:function(t){e.dateLeft=t},expression:"dateLeft"}}),e._v(" "),a("span",{staticClass:"search_date_span"},[e._v("——")]),e._v(" "),a("el-input",{staticClass:"search_date",attrs:{clearable:"",placeholder:"日期"},model:{value:e.dateRight,callback:function(t){e.dateRight=t},expression:"dateRight"}})],1),e._v(" "),a("el-button",{staticClass:"search_button",attrs:{type:"primary"}},[e._v("重置")])],1),e._v(" "),""==e.currentRow?a("el-button",{staticClass:"see_button",attrs:{plain:"",disabled:""}},[e._v("查看关联单据")]):a("el-button",{staticClass:"see_button",staticStyle:{border:"1px solid #3095fa",color:"#3095fa"},attrs:{plain:""},on:{click:e.handelList}},[e._v("查看关联单据")]),e._v(" "),a("el-table",{staticClass:"checkLabelListTable",attrs:{data:e.checkLabelList,"highlight-current-row":"",border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass},on:{"current-change":e.handleChange}},[a("el-table-column",{attrs:{prop:"id",label:"欠款单号","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划","min-width":"160","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名称","min-width":"230","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发起时间","min-width":"140","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierType",label:"类型","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"申请组织","min-width":"110","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"申请人","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"欠款金额","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"关联单据号","min-width":"60","header-align":"center"}})],1),e._v(" "),a("div",{staticClass:"pages"},[a("el-pagination",{staticClass:"page",attrs:{background:"","current-page":e.currentPage,"page-sizes":[2,4,8,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pagesizes,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{width:"1200px","append-to-body":!0,top:"10vh",title:"详情",visible:e.dialogFormVisible,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("detailsForm",{attrs:{currentRow:e.currentRow},on:{closeButton:function(t){e.dialogFormVisible=!1}}})],1)],1)},staticRenderFns:[]};var ea={name:"arrearsManagement",components:{vendorArrears:a("VU/8")(Zt,Kt,!1,function(e){a("rM9/")},"data-v-72eab91c",null).exports,AdvanceInfo:zt},data:function(){return{tableHead:{height:"60px",color:"#555555"},tableHeight:{padding:"0",height:"40px"},activeName:"first",supplier:"",league:"",handle:"",dateLeft:"",dateRight:"",currentPage:1,pagesize:10,total:100,supplierPage:1,supplierSize:10,supplierTotal:100,currentRow:"",supplierCurrentRow:"",dialogFormVisible:!1,dialogSupplierVisible:!1,checkLabelList:[{id:"1",league:"TC-GTY-1001-01-180806-01",leagueName:"纯玩纯净-北京",launchDate:"2019-03-17",supplierName:"国旅",type:"地接",apple:"辽宁大运通-国内部",applePeople:"央鸯",arrearsMoney:"1000.00",relationBill:"1"},{id:"1",league:"TC-GTY-1001-01-180806-01",leagueName:"纯玩纯净-北京",launchDate:"2019-03-17",supplierName:"国旅",type:"地接",apple:"辽宁大运通-国内部",applePeople:"央鸯",arrearsMoney:"1000.00",relationBill:"1"}],supplierList:[{supplierName:"国旅",arrearsTotal:"10000.00"},{supplierName:"国旅",arrearsTotal:"10000.00"}],find:5,change:!1,pid:"",typeList:[],payModeList:[]}},created:function(){this.querySearch6(),this.querySearch7(),this.getData()},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},searchHand:function(){},closeAdd:function(){this.dialogFormVisible=!1},querySearch6:function(){var e=this;this.typeList=[],this.$http.post(this.GLOBAL.serverSrc+"/universal/suppliertype/api/get",{}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.typeList.push({value:t.data.objects[a].id,label:t.data.objects[a].name})}).catch(function(e){console.log(e)})},querySearch7:function(){var e=this;this.payModeList=[],this.$http.post(this.GLOBAL.serverSrc+"/finance/payway/api/get",{object:{id:1}}).then(function(t){for(var a=0;a<t.data.objects.length;a++)e.payModeList.push({value:t.data.objects[a].id,label:t.data.objects[a].name})}).catch(function(e){console.log(e)})},getData:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/financequery/get/api/paymentpage",{pageIndex:this.currentPage,pageSize:this.pagesize,object:{}}).then(function(t){e.checkLabelList=t.data.objects,e.total=t.data.total})},getSupplier:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/financequery/get/api/supplierpage",{pageIndex:this.currentPage,pageSize:this.pagesize,object:{}}).then(function(t){e.supplierList=t.data.objects,e.supplierTotal=t.data.total})},handleClick:function(e,t){"first"==e.name?this.getData():"second"==e.name&&this.getSupplier()},handleChange:function(e){e&&(this.currentRow=e)},handleSupplierChange:function(e){e&&(this.supplierCurrentRow=e)},handelList:function(){2==this.currentRow.paymentType&&(this.pid=this.currentRow.id,this.change=!0,this.dialogFormVisible=!0)},handelSupplierList:function(){this.dialogSupplierVisible=!0},pagesizes:function(e){this.currentPage=1,this.pagesize=e,this.getData()},supplierPagesizes:function(e){this.supplierPage=1,this.supplierSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},supplierCurrentChange:function(e){this.supplierPage=e,this.getData()}}},ta={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"arrears"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"tabs",attrs:{label:"欠款列表",name:"first"}},[a("div",{staticClass:"search_dom"},[a("div",{staticClass:"search_supplier"},[a("span",{staticClass:"keyword"},[e._v("供应商")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{clearable:"",placeholder:"请输入供应商"},model:{value:e.supplier,callback:function(t){e.supplier=t},expression:"supplier"}})],1),e._v(" "),a("div",{staticClass:"search_league"},[a("span",{staticClass:"keyword"},[e._v("团期计划")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{clearable:"",placeholder:"请输入团期计划"},model:{value:e.league,callback:function(t){e.league=t},expression:"league"}})],1),e._v(" "),a("div",{staticClass:"search_league"},[a("span",{staticClass:"keyword"},[e._v("操作")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{clearable:"",placeholder:"请输入操作"},model:{value:e.handle,callback:function(t){e.handle=t},expression:"handle"}})],1),e._v(" "),a("div",{staticClass:"search_league"},[a("span",{staticClass:"keyword"},[e._v("起始时间")]),e._v(" "),a("el-input",{staticClass:"search_date_left",attrs:{clearable:"",placeholder:"日期"},model:{value:e.dateLeft,callback:function(t){e.dateLeft=t},expression:"dateLeft"}}),e._v(" "),a("span",{staticClass:"search_date_span"},[e._v("——")]),e._v(" "),a("el-input",{staticClass:"search_date",attrs:{clearable:"",placeholder:"日期"},model:{value:e.dateRight,callback:function(t){e.dateRight=t},expression:"dateRight"}})],1),e._v(" "),a("el-button",{staticClass:"search_button",attrs:{type:"primary"}},[e._v("重置")])],1),e._v(" "),""==e.currentRow?a("el-button",{staticClass:"see_button",attrs:{plain:"",disabled:""}},[e._v("查看关联单据")]):a("el-button",{staticClass:"see_button",staticStyle:{border:"1px solid #3095fa",color:"#3095fa"},attrs:{plain:""},on:{click:e.handelList}},[e._v("查看关联单据")]),e._v(" "),a("el-table",{staticClass:"checkLabelListTable",attrs:{data:e.checkLabelList,"highlight-current-row":"",border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass},on:{"current-change":e.handleChange}},[a("el-table-column",{attrs:{prop:"id",label:"欠款单号","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划","min-width":"160","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名称","min-width":"230","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发起时间","min-width":"140","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierType",label:"类型","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"申请组织","min-width":"110","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"申请人","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"欠款金额","min-width":"60","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"关联单据号","min-width":"60","header-align":"center"}})],1),e._v(" "),a("div",{staticClass:"pages"},[a("el-pagination",{staticClass:"page",attrs:{background:"","current-page":e.currentPage,"page-sizes":[2,4,8,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pagesizes,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("AdvanceInfo",{attrs:{dialogFormVisible:e.dialogFormVisible,find:e.find,change:e.change,pid:e.pid,typeList:e.typeList,payModeList:e.payModeList,searchHandList:e.searchHand},on:{close:e.closeAdd}})],1),e._v(" "),a("el-tab-pane",{staticClass:"tabs",attrs:{label:"供应商欠款",name:"second"}},[a("div",{staticClass:"search_dom_right"},[a("span",{staticClass:"keyword"},[e._v("供应商")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{clearable:"",placeholder:"请输入供应商"},model:{value:e.supplier,callback:function(t){e.supplier=t},expression:"supplier"}})],1),e._v(" "),a("div",[a("el-button",{staticClass:"search_button",attrs:{type:"primary"}},[e._v("重置")])],1),e._v(" "),""==e.supplierCurrentRow?a("el-button",{staticClass:"see_button",staticStyle:{width:"100px"},attrs:{plain:"",disabled:""}},[e._v("查看")]):a("el-button",{staticClass:"see_button",staticStyle:{width:"100px",border:"1px solid #3095fa",color:"#3095fa"},attrs:{plain:""},on:{click:e.handelSupplierList}},[e._v("查看")]),e._v(" "),a("el-table",{staticClass:"supplierListTable",staticStyle:{width:"700px"},attrs:{data:e.supplierList,"highlight-current-row":"",border:"",headerRowStyle:e.tableHead,cellStyle:e.tableHeight,"header-cell-style":e.getRowClass},on:{"current-change":e.handleSupplierChange}},[a("el-table-column",{attrs:{prop:"name",label:"供应商名称","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"欠款总额","header-align":"center"}})],1),e._v(" "),a("div",{staticClass:"supplier-pages"},[a("el-pagination",{staticClass:"pageTable",attrs:{background:"","current-page":e.supplierPage,"page-sizes":[2,4,8,10],"page-size":e.supplierSize,layout:"total, sizes, prev, pager, next, jumper",total:e.supplierTotal},on:{"size-change":e.supplierPagesizes,"current-change":e.supplierCurrentChange,"update:currentPage":function(t){e.supplierPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{width:"1600px",top:"10vh",title:"供应商欠款详情",visible:e.dialogSupplierVisible,"show-close":!1},on:{"update:visible":function(t){e.dialogSupplierVisible=t}}},[a("vendorArrears",{attrs:{supplierCurrentRow:e.supplierCurrentRow},on:{closeSupplier:function(t){e.dialogSupplierVisible=!1}}})],1)],1)],1)],1)},staticRenderFns:[]};var aa=a("VU/8")(ea,ta,!1,function(e){a("zC/2")},"data-v-328d1860",null).exports,ia={name:"StraightGuestInfo",components:{},props:{dialogFormVisible:!1,find:0,change:!1,org:"",pid:"",dept:"",collectionAccountList:{type:Array,default:function(){return[]}},accountList:{type:Object,default:function(){}}},data:function(){return{user_id:"",user_name:"",reable:!1,apply_user_input:"",total:0,pageNum:1,pageSize:5,currentPage:1,imgBigName:"",imgBig:"",dialogVisible:!1,dialogVisible2:!1,dialogFormVisible1:!1,dialogFormVisible2:!1,upload_url:this.GLOBAL.imgUrl+"/upload/api/picture",time:0,len:0,uid:0,fileList:[],invoiceType:[{value:"1",label:"纸质发票"}],invoiceProject:[{value:"1",label:"旅游费"}],ruleForm:{collectionTime:"",groupCode:"",planID:"",orderID:"",orderNumber:"",collectionNumber:"",price:"",dept:"",createUser:"",serialNumber:"",abstract:"",invoice:"0",invoiceTable:[{invoiceID:"",invoiceType:"",invoiceNumber:"",invoiceHeaderOrTel:"",invoiceItem:"",invoicePrice:"",cardNumber:"",bankName:"",address:"",tel:"",createTime:Ut(new Date,"yyyy-MM-dd hh:mm:ss")}]},rules:{collectionTime:[{required:!0,message:"收款时间不能为空",trigger:"blur"}],collectionNumber:[{required:!0,message:"收款账户不能为空",trigger:"change"}],serialNumber:[{required:!0,message:"交易流水号不能为空",trigger:"blur"}],price:[{required:!0,message:"收款金额不能为空",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"收款金额需为正数"}],abstract:[{required:!0,message:"摘要不能为空",trigger:"blur"}],orderNumber:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},tableData1:[],tableData2:[{createTime:"2018-05-23",user:"阳阳",status:"通过",abstract:"没啥意见"}],tableData3:[],collectedMoney:0,uncollectedMoney:0,examineMoney:0}},computed:{invoiceListCount:function(){return this.ruleForm.invoiceTable.length-1},title:function(){return 1==this.find||2==this.find?"查看直客收款":"添加直客收款"}},watch:{dialogFormVisible:function(){1==this.dialogFormVisible&&"0"!=this.find?this.getCollectionInfo():this.clearForm()}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},clickBanle:function(e,t,a){this.user_id=e.id,this.user_name=e.name,this.reable=!1},closeAdd:function(){this.$emit("close",!1)},receiptorder:function(){this.tableData1=[],this.ruleForm.planID="",this.ruleForm.orderID="",this.ruleForm.groupCode="",this.getnumber();var e=this;this.$http.post(this.GLOBAL.serverSrc+"/teamquery/get/api/receiptorder",{orderCode:e.ruleForm.orderNumber},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){t.data.object.collectedMoney=e.collectedMoney,t.data.object.uncollectedMoney=t.data.object.payable-t.data.object.collectedMoney,t.data.object.collectedMoney=e.examineMoney,e.tableData1.push(t.data.object),e.ruleForm.planID=t.data.object.planID,e.ruleForm.orderID=t.data.object.id,e.ruleForm.groupCode=t.data.object.groupCode}).catch(function(e){console.log(e)})},getnumber:function(){var e=this;e.$http.post(e.GLOBAL.serverSrc+"/finance/collection/api/getnumber",{number:e.ruleForm.orderNumber},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.collectedMoney=1==t.data.isSuccess?t.data.object.price:0}).catch(function(e){console.log(e)})},submitForm:function(e){var t=this;console.log(this.org),console.log(this.collectionAccountList),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;for(var a=[],i=Ut(new Date,"yyyy-MM-dd hh:mm:ss"),l=0;l<t.fileList.length;l++){var s={};s.url=t.fileList[l].url1,s.name=t.fileList[l].name,s.createTime=i,a.push(s)}var o={};o={collectionTime:Ut(t.ruleForm.collectionTime,"yyyy-MM-dd"),groupCode:t.ruleForm.groupCode,planID:t.ruleForm.planID,orderID:t.ruleForm.orderID,orderNumber:t.ruleForm.orderNumber,collectionNumber:t.ruleForm.collectionNumber,price:t.ruleForm.price,dept:t.dept,createUser:localStorage.getItem("name"),createTime:i,serialNumber:t.ruleForm.serialNumber,abstract:t.ruleForm.abstract,files:a,invoice:t.ruleForm.invoice},"1"==t.ruleForm.invoice&&(o.invoiceTable=t.ruleForm.invoice?t.ruleForm.invoiceTable:[]),t.$http.post(t.GLOBAL.serverSrc+"/finance/collection/api/insert",{object:o}).then(function(e){console.log(e.data),1==e.data.isSuccess?(t.$emit("searchHand",""),t.$message({type:"success",message:"创建成功!"}),t.closeAdd()):(console.log("有错误!"),console.log(e.data))}).catch(function(e){console.log(e)})})},Transfer:function(){this.dialogFormVisible1=!0},boSubmit:function(){var e=this;this.$confirm("是否驳回该条收款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e;t.$http.post(t.GLOBAL.serverSrc+"/finance/collection/api/getCollIDBH",{id:t.pid},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){1==e.data.isSuccess?(t.$message({type:"success",message:"驳回成功!"}),t.closeAdd(),t.$emit("searchHand","")):console.log(e.data)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消(驳回)"})})},chanelSubmit:function(){var e=this;this.$confirm("是否撤销该条借款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e;t.$http.post(t.GLOBAL.serverSrc+"/finance/collection/api/delete",{id:t.pid},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){1==e.data.isSuccess?(t.$message({type:"success",message:"撤销成功!"}),t.closeAdd(),t.$emit("searchHand","")):console.log(e.data)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消撤销"})})},adoptForm:function(){var e=this;this.$confirm("是否通过该条收款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e;t.$http.post(t.GLOBAL.serverSrc+"/finance/collection/api/getCollIDTG",{id:t.pid},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){1==e.data.isSuccess?(t.$message({type:"success",message:"通过成功!"}),t.closeAdd(),t.$emit("searchHand","")):console.log(e.data)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消(通过)"})})},routerHandle2:function(){var e=this;this.$confirm("是否转办该条收款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"转办成功!"}),e.closeAdd()}).catch(function(){e.$message({type:"info",message:"已取消(转办)"})}),this.dialogFormVisible1=!1},rejectHandle2:function(){var e=this;this.$confirm("是否驳回该条收款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e;t.$http.post(t.GLOBAL.serverSrc+"/finance/collection/api/getCollIDBH",{id:t.pid},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){1==e.data.isSuccess?(t.$message({type:"success",message:"驳回成功!"}),t.closeAdd(),t.$emit("searchHand","")):console.log(e.data)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消(驳回)"})}),this.dialogFormVisible2=!1},handlePreview:function(e,t){this.dialogVisible=!0,this.imgBig=e.url,this.imgBigName=e.name},handleEdit:function(e,t){this.ruleForm.invoiceTable.push({})},handleDelete:function(e,t){this.ruleForm.invoiceTable.splice(e,1),0==this.ruleForm.invoiceTable.length&&this.ruleForm.invoiceTable.push({})},downloadIamge:function(e,t){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas"),i=a.width,l=a.height;(i>1080||l>1080)&&(i/l>1?(a.width=1080,a.height=Math.round(l/i*1080)):(a.height=1080,a.width=Math.round(i/l*1080))),e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0,a.width,a.height);var s=e.toDataURL("image/jpeg"),o=document.createElement("a"),r=new MouseEvent("click");o.download=t||"photo",o.href=s,o.dispatchEvent(r)},a.src=e},downs:function(){window.open(this.imgBig)},handleRemove:function(e,t){this.uid=t[0].uid,this.fileList=t},handleSuccess:function(e,t,a){if(this.time!=a.length)if(this.time=a.length,0==this.fileList.length)this.fileList=a;else{this.len=this.fileList.length;for(var i=this.len;i<a.length;i++)this.fileList.push(a[i])}for(var l=null,s=this.len;s<a.length;s++)l=JSON.parse(a[s].response).paths[0],this.$set(this.fileList[s],"width",l.Width),this.$set(this.fileList[s],"height",l.Height),this.$set(this.fileList[s],"url1",l.Url),this.$set(this.fileList[s],"length",l.Length),this.$set(this.fileList[s],"name",l.Name);this.uid=a[0].uid,console.log(this.fileList)},handleChange:function(e,t){this.fileList=t.slice(-3)},handleError:function(e,t){console.log("失败"),this.fileList=[]},isInvoiceChange:function(e){this.dialogVisible2="1"==e},searchHand2:function(){this.pageNum=1;var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData3=t.data.objects,e.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})},handleSizeChange2:function(e){this.pagesize=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData3=e.data.objects,t.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})},handleCurrentChange2:function(e){this.pageNum=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData3=e.data.objects,t.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})},getCollectionInfo:function(){var e=this;e.$http.post(e.GLOBAL.serverSrc+"/finance/collection/api/coll",{id:this.pid},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){t.data.object.files.forEach(function(t,a,i){e.fileList.push({url:e.GLOBAL.imgUrl+"/upload"+i[a].url,name:i[a].name})}),console.log(t.data.object),e.ruleForm.abstract=t.data.object.abstract,e.ruleForm.checkType=t.data.object.checkType,e.ruleForm.collectionNumber=e.accountList[t.data.object.collectionNumber],e.ruleForm.collectionTime=t.data.object.collectionTime,e.ruleForm.createUser=t.data.object.createUser,e.ruleForm.orderNumber=t.data.object.orderNumber,e.ruleForm.price=t.data.object.price,e.ruleForm.serialNumber=t.data.object.serialNumber,e.ruleForm.invoice=t.data.object.invoice.toString(),e.dialogVisible2="1"==t.data.object.invoice,"1"==t.data.object.invoice&&(e.ruleForm.invoiceTable=[],t.data.object.invoiceTable.forEach(function(t,a,i){e.ruleForm.invoiceTable.push({invoiceID:i[a].invoiceID.toString(),invoiceType:i[a].invoiceType.toString(),invoiceNumber:i[a].invoiceNumber.toString(),invoiceHeaderOrTel:i[a].invoiceHeaderOrTel.toString(),invoiceItem:i[a].invoiceItem.toString(),invoicePrice:i[a].invoicePrice,cardNumber:i[a].cardNumber.toString(),bankName:i[a].bankName.toString(),address:i[a].address.toString(),tel:i[a].tel.toString(),isUpdate:1})})),e.receiptorder()}).catch(function(e){console.log(e)})},sendBPM:function(e){this.$http.post(this.GLOBAL.jqUrl+"/api/JQ/StartUpWorkFlowForJQ",{jQ_ID:e.guid,jQ_Type:e.flowModel,workflowCode:e.flowModelName,userCode:sessionStorage.getItem("account")}).then(function(e){"0"==JSON.parse(e.data).code?console.log("启动工作流成功"):(console.log("启动工作流错误!"),console.log(e.data))}).catch(function(e){console.log(e)})},clearForm:function(){this.ruleForm={abstract:"",checkType:"",collectionNumber:"",collectionTime:"",createUser:"",orderNumber:"",price:"",serialNumber:"",invoice:"0",invoiceTable:[{invoiceID:"",invoiceType:"",invoiceNumber:"",invoiceHeaderOrTel:"",invoiceItem:"",invoicePrice:"",cardNumber:"",bankName:"",address:"",tel:""}]},this.fileList=[],this.tableData1=[]}},created:function(){}},la={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-dialog",{staticClass:"addReceivables",attrs:{title:e.title,visible:e.dialogFormVisible,width:"60%","show-close":!1},on:{close:e.closeAdd}},[1==this.find||2==this.find?a("div",{staticClass:"sh_style"},[e._v("审核中")]):e._e(),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("div",{staticClass:"btn",staticStyle:{position:"absolute","z-index":"9",top:"20px",right:"1%"}},[a("el-button",{on:{click:e.closeAdd}},[e._v("取 消")]),e._v(" "),0==this.find?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提 交")]):e._e(),e._v(" "),1==this.find?a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.chanelSubmit("ruleForm")}}},[e._v("撤销申请")]):e._e(),e._v(" "),2==this.find?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.adoptForm("ruleForm")}}},[e._v("通过")]):e._e(),e._v(" "),2==this.find?a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.boSubmit("ruleForm")}}},[e._v("驳回")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"收款时间",prop:"collectionTime","label-width":"120px"}},[a("el-date-picker",{staticClass:"inputWidth",attrs:{type:"date",placeholder:"收款时间",disabled:e.change},model:{value:e.ruleForm.collectionTime,callback:function(t){e.$set(e.ruleForm,"collectionTime",t)},expression:"ruleForm.collectionTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款账户",prop:"collectionNumber","label-width":"120px"}},[a("el-select",{staticClass:"inputWidth",staticStyle:{float:"left"},attrs:{placeholder:"请选择",disabled:e.change},model:{value:e.ruleForm.collectionNumber,callback:function(t){e.$set(e.ruleForm,"collectionNumber",t)},expression:"ruleForm.collectionNumber"}},e._l(e.collectionAccountList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"交易流水",prop:"serialNumber","label-width":"120px"}},[a("el-input",{staticClass:"bright inputWidth",attrs:{placeholder:"交易流水",disabled:e.change},model:{value:e.ruleForm.serialNumber,callback:function(t){e.$set(e.ruleForm,"serialNumber",t)},expression:"ruleForm.serialNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款金额",prop:"price","label-width":"120px"}},[a("el-input",{staticClass:"bright inputWidth",attrs:{type:"number",placeholder:"收款金额",disabled:e.change},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订单号",prop:"orderNumber","label-width":"120px"}},[a("el-input",{staticClass:"bright inputWidth",attrs:{placeholder:"订单号",maxlength:"20",disabled:e.change},on:{blur:e.receiptorder},model:{value:e.ruleForm.orderNumber,callback:function(t){e.$set(e.ruleForm,"orderNumber",t)},expression:"ruleForm.orderNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"","label-width":"","label-height":"auto"}},[a("el-table",{staticStyle:{width:"90%","margin-left":"120px","margin-top":"-5px"},attrs:{data:e.tableData1,"empty-text":"无订单信息",border:""}},[a("el-table-column",{attrs:{prop:"orderCode",label:"订单号",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划",align:"center",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"出发日期",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payable",label:"订单金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uncollectedMoney",label:"未收款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectedMoney",label:"已收款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"examineMoney",label:"待审核金额",align:"center"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"摘要",prop:"abstract","label-width":"120px"}},[a("el-input",{staticClass:"bright2 inputWidth",attrs:{placeholder:"摘要",disabled:e.change},model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"凭证","label-width":"120px"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"files",limit:12,multiple:"",action:this.upload_url,disabled:e.change,"file-list":e.fileList,"on-error":e.handleError,"on-success":e.handleSuccess,"on-remove":e.handleRemove,"on-preview":e.handlePreview,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否开发票",prop:"invoice","label-width":"120px"}},[a("el-radio-group",{attrs:{disabled:e.change},on:{change:e.isInvoiceChange},model:{value:e.ruleForm.invoice,callback:function(t){e.$set(e.ruleForm,"invoice",t)},expression:"ruleForm.invoice"}},[a("el-radio",{key:"1",attrs:{value:"1",label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{key:"0",attrs:{value:"0",label:"0"}},[e._v("否")])],1)],1),e._v(" "),e.dialogVisible2?a("el-form-item",{staticStyle:{"margin-top":"-21px"},attrs:{label:"","label-width":"30px","label-height":"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.invoiceTable,border:"",size:"mini"}},[a("el-table-column",{attrs:{label:"发票类型",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",disabled:e.change},model:{value:t.row.invoiceID,callback:function(a){e.$set(t.row,"invoiceID",a)},expression:"scope.row.invoiceID"}},e._l(e.invoiceType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"个人/单位",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",disabled:e.change},model:{value:t.row.invoiceType,callback:function(a){e.$set(t.row,"invoiceType",a)},expression:"scope.row.invoiceType"}},[a("el-option",{key:"1",attrs:{label:"个人",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"单位",value:"2"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"纳税人识别号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{required:"",placeholder:"纳税人识别号",disabled:e.change},model:{value:t.row.invoiceNumber,callback:function(a){e.$set(t.row,"invoiceNumber",a)},expression:"scope.row.invoiceNumber"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发票抬头/手机号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"发票抬头/手机号",disabled:e.change},model:{value:t.row.invoiceHeaderOrTel,callback:function(a){e.$set(t.row,"invoiceHeaderOrTel",a)},expression:"scope.row.invoiceHeaderOrTel"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发票项目",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"发票项目",disabled:e.change},model:{value:t.row.invoiceItem,callback:function(a){e.$set(t.row,"invoiceItem",a)},expression:"scope.row.invoiceItem"}},e._l(e.invoiceProject,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number",placeholder:"金额",disabled:e.change},model:{value:t.row.invoicePrice,callback:function(a){e.$set(t.row,"invoicePrice",a)},expression:"scope.row.invoicePrice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"帐号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"帐号",disabled:e.change},model:{value:t.row.cardNumber,callback:function(a){e.$set(t.row,"cardNumber",a)},expression:"scope.row.cardNumber"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开户行",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"开户行",disabled:e.change},model:{value:t.row.bankName,callback:function(a){e.$set(t.row,"bankName",a)},expression:"scope.row.bankName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"地址",disabled:e.change},model:{value:t.row.address,callback:function(a){e.$set(t.row,"address",a)},expression:"scope.row.address"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"电话",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"电话",disabled:e.change},model:{value:t.row.tel,callback:function(a){e.$set(t.row,"tel",a)},expression:"scope.row.tel"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"!=t.row.isUpdate?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),a("br"),e._v(" "),e.invoiceListCount==t.$index&&"1"!=t.row.isUpdate?a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("添加")]):e._e()]}}])})],1)],1):e._e(),e._v(" "),a("div",{staticStyle:{height:"200px"}})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"放大图片:",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"primary"},on:{click:function(t){e.downs()}}},[e._v("点击下载")]),e._v(" "),a("div",[a("img",{staticStyle:{width:"95%"},attrs:{src:e.imgBig,alt:"图片",alt:e.imgBigName}}),e._v(" "),a("br"),a("span",[e._v(e._s(e.imgBigName))])])],1)],1)},staticRenderFns:[]};var sa=a("VU/8")(ia,la,!1,function(e){a("lKaE")},"data-v-5fe6851a",null).exports,oa={name:"straightGuestManagement",components:{StraightGuestInfo:sa},data:function(){return{activeName:"first",activeName2:"three",plan:"",accepter:"",startTime:"",endTime:"",tableData:[],reable:!0,dialogFormVisible:!1,change:!1,currentPage:1,total:0,pageSize:10,pageNum:1,find:0,org:"",pid:"",collectionAccountList:[],accountList:{},checkTypeList:{0:"审批中",1:"通过",2:"驳回"},dept:""}},computed:{invoiceListCount:function(){return this.ruleForm.invoiceList.length-1}},methods:{closeAdd:function(){this.dialogFormVisible=!1},changeInvoice:function(){this.ruleForm.invoiceList.forEach(function(e,t,a){console.log(a[t].date)})},handleEdit:function(e,t){this.ruleForm.invoiceList.push({})},handleDelete:function(e,t){this.ruleForm.invoiceList.splice(e,1),0==this.ruleForm.invoiceList.length&&this.ruleForm.invoiceList.push({})},handleSizeChange:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/collection/api/page",{pageIndex:1,pageSize:e,object:{id:0,checkType:0,collectionTime:"2019-05-16T01:02:40.816Z",startTime:this.startTime?formatDate(this.startTime,"yyyy-MM-dd hh:mm:ss"):"2000-05-16 01:02:40",endTime:this.endTime?formatDate(this.endTime,"yyyy-MM-dd hh:mm:ss"):"2099-05-16 01:02:40",groupCode:this.plan?this.plan:"",planID:0,orderID:0,orderNumber:"",collectionNumber:"",price:0,dept:0,createUser:this.accepter?this.accepter:"",createTime:"2019-05-16 01:02:40",code:"",serialNumber:"",abstract:"",isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,a,i){i[a].collectionNumber=t.accountList[i[a].collectionNumber],i[a].checkTypeStatus=t.checkTypeList[i[a].checkType],i[a].collectionTime=i[a].collectionTime.replace("T"," ").split(".")[0],i[a].createTime=i[a].createTime.replace("T"," ").split(".")[0]})}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/collection/api/page",{pageIndex:e,pageSize:this.pageSize,object:{id:0,checkType:0,collectionTime:"2019-05-16T01:02:40.816Z",startTime:this.startTime?formatDate(this.startTime,"yyyy-MM-dd hh:mm:ss"):"2000-05-16 01:02:40",endTime:this.endTime?formatDate(this.endTime,"yyyy-MM-dd hh:mm:ss"):"2099-05-16 01:02:40",groupCode:this.plan?this.plan:"",planID:0,orderID:0,orderNumber:"",collectionNumber:"",price:0,dept:0,createUser:this.accepter?this.accepter:"",createTime:"2019-05-16 01:02:40",code:"",serialNumber:"",abstract:"",isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,a,i){i[a].collectionNumber=t.accountList[i[a].collectionNumber],i[a].checkTypeStatus=t.checkTypeList[i[a].checkType],i[a].collectionTime=i[a].collectionTime.replace("T"," ").split(".")[0],i[a].createTime=i[a].createTime.replace("T"," ").split(".")[0]})}).catch(function(e){console.log(e)})},dialogFind:function(){this.find=1,this.change=!0,this.dialogFormVisible=!0},dialogchange:function(){this.find=0,this.change=!1,this.dialogFormVisible=!0},resetHand:function(){},searchHand:function(){this.getStraightGuestManagement()},clickBanle:function(e,t,a){this.pid=e.id,this.reable=!1},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},getCollectionAccount:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/collectionaccount/api/list",{object:{id:0,title:"string",mark:"string",isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.collectionAccountList=[],t.data.objects.forEach(function(t,a,i){e.accountList[i[a].id]=i[a].title,e.collectionAccountList.push({value:i[a].id,label:i[a].title})})}).catch(function(e){console.log(e)})},getStraightGuestManagement:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/collection/api/page",{pageIndex:1,pageSize:e.pageSize,object:{id:0,checkType:0,collectionTime:"2019-05-16T01:02:40.816Z",startTime:this.startTime?formatDate(this.startTime,"yyyy-MM-dd hh:mm:ss"):"2000-05-16 01:02:40",endTime:this.endTime?formatDate(this.endTime,"yyyy-MM-dd hh:mm:ss"):"2099-05-16 01:02:40",groupCode:this.plan?this.plan:"",planID:0,orderID:0,orderNumber:"",collectionNumber:"",price:0,dept:0,createUser:this.accepter?this.accepter:"",createTime:"2019-05-16 01:02:40",code:"",serialNumber:"",abstract:"",isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(t,a,i){i[a].collectionNumber=e.accountList[i[a].collectionNumber],i[a].checkTypeStatus=e.checkTypeList[i[a].checkType],i[a].collectionTime=i[a].collectionTime.replace("T"," ").split(".")[0],i[a].createTime=i[a].createTime.replace("T"," ").split(".")[0]})}).catch(function(e){console.log(e)})},getDept:function(){var e=this;e.$http.post(e.GLOBAL.serverSrc+"/org/user/api/orgshort",{id:sessionStorage.getItem("id")},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.dept=1==t.data.isSuccess?t.data.objects[0].name:""}).catch(function(e){console.log(e)})}},created:function(){this.getCollectionAccount(),this.getStraightGuestManagement(),this.getDept()}},ra={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all",staticStyle:{position:"relative"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"borders",staticStyle:{"margin-bottom":"100px"}},[a("div",[a("div",{staticClass:"search"},[a("span",{staticClass:"search_style"},[e._v("团期计划：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.plan,callback:function(t){e.plan=t},expression:"plan"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("申请人：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.accepter,callback:function(t){e.accepter=t},expression:"accepter"}}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("div",{staticClass:"date-line"}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"终止日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.searchHand()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.resetHand()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.dialogchange}},[e._v("添加收款")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",disabled:e.reable},on:{click:e.dialogFind}},[e._v("查看详情")])],1)]),e._v(" "),a("div",{staticClass:"table_style"},[a("el-table",{staticStyle:{width:"70%"},attrs:{data:e.tableData,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass},on:{"row-click":e.clickBanle}},[a("el-table-column",{attrs:{prop:"id",label:"收款单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkTypeStatus",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionTime",label:"收款时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNumber",label:"订单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionNumber",label:"收款账户",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dept",label:"申请组织",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"申请时间",align:"center"}})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","margin-left":"-30%","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("StraightGuestInfo",{attrs:{dialogFormVisible:e.dialogFormVisible,find:e.find,pid:e.pid,change:e.change,org:e.org,collectionAccountList:e.collectionAccountList,accountList:e.accountList,dept:e.dept},on:{searchHand:e.searchHand,close:e.closeAdd}})],1)])],1)},staticRenderFns:[]};var na=a("VU/8")(oa,ra,!1,function(e){a("ULeP")},"data-v-af164632",null).exports,ca={name:"sameTradeInfo",components:{},props:{dialogFormVisible:!1,find:0,change:!1},data:function(){return{user_id:"",user_name:"",reable:!1,apply_user_input:"",total:0,pageNum:1,pageSize:5,currentPage:1,imgBigName:"",imgBig:"",dialogVisible:!1,dialogVisible2:!1,dialogFormVisible1:!1,dialogFormVisible2:!1,ruleForm:{createTime:"",collectionAccount:"",sameTrade:"",money:"",abstract:"",isInvoice:"0",invoiceList:[{type:"",userType:"",taxesNumber:"",titleOrMobile:"",project:"",invoicemoney:"",account:"",bank:"",address:"",mobile:""}]},rules:{createTime:[{required:!0,message:"收款时间不能为空",trigger:"blur"}],collectionAccount:[{required:!0,message:"收款账户不能为空",trigger:"change"}],sameTrade:[{required:!0,message:"同业社不能为空",trigger:"change"}],money:[{required:!0,message:"收款金额不能为空",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"收款金额需为正数"}],abstract:[{required:!0,message:"摘要不能为空",trigger:"blur"}],taxesNumber:[{required:!0,message:"纳税人识别号不能为空",trigger:"blur"},{pattern:/^[+]{0,1}(\d+)$/,message:"纳税人识别号需为正整数"}],isInvoice:[{required:!0,message:"是否开发票不能为空",trigger:"blur"}]},collectionAccountList:[{value:"1",label:"收款账户1"},{value:"2",label:"收款账户2"},{value:"3",label:"收款账户3"}],sameTradeList:[{value:"1",label:"同业社1"},{value:"2",label:"同业社2"},{value:"3",label:"同业社3"}],tableData1:[{createTime:"2018-05-23",user:"阳阳",status:"通过",abstract:"没啥意见"}],tableData3:[],arrearsRelation:"8822.66",arrearsList:[{orderNumber:"51548979998051",productName:"【HKN-101】椰风海岸（海口）双飞6日游",tour:"TC-GTY-1001-01-180806-01",tourStartTime:"2018-05-23",orderMoney:"1699.00",arrearsMoney:"1699.00",repaymentMoney:"0.00",inAuditMoney:"0.00",matchingMoney:""}],invoiceType:[{value:"1",label:"类型1"},{value:"2",label:"类型2"},{value:"3",label:"类型3"},{value:"4",label:"类型4"}],invoiceProject:[{value:"1",label:"项目1"},{value:"2",label:"项目2"},{value:"3",label:"项目3"},{value:"4",label:"项目4"}],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}]}},computed:{invoiceListCount:function(){return this.ruleForm.invoiceList.length-1},title:function(){return 1==this.find||2==this.find?"查看同业收款":"添加同业收款"}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},clickBanle:function(e,t,a){this.user_id=e.id,this.user_name=e.name,this.reable=!1},closeAdd:function(){this.$emit("close",!1)},changeInvoice:function(){this.ruleForm.invoiceList.forEach(function(e,t,a){console.log(a[t].date)})},handleEdit:function(e,t){this.ruleForm.invoiceList.push({})},handleDelete:function(e,t){this.ruleForm.invoiceList.splice(e,1),0==this.ruleForm.invoiceList.length&&this.ruleForm.invoiceList.push({})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;0!=t.arrearsRelation||"0.00"!=t.arrearsRelation?t.$message({type:"error",message:"关联欠款金额有误"}):alert("submit!")})},chanelSubmit:function(){var e=this;this.$confirm("是否撤销该条收款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"撤销成功!"}),e.closeAdd()}).catch(function(){e.$message({type:"info",message:"已取消撤销"})})},Transfer:function(){this.dialogFormVisible1=!0},boSubmit:function(){this.dialogFormVisible2=!0},adoptForm:function(){var e=this;this.$confirm("是否通过该条收款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"通过成功!"}),e.closeAdd()}).catch(function(){e.$message({type:"info",message:"已取消(通过)"})})},routerHandle2:function(){var e=this;this.$confirm("是否转办该条收款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"转办成功!"}),e.closeAdd()}).catch(function(){e.$message({type:"info",message:"已取消(转办)"})}),this.dialogFormVisible1=!1},rejectHandle2:function(){var e=this;this.$confirm("是否驳回该条收款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"驳回成功!"}),e.closeAdd()}).catch(function(){e.$message({type:"info",message:"已取消(驳回)"})}),this.dialogFormVisible2=!1},downloadIamge:function(e,t){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0,a.width,a.height);var i=e.toDataURL("image/png"),l=document.createElement("a"),s=new MouseEvent("click");l.download=t||"photo",l.href=i,l.dispatchEvent(s)},a.src=e},downs:function(){this.downloadIamge(this.imgBig,this.imgBigName)},handleRemove:function(e,t){this.fileList=t},handleChange:function(e,t){this.fileList=t.slice(-3)},isInvoice:function(e){this.dialogVisible2="1"==e},handlePreview:function(e,t){this.dialogVisible=!0,this.imgBig=e.url,this.imgBigName=e.name},searchHand2:function(){this.pageNum=1;var e=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData3=t.data.objects,e.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})},handleSizeChange2:function(e){this.pagesize=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData3=e.data.objects,t.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})},handleCurrentChange2:function(e){this.pageNum=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/org/api/userpage",{pageIndex:this.pageNum,pageSize:this.pageSize,total:0,object:{isDeleted:0,value:"",type:3,user:"",input:this.apply_user_input}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData3=e.data.objects,t.tableData3.forEach(function(e,t,a){a[t].org="吉林大运通-财务部-会计",1==a[t].sex?a[t].sex="男":a[t].sex="女",0==a[t].userState?a[t].status="未选择":1==a[t].userState?a[t].status="等待审核":2==a[t].userState?a[t].status="正常":a[t].status="停用"})}).catch(function(e){console.log(e)})}},created:function(){}},da={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-dialog",{staticClass:"addReceivables",attrs:{title:e.title,visible:e.dialogFormVisible,width:"60%","show-close":!1},on:{close:e.closeAdd}},[1==this.find||2==this.find?a("div",{staticClass:"sh_style"},[e._v("审核中")]):e._e(),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("div",{staticClass:"btn",staticStyle:{position:"absolute","z-index":"9",top:"20px",right:"1%"}},[a("el-button",{on:{click:e.closeAdd}},[e._v("取 消")]),e._v(" "),0==this.find?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提 交")]):e._e(),e._v(" "),1==this.find?a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.chanelSubmit("ruleForm")}}},[e._v("撤销收款")]):e._e(),e._v(" "),2==this.find?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.Transfer("ruleForm")}}},[e._v("转办")]):e._e(),e._v(" "),2==this.find?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.adoptForm("ruleForm")}}},[e._v("通过")]):e._e(),e._v(" "),2==this.find?a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.boSubmit("ruleForm")}}},[e._v("驳回")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"收款时间",prop:"createTime","label-width":"120px"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"收款时间",disabled:e.change},model:{value:e.ruleForm.createTime,callback:function(t){e.$set(e.ruleForm,"createTime",t)},expression:"ruleForm.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款账户",prop:"collectionAccount","label-width":"120px"}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择",disabled:e.change},model:{value:e.ruleForm.collectionAccount,callback:function(t){e.$set(e.ruleForm,"collectionAccount",t)},expression:"ruleForm.collectionAccount"}},e._l(e.collectionAccountList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"同业社",prop:"sameTrade","label-width":"120px"}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择",disabled:e.change},model:{value:e.ruleForm.sameTrade,callback:function(t){e.$set(e.ruleForm,"sameTrade",t)},expression:"ruleForm.sameTrade"}},e._l(e.sameTradeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"收款金额",prop:"money","label-width":"120px"}},[a("el-input",{staticClass:"bright",attrs:{type:"number",placeholder:"收款金额",disabled:e.change},model:{value:e.ruleForm.money,callback:function(t){e.$set(e.ruleForm,"money",t)},expression:"ruleForm.money"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"摘要",prop:"abstract","label-width":"120px"}},[a("el-input",{staticClass:"bright2",attrs:{placeholder:"摘要",disabled:e.change},model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"凭证","label-width":"120px"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",disabled:e.change,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否开发票",prop:"isInvoice","label-width":"120px"}},[a("el-radio-group",{attrs:{disabled:e.change},on:{change:e.isInvoice},model:{value:e.ruleForm.isInvoice,callback:function(t){e.$set(e.ruleForm,"isInvoice",t)},expression:"ruleForm.isInvoice"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),e.dialogVisible2?a("el-form-item",{staticStyle:{"margin-top":"-21px"},attrs:{label:"","label-width":"30px","label-height":"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.invoiceList,border:""}},[a("el-table-column",{attrs:{label:"发票类型",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",disabled:e.change},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.invoiceType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"个人/单位",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",disabled:e.change},model:{value:t.row.userType,callback:function(a){e.$set(t.row,"userType",a)},expression:"scope.row.userType"}},[a("el-option",{key:"个人",attrs:{label:"个人",value:"个人"}}),e._v(" "),a("el-option",{key:"单位",attrs:{label:"单位",value:"单位"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"纳税人识别号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{required:"",placeholder:"纳税人识别号",disabled:e.change},model:{value:t.row.taxesNumber,callback:function(a){e.$set(t.row,"taxesNumber",a)},expression:"scope.row.taxesNumber"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发票抬头/手机号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"发票抬头/手机号",disabled:e.change},model:{value:t.row.titleOrMobile,callback:function(a){e.$set(t.row,"titleOrMobile",a)},expression:"scope.row.titleOrMobile"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发票项目",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"发票项目",disabled:e.change},model:{value:t.row.project,callback:function(a){e.$set(t.row,"project",a)},expression:"scope.row.project"}},e._l(e.invoiceProject,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number",placeholder:"金额",disabled:e.change},model:{value:t.row.money,callback:function(a){e.$set(t.row,"money",a)},expression:"scope.row.money"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"帐号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"帐号",disabled:e.change},model:{value:t.row.account,callback:function(a){e.$set(t.row,"account",a)},expression:"scope.row.account"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开户行",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"开户行",disabled:e.change},model:{value:t.row.bank,callback:function(a){e.$set(t.row,"bank",a)},expression:"scope.row.bank"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"地址",disabled:e.change},model:{value:t.row.address,callback:function(a){e.$set(t.row,"address",a)},expression:"scope.row.address"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"电话",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"电话",disabled:e.change},model:{value:t.row.mobile,callback:function(a){e.$set(t.row,"mobile",a)},expression:"scope.row.mobile"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("br"),e._v(" "),e.invoiceListCount==t.$index?a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("添加")]):e._e()]}}])})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"关联欠款","label-width":"120px","label-height":"auto"}},[a("span",{staticStyle:{float:"right",color:"red"}},[e._v("欠款关联:  "+e._s(e.arrearsRelation))])]),e._v(" "),a("el-form-item",{attrs:{label:"","label-width":"","label-height":"auto"}},[a("el-table",{staticStyle:{width:"97.8%","margin-left":"30px","margin-top":"-25px"},attrs:{data:e.arrearsList,border:""}},[a("el-table-column",{attrs:{prop:"orderNumber",label:"订单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"产品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tour",label:"团期计划",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tourStartTime",label:"出团日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderMoney",label:"订单金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arrearsMoney",label:"欠款金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"repaymentMoney",label:"已还金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inAuditMoney",label:"待审核金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"匹配收款金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"匹配收款金额",disabled:e.change},model:{value:t.row.matchingMoney,callback:function(a){e.$set(t.row,"matchingMoney",a)},expression:"scope.row.matchingMoney"}})]}}])})],1)],1),e._v(" "),1==this.find||2==this.find?a("el-form-item",{attrs:{label:"审批过程","label-width":"120px","label-height":"auto"}}):e._e(),e._v(" "),1==this.find||2==this.find?a("el-form-item",{attrs:{label:"","label-width":"","label-height":"auto"}},[a("el-table",{staticStyle:{width:"97.8%","margin-left":"30px","margin-top":"-25px"},attrs:{data:e.tableData1,border:""}},[a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abstract",label:"摘要",align:"center"}})],1)],1):e._e(),e._v(" "),a("div",{staticStyle:{height:"200px"}})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"选择协办人:",visible:e.dialogFormVisible1,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"button_select",staticStyle:{"margin-bottom":"30px","margin-top":"-30px"}},[a("el-input",{staticClass:"input",staticStyle:{"margin-left":"0px"},model:{value:e.apply_user_input,callback:function(t){e.apply_user_input=t},expression:"apply_user_input"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.searchHand2()}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"table_trip",staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData3,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass},on:{"row-click":e.clickBanle}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"100%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120%",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"org",label:"组织",align:"center"}})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,50,100],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2,"update:currentPage":function(t){e.currentPage=t}}})],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.routerHandle2()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"请填写审批意见",visible:e.dialogFormVisible2,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("textarea",{staticStyle:{width:"90%",height:"132px",resize:"none","margin-left":"13px"}},[e._v("123123")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.rejectHandle2()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"放大图片:",visible:e.dialogVisible,width:"50%"}},[a("el-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"primary"},on:{click:function(t){e.downs()}}},[e._v("点击下载")]),e._v(" "),a("div",[a("img",{attrs:{src:e.imgBig,alt:"图片",alt:e.imgBigName}}),e._v(" "),a("span",[e._v(e._s(e.imgBigName))])])],1)],1)},staticRenderFns:[]};var ua=a("VU/8")(ca,da,!1,function(e){a("r3QK")},"data-v-304d4996",null).exports,pa={name:"sameTradeManagement",components:{SameTradeInfo:ua},data:function(){return{activeName:"first",activeName2:"three",plan:"",accepter:"",startTime:"",endTime:"",reable:!0,currentPage:1,total:0,pageSize:10,pageNum:1,tableData:[],find:0,change:!1,dialogFormVisible:!1}},computed:{},methods:{closeAdd:function(){this.dialogFormVisible=!1},handleSizeChange:function(e){this.pagesize=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:1,pageSize:e,total:0,object:{id:0,title:"",createUser:"",minPrice:0,maxPrice:0,podID:0,destinationID:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,t,a){a[t].number=a[t].id,a[t].status="状态",a[t].createTime="2016-05-03-收款时间",a[t].plan="团期计划",a[t].orderNum="订单号",a[t].sameTrade="同业社名称",a[t].collectionAccount="收款账户",a[t].money="金额",a[t].orinaze="申请组织:国内部",a[t].accpter="tester申请人",a[t].opinion="同意",a[t].applyTime="2016-05-03-申请时间"})}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.pageNum=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:e,pageSize:this.pageSize,total:0,object:{id:0,title:"",createUser:"",minPrice:0,maxPrice:0,podID:0,destinationID:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,t,a){a[t].number=a[t].id,a[t].status="状态",a[t].createTime="2016-05-03-收款时间",a[t].plan="团期计划",a[t].orderNum="订单号",a[t].sameTrade="同业社名称",a[t].collectionAccount="收款账户",a[t].money="金额",a[t].orinaze="申请组织:国内部",a[t].accpter="tester申请人",a[t].opinion="同意",a[t].applyTime="2016-05-03-申请时间"})}).catch(function(e){console.log(e)})},dialogFind:function(){this.find=1,this.change=!0,this.dialogFormVisible=!0},dialogchange:function(){this.find=0,this.change=!1,this.dialogFormVisible=!0},resetHand:function(){},searchHand:function(){},clickBanle:function(e,t,a){this.pid=e.id,this.reable=!1},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""}},created:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/team/api/teamsearch",{pageIndex:1,pageSize:this.pageSize,total:0,object:{id:0,title:"",createUser:"",minPrice:0,maxPrice:0,podID:0,destinationID:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(e,t,a){a[t].number=a[t].id,a[t].status="状态",a[t].createTime="2016-05-03-收款时间",a[t].plan="团期计划",a[t].orderNum="订单号",a[t].sameTrade="同业社名称",a[t].collectionAccount="收款账户",a[t].money="金额",a[t].orinaze="申请组织:国内部",a[t].accpter="tester申请人",a[t].opinion="同意",a[t].applyTime="2016-05-03-申请时间"})}).catch(function(e){console.log(e)})}},ma={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all",staticStyle:{position:"relative"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"borders",staticStyle:{"margin-bottom":"100px"}},[a("div",[a("div",{staticClass:"search"},[a("span",{staticClass:"search_style"},[e._v("团期计划：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.plan,callback:function(t){e.plan=t},expression:"plan"}}),e._v(" "),a("span",{staticClass:"search_style"},[e._v("申请人：")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入内容"},model:{value:e.accepter,callback:function(t){e.accepter=t},expression:"accepter"}}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("div",{staticClass:"date-line"}),e._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"终止日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.searchHand()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.resetHand()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"reform"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.dialogchange}},[e._v("添加收款")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",disabled:e.reable},on:{click:e.dialogFind}},[e._v("查看详情")])],1)]),e._v(" "),a("div",{staticClass:"table_style"},[a("el-table",{staticStyle:{width:"70%"},attrs:{data:e.tableData,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass},on:{"row-click":e.clickBanle}},[a("el-table-column",{attrs:{prop:"number",label:"收款单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"收款时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plan",label:"团期计划",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNum",label:"订单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sameTrade",label:"同业社名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionAccount",label:"收款账户",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"money",label:"金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orinaze",label:"申请组织",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accpter",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applyTime",label:"申请时间",align:"center"}})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","margin-left":"-30%","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("SameTradeInfo",{attrs:{dialogFormVisible:e.dialogFormVisible,find:e.find,change:e.change},on:{close:e.closeAdd}})],1)])],1)},staticRenderFns:[]};var ha={name:"pendingApprovalManagement",components:{StraightGuestInfo:sa,SameTradeInfo:ua},data:function(){return{activeName:"first",activeName2:"three",plan:"",accepter:"",startTime:"",endTime:"",tableData:[],tableData2:[],reable:!0,reable2:!0,dialogFormVisible:!1,dialogFormVisible2:!1,change:!1,currentPage:1,total:0,pageSize:10,pageNum:1,find:0,caretHide:!1,caretHide2:!1,collectionAccountList:[],accountList:{},checkTypeList:{0:"审批中",1:"通过",2:"驳回"},pid:"",org:""}},computed:{invoiceListCount:function(){return this.ruleForm.invoiceList.length-1}},methods:{closeAdd:function(){this.dialogFormVisible=!1,this.dialogFormVisible2=!1},changeInvoice:function(){this.ruleForm.invoiceList.forEach(function(e,t,a){console.log(a[t].date)})},handleEdit:function(e,t){this.ruleForm.invoiceList.push({})},handleDelete:function(e,t){this.ruleForm.invoiceList.splice(e,1),0==this.ruleForm.invoiceList.length&&this.ruleForm.invoiceList.push({})},handleSizeChange:function(e){this.pagesize=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/collection/api/page",{pageIndex:1,pageSize:e,object:{id:0,checkType:0,collectionTime:"2019-05-16T01:02:40.816Z",startTime:this.startTime?formatDate(this.startTime,"yyyy-MM-dd hh:mm:ss"):"2000-05-16 01:02:40",endTime:this.endTime?formatDate(this.endTime,"yyyy-MM-dd hh:mm:ss"):"2099-05-16 01:02:40",groupCode:this.plan?this.plan:"",planID:0,orderID:0,orderNumber:"",collectionNumber:"",price:0,dept:0,createUser:this.accepter?this.accepter:"",createTime:"2019-05-16 01:02:40",code:"",serialNumber:"",abstract:"",isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,a,i){i[a].collectionNumber=t.accountList[i[a].collectionNumber],i[a].checkTypeStatus=t.checkTypeList[i[a].checkType],i[a].collectionTime=i[a].collectionTime.replace("T"," ").split(".")[0],i[a].createTime=i[a].createTime.replace("T"," ").split(".")[0]})}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.pageNum=e;var t=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/collection/api/page",{pageIndex:e,pageSize:t.pageSize,object:{id:0,checkType:0,collectionTime:"2019-05-16T01:02:40.816Z",startTime:this.startTime?formatDate(this.startTime,"yyyy-MM-dd hh:mm:ss"):"2000-05-16 01:02:40",endTime:this.endTime?formatDate(this.endTime,"yyyy-MM-dd hh:mm:ss"):"2099-05-16 01:02:40",groupCode:this.plan?this.plan:"",planID:0,orderID:0,orderNumber:"",collectionNumber:"",price:0,dept:0,createUser:this.accepter?this.accepter:"",createTime:"2019-05-16 01:02:40",code:"",serialNumber:"",abstract:"",isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.total=e.data.total,t.tableData=e.data.objects,t.tableData.forEach(function(e,a,i){i[a].collectionNumber=t.accountList[i[a].collectionNumber],i[a].checkTypeStatus=t.checkTypeList[i[a].checkType],i[a].collectionTime=i[a].collectionTime.replace("T"," ").split(".")[0],i[a].createTime=i[a].createTime.replace("T"," ").split(".")[0]})}).catch(function(e){console.log(e)})},dialogchange:function(){this.find=2,this.change=!0,this.dialogFormVisible=!0},dialogchange2:function(){this.find=2,this.change=!0,this.dialogFormVisible2=!0},resetHand:function(){},clickBanle:function(e,t,a){this.pid=e.id,this.reable=!1},clickBanle2:function(e,t,a){this.pid2=e.id,this.reable2=!1},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7;color:rgb(85, 85, 85);":""},getCollectionAccount:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/collectionaccount/api/list",{object:{id:0,title:"string",mark:"string",isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.collectionAccountList=[],t.data.objects.forEach(function(t,a,i){e.accountList[i[a].id]=i[a].title,e.collectionAccountList.push({value:i[a].id,label:i[a].title})})}).catch(function(e){console.log(e)})},searchHand:function(){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/finance/collection/api/page",{pageIndex:1,pageSize:e.pageSize,object:{id:0,checkType:0,collectionTime:"2019-05-16T01:02:40.816Z",startTime:this.startTime?formatDate(this.startTime,"yyyy-MM-dd hh:mm:ss"):"2000-05-16 01:02:40",endTime:this.endTime?formatDate(this.endTime,"yyyy-MM-dd hh:mm:ss"):"2099-05-16 01:02:40",groupCode:this.plan?this.plan:"",planID:0,orderID:0,orderNumber:"",collectionNumber:"",price:0,dept:0,createUser:this.accepter?this.accepter:"",createTime:"2019-05-16 01:02:40",code:"",serialNumber:"",abstract:"",isDeleted:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){e.total=t.data.total,e.tableData=t.data.objects,e.tableData.forEach(function(t,a,i){i[a].collectionNumber=e.accountList[i[a].collectionNumber],i[a].checkTypeStatus=e.checkTypeList[i[a].checkType],i[a].collectionTime=i[a].collectionTime.replace("T"," ").split(".")[0],i[a].createTime=i[a].createTime.replace("T"," ").split(".")[0]})}).catch(function(e){console.log(e)})},getUnfinishedTasksForJQ:function(){this.$http.post(this.GLOBAL.jqUrl+"/api/JQ/GettingUnfinishedTasksForJQ",{userCode:sessionStorage.getItem("account"),startTime:"2000-01-01",endTime:"2999-01-01",startIndex:1,endIndex:10},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){console.log(123),console.log(e.data),console.log(456)}).catch(function(e){console.log(e)})}},created:function(){this.getCollectionAccount(),this.searchHand(),this.getUnfinishedTasksForJQ()}},fa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all",staticStyle:{position:"relative"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"borders"},[a("div",{staticClass:"search"},[a("span",{staticClass:"search_style"},[e._v("直客")]),e._v(" "),e.caretHide?a("i",{staticClass:"el-icon-caret-top",on:{click:function(t){e.caretHide=!e.caretHide}}}):e._e(),e._v(" "),e.caretHide?e._e():a("i",{staticClass:"el-icon-caret-bottom",on:{click:function(t){e.caretHide=!e.caretHide}}})]),e._v(" "),a("transition",{attrs:{name:"el-fade-in-linear"}},[e.caretHide?e._e():a("div",{staticClass:"table_style"},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",plain:"",disabled:e.reable},on:{click:e.dialogchange}},[e._v("审批")]),e._v(" "),a("el-table",{staticStyle:{width:"65%"},attrs:{data:e.tableData,border:"","highlight-current-row":!0,"header-cell-style":e.getRowClass},on:{"row-click":e.clickBanle}},[a("el-table-column",{attrs:{prop:"id",label:"收款单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkTypeStatus",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionTime",label:"收款时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupCode",label:"团期计划",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNumber",label:"订单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionNumber",label:"收款账户",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dept",label:"申请组织",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"申请时间",align:"center"}})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","margin-left":"-30%","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)]),e._v(" "),a("br"),e._v(" "),a("StraightGuestInfo",{attrs:{dialogFormVisible:e.dialogFormVisible,find:e.find,pid:e.pid,change:e.change,org:e.org,collectionAccountList:e.collectionAccountList,accountList:e.accountList},on:{searchHand:e.searchHand,close:e.closeAdd}})],1)])],1)},staticRenderFns:[]};var ga={name:"collectionManagement",components:{SameTradeManagement:a("VU/8")(pa,ma,!1,function(e){a("1YDK")},"data-v-c720ed38",null).exports,StraightGuestManagement:na,PendingApprovalManagement:a("VU/8")(ha,fa,!1,function(e){a("c/Vu")},"data-v-6d440ae6",null).exports},data:function(){return{activeName:"second"}},computed:{},methods:{},created:function(){}},va={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vivo",staticStyle:{position:"relative"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"直客",name:"second"}},[a("StraightGuestManagement")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"待审批",name:"third"}},[a("PendingApprovalManagement")],1)],1)],1)},staticRenderFns:[]};var ba=a("VU/8")(ga,va,!1,function(e){a("a+8z")},"data-v-6714d664",null).exports;function ya(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _a={data:function(){return{tableHeight:{padding:"0",height:"40px"},tableHead:{color:"#555555"},searchName:"",currentPage:1,pagesize:10,total:100,dialogSupplierVisible:!1,currentRow:"",isRow:!0,dataList:[{subjectValue:134123124,type:1,name:"甜程对公账号",cardNumber:"123 3212 123 123",openingBank:"建行",openingPeople:"旧故里"},{subjectValue:134123124,type:2,name:"甜程对公账号",cardNumber:"123 3212 123 123",openingBank:"建行",openingPeople:"旧故里"},{subjectValue:134123124,type:3,name:"甜程对公账号",cardNumber:"123 3212 123 123",openingBank:"建行",openingPeople:"旧故里"},{subjectValue:134123124,type:4,name:"甜程对公账号",cardNumber:"123 3212 123 123",openingBank:"建行",openingPeople:"旧故里"}],handleForm:{id:"",subjectValue:"",name:"",cardNumber:"",openingBank:"",openingPeople:"",type:""},rules:{name:[{required:!0,message:"不能为空"},ya({min:0,max:40,message:"长度在 0 到 40 个字符"},"message","字数超过限制")],cardNumber:[{required:!0,message:"不能为空"},ya({min:0,max:40,message:"长度在 0 到 40 个字符"},"message","字数超过限制")],openingBank:[{required:!0,message:"不能为空"},ya({min:0,max:80,message:"长度在 0 到 80 个字符"},"message","字数超过限制")],openingPeople:[{required:!0,message:"不能为空"},ya({min:0,max:40,message:"长度在 0 到 40 个字符"},"message","字数超过限制")],type:[{required:!0,message:"不能为空"}]},options:[{id:1,name:"收款"},{id:2,name:"付款"},{id:3,name:"应收"},{id:4,name:"应付"}]}},methods:{getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0==t?"background:#F7F7F7":""},handleEdit:function(){this.handleForm.subjectValue=this.currentRow.subjectValue,this.handleForm.name=this.currentRow.name,this.handleForm.cardNumber=this.currentRow.cardNumber,this.handleForm.openingBank=this.currentRow.openingBank,this.handleForm.openingPeople=this.currentRow.openingPeople,this.handleForm.type=this.currentRow.type,this.dialogSupplierVisible=!0},handleSave:function(){this.$refs.Form.validate(function(e){})},handleChange:function(e){e&&(this.currentRow=e),this.isRow=!1},pagesizes:function(){},handleCurrentChange:function(){}}},Ca={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bankAccount"},[a("div",{staticClass:"search_dom"},[a("span",[e._v("科目值")]),e._v(" "),a("el-input",{staticClass:"search_input",attrs:{clearable:""},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[e._v("重置")])],1),e._v(" "),a("el-button",{staticClass:"button",attrs:{type:"primary",disabled:e.isRow},on:{click:e.handleEdit}},[e._v("编辑")]),e._v(" "),a("el-table",{staticClass:"table-class",attrs:{data:e.dataList,border:"","highlight-current-row":"",cellStyle:e.tableHeight,headerRowStyle:e.tableHead,"header-cell-style":e.getRowClass},on:{"current-change":e.handleChange}},[a("el-table-column",{attrs:{prop:"subjectValue",label:"科目值","header-align":"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型","header-align":"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("收款")]):e._e(),e._v(" "),2==t.row.type?a("span",[e._v("付款")]):e._e(),e._v(" "),3==t.row.type?a("span",[e._v("应收")]):e._e(),e._v(" "),4==t.row.type?a("span",[e._v("应付")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"账号名称",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardNumber",label:"卡号","min-width":"220","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openingBank",label:"开户行",width:"140","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openingPeople",label:"开户人",width:"140","header-align":"center"}})],1),e._v(" "),a("div",{staticClass:"pages"},[a("el-pagination",{staticClass:"page",attrs:{background:"","current-page":e.currentPage,"page-sizes":[2,4,8,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pagesizes,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{width:"500px",top:"10vh",title:"收款账号",visible:e.dialogSupplierVisible,"show-close":!1},on:{"update:visible":function(t){e.dialogSupplierVisible=t}}},[a("el-form",{ref:"Form",attrs:{model:e.handleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"科目值:",prop:"subjectValue"}},[a("span",{staticStyle:{"margin-left":"15px"}},[e._v(e._s(e.handleForm.subjectValue))])]),e._v(" "),a("el-form-item",{attrs:{label:"账户名称",prop:"name"}},[a("el-input",{staticClass:"item_input",attrs:{clearable:""},model:{value:e.handleForm.name,callback:function(t){e.$set(e.handleForm,"name",t)},expression:"handleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"卡号",prop:"cardNumber"}},[a("el-input",{staticClass:"item_input",attrs:{clearable:""},model:{value:e.handleForm.cardNumber,callback:function(t){e.$set(e.handleForm,"cardNumber",t)},expression:"handleForm.cardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户行",prop:"openingBank"}},[a("el-input",{staticClass:"item_input",attrs:{clearable:""},model:{value:e.handleForm.openingBank,callback:function(t){e.$set(e.handleForm,"openingBank",t)},expression:"handleForm.openingBank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户人",prop:"openingPeople"}},[a("el-input",{staticClass:"item_input",attrs:{clearable:""},model:{value:e.handleForm.openingPeople,callback:function(t){e.$set(e.handleForm,"openingPeople",t)},expression:"handleForm.openingPeople"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticClass:"item_input",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.handleForm.type,callback:function(t){e.$set(e.handleForm,"type",t)},expression:"handleForm.type"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"100px"},on:{click:function(t){e.dialogSupplierVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var xa=a("VU/8")(_a,Ca,!1,function(e){a("Gsc2")},"data-v-55e04829",null).exports;i.default.use(u.a);var ka=new u.a({routes:[{path:"/",redirect:"login"},{path:"/userList",component:h,name:"用户列表",meta:{keepAlive:!0,auth:!0}},{path:"/organList",component:b,name:"组织列表",meta:{keepAlive:!0,title:"组织列表",auth:!0}},{path:"/role",component:C,name:"角色模板",meta:{keepAlive:!0,auth:!0}},{path:"/addRole",component:R,name:"添加角色权限模板",meta:{keepAlive:!0,auth:!0}},,{path:"/accountInfor",component:T,name:"个人中心",meta:{keepAlive:!0,auth:!0}},{path:"/login",component:$,meta:{keepAlive:!1}},{path:"/positionList",component:I,name:"职位列表",meta:{keepAlive:!0,auth:!0}},{path:"/userList",component:h,meta:{keepAlive:!0,auth:!0}},{path:"/userList/addUser",component:q,name:"用户添加",meta:{keepAlive:!0,auth:!0}},{path:"/cityList",component:W,name:"区域列表",meta:{keepAlive:!0,auth:!0}},{path:"/customArea",component:J,name:"自定义地区",meta:{keepAlive:!0,auth:!0}},{path:"/scenicList",component:ne,name:"景点列表",meta:{keepAlive:!0,auth:!0}},{path:"/labelList",component:ue,name:"标签列表",meta:{keepAlive:!0,auth:!0}},{path:"/materialList",component:he,name:"素材列表",meta:{keepAlive:!0,auth:!0}},{path:"/hotelList",component:ve,name:"酒店列表",meta:{keepAlive:!0,auth:!0}},{path:"/supplierInfo",component:Ce,name:"供应商信息",meta:{keepAlive:!0,auth:!0}},{path:"/merchantInfo",component:st,name:"商户信息",meta:{keepAlive:!0,auth:!0}},{path:"/priList",component:pt,name:"功能列表",meta:{keepAlive:!0,auth:!0}},{path:"/proList",component:ft,name:"权限列表",meta:{keepAlive:!0,auth:!0}},,{path:"/blacklist",component:at,name:"黑名单",meta:{keepAlive:!0,auth:!0}},{path:"/controlList",component:ct,name:"权限配置",meta:{keepAlive:!0,auth:!0}},{path:"/productList",component:Ne,name:"产品列表",meta:{keepAlive:!0,auth:!0}},{path:"/listInfo",component:Le,name:"添加跟团游",meta:{keepAlive:!0,auth:!0}},{path:"/travelTemplate",component:Pe,name:"出行模板",meta:{keepAlive:!0,auth:!0}},{path:"/regimentPlan",component:$e,name:"团期计划",children:[{path:"teamPlanList",name:"团期计划列表",component:je,meta:{keepAlive:!0,auth:!0}}]},{path:"/orderList",component:kt,name:"订单管理",meta:{keepAlive:!0,auth:!0}},{path:"/sharedInventory",component:qe,name:"共享库存",meta:{keepAlive:!0,auth:!0}},{path:"/changePro",component:Ye,name:"编辑产品",meta:{keepAlive:!0,auth:!0}},{path:"/changeInfo",component:Ke,name:"行程信息",meta:{keepAlive:!0,auth:!0}},{path:"/loanManagement",component:Et,name:"无收入借款管理",meta:{keepAlive:!0,auth:!0}},{path:"/advancePayment",component:Ht,name:"预付款管理",meta:{keepAlive:!0,auth:!0}},{path:"/reimburseManagement",component:Xt,name:"报销管理",meta:{keepAlive:!0,auth:!0}},{path:"/collectionManagement",component:ba,name:"收款管理",meta:{keepAlive:!0,auth:!0}},{path:"/arrearsManagement",component:aa,name:"欠款管理",meta:{keepAlive:!0,auth:!0}},{path:"/bankAccount",component:xa,name:"银行账号管理",meta:{keepAlive:!0,auth:!0}},{path:"*",redirect:"/userList"}]}),wa={serverSrc:"http://192.168.1.186:3017",imgUrl:"http://192.168.1.186:3009",jqUrl:"http://192.168.1.198:6019",token:"",userId:"",hasEnter:!1},Sa=a("VU/8")(wa,null,!1,null,null,null).exports,Ta=a("NYxO");i.default.use(Ta.a);var Na=new Ta.a.Store({state:{isLogin:0,token:"",name:""},mutations:{changeLogin:function(e,t){e.isLogin=t},saveToken:function(e,t){e.token=t},saveName:function(e,t){e.name=t}}}),Fa=(a("3FO/"),a("hBH+"),a("Wn8z"),a("ygOC"),a("zL8q")),Ia=a.n(Fa),Da=(a("tvR6"),a("mw3O")),La=a.n(Da);a("PS5z");i.default.use(Ia.a),i.default.prototype.$http=L.a,i.default.prototype.qs=La.a,i.default.prototype.GLOBAL=Sa,i.default.config.productionTip=!1,L.a.interceptors.request.use(function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},function(e){return Promise.reject(e)}),L.a.interceptors.response.use(function(e){return e},function(e){switch(e.response.status){case 401:localStorage.removeItem("token"),ka.replace({path:"login",query:{redirect:ka.currentRoute.fullPath}})}return Promise.reject(e.response)});var Ea=new i.default({el:"#app",store:Na,router:ka,components:{App:d},template:"<App/>"});sessionStorage.getItem("id")?Ea.$router.beforeEach(function(e,t,a){e.matched.some(function(e){return e.meta.auth})?sessionStorage.getItem("id")?a():(a({path:"/login",query:{Rurl:e.fullPath}}),localStorage.clear()):a()}):Ea.$router.push({path:"/login"})},OEC9:function(e,t){},OmjD:function(e,t){},PS5z:function(e,t){},RNdM:function(e,t){},SsNg:function(e,t){},TZQY:function(e,t){},UJsg:function(e,t){},ULeP:function(e,t){},VWbP:function(e,t){},WTm8:function(e,t){},Wb2A:function(e,t){},Wn8z:function(e,t){UE.I18N["zh-cn"]={labelMap:{anchor:"锚点",undo:"撤销",redo:"重做",bold:"加粗",indent:"首行缩进",snapscreen:"截图",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",fontborder:"字符边框",superscript:"上标",formatmatch:"格式刷",source:"源代码",blockquote:"引用",pasteplain:"纯文本粘贴模式",selectall:"全选",print:"打印",preview:"预览",horizontal:"分隔线",removeformat:"清除格式",time:"时间",date:"日期",unlink:"取消链接",insertrow:"前插入行",insertcol:"前插入列",mergeright:"右合并单元格",mergedown:"下合并单元格",deleterow:"删除行",deletecol:"删除列",splittorows:"拆分成行",splittocols:"拆分成列",splittocells:"完全拆分单元格",deletecaption:"删除表格标题",inserttitle:"插入标题",mergecells:"合并多个单元格",deletetable:"删除表格",cleardoc:"清空文档",insertparagraphbeforetable:"表格前插入行",insertcode:"代码语言",fontfamily:"字体",fontsize:"字号",paragraph:"段落格式",simpleupload:"单图上传",insertimage:"多图上传",edittable:"表格属性",edittd:"单元格属性",link:"超链接",emotion:"表情",spechars:"特殊字符",searchreplace:"查询替换",map:"Baidu地图",gmap:"Google地图",insertvideo:"视频",help:"帮助",justifyleft:"居左对齐",justifyright:"居右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",forecolor:"字体颜色",backcolor:"背景色",insertorderedlist:"有序列表",insertunorderedlist:"无序列表",fullscreen:"全屏",directionalityltr:"从左向右输入",directionalityrtl:"从右向左输入",rowspacingtop:"段前距",rowspacingbottom:"段后距",pagebreak:"分页",insertframe:"插入Iframe",imagenone:"默认",imageleft:"左浮动",imageright:"右浮动",attachment:"附件",imagecenter:"居中",wordimage:"图片转存",lineheight:"行间距",edittip:"编辑提示",customstyle:"自定义标题",autotypeset:"自动排版",webapp:"百度应用",touppercase:"字母大写",tolowercase:"字母小写",background:"背景",template:"模板",scrawl:"涂鸦",music:"音乐",inserttable:"插入表格",drafts:"从草稿箱加载",charts:"图表"},insertorderedlist:{num:"1,2,3...",num1:"1),2),3)...",num2:"(1),(2),(3)...",cn:"一,二,三....",cn1:"一),二),三)....",cn2:"(一),(二),(三)....",decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 大圆圈",disc:"● 小黑点",square:"■ 小方块 ",dash:"— 破折号",dot:" 。 小圆圈"},paragraph:{p:"段落",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},fontfamily:{songti:"宋体",kaiti:"楷体",heiti:"黑体",lishu:"隶书",yahei:"微软雅黑",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"标题居中",tl:"标题居左",im:"强调",hi:"明显强调"},autoupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},simpleupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},elementPathTip:"元素路径",wordCountTip:"字数统计",wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",wordOverFlowMsg:'<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',ok:"确认",cancel:"取消",closeDialog:"关闭对话框",tableDrag:"表格拖动必须引入uiUtils.js文件！",autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",loadconfigError:"获取后台配置项请求出错，上传功能将不能正常使用！",loadconfigFormatError:"后台配置项返回格式出错，上传功能将不能正常使用！",loadconfigHttpError:"请求后台配置项http错误，上传功能将不能正常使用！",snapScreen_plugin:{browserMsg:"仅支持IE浏览器！",callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",uploadErrorMsg:"截图上传失败，请检查服务器端环境! "},insertcode:{as3:"ActionScript 3",bash:"Bash/Shell",cpp:"C/C++",css:"CSS",cf:"ColdFusion","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"HTML",java:"Java",jfx:"JavaFX",js:"JavaScript",pl:"Perl",php:"PHP",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"SQL",vb:"Visual Basic",xml:"XML"},confirmClear:"确定清空当前文档么？",contextMenu:{delete:"删除",selectall:"全选",deletecode:"删除代码",cleardoc:"清空文档",confirmclear:"确定清空当前文档么？",unlink:"删除超链接",paragraph:"段落格式",edittable:"表格属性",aligntd:"单元格对齐方式",aligntable:"表格对齐方式",tableleft:"左浮动",tablecenter:"居中显示",tableright:"右浮动",edittd:"单元格属性",setbordervisible:"设置表格边线可见",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",table:"表格",inserttable:"插入表格",deletetable:"删除表格",insertparagraphbefore:"前插入段落",insertparagraphafter:"后插入段落",deleterow:"删除当前行",deletecol:"删除当前列",insertrow:"前插入行",insertcol:"左插入列",insertrownext:"后插入行",insertcolnext:"右插入列",insertcaption:"插入表格名称",deletecaption:"删除表格名称",inserttitle:"插入表格标题行",deletetitle:"删除表格标题行",inserttitlecol:"插入表格标题列",deletetitlecol:"删除表格标题列",averageDiseRow:"平均分布各行",averageDisCol:"平均分布各列",mergeright:"向右合并",mergeleft:"向左合并",mergedown:"向下合并",mergecells:"合并单元格",splittocells:"完全拆分单元格",splittocols:"拆分成列",splittorows:"拆分成行",tablesort:"表格排序",enablesort:"设置表格可排序",disablesort:"取消表格可排序",reversecurrent:"逆序当前",orderbyasc:"按ASCII字符升序",reversebyasc:"按ASCII字符降序",orderbynum:"按数值大小升序",reversebynum:"按数值大小降序",borderbk:"边框底纹",setcolor:"表格隔行变色",unsetcolor:"取消表格隔行变色",setbackground:"选区背景隔行",unsetbackground:"取消选区背景",redandblue:"红蓝相间",threecolorgradient:"三色渐变",copy:"复制(Ctrl + c)",copymsg:"浏览器不支持,请使用 'Ctrl + c'",paste:"粘贴(Ctrl + v)",pastemsg:"浏览器不支持,请使用 'Ctrl + v'"},copymsg:"浏览器不支持,请使用 'Ctrl + c'",pastemsg:"浏览器不支持,请使用 'Ctrl + v'",anthorMsg:"链接",clearColor:"清空颜色",standardColor:"标准颜色",themeColor:"主题颜色",property:"属性",default:"默认",modify:"修改",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中",justify:"默认",clear:"清除",anchorMsg:"锚点",delete:"删除",clickToUpload:"点击上传",unset:"尚未设置语言文件",t_row:"行",t_col:"列",more:"更多",pasteOpt:"粘贴选项",pasteSourceFormat:"保留源格式",tagFormat:"只保留标签",pasteTextFormat:"只保留文本",autoTypeSet:{mergeLine:"合并空行",delLine:"清除空行",removeFormat:"清除格式",indent:"首行缩进",alignment:"对齐方式",imageFloat:"图片浮动",removeFontsize:"清除字号",removeFontFamily:"清除字体",removeHtml:"清除冗余HTML代码",pasteFilter:"粘贴过滤",run:"执行",symbol:"符号转换",bdc2sb:"全角转半角",tobdc:"半角转全角"},background:{static:{lang_background_normal:"背景设置",lang_background_local:"在线图片",lang_background_set:"选项",lang_background_none:"无背景色",lang_background_colored:"有背景色",lang_background_color:"颜色设置",lang_background_netimg:"网络图片",lang_background_align:"对齐方式",lang_background_position:"精确定位",repeatType:{options:["居中","横向重复","纵向重复","平铺","自定义"]}},noUploadImage:"当前未上传过任何图片！",toggleSelect:"单击可切换选中状态\n原图尺寸: "},insertimage:{static:{lang_tab_remote:"插入图片",lang_tab_upload:"本地上传",lang_tab_online:"在线管理",lang_tab_search:"图片搜索",lang_input_url:"地 址：",lang_input_size:"大 小：",lang_input_width:"宽度",lang_input_height:"高度",lang_input_border:"边 框：",lang_input_vhspace:"边 距：",lang_input_title:"描 述：",lang_input_align:"图片浮动方式：",lang_imgLoading:"　图片加载中……",lang_start_upload:"开始上传",lock:{title:"锁定宽高比例"},searchType:{title:"图片类型",options:["新闻","壁纸","表情","头像"]},searchTxt:{value:"请输入搜索关键词"},searchBtn:{value:"百度一下"},searchReset:{value:"清空搜索"},noneAlign:{title:"无浮动"},leftAlign:{title:"左浮动"},rightAlign:{title:"右浮动"},centerAlign:{title:"居中独占一行"}},uploadSelectFile:"点击选择图片",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",uploadNoPreview:"不能预览",updateStatusReady:"选中_张图片，共_KB。",updateStatusConfirm:"已成功上传_张照片，_张照片上传失败",updateStatusFinish:"共_张（_KB），_张上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错",remoteLockError:"宽高不正确,不能所定比例",numError:"请输入正确的长度或者宽度值！例如：123，400",imageUrlError:"不允许的图片格式或者图片域！",imageLoadError:"图片加载失败！请检查链接地址或网络状态！",searchRemind:"请输入搜索关键词",searchLoading:"图片加载中，请稍后……",searchRetry:" :( ，抱歉，没有找到图片！请重试一次！"},attachment:{static:{lang_tab_upload:"上传附件",lang_tab_online:"在线附件",lang_start_upload:"开始上传",lang_drop_remind:"可以将文件拖到这里，单次最多可选100个文件"},uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"已成功上传_个文件，_个文件上传失败",updateStatusFinish:"共_个（_KB），_个上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},insertvideo:{static:{lang_tab_insertV:"插入视频",lang_tab_searchV:"搜索视频",lang_tab_uploadV:"上传视频",lang_video_url:"视频网址",lang_video_size:"视频尺寸",lang_videoW:"宽度",lang_videoH:"高度",lang_alignment:"对齐方式",videoSearchTxt:{value:"请输入搜索关键字！"},videoType:{options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]},videoSearchBtn:{value:"百度一下"},videoSearchReset:{value:"清空结果"},lang_input_fileStatus:" 当前未上传文件",startUpload:{style:"background:url(upload.png) no-repeat;"},lang_upload_size:"视频尺寸",lang_upload_width:"宽度",lang_upload_height:"高度",lang_upload_alignment:"对齐方式",lang_format_advice:"建议使用mp4格式."},numError:"请输入正确的数值，如123,400",floatLeft:"左浮动",floatRight:"右浮动",'"default"':"默认",block:"独占一行",urlError:"输入的视频地址有误，请检查后再试！",loading:" &nbsp;视频加载中，请等待……",clickToSelect:"点击选中",goToSource:"访问源视频",noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！",browseFiles:"浏览文件",uploadSuccess:"上传成功!",delSuccessFile:"从成功队列中移除",delFailSaveFile:"移除保存失败文件",statusPrompt:" 个文件已上传！ ",flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",flashLoadingError:"Flash加载失败!请检查路径或网络状态",fileUploadReady:"等待上传……",delUploadQueue:"从上传队列中移除",limitPrompt1:"单次不能选择超过",limitPrompt2:"个文件！请重新选择！",delFailFile:"移除失败文件",fileSizeLimit:"文件大小超出限制！",emptyFile:"空文件无法上传！",fileTypeError:"文件类型不允许！",unknownError:"未知错误！",fileUploading:"上传中，请等待……",cancelUpload:"取消上传",netError:"网络错误",failUpload:"上传失败!",serverIOError:"服务器IO错误！",noAuthority:"无权限！",fileNumLimit:"上传个数限制",failCheck:"验证失败，本次上传被跳过！",fileCanceling:"取消中，请等待……",stopUploading:"上传已停止……",uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"成功上传_个，_个失败",updateStatusFinish:"共_个(_KB)，_个成功上传",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},webapp:{tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",tip2:"申请完成之后请至ueditor.config.js中配置获得的appkey! ",applyFor:"点此申请",anthorApi:"百度API"},template:{static:{lang_template_bkcolor:"背景颜色",lang_template_clear:"保留原有内容",lang_template_select:"选择模板"},blank:"空白文档",blog:"博客文章",resume:"个人简历",richText:"图文混排",sciPapers:"科技论文"},scrawl:{static:{lang_input_previousStep:"上一步",lang_input_nextsStep:"下一步",lang_input_clear:"清空",lang_input_addPic:"添加背景",lang_input_ScalePic:"缩放背景",lang_input_removePic:"删除背景",J_imgTxt:{title:"添加背景图片"}},noScarwl:"尚未作画，白纸一张~",scrawlUpLoading:"涂鸦上传中,别急哦~",continueBtn:"继续",imageError:"糟糕，图片读取失败了！",backgroundUploading:"背景图片上传中,别急哦~"},music:{static:{lang_input_tips:"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",J_searchBtn:{value:"搜索歌曲"}},emptyTxt:"未搜索到相关音乐结果，请换一个关键词试试。",chapter:"歌曲",singer:"歌手",special:"专辑",listenTest:"试听"},anchor:{static:{lang_input_anchorName:"锚点名字："}},charts:{static:{lang_data_source:"数据源：",lang_chart_format:"图表格式：",lang_data_align:"数据对齐方式",lang_chart_align_same:"数据源与图表X轴Y轴一致",lang_chart_align_reverse:"数据源与图表X轴Y轴相反",lang_chart_title:"图表标题",lang_chart_main_title:"主标题：",lang_chart_sub_title:"子标题：",lang_chart_x_title:"X轴标题：",lang_chart_y_title:"Y轴标题：",lang_chart_tip:"提示文字",lang_cahrt_tip_prefix:"提示文字前缀：",lang_cahrt_tip_description:"仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀",lang_chart_data_unit:"数据单位",lang_chart_data_unit_title:"单位：",lang_chart_data_unit_description:"显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃",lang_chart_type:"图表类型：",lang_prev_btn:"上一个",lang_next_btn:"下一个"}},emotion:{static:{lang_input_choice:"精选",lang_input_Tuzki:"兔斯基",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"绿豆蛙",lang_input_babyCat:"baby猫",lang_input_bubble:"泡泡",lang_input_youa:"有啊"}},gmap:{static:{lang_input_address:"地址",lang_input_search:"搜索",address:{value:"北京"}},searchError:"无法定位到该地址!"},help:{static:{lang_input_about:"关于UEditor",lang_input_shortcuts:"快捷键",lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",lang_Txt_shortcuts:"快捷键",lang_Txt_func:"功能",lang_Txt_bold:"给选中字设置为加粗",lang_Txt_copy:"复制选中内容",lang_Txt_cut:"剪切选中内容",lang_Txt_Paste:"粘贴",lang_Txt_undo:"重新执行上次操作",lang_Txt_redo:"撤销上一次操作",lang_Txt_italic:"给选中字设置为斜体",lang_Txt_underline:"给选中字加下划线",lang_Txt_selectAll:"全部选中",lang_Txt_visualEnter:"软回车",lang_Txt_fullscreen:"全屏"}},insertframe:{static:{lang_input_address:"地址：",lang_input_width:"宽度：",lang_input_height:"高度：",lang_input_isScroll:"允许滚动条：",lang_input_frameborder:"显示框架边框：",lang_input_alignMode:"对齐方式：",align:{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},enterAddress:"请输入地址!"},link:{static:{lang_input_text:"文本内容：",lang_input_url:"链接地址：",lang_input_title:"标题：",lang_input_target:"是否在新窗口打开："},validLink:"只支持选中一个链接时生效",httpPrompt:"您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"},map:{static:{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索",lang_dynamicmap:"插入动态地图"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},searchreplace:{static:{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_searchReg:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_searchReg1:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},snapscreen:{static:{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},spechars:{static:{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",yyyb:"英语音标",zyzf:"其他"},edittable:{static:{lang_tableStyle:"表格样式",lang_insertCaption:"添加表格名称行",lang_insertTitle:"添加表格标题行",lang_insertTitleCol:"添加表格标题列",lang_orderbycontent:"使表格内容可排序",lang_tableSize:"自动调整表格尺寸",lang_autoSizeContent:"按表格文字自适应",lang_autoSizePage:"按页面宽度自适应",lang_example:"示例",lang_borderStyle:"表格边框",lang_color:"颜色:"},captionName:"表格名称",titleName:"标题",cellsName:"内容",errorMsg:"有合并单元格，不可排序"},edittip:{static:{lang_delRow:"删除整行",lang_delCol:"删除整列"}},edittd:{static:{lang_tdBkColor:"背景颜色:"}},formula:{static:{}},wordimage:{static:{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"},fileType:"图片",flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！",netError:"网络连接错误，请重试！",copySuccess:"图片地址已经复制！",flashI18n:{}},autosave:{saving:"保存中...",success:"本地保存成功"}}},YnYZ:function(e,t){},"a+8z":function(e,t){},aagO:function(e,t){},arYN:function(e,t){},atE2:function(e,t){},auut:function(e,t){},bGBf:function(e,t){},"c/Vu":function(e,t){},faIj:function(e,t){},g8D9:function(e,t){},gSqT:function(e,t){},"hBH+":function(module,exports){
/*!
 * UEditor
 * version: ueditor
 * build: Wed Aug 10 2016 11:05:21 GMT+0800 (CST)
 */
!function(){function getListener(e,t,a){var i;return t=t.toLowerCase(),(i=e.__allListeners||a&&(e.__allListeners={}))&&(i[t]||a&&(i[t]=[]))}function getDomNode(e,t,a,i,l,s){var o,r=i&&e[t];for(!r&&(r=e[a]);!r&&(o=(o||e).parentNode);){if("BODY"==o.tagName||s&&!s(o))return null;r=o[a]}return r&&l&&!l(r)?getDomNode(r,t,a,!1,l):r}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3";var dom=UE.dom={},browser=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,a={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(e),opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,mac:e.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode};a.gecko="Gecko"==navigator.product&&!a.webkit&&!a.opera&&!a.ie;var i=0;if(a.ie){var l=e.match(/(?:msie\s([\w.]+))/),s=e.match(/(?:trident.*rv:([\w.]+))/);i=l&&s&&l[1]&&s[1]?Math.max(1*l[1],1*s[1]):l&&l[1]?1*l[1]:s&&s[1]?1*s[1]:0,a.ie11Compat=11==document.documentMode,a.ie9Compat=9==document.documentMode,a.ie8=!!document.documentMode,a.ie8Compat=8==document.documentMode,a.ie7Compat=7==i&&!document.documentMode||7==document.documentMode,a.ie6Compat=i<7||a.quirks,a.ie9above=i>8,a.ie9below=i<9,a.ie11above=i>10,a.ie11below=i<11}if(a.gecko){var o=e.match(/rv:([\d\.]+)/);o&&(i=1e4*(o=o[1].split("."))[0]+100*(o[1]||0)+1*(o[2]||0))}return/chrome\/(\d+\.\d)/i.test(e)&&(a.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(a.safari=+(RegExp.$1||RegExp.$2)),a.opera&&(i=parseFloat(t.version())),a.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),a.version=i,a.isCompatible=!a.mobile&&(a.ie&&i>=6||a.gecko&&i>=10801||a.opera&&i>=9.5||a.air&&i>=1||a.webkit&&i>=522||!1),a}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={each:function(e,t,a){if(null!=e)if(e.length===+e.length){for(var i=0,l=e.length;i<l;i++)if(!1===t.call(a,e[i],i,e))return!1}else for(var s in e)if(e.hasOwnProperty(s)&&!1===t.call(a,e[s],s,e))return!1},makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,a){if(t)for(var i in t)a&&e.hasOwnProperty(i)||(e[i]=t[i]);return e},extend2:function(e){for(var t=arguments,a=1;a<t.length;a++){var i=t[a];for(var l in i)e.hasOwnProperty(l)||(e[l]=i[l])}return e},inherits:function(e,t){var a=e.prototype,i=utils.makeInstance(t.prototype);return utils.extend(i,a,!0),e.prototype=i,i.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,a){var i;return function(){a&&clearTimeout(i),i=setTimeout(e,t)}},indexOf:function(e,t,a){var i=-1;return a=this.isNumber(a)?a:0,this.each(e,function(e,l){if(l>=a&&e===t)return i=l,!1}),i},removeItem:function(e,t){for(var a=0,i=e.length;a<i;a++)e[a]===t&&(e.splice(a,1),a--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=utils.isArray(e)?e:e.split(",");for(var t,a=0,i={};t=e[a++];)i[t.toUpperCase()]=i[t]=1;return i},unhtml:function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},unhtmlForUrl:function(e,t){return e?e.replace(t||/[<">']/g,function(e){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[e]}):""},cssStyleToDomStyle:(a=document.createElement("div").style,b={float:void 0!=a.cssFloat?"cssFloat":void 0!=a.styleFloat?"styleFloat":"float"},function(e){return b[e]||(b[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}),loadFile:function(){function e(e,a){try{for(var i,l=0;i=t[l++];)if(i.doc===e&&i.url==(a.src||a.href))return i}catch(e){return null}}var t=[];return function(a,i,l){var s=e(a,i);if(s)s.ready?l&&l():s.funs.push(l);else if(t.push({doc:a,url:i.src||i.href,funs:[l]}),a.body){if(!i.id||!a.getElementById(i.id)){var o=a.createElement(i.tag);for(var r in delete i.tag,i)o.setAttribute(r,i[r]);o.onload=o.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if((s=e(a,i)).funs.length>0){s.ready=1;for(var t;t=s.funs.pop();)t()}o.onload=o.onreadystatechange=null}},o.onerror=function(){throw Error("The load "+(i.href||i.src)+" fails,check the url settings of file ueditor.config.js ")},a.getElementsByTagName("head")[0].appendChild(o)}}else{var n=[];for(var r in i)"tag"!=r&&n.push(r+'="'+i[r]+'"');a.write("<"+i.tag+" "+n.join(" ")+" ></"+i.tag+">")}}}(),isEmptyObject:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var a=t.split(",");if(a.length>3)return"";t="#";for(var i,l=0;i=a[l++];)t+=1==(i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16)).length?"0"+i:i;t=t.toUpperCase()}return t},optCss:function(e){function t(e,t){if(!e)return"";var a=e.top,i=e.bottom,l=e.left,s=e.right,o="";if(a&&l&&i&&s)o+=";"+t+":"+(a==i&&i==l&&l==s?a:a==i&&l==s?a+" "+l:l==s?a+" "+l+" "+i:a+" "+s+" "+i+" "+l)+";";else for(var r in e)o+=";"+t+"-"+r+":"+e[r]+";";return o}var a,i;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,t,l,s){if(1==s.split(" ").length)switch(t){case"padding":return!a&&(a={}),a[l]=s,"";case"margin":return!i&&(i={}),i[l]=s,"";case"border":return"initial"==s?"":e}return e}),(e+=t(a,"padding")+t(i,"margin")).replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},clone:function(e,t){var a;for(var i in t=t||{},e)e.hasOwnProperty(i)&&("object"==typeof(a=e[i])?(t[i]=utils.isArray(a)?[]:{},utils.clone(e[i],t[i])):t[i]=a);return t},transUnitToPx:function(e){if(!/(pt|cm)/.test(e))return e;var t;switch(e.replace(/([\d.]+)(\w+)/,function(a,i,l){e=i,t=l}),t){case"cm":e=25*parseFloat(e);break;case"pt":e=Math.round(96*parseFloat(e)/72)}return e+(e?"px":"")},domReady:function(){function e(e){e.isReady=!0;for(var a;a=t.pop();a());}var t=[];return function(a,i){var l=(i=i||window).document;a&&t.push(a),"complete"===l.readyState?e(l):(l.isReady&&e(l),browser.ie&&11!=browser.version?(function(){if(!l.isReady){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e(l)}}(),i.attachEvent("onload",function(){e(l)})):(l.addEventListener("DOMContentLoaded",function(){l.removeEventListener("DOMContentLoaded",arguments.callee,!1),e(l)},!1),i.addEventListener("load",function(){e(l)},!1)))}}(),cssRule:browser.ie&&11!=browser.version?function(e,t,a){var i,l;if(void 0===t||t&&t.nodeType&&9==t.nodeType){if(void 0!==(l=(i=(a=t&&t.nodeType&&9==t.nodeType?t:a||document).indexList||(a.indexList={}))[e]))return a.styleSheets[l].cssText}else{if(l=(i=(a=a||document).indexList||(a.indexList={}))[e],""===t)return void 0!==l&&(a.styleSheets[l].cssText="",delete i[e],!0);void 0!==l?sheetStyle=a.styleSheets[l]:(sheetStyle=a.createStyleSheet("",l=a.styleSheets.length),i[e]=l),sheetStyle.cssText=t}}:function(e,t,a){var i;return void 0===t||t&&t.nodeType&&9==t.nodeType?(i=(a=t&&t.nodeType&&9==t.nodeType?t:a||document).getElementById(e))?i.innerHTML:void 0:(i=(a=a||document).getElementById(e),""===t?!!i&&(i.parentNode.removeChild(i),!0):void(i?i.innerHTML=t:(i=a.createElement("style"),i.id=e,i.innerHTML=t,a.getElementsByTagName("head")[0].appendChild(i))))},sort:function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var a=0,i=e.length;a<i;a++)for(var l=a,s=e.length;l<s;l++)if(t(e[a],e[l])>0){var o=e[a];e[a]=e[l],e[l]=o}return e},serializeParam:function(e){var t=[];for(var a in e)if("method"!=a&&"timeout"!=a&&"async"!=a)if("function"!=(typeof e[a]).toLowerCase()&&"object"!=(typeof e[a]).toLowerCase())t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));else if(utils.isArray(e[a]))for(var i=0;i<e[a].length;i++)t.push(encodeURIComponent(a)+"[]="+encodeURIComponent(e[a][i]));return t.join("&")},formatUrl:function(e){var t=e.replace(/&&/g,"&");return(t=(t=(t=t.replace(/\?&/g,"?")).replace(/&$/g,"")).replace(/&#/g,"#")).replace(/&+/g,"&")},isCrossDomainUrl:function(e){var t=document.createElement("a");return t.href=e,browser.ie&&(t.href=t.href),!(t.protocol==location.protocol&&t.hostname==location.hostname&&(t.port==location.port||"80"==t.port&&""==location.port||""==t.port&&"80"==location.port))},clearEmptyAttrs:function(e){for(var t in e)""===e[t]&&delete e[t];return e},str2json:function(e){return utils.isString(e)?window.JSON?JSON.parse(e):new Function("return "+utils.trim(e||""))():null},json2str:function(){function e(e){return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/["\\\x00-\x1f]/g,function(e){var t=i[e];return t||(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})),'"'+e+'"'}function t(e){return e<10?"0"+e:e}function a(e){return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}if(window.JSON)return JSON.stringify;var i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(t){switch(typeof t){case"undefined":return"undefined";case"number":return isFinite(t)?String(t):"null";case"string":return e(t);case"boolean":return String(t);default:if(null===t)return"null";if(utils.isArray(t))return function(e){var t,a,i,l=["["],s=e.length;for(a=0;a<s;a++)switch(i=e[a],typeof i){case"undefined":case"function":case"unknown":break;default:t&&l.push(","),l.push(utils.json2str(i)),t=1}return l.push("]"),l.join("")}(t);if(utils.isDate(t))return a(t);var i,l,s=["{"],o=utils.json2str;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))switch(l=t[r],typeof l){case"undefined":case"unknown":case"function":break;default:i&&s.push(","),i=1,s.push(o(r)+":"+o(l))}return s.push("}"),s.join("")}}}()},a,b;utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(e){UE.utils["is"+e]=function(t){return Object.prototype.toString.apply(t)=="[object "+e+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var a,i=0;a=e[i++];)getListener(this,a,!0).push(t)},on:function(e,t){return this.addListener(e,t)},off:function(e,t){return this.removeListener(e,t)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var a,i=0;a=e[i++];)utils.removeItem(getListener(this,a)||[],t)},fireEvent:function(){var e=arguments[0];e=utils.trim(e).split(" ");for(var t,a=0;t=e[a++];){var i,l,s,o=getListener(this,t);if(o)for(s=o.length;s--;)if(o[s]){if(!0===(l=o[s].apply(this,arguments)))return l;void 0!==l&&(i=l)}(l=this["on"+t.toLowerCase()])&&(i=l.apply(this,arguments))}return i}};var dtd=dom.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}var t=utils.extend2,a=e({isindex:1,fieldset:1}),i=e({input:1,button:1,select:1,textarea:1,label:1}),l=t(e({a:1}),i),s=t({iframe:1},l),o=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),r=e({ins:1,del:1,script:1,style:1}),n=t(e({b:1,acronym:1,bdo:1,var:1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),r),c=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),n),d=t(e({p:1}),c),u=t(e({iframe:1}),c,i),p=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,var:1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),m=t(e({a:0}),u),h=e({tr:1}),f=e({"#":1}),g=t(e({param:1}),p),v=t(e({form:1}),a,s,o,d),b=e({li:1,ol:1,ul:1}),y=e({style:1,script:1}),_=e({base:1,link:1,meta:1,title:1}),C=t(_,y),x=e({head:1,body:1}),k=e({html:1}),w=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),S=e({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return e({$nonBodyContent:t(k,x,_),$block:w,$inline:m,$inlineWithA:t(e({a:1}),m),$body:t(e({script:1,style:1}),w),$cdata:e({script:1,style:1}),$empty:S,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:x,head:C,style:f,script:f,body:v,base:{},link:{},meta:{},title:f,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:v,td:v,br:{},th:v,center:v,kbd:m,button:t(d,o),basefont:{},h5:m,h4:m,samp:m,h6:m,ol:b,h1:m,h3:m,option:f,h2:m,form:t(a,s,o,d),select:e({optgroup:1,option:1}),font:m,ins:m,menu:b,abbr:m,label:m,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:m,tfoot:h,cite:m,li:v,input:{},iframe:v,strong:m,textarea:f,noframes:v,big:m,small:m,span:e({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:m,dt:m,sub:m,optgroup:e({option:1}),param:{},bdo:m,var:m,div:v,object:g,sup:m,dd:v,strike:m,area:{},dir:b,map:t(e({area:1,form:1,p:1}),a,r,o),applet:g,dl:e({dt:1,dd:1}),del:m,isindex:{},fieldset:t(e({legend:1}),p),thead:h,ul:b,acronym:m,b:m,a:t(e({a:1}),u),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),v),caption:m,i:m,u:m,tbody:h,s:m,address:t(s,d),tt:m,legend:m,q:m,pre:t(n,l),p:t(e({a:1}),m),em:m,dfn:m})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&"6"==browser.version?"\ufeff":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var a,i=[e],l=[t];for(a=e;a=a.parentNode;){if(a===t)return 10;i.push(a)}for(a=t;a=a.parentNode;){if(a===e)return 20;l.push(a)}if(i.reverse(),l.reverse(),i[0]!==l[0])return 1;for(var s=-1;i[++s]===l[s];);for(e=i[s],t=l[s];e=e.nextSibling;)if(e===t)return 4;return 2},getNodeIndex:function(e,t){for(var a=e,i=0;a=a.previousSibling;)t&&3==a.nodeType?a.nodeType!=a.nextSibling.nodeType&&i++:i++;return i},inDoc:function(e,t){return 10==domUtils.getPosition(e,t)},findParent:function(e,t,a){if(e&&!domUtils.isBody(e))for(e=a?e:e.parentNode;e;){if(!t||t(e)||domUtils.isBody(e))return t&&!t(e)&&domUtils.isBody(e)?null:e;e=e.parentNode}return null},findParentByTagName:function(e,t,a,i){return t=utils.listToMap(utils.isArray(t)?t:[t]),domUtils.findParent(e,function(e){return t[e.tagName]&&!(i&&i(e))},a)},findParents:function(e,t,a,i){for(var l=t&&(a&&a(e)||!a)?[e]:[];e=domUtils.findParent(e,a);)l.push(e);return i?l:l.reverse()},insertAfter:function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},remove:function(e,t){var a,i=e.parentNode;if(i){if(t&&e.hasChildNodes())for(;a=e.firstChild;)i.insertBefore(a,e);i.removeChild(e)}return e},getNextDomNode:function(e,t,a,i){return getDomNode(e,"firstChild","nextSibling",t,a,i)},getPreDomNode:function(e,t,a,i){return getDomNode(e,"lastChild","previousSibling",t,a,i)},isBookmarkNode:function(e){return 1==e.nodeType&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;for(var a=[e],i=[t],l=e,s=-1;l=l.parentNode;){if(l===t)return l;a.push(l)}for(l=t;l=l.parentNode;){if(l===e)return l;i.push(l)}for(a.reverse(),i.reverse();a[++s]===i[s];);return 0==s?null:a[s-1]},clearEmptySibling:function(e,t,a){function i(e,t){for(var a;e&&!domUtils.isBookmarkNode(e)&&(domUtils.isEmptyInlineElement(e)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(e.nodeValue));)a=e[t],domUtils.remove(e),e=a}!t&&i(e.nextSibling,"nextSibling"),!a&&i(e.previousSibling,"previousSibling")},split:function(e,t){var a=e.ownerDocument;if(browser.ie&&t==e.nodeValue.length){var i=a.createTextNode("");return domUtils.insertAfter(e,i)}var l=e.splitText(t);if(browser.ie8){var s=a.createTextNode("");domUtils.insertAfter(l,s),domUtils.remove(s)}return l},isWhitespace:function(e){return!new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(e.nodeValue)},getXY:function(e){for(var t=0,a=0;e.offsetParent;)a+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:a}},on:function(e,t,a){var i=utils.isArray(t)?t:utils.trim(t).split(/\s+/),l=i.length;if(l)for(;l--;)if(t=i[l],e.addEventListener)e.addEventListener(t,a,!1);else{a._d||(a._d={els:[]});var s=t+a.toString(),o=utils.indexOf(a._d.els,e);a._d[s]&&-1!=o||(-1==o&&a._d.els.push(e),a._d[s]||(a._d[s]=function(e){return a.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,a._d[s]))}e=null},un:function(e,t,a){var i=utils.isArray(t)?t:utils.trim(t).split(/\s+/),l=i.length;if(l)for(;l--;)if(t=i[l],e.removeEventListener)e.removeEventListener(t,a,!1);else{var s=t+a.toString();try{e.detachEvent("on"+t,a._d?a._d[s]:a)}catch(e){}if(a._d&&a._d[s]){var o=utils.indexOf(a._d.els,e);-1!=o&&a._d.els.splice(o,1),0==a._d.els.length&&delete a._d[s]}}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return!1;var a=e.attributes,i=t.attributes;if(!ie&&a.length!=i.length)return!1;for(var l,s,o=0,r=0,n=0;l=a[n++];){if("style"==l.nodeName){if(l.specified&&o++,domUtils.isSameStyle(e,t))continue;return!1}if(ie){if(!l.specified)continue;o++,s=i.getNamedItem(l.nodeName)}else s=t.attributes[l.nodeName];if(!s.specified||l.nodeValue!=s.nodeValue)return!1}if(ie){for(n=0;s=i[n++];)s.specified&&r++;if(o!=r)return!1}return!0},isSameStyle:function(e,t){var a=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),i=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){if(a=e.style,i=t.style,a.length!=i.length)return!1;for(var l in a)if(!/^(\d+|csstext)$/i.test(l)&&a[l]!=i[l])return!1;return!0}if(!a||!i)return a==i;if(a=a.split(";"),i=i.split(";"),a.length!=i.length)return!1;for(var s,o=0;s=a[o++];)if(-1==utils.indexOf(i,s))return!1;return!0},isBlockElm:function(e){return 1==e.nodeType&&(dtd.$block[e.tagName]||styleBlock[domUtils.getComputedStyle(e,"display")])&&!dtd.$nonChild[e.tagName]},isBody:function(e){return e&&1==e.nodeType&&"body"==e.tagName.toLowerCase()},breakParent:function(e,t){var a,i,l,s=e,o=e;do{for(s=s.parentNode,i?((a=s.cloneNode(!1)).appendChild(i),i=a,(a=s.cloneNode(!1)).appendChild(l),l=a):l=(i=s.cloneNode(!1)).cloneNode(!1);a=o.previousSibling;)i.insertBefore(a,i.firstChild);for(;a=o.nextSibling;)l.appendChild(a);o=s}while(t!==s);return(a=t.parentNode).insertBefore(i,t),a.insertBefore(l,t),a.insertBefore(e,l),domUtils.remove(t),e},isEmptyInlineElement:function(e){if(1!=e.nodeType||!dtd.$removeEmpty[e.tagName])return 0;for(e=e.firstChild;e;){if(domUtils.isBookmarkNode(e))return 0;if(1==e.nodeType&&!domUtils.isEmptyInlineElement(e)||3==e.nodeType&&!domUtils.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){for(var a;(a=e[t])&&3==a.nodeType&&domUtils.isWhitespace(a);)e.removeChild(a)}t("firstChild"),t("lastChild")},mergeChild:function(e,t,a){for(var i,l=domUtils.getElementsByTagName(e,e.tagName.toLowerCase()),s=0;i=l[s++];)if(i.parentNode&&!domUtils.isBookmarkNode(i))if("span"!=i.tagName.toLowerCase())domUtils.isSameElement(e,i)&&domUtils.remove(i,!0);else{if(e===i.parentNode&&(domUtils.trimWhiteTextNode(e),1==e.childNodes.length)){e.style.cssText=i.style.cssText+";"+e.style.cssText,domUtils.remove(i,!0);continue}if(i.style.cssText=e.style.cssText+";"+i.style.cssText,a){var o=a.style;if(o){o=o.split(";");for(var r,n=0;r=o[n++];)i.style[utils.cssStyleToDomStyle(r.split(":")[0])]=r.split(":")[1]}}domUtils.isSameStyle(i,e)&&domUtils.remove(i,!0)}},getElementsByTagName:function(e,t,a){if(a&&utils.isString(a)){var i=a;a=function(e){return domUtils.hasClass(e,i)}}t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var l,s=[],o=0;l=t[o++];)for(var r,n=e.getElementsByTagName(l),c=0;r=n[c++];)a&&!a(r)||s.push(r);return s},mergeToParent:function(e){for(var t=e.parentNode;t&&dtd.$removeEmpty[t.tagName];){if(t.tagName==e.tagName||"A"==t.tagName){if(domUtils.trimWhiteTextNode(t),"SPAN"==t.tagName&&!domUtils.isSameStyle(t,e)||"A"==t.tagName&&"SPAN"==e.tagName){if(t.childNodes.length>1||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,"A"==t.tagName&&(t.style.textDecoration="underline")}if("A"!=t.tagName){t===e.parentNode&&domUtils.remove(e,!0);break}}t=t.parentNode}},mergeSibling:function(e,t,a){function i(e,t,a){var i;if((i=a[e])&&!domUtils.isBookmarkNode(i)&&1==i.nodeType&&domUtils.isSameElement(a,i)){for(;i.firstChild;)"firstChild"==t?a.insertBefore(i.lastChild,a.firstChild):a.appendChild(i.firstChild);domUtils.remove(i)}}!t&&i("previousSibling","firstChild",e),!a&&i("nextSibling","lastChild",e)},unSelectable:ie&&browser.ie9below||browser.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t,a=0;t=e.all[a++];)switch(t.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:t.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.msUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var a,i=0;a=t[i++];){switch(a=attrFix[a]||a){case"className":e[a]="";break;case"style":e.style.cssText="";var l=e.getAttributeNode("style");!browser.ie&&l&&e.removeAttributeNode(l)}e.removeAttribute(a)}},createElement:function(e,t,a){return domUtils.setAttributes(e.createElement(t),a)},setAttributes:function(e,t){for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];switch(a){case"class":e.className=i;break;case"style":e.style.cssText=e.style.cssText+";"+i;break;case"innerHTML":e[a]=i;break;case"value":e.value=i;break;default:e.setAttribute(attrFix[a]||a,i)}}return e},getComputedStyle:function(e,t){if("width height top left".indexOf(t)>-1)return e["offset"+t.replace(/^\w/,function(e){return e.toUpperCase()})]+"px";if(3==e.nodeType&&(e=e.parentNode),browser.ie&&browser.version<9&&"font-size"==t&&!e.style.fontSize&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]){var a=e.ownerDocument.createElement("span");a.style.cssText="padding:0;border:0;font-family:simsun;",a.innerHTML=".",e.appendChild(a);var i=a.offsetHeight;return e.removeChild(a),a=null,i+"px"}try{var l=domUtils.getStyle(e,t)||(window.getComputedStyle?domUtils.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[utils.cssStyleToDomStyle(t)])}catch(e){return""}return utils.transUnitToPx(utils.fixColor(t,l))},removeClasses:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var a,i=0,l=e.className;a=t[i++];)l=l.replace(new RegExp("\\b"+a+"\\b"),"");(l=utils.trim(l).replace(/[ ]{2,}/g," "))?e.className=l:domUtils.removeAttributes(e,["class"])},addClass:function(e,t){if(e){t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var a,i=0,l=e.className;a=t[i++];)new RegExp("\\b"+a+"\\b").test(l)||(l+=" "+a);e.className=utils.trim(l)}},hasClass:function(e,t){if(utils.isRegExp(t))return t.test(e.className);t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var a,i=0,l=e.className;a=t[i++];)if(!new RegExp("\\b"+a+"\\b","i").test(l))return!1;return i-1==t.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeStyle:function(e,t){browser.ie?("color"==t&&(t="(^|;)"+t),e.style.cssText=e.style.cssText.replace(new RegExp(t+"[^:]*:[^;]+;?","ig"),"")):e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(utils.cssStyleToDomStyle(t)),e.style.cssText||domUtils.removeAttributes(e,["style"])},getStyle:function(e,t){var a=e.style[utils.cssStyleToDomStyle(t)];return utils.fixColor(t,a)},setStyle:function(e,t,a){e.style[utils.cssStyleToDomStyle(t)]=a,utils.trim(e.style.cssText)||this.removeAttributes(e,"style")},setStyles:function(e,t){for(var a in t)t.hasOwnProperty(a)&&domUtils.setStyle(e,a,t[a])},removeDirtyAttr:function(e){for(var t,a=0,i=e.getElementsByTagName("*");t=i[a++];)t.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var a=0,i=e.firstChild;for(t=t||function(){return 1};i;)t(i)&&a++,i=i.nextSibling;return a},isEmptyNode:function(e){return!e.firstChild||0==domUtils.getChildCount(e,function(e){return!domUtils.isBr(e)&&!domUtils.isBookmarkNode(e)&&!domUtils.isWhitespace(e)})},clearSelectedArr:function(e){for(var t;t=e.pop();)domUtils.removeAttributes(t,["class"])},scrollToView:function(e,t,a){var i=function(){var e=t.document,a="CSS1Compat"==e.compatMode;return{width:(a?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(a?e.documentElement.clientHeight:e.body.clientHeight)||0}}().height,l=-1*i+a;l+=e.offsetHeight||0,l+=domUtils.getXY(e).y;var s=function(e){if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}}(t).y;(l>s||l<s-i)&&t.scrollTo(0,l+(l<0?-20:20))},isBr:function(e){return 1==e.nodeType&&"BR"==e.tagName},isFillChar:function(e,t){if(3!=e.nodeType)return!1;var a=e.nodeValue;return t?new RegExp("^"+domUtils.fillChar).test(a):!a.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(e){var t,a=e.cloneRange(),i=0,l=a.startContainer;if(1==l.nodeType&&l.childNodes[a.startOffset])for(var s=(l=l.childNodes[a.startOffset]).previousSibling;s&&domUtils.isFillChar(s);)l=s,s=s.previousSibling;for(this.isFillChar(l,!0)&&1==a.startOffset&&(a.setStartBefore(l),l=a.startContainer);l&&domUtils.isFillChar(l);)t=l,l=l.previousSibling;for(t&&(a.setStartBefore(t),l=a.startContainer),1==l.nodeType&&domUtils.isEmptyNode(l)&&1==a.startOffset&&a.setStart(l,0).collapse(!0);!a.startOffset;){if(l=a.startContainer,domUtils.isBlockElm(l)||domUtils.isBody(l)){i=1;break}var o;if(s=a.startContainer.previousSibling){for(;s&&domUtils.isFillChar(s);)o=s,s=s.previousSibling;o?a.setStartBefore(o):a.setStartBefore(a.startContainer)}else a.setStartBefore(a.startContainer)}return i&&!domUtils.isBody(a.startContainer)?1:0},isEmptyBlock:function(e,t){if(1!=e.nodeType)return 0;if(t=t||new RegExp("[  \t\r\n"+domUtils.fillChar+"]","g"),e[browser.ie?"innerText":"textContent"].replace(t,"").length>0)return 0;for(var a in dtd.$isNotEmpty)if(e.getElementsByTagName(a).length)return 0;return 1},setViewportOffset:function(e,t){var a=0|parseInt(e.style.left),i=0|parseInt(e.style.top),l=e.getBoundingClientRect(),s=t.left-l.left,o=t.top-l.top;s&&(e.style.left=a+s+"px"),o&&(e.style.top=i+o+"px")},fillNode:function(e,t){var a=browser.ie?e.createTextNode(domUtils.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(a)},moveChild:function(e,t,a){for(;e.firstChild;)a&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return browser.ie?/^<\w+\s*?>/.test(e.outerHTML):0==e.attributes.length},isCustomeNode:function(e){return 1==e.nodeType&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return 1==e.nodeType&&new RegExp("\\b"+e.tagName+"\\b","i").test(t)},filterNodeList:function(e,t,a){var i=[];if(!utils.isFunction(t)){var l=t;t=function(e){return-1!=utils.indexOf(utils.isArray(l)?l:l.split(" "),e.tagName.toLowerCase())}}return utils.each(e,function(e){t(e)&&i.push(e)}),0==i.length?null:1!=i.length&&a?i:i[0]},isInNodeEndBoundary:function(e,t){var a=e.startContainer;if(3==a.nodeType&&e.startOffset!=a.nodeValue.length)return 0;if(1==a.nodeType&&e.startOffset!=a.childNodes.length)return 0;for(;a!==t;){if(a.nextSibling)return 0;a=a.parentNode}return 1},isBoundaryNode:function(e,t){for(;!domUtils.isBody(e);)if(e!==(e=e.parentNode)[t])return!1;return!0},fillHtml:browser.ie11below?"&nbsp;":"<br/>"},fillCharReg=new RegExp(domUtils.fillChar,"g");!function(){function e(e){return!e.collapsed&&1==e.startContainer.nodeType&&e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1}function t(e,t,a,i){return 1==t.nodeType&&(dtd.$empty[t.tagName]||dtd.$nonChild[t.tagName])&&(a=domUtils.getNodeIndex(t)+(e?0:1),t=t.parentNode),e?(i.startContainer=t,i.startOffset=a,i.endContainer||i.collapse(!0)):(i.endContainer=t,i.endOffset=a,i.startContainer||i.collapse(!1)),function(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer===e.endContainer&&e.startOffset==e.endOffset}(i),i}function a(e,t){var a,i,l=e.startContainer,s=e.endContainer,o=e.startOffset,r=e.endOffset,n=e.document,c=n.createDocumentFragment();if(1==l.nodeType&&(l=l.childNodes[o]||(a=l.appendChild(n.createTextNode("")))),1==s.nodeType&&(s=s.childNodes[r]||(i=s.appendChild(n.createTextNode("")))),l===s&&3==l.nodeType)return c.appendChild(n.createTextNode(l.substringData(o,r-o))),t&&(l.deleteData(o,r-o),e.collapse(!0)),c;for(var d,u,p=c,m=domUtils.findParents(l,!0),h=domUtils.findParents(s,!0),f=0;m[f]==h[f];)f++;for(var g,v=f;g=m[v];v++){for(d=g.nextSibling,g==l?a||(3==e.startContainer.nodeType?(p.appendChild(n.createTextNode(l.nodeValue.slice(o))),t&&l.deleteData(o,l.nodeValue.length-o)):p.appendChild(t?l:l.cloneNode(!0))):(u=g.cloneNode(!1),p.appendChild(u));d&&d!==s&&d!==h[v];)g=d.nextSibling,p.appendChild(t?d:d.cloneNode(!0)),d=g;p=u}p=c,m[f]||(p.appendChild(m[f-1].cloneNode(!1)),p=p.firstChild);var b;for(v=f;b=h[v];v++){if(d=b.previousSibling,b==s?i||3!=e.endContainer.nodeType||(p.appendChild(n.createTextNode(s.substringData(0,r))),t&&s.deleteData(0,r)):(u=b.cloneNode(!1),p.appendChild(u)),v!=f||!m[f])for(;d&&d!==l;)b=d.previousSibling,p.insertBefore(t?d:d.cloneNode(!0),p.firstChild),d=b;p=u}return t&&e.setStartBefore(h[f]?m[f]?h[f]:m[f-1]:h[f-1]).collapse(!0),a&&domUtils.remove(a),i&&domUtils.remove(i),c}function i(e,t){try{if(s&&domUtils.inDoc(s,e))if(s.nodeValue.replace(fillCharReg,"").length)s.nodeValue=s.nodeValue.replace(fillCharReg,"");else{var a=s.parentNode;for(domUtils.remove(s);a&&domUtils.isEmptyInlineElement(a)&&(browser.safari?!(domUtils.getPosition(a,t)&domUtils.POSITION_CONTAINS):!a.contains(t));)s=a.parentNode,domUtils.remove(a),a=s}}catch(e){}}function l(e,t){var a;for(e=e[t];e&&domUtils.isFillChar(e);)a=e[t],domUtils.remove(e),e=a}var s,o=0,r=domUtils.fillChar,n=dom.Range=function(e){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.document=e,t.collapsed=!0};n.prototype={cloneContents:function(){return this.collapsed?null:a(this,0)},deleteContents:function(){var e;return this.collapsed||a(this,1),browser.webkit&&(3!=(e=this.startContainer).nodeType||e.nodeValue.length||(this.setStartBefore(e).collapse(!0),domUtils.remove(e))),this},extractContents:function(){return this.collapsed?null:a(this,2)},setStart:function(e,a){return t(!0,e,a,this)},setEnd:function(e,a){return t(!1,e,a,this)},setStartAfter:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e)+1)},setEndBefore:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e))},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEndAtLast(e)},cloneRange:function(){var e=this;return new n(e.document).setStart(e.startContainer,e.startOffset).setEnd(e.endContainer,e.endOffset)},collapse:function(e){var t=this;return e?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(e){function t(e){return 1==e.nodeType&&!domUtils.isBookmarkNode(e)&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]}for(var a,i=this,l=i.collapsed;1==i.startContainer.nodeType&&(a=i.startContainer.childNodes[i.startOffset])&&t(a);)i.setStart(a,0);if(l)return i.collapse(!0);if(!e)for(;1==i.endContainer.nodeType&&i.endOffset>0&&(a=i.endContainer.childNodes[i.endOffset-1])&&t(a);)i.setEnd(a,a.childNodes.length);return i},getCommonAncestor:function(t,a){var i=this,l=i.startContainer,s=i.endContainer;return l===s?t&&e(this)&&1==(l=l.childNodes[i.startOffset]).nodeType?l:a&&3==l.nodeType?l.parentNode:l:domUtils.getCommonAncestor(l,s)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,a=this.startOffset,i=this.collapsed,l=this.endContainer;if(3==t.nodeType){if(0==a)this.setStartBefore(t);else if(a>=t.nodeValue.length)this.setStartAfter(t);else{var s=domUtils.split(t,a);t===l?this.setEnd(s,this.endOffset-a):t.parentNode===l&&(this.endOffset+=1),this.setStartBefore(s)}if(i)return this.collapse(!0)}return e||(a=this.endOffset,3==(l=this.endContainer).nodeType&&(0==a?this.setEndBefore(l):(a<l.nodeValue.length&&domUtils.split(l,a),this.setEndAfter(l)))),this},txtToElmBoundary:function(e){function t(e,t){var a=e[t+"Container"],i=e[t+"Offset"];3==a.nodeType&&(i?i>=a.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](a):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](a))}return!e&&this.collapsed||(t(this,"start"),t(this,"end")),this},insertNode:function(e){var t=e,a=1;11==e.nodeType&&(t=e.firstChild,a=e.childNodes.length),this.trimBoundary(!0);var i=this.startContainer,l=this.startOffset,s=i.childNodes[l];return s?i.insertBefore(e,s):i.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+a),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(e,t){var a,i=this.document.createElement("span");return i.style.cssText="display:none;line-height:0px;",i.appendChild(this.document.createTextNode("‍")),i.id="_baidu_bookmark_start_"+(t?"":o++),this.collapsed||((a=i.cloneNode(!0)).id="_baidu_bookmark_end_"+(t?"":o++)),this.insertNode(i),a&&this.collapse().insertNode(a).setEndBefore(a),this.setStartAfter(i),{start:e?i.id:i,end:a?e?a.id:a:null,id:e}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,a=e.end&&e.id?this.document.getElementById(e.end):e.end;return this.setStartBefore(t),domUtils.remove(t),a?(this.setEndBefore(a),domUtils.remove(a)):this.collapse(!0),this},enlarge:function(e,t){var a,i,l=domUtils.isBody,s=this.document.createTextNode("");if(e){for(1==(i=this.startContainer).nodeType?i.childNodes[this.startOffset]?a=i=i.childNodes[this.startOffset]:(i.appendChild(s),a=i=s):a=i;;){if(domUtils.isBlockElm(i)){for(i=a;(a=i.previousSibling)&&!domUtils.isBlockElm(a);)i=a;this.setStartBefore(i);break}a=i,i=i.parentNode}for(1==(i=this.endContainer).nodeType?((a=i.childNodes[this.endOffset])?i.insertBefore(s,a):i.appendChild(s),a=i=s):a=i;;){if(domUtils.isBlockElm(i)){for(i=a;(a=i.nextSibling)&&!domUtils.isBlockElm(a);)i=a;this.setEndAfter(i);break}a=i,i=i.parentNode}s.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(s)}if(!this.collapsed){for(;!(0!=this.startOffset||t&&t(this.startContainer)||l(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||t&&t(this.endContainer)||l(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(e){for(;!domUtils.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!e)for(;!domUtils.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(e,t,a){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return 1==e.nodeType&&domUtils.isBlockElm(e)}).adjustmentBoundary();for(var i,l,s=this.createBookmark(),o=s.end,r=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!domUtils.isWhitespace(e)},n=domUtils.getNextDomNode(s.start,!1,r),c=this.cloneRange();n&&domUtils.getPosition(n,o)&domUtils.POSITION_PRECEDING;)if(3==n.nodeType||dtd[e][n.tagName]){for(c.setStartBefore(n),i=n;i&&(3==i.nodeType||dtd[e][i.tagName])&&i!==o;)l=i,i=domUtils.getNextDomNode(i,1==i.nodeType,null,function(t){return dtd[e][t.tagName]});var d,u,p=c.setEndAfter(l).extractContents();if(a&&a.length>0){var m,h;h=m=a[0].cloneNode(!1);for(var f,g=1;f=a[g++];)m.appendChild(f.cloneNode(!1)),m=m.firstChild;d=m}else d=c.document.createElement(e);if(t&&domUtils.setAttributes(d,t),d.appendChild(p),c.insertNode(a?h:d),"span"==e&&t.style&&/text\-decoration/.test(t.style)&&(u=domUtils.findParentByTagName(d,"a",!0))?(domUtils.setAttributes(u,t),domUtils.remove(d,!0),d=u):(domUtils.mergeSibling(d),domUtils.clearEmptySibling(d)),domUtils.mergeChild(d,t),n=domUtils.getNextDomNode(d,!1,r),domUtils.mergeToParent(d),i===o)break}else n=domUtils.getNextDomNode(n,!0,r);return this.moveToBookmark(s)},removeInlineStyle:function(e){if(this.collapsed)return this;e=utils.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();for(var t=this.startContainer,a=this.endContainer;;){if(1==t.nodeType){if(utils.indexOf(e,t.tagName.toLowerCase())>-1)break;if("body"==t.tagName.toLowerCase()){t=null;break}}t=t.parentNode}for(;;){if(1==a.nodeType){if(utils.indexOf(e,a.tagName.toLowerCase())>-1)break;if("body"==a.tagName.toLowerCase()){a=null;break}}a=a.parentNode}var i,l,s=this.createBookmark();t&&(i=(l=this.cloneRange().setEndBefore(s.start).setStartBefore(t)).extractContents(),l.insertNode(i),domUtils.clearEmptySibling(t,!0),t.parentNode.insertBefore(s.start,t)),a&&(i=(l=this.cloneRange().setStartAfter(s.end).setEndAfter(a)).extractContents(),l.insertNode(i),domUtils.clearEmptySibling(a,!1,!0),a.parentNode.insertBefore(s.end,a.nextSibling));for(var o,r=domUtils.getNextDomNode(s.start,!1,function(e){return 1==e.nodeType});r&&r!==s.end;)o=domUtils.getNextDomNode(r,!0,function(e){return 1==e.nodeType}),utils.indexOf(e,r.tagName.toLowerCase())>-1&&domUtils.remove(r,!0),r=o;return this.moveToBookmark(s)},getClosedNode:function(){var t;if(!this.collapsed){var a=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(e(a)){var i=a.startContainer.childNodes[a.startOffset];i&&1==i.nodeType&&(dtd.$empty[i.tagName]||dtd.$nonChild[i.tagName])&&(t=i)}}return t},select:browser.ie?function(e,t){var a;this.collapsed||this.shrinkBoundary();var o=this.getClosedNode();if(o&&!t){try{(a=this.document.body.createControlRange()).addElement(o),a.select()}catch(e){}return this}var n,c=this.createBookmark(),d=c.start;if((a=this.document.body.createTextRange()).moveToElementText(d),a.moveStart("character",1),this.collapsed){if(!e&&3!=this.startContainer.nodeType){var u=this.document.createTextNode(r),p=this.document.createElement("span");p.appendChild(this.document.createTextNode(r)),d.parentNode.insertBefore(p,d),d.parentNode.insertBefore(u,d),i(this.document,u),s=u,l(p,"previousSibling"),l(d,"nextSibling"),a.moveStart("character",-1),a.collapse(!0)}}else{var m=this.document.body.createTextRange();n=c.end,m.moveToElementText(n),a.setEndPoint("EndToEnd",m)}this.moveToBookmark(c),p&&domUtils.remove(p);try{a.select()}catch(e){}return this}:function(e){var t,a=domUtils.getWindow(this.document),o=a.getSelection();if(browser.gecko?this.document.body.focus():a.focus(),o){if(o.removeAllRanges(),this.collapsed&&!e){var n=this.startContainer,c=n;1==n.nodeType&&(c=n.childNodes[this.startOffset]),3==n.nodeType&&this.startOffset||(c?c.previousSibling&&3==c.previousSibling.nodeType:n.lastChild&&3==n.lastChild.nodeType)||(t=this.document.createTextNode(r),this.insertNode(t),i(this.document,t),l(t,"previousSibling"),l(t,"nextSibling"),s=t,this.setStart(t,browser.webkit?1:0).collapse(!0))}var d=this.document.createRange();if(this.collapsed&&browser.opera&&1==this.startContainer.nodeType)if(c=this.startContainer.childNodes[this.startOffset]){for(;c&&domUtils.isBlockElm(c)&&1==c.nodeType&&c.childNodes[0];)c=c.childNodes[0];c&&this.setStartBefore(c).collapse(!0)}else(c=this.startContainer.lastChild)&&domUtils.isBr(c)&&this.setStartBefore(c).collapse(!0);(function(e){function t(t,a,i){3==t.nodeType&&t.nodeValue.length<a&&(e[i+"Offset"]=t.nodeValue.length)}t(e.startContainer,e.startOffset,"start"),t(e.endContainer,e.endOffset,"end")})(this),d.setStart(this.startContainer,this.startOffset),d.setEnd(this.endContainer,this.endOffset),o.addRange(d)}return this},scrollToView:function(e,t){e=e?window:domUtils.getWindow(this.document);var a=this,i=a.document.createElement("span");return i.innerHTML="&nbsp;",a.cloneRange().insertNode(i),domUtils.scrollToView(i,e,t),domUtils.remove(i),a},inFillChar:function(){var e=this.startContainer;return!(!this.collapsed||3!=e.nodeType||e.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1!=e.nodeValue.length)},createAddress:function(e,t){function a(e){for(var a,i=e?l.startContainer:l.endContainer,s=domUtils.findParents(i,!0,function(e){return!domUtils.isBody(e)}),o=[],r=0;a=s[r++];)o.push(domUtils.getNodeIndex(a,t));var n=0;if(t)if(3==i.nodeType){for(var c=i.previousSibling;c&&3==c.nodeType;)n+=c.nodeValue.replace(fillCharReg,"").length,c=c.previousSibling;n+=e?l.startOffset:l.endOffset}else if(i=i.childNodes[e?l.startOffset:l.endOffset])n=domUtils.getNodeIndex(i,t);else for(var d=(i=e?l.startContainer:l.endContainer).firstChild;d;)if(domUtils.isFillChar(d))d=d.nextSibling;else if(n++,3==d.nodeType)for(;d&&3==d.nodeType;)d=d.nextSibling;else d=d.nextSibling;else n=e?domUtils.isFillChar(i)?0:l.startOffset:l.endOffset;return n<0&&(n=0),o.push(n),o}var i={},l=this;return i.startAddress=a(!0),e||(i.endAddress=l.collapsed?[].concat(i.startAddress):a()),i},moveToAddress:function(e,t){function a(e,t){for(var a,l,s,o=i.document.body,r=0,n=e.length;r<n;r++)if(s=e[r],a=o,!(o=o.childNodes[s])){l=s;break}t?o?i.setStartBefore(o):i.setStart(a,l):o?i.setEndBefore(o):i.setEnd(a,l)}var i=this;return a(e.startAddress,!0),!t&&e.endAddress&&a(e.endAddress),i},equals:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]!==e[t])return!1;return!0},traversal:function(e,t){if(this.collapsed)return this;for(var a=this.createBookmark(),i=a.end,l=domUtils.getNextDomNode(a.start,!1,t);l&&l!==i&&domUtils.getPosition(l,i)&domUtils.POSITION_PRECEDING;){var s=domUtils.getNextDomNode(l,!1,t);e(l),l=s}return this.moveToBookmark(a)}}}(),function(){function e(e,t){var a=domUtils.getNodeIndex;(e=e.duplicate()).collapse(t);var i=e.parentElement();if(!i.hasChildNodes())return{container:i,offset:0};for(var l,s,o=i.children,r=e.duplicate(),n=0,c=o.length-1,d=-1;n<=c;){l=o[d=Math.floor((n+c)/2)],r.moveToElementText(l);var u=r.compareEndPoints("StartToStart",e);if(u>0)c=d-1;else{if(!(u<0))return{container:i,offset:a(l)};n=d+1}}if(-1==d){if(r.moveToElementText(i),r.setEndPoint("StartToStart",e),s=r.text.replace(/(\r\n|\r)/g,"\n").length,o=i.childNodes,!s)return{container:l=o[o.length-1],offset:l.nodeValue.length};for(var p=o.length;s>0;)s-=o[--p].nodeValue.length;return{container:o[p],offset:-s}}if(r.collapse(u>0),r.setEndPoint(u>0?"StartToStart":"EndToStart",e),!(s=r.text.replace(/(\r\n|\r)/g,"\n").length))return dtd.$empty[l.tagName]||dtd.$nonChild[l.tagName]?{container:i,offset:a(l)+(u>0?0:1)}:{container:l,offset:u>0?0:l.childNodes.length};for(;s>0;)try{var m=l;s-=(l=l[u>0?"previousSibling":"nextSibling"]).nodeValue.length}catch(e){return{container:i,offset:a(m)}}return{container:l,offset:u>0?-s:l.nodeValue.length+s}}function t(t,a){if(t.item)a.selectNode(t.item(0));else{var i=e(t,!0);a.setStart(i.container,i.offset),0!=t.compareEndPoints("StartToEnd",t)&&(i=e(t,!1),a.setEnd(i.container,i.offset))}return a}function a(e){var t;try{t=e.getNative().createRange()}catch(e){return null}var a=t.item?t.item(0):t.parentElement();return(a.ownerDocument||a)===e.document?t:null}(dom.Selection=function(e){var t,i=this;i.document=e,browser.ie9below&&(t=domUtils.getWindow(e).frameElement,domUtils.on(t,"beforedeactivate",function(){i._bakIERange=i.getIERange()}),domUtils.on(t,"activate",function(){try{!a(i)&&i._bakIERange&&i._bakIERange.select()}catch(e){}i._bakIERange=null})),t=e=null}).prototype={rangeInBody:function(e,t){var a=browser.ie9below||t?e.item?e.item():e.parentElement():e.startContainer;return a===this.document.body||domUtils.inDoc(a,this.document)},getNative:function(){var e=this.document;try{return e?browser.ie9below?e.selection:domUtils.getWindow(e).getSelection():null}catch(e){return null}},getIERange:function(){var e=a(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?domUtils.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var e=a(this);return!(!e||!this.rangeInBody(e))}return!!this.getNative().rangeCount}catch(e){return!1}},getRange:function(){function e(e){for(var t=a.document.body.firstChild,i=e.collapsed;t&&t.firstChild;)e.setStart(t,0),t=t.firstChild;e.startContainer||e.setStart(a.document.body,0),i&&e.collapse(!0)}var a=this;if(null!=a._cachedRange)return this._cachedRange;var i=new baidu.editor.dom.Range(a.document);if(browser.ie9below){var l=a.getIERange();if(l)try{t(l,i)}catch(t){e(i)}else e(i)}else{var s=a.getNative();if(s&&s.rangeCount){var o=s.getRangeAt(0),r=s.getRangeAt(s.rangeCount-1);i.setStart(o.startContainer,o.startOffset).setEnd(r.endContainer,r.endOffset),i.collapsed&&domUtils.isBody(i.startContainer)&&!i.startOffset&&e(i)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;e(i)}}return this._bakRange=i},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e,t,a,i,l=browser.ie9below?this.getIERange():this.getRange();if(browser.ie9below){if(!l)return this.document.body.firstChild;if(l.item)return l.item(0);for((e=l.duplicate()).text.length>0&&e.moveStart("character",1),e.collapse(1),t=e.parentElement(),i=a=l.parentElement();a=a.parentNode;)if(a==t){t=i;break}}else if(l.shrinkBoundary(),1==(t=l.startContainer).nodeType&&t.hasChildNodes()&&(t=t.childNodes[Math.min(t.childNodes.length-1,l.startOffset)]),3==t.nodeType)return t.parentNode;return t},getText:function(){var e,t;return this.isFocus()&&(e=this.getNative())?(t=browser.ie9below?e.createRange():e.getRangeAt(0),browser.ie9below?t.text:t.toString()):""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function e(e,t){var a;if(t.textarea)if(utils.isString(t.textarea)){for(var i,l=0,s=domUtils.getElementsByTagName(e,"textarea");i=s[l++];)if(i.id=="ueditor_textarea_"+t.options.textarea){a=i;break}}else a=t.textarea;a||(e.appendChild(a=domUtils.createElement(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),t.textarea=a),!a.getAttribute("name")&&a.setAttribute("name",t.options.textarea),a.value=t.hasContents()?t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,!0):""}function t(e){e.langIsReady=!0,e.fireEvent("langReady")}var a,i=0,l=UE.Editor=function(e){var a=this;a.uid=i++,EventBase.call(a),a.commands={},a.options=utils.extend(utils.clone(e||{}),UEDITOR_CONFIG,!0),a.shortcutkeys={},a.inputRules=[],a.outputRules=[],a.setOpt(l.defaultOptions(a)),a.loadServerConfig(),utils.isEmptyObject(UE.I18N)?utils.loadFile(document,{src:a.options.langPath+a.options.lang+"/"+a.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(a),t(a)}):(a.options.lang=function(e){for(var t in e)return t}(UE.I18N),UE.plugin.load(a),t(a)),UE.instants["ueditorInstant"+a.uid]=a};l.prototype={registerCommand:function(e,t){this.commands[e]=t},ready:function(e){var t=this;e&&(t.isReady?e.apply(t):t.addListener("ready",e))},setOpt:function(e,t){var a={};utils.isString(e)?a[e]=t:a=e,utils.extend(this.options,a,!0)},getOpt:function(e){return this.options[e]},destroy:function(){var e=this;e.fireEvent("destroy");var t=e.container.parentNode,a=e.textarea;a?a.style.display="":(a=document.createElement("textarea"),t.parentNode.insertBefore(a,t)),a.style.width=e.iframe.offsetWidth+"px",a.style.height=e.iframe.offsetHeight+"px",a.value=e.getContent(),a.id=e.key,t.innerHTML="",domUtils.remove(t);var i=e.key;for(var l in e)e.hasOwnProperty(l)&&delete this[l];UE.delEditor(i)},render:function(e){var t=this,a=t.options,i=function(t){return parseInt(domUtils.getComputedStyle(e,t))};if(utils.isString(e)&&(e=document.getElementById(e)),e){a.initialFrameWidth?a.minFrameWidth=a.initialFrameWidth:a.minFrameWidth=a.initialFrameWidth=e.offsetWidth,a.initialFrameHeight?a.minFrameHeight=a.initialFrameHeight:a.initialFrameHeight=a.minFrameHeight=e.offsetHeight,e.style.width=/%$/.test(a.initialFrameWidth)?"100%":a.initialFrameWidth-i("padding-left")-i("padding-right")+"px",e.style.height=/%$/.test(a.initialFrameHeight)?"100%":a.initialFrameHeight-i("padding-top")-i("padding-bottom")+"px",e.style.zIndex=a.zIndex;var l=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(a.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(a.iframeCssUrl)+"'/>":"")+(a.initialStyle?"<style>"+a.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+t.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script></html>";e.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+t.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(a.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+l+'");document.close();}())'})),e.style.overflow="hidden",setTimeout(function(){/%$/.test(a.initialFrameWidth)&&(a.minFrameWidth=a.initialFrameWidth=e.offsetWidth),/%$/.test(a.initialFrameHeight)&&(a.minFrameHeight=a.initialFrameHeight=e.offsetHeight,e.style.height=a.initialFrameHeight+"px")})}},_setup:function(t){var a,i=this,l=i.options;ie?(t.body.disabled=!0,t.body.contentEditable=!0,t.body.disabled=!1):t.body.contentEditable=!0,t.body.spellcheck=!1,i.document=t,i.window=t.defaultView||t.parentWindow,i.iframe=i.window.frameElement,i.body=t.body,i.selection=new dom.Selection(t),browser.gecko&&(a=this.selection.getNative())&&a.removeAllRanges(),this._initEvents();for(var s=this.iframe.parentNode;!domUtils.isBody(s);s=s.parentNode)if("FORM"==s.tagName){i.form=s,i.options.autoSyncData?domUtils.on(i.window,"blur",function(){e(s,i)}):domUtils.on(s,"submit",function(){e(this,i)});break}if(l.initialContent)if(l.autoClearinitialContent){var o=i.execCommand;i.execCommand=function(){return i.fireEvent("firstBeforeExecCommand"),o.apply(i,arguments)},this._setDefaultContent(l.initialContent)}else this.setContent(l.initialContent,!1,!0);domUtils.isEmptyNode(i.body)&&(i.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),l.focus&&setTimeout(function(){i.focus(i.options.focusInEnd),!i.options.autoClearinitialContent&&i._selectionChange()},0),i.container||(i.container=this.iframe.parentNode),l.fullscreen&&i.ui&&i.ui.setFullScreen(!0);try{i.document.execCommand("2D-position",!1,!1)}catch(e){}try{i.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}try{i.document.execCommand("enableObjectResizing",!1,!1)}catch(e){}i._bindshortcutKeys(),i.isReady=1,i.fireEvent("ready"),l.onready&&l.onready.call(i),browser.ie9below||domUtils.on(i.window,["blur","focus"],function(e){if("blur"==e.type){i._bakRange=i.selection.getRange();try{i._bakNativeRange=i.selection.getNative().getRangeAt(0),i.selection.getNative().removeAllRanges()}catch(e){i._bakNativeRange=null}}else try{i._bakRange&&i._bakRange.select()}catch(e){}}),browser.gecko&&browser.version<=10902&&(i.body.contentEditable=!1,setTimeout(function(){i.body.contentEditable=!0},100),setInterval(function(){i.body.style.height=i.iframe.offsetHeight-20+"px"},100)),!l.isShow&&i.setHide(),l.readonly&&i.setDisabled()},sync:function(t){var a=t?document.getElementById(t):domUtils.findParent(this.iframe.parentNode,function(e){return"FORM"==e.tagName},!0);a&&e(a,this)},setHeight:function(e,t){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),!t&&(this.options.minFrameHeight=this.options.initialFrameHeight=e),this.body.style.height=e+"px",!t&&this.trigger("setHeight")},addshortcutkey:function(e,t){var a={};t?a[e]=t:a=e,utils.extend(this.shortcutkeys,a)},_bindshortcutKeys:function(){var e=this,t=this.shortcutkeys;e.addListener("keydown",function(a,i){var l=i.keyCode||i.which;for(var s in t)for(var o,r=t[s].split(","),n=0;o=r[n++];){var c=(o=o.split(":"))[0],d=o[1];(/^(ctrl)(\+shift)?\+(\d+)$/.test(c.toLowerCase())||/^(\d+)$/.test(c))&&("ctrl"==RegExp.$1&&(i.ctrlKey||i.metaKey)&&(""==RegExp.$2||i[RegExp.$2.slice(1)+"Key"])&&l==RegExp.$3||l==RegExp.$1)&&(-1!=e.queryCommandState(s,d)&&e.execCommand(s,d),domUtils.preventDefault(i))}})},getContent:function(e,t,a,i,l){var s=this;if(e&&utils.isFunction(e)&&(t=e,e=""),t?!t():!this.hasContents())return"";s.fireEvent("beforegetcontent");var o=UE.htmlparser(s.body.innerHTML,i);return s.filterOutputRule(o),s.fireEvent("aftergetcontent",e,o),o.toHtml(l)},getAllHtml:function(){var e=this,t=[];if(e.fireEvent("getAllHtml",t),browser.ie&&browser.version>8){var a="";utils.each(e.document.styleSheets,function(e){a+=e.href?'<link rel="stylesheet" type="text/css" href="'+e.href+'" />':"<style>"+e.cssText+"</style>"}),utils.each(e.document.getElementsByTagName("script"),function(e){a+=e.outerHTML})}return"<html><head>"+(e.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+e.options.charset+'"/>':"")+(a||e.document.getElementsByTagName("head")[0].innerHTML)+t.join("\n")+"</head><body "+(ie&&browser.version<9?'class="view"':"")+">"+e.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(domUtils.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return(t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>\/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,a){return dtd.$block[a]?"\n":t||""})).replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(t,a,i){var l=this;l.fireEvent("beforesetcontent",t);var s,o=UE.htmlparser(t);if(l.filterInputRule(o),t=o.toHtml(),l.body.innerHTML=(a?l.body.innerHTML:"")+t,"p"==l.options.enterTag){var r,n=this.body.firstChild;if(!n||1==n.nodeType&&(dtd.$cdata[n.tagName]||function(e){return"DIV"==e.tagName&&e.getAttribute("cdata_tag")}(n)||domUtils.isCustomeNode(n))&&n===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var c=l.document.createElement("p");n;){for(;n&&(3==n.nodeType||1==n.nodeType&&dtd.p[n.tagName]&&!dtd.$cdata[n.tagName]);)r=n.nextSibling,c.appendChild(n),n=r;if(c.firstChild){if(!n){l.body.appendChild(c);break}n.parentNode.insertBefore(c,n),c=l.document.createElement("p")}n=n.nextSibling}}l.fireEvent("aftersetcontent"),l.fireEvent("contentchange"),!i&&l._selectionChange(),l._bakRange=l._bakIERange=l._bakNativeRange=null,browser.gecko&&(s=this.selection.getNative())&&s.removeAllRanges(),l.options.autoSyncData&&l.form&&e(l.form,l)},focus:function(e){try{var t=this,a=t.selection.getRange();if(e){(i=t.body.lastChild)&&1==i.nodeType&&!dtd.$empty[i.tagName]&&(domUtils.isEmptyBlock(i)?a.setStartAtFirst(i):a.setStartAtLast(i),a.collapse(!0)),a.setCursor(!0)}else{var i;if(!a.collapsed&&domUtils.isBody(a.startContainer)&&0==a.startOffset)(i=t.body.firstChild)&&1==i.nodeType&&!dtd.$empty[i.tagName]&&a.setStartAtFirst(i).collapse(!0);a.select(!0)}this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var e=this.selection.getNative();if(e.empty&&browser.ie){var t=document.body.createTextRange();t.moveToElementText(document.body),t.collapse(!0),t.select(),e.empty()}else e.removeAllRanges()},_initEvents:function(){var e=this,t=e.document,a=e.window;e._proxyDomEvent=utils.bind(e._proxyDomEvent,e),domUtils.on(t,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent),domUtils.on(a,["focus","blur"],e._proxyDomEvent),domUtils.on(e.body,"drop",function(t){browser.gecko&&t.stopPropagation&&t.stopPropagation(),e.fireEvent("contentchange")}),domUtils.on(t,["mouseup","keydown"],function(t){"keydown"==t.type&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)||2!=t.button&&e._selectionChange(250,t)})},_proxyDomEvent:function(e){return!1!==this.fireEvent("before"+e.type.replace(/^on/,"").toLowerCase())&&!1!==this.fireEvent(e.type.replace(/^on/,""),e)&&this.fireEvent("after"+e.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(e,t){var i,l,s=this,o=!1;browser.ie&&browser.version<9&&t&&"mouseup"==t.type&&(this.selection.getRange().collapsed||(o=!0,i=t.clientX,l=t.clientY));clearTimeout(a),a=setTimeout(function(){if(s.selection&&s.selection.getNative()){var e,a;if(o&&"None"==s.selection.getNative().type){e=s.document.body.createTextRange();try{e.moveToPoint(i,l)}catch(t){e=null}}e&&(a=s.selection.getIERange,s.selection.getIERange=function(){return e}),s.selection.cache(),a&&(s.selection.getIERange=a),s.selection._cachedRange&&s.selection._cachedStartElement&&(s.fireEvent("beforeselectionchange"),s.fireEvent("selectionchange",!!t),s.fireEvent("afterselectionchange"),s.selection.clear())}},e||50)},_callCmdFn:function(e,t){var a,i,l=t[0].toLowerCase();return i=(a=this.commands[l]||UE.commands[l])&&a[e],a&&i||"queryCommandState"!=e?i?i.apply(this,t):void 0:0},execCommand:function(e){e=e.toLowerCase();var t,a=this,i=a.commands[e]||UE.commands[e];return i&&i.execCommand?(i.notNeedUndo||a.__hasEnterExecCommand?(t=this._callCmdFn("execCommand",arguments),!a.__hasEnterExecCommand&&!i.ignoreContentChange&&!a._ignoreContentChange&&a.fireEvent("contentchange")):(a.__hasEnterExecCommand=!0,-1!=a.queryCommandState.apply(a,arguments)&&(a.fireEvent("saveScene"),a.fireEvent.apply(a,["beforeexeccommand",e].concat(arguments)),t=this._callCmdFn("execCommand",arguments),a.fireEvent.apply(a,["afterexeccommand",e].concat(arguments)),a.fireEvent("saveScene")),a.__hasEnterExecCommand=!1),!a.__hasEnterExecCommand&&!i.ignoreContentChange&&!a._ignoreContentChange&&a._selectionChange(),t):null},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t,a=0;t=e[a++];)if(this.document.getElementsByTagName(t).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;for(e=["div"],a=0;t=e[a++];)for(var i,l=domUtils.getElementsByTagName(this.document,t),s=0;i=l[s++];)if(domUtils.isCustomeNode(i))return!0;return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e,t=this;if("false"==t.body.contentEditable){t.body.contentEditable=!0,e=t.selection.getRange();try{e.moveToBookmark(t.lastBk),delete t.lastBk}catch(a){e.setStartAtFirst(t.body).collapse(!0)}e.select(!0),t.bkqueryCommandState&&(t.queryCommandState=t.bkqueryCommandState,delete t.bkqueryCommandState),t.bkqueryCommandValue&&(t.queryCommandValue=t.bkqueryCommandValue,delete t.bkqueryCommandValue),t.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(e){var t=this;e=e?utils.isArray(e)?e:[e]:[],"true"==t.body.contentEditable&&(t.lastBk||(t.lastBk=t.selection.getRange().createBookmark(!0)),t.body.contentEditable=!1,t.bkqueryCommandState=t.queryCommandState,t.bkqueryCommandValue=t.queryCommandValue,t.queryCommandState=function(a){return-1!=utils.indexOf(e,a)?t.bkqueryCommandState.apply(t,arguments):-1},t.queryCommandValue=function(a){return-1!=utils.indexOf(e,a)?t.bkqueryCommandValue.apply(t,arguments):null},t.fireEvent("selectionchange"))},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function e(){var t=this;t.document.getElementById("initContent")&&(t.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",t.removeListener("firstBeforeExecCommand focus",e),setTimeout(function(){t.focus(),t._selectionChange()},0))}return function(t){this.body.innerHTML='<p id="initContent">'+t+"</p>",this.addListener("firstBeforeExecCommand focus",e)}}(),setShow:function(){var e=this,t=e.selection.getRange();if("none"==e.container.style.display){try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(a){t.setStartAtFirst(e.body).collapse(!0)}setTimeout(function(){t.select(!0)},100),e.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var e=this;e.lastBk||(e.lastBk=e.selection.getRange().createBookmark(!0)),e.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var t=UE.I18N[this.options.lang];if(!t)throw Error("not import language file");e=(e||"").split(".");for(var a,i=0;(a=e[i++])&&(t=t[a]););return t},getContentLength:function(e,t){var a=this.getContent(!1,!1,!0).length;if(e){t=(t||[]).concat(["hr","img","iframe"]),a=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var i,l=0;i=t[l++];)a+=this.document.getElementsByTagName(i).length}return a},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var t,a=0;t=this.inputRules[a++];)t.call(this,e)},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var t,a=0;t=this.outputRules[a++];)t.call(this,e)},getActionUrl:function(e){var t=this.getOpt(e)||e,a=this.getOpt("imageUrl"),i=this.getOpt("serverUrl");return!i&&a&&(i=a.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),i?(i=i+(-1==i.indexOf("?")?"?":"&")+"action="+(t||""),utils.formatUrl(i)):""}},utils.inherits(l,EventBase)}(),UE.Editor.defaultOptions=function(e){var t=e.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:t+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:t+"lang/",theme:"default",themePath:t+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(e){console&&console.error(e)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config),me.fireEvent("serverConfigLoaded"),me._serverConfigLoaded=!0}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){return this._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(e){if(e&&utils.isFunction(e)){var t=this,a=function(){e.apply(t,arguments),t.removeListener("serverConfigLoaded",a)};t.isServerConfigLoaded()?e.call(t,"serverConfigLoaded"):t.addListener("serverConfigLoaded",a)}}}(),UE.ajax=function(){function e(e){var t=[];for(var a in e)if("method"!=a&&"timeout"!=a&&"async"!=a&&"dataType"!=a&&"callback"!=a&&void 0!=e[a]&&null!=e[a])if("function"!=(typeof e[a]).toLowerCase()&&"object"!=(typeof e[a]).toLowerCase())t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));else if(utils.isArray(e[a]))for(var i=0;i<e[a].length;i++)t.push(encodeURIComponent(a)+"[]="+encodeURIComponent(e[a][i]));return t.join("&")}function t(t,a){var i=l(),s=!1,o={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};if("object"==typeof t&&(t=(a=t).url),i&&t){var r=a?utils.extend(o,a):o,n=e(r);utils.isEmptyObject(r.data)||(n+=(n?"&":"")+e(r.data));var c=setTimeout(function(){4!=i.readyState&&(s=!0,i.abort(),clearTimeout(c))},r.timeout),d=r.method.toUpperCase(),u=t+(-1==t.indexOf("?")?"?":"&")+("POST"==d?"":n+"&noCache="+ +new Date);i.open(d,u,r.async),i.onreadystatechange=function(){4==i.readyState&&(s||200!=i.status?r.onerror(i):r.onsuccess(i))},"POST"==d?(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(n)):i.send(null)}}function a(t,a){function i(e){return function(){try{if(e)c.onerror&&c.onerror();else try{clearTimeout(s),r.apply(window,arguments)}catch(e){}}catch(e){c.onerror&&c.onerror.call(window,e)}finally{c.oncomplete&&c.oncomplete.apply(window,arguments),n.parentNode&&n.parentNode.removeChild(n),window[l]=null;try{delete window[l]}catch(e){}}}}var l,s,o,r=a.onsuccess||function(){},n=document.createElement("SCRIPT"),c=a||{},d=c.charset,u=c.jsonp||"callback",p=c.timeOut||0,m=new RegExp("(\\?|&)"+u+"=([^&]*)");utils.isFunction(r)?(l="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36),window[l]=i(0)):utils.isString(r)?l=r:(o=m.exec(t))&&(l=o[2]),(t=t.replace(m,"$1"+u+"="+l)).search(m)<0&&(t+=(t.indexOf("?")<0?"?":"&")+u+"="+l);var h=e(a);utils.isEmptyObject(a.data)||(h+=(h?"&":"")+e(a.data)),h&&(t=t.replace(/\?/,"?"+h+"&")),n.onerror=i(1),p&&(s=setTimeout(i(1),p)),function(e,t,a){e.setAttribute("type","text/javascript"),e.setAttribute("defer","defer"),a&&e.setAttribute("charset",a),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}(n,t,d)}var i="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),i="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP"),i="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var l=new Function("return new "+i);return{request:function(e,i){i&&"jsonp"==i.dataType?a(e,i):t(e,i)},getJSONP:function(e,t,i){a(e,{data:t,oncomplete:i})}}}();var filterWord=UE.filterWord=function(){function e(e){return e.replace(/[\d.]+\w+/g,function(e){return utils.transUnitToPx(e)})}function t(t){return t.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(t){if(browser.opera)return"";try{if(/Bitmap/i.test(t))return"";var a=t.match(/width:([ \d.]*p[tx])/i)[1],i=t.match(/height:([ \d.]*p[tx])/i)[1],l=t.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+e(a)+'" height="'+e(i)+'" src="'+l+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(e,t,a,i){return"class"==t&&"MsoListParagraph"==i?e:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(e,t,a){return a.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(t,a,i,l){for(var s,o=[],r=l.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(e){return utils.transUnitToPx(e)}).split(/;\s*/g),n=0;s=r[n];n++){var c,d,u=s.split(":");if(2==u.length){if(c=u[0].toLowerCase(),d=u[1].toLowerCase(),/^(background)\w*/.test(c)&&0==d.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(c)&&/^0\w+$/.test(d))continue;switch(c){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(a)||(o[n]=c.replace(/^mso-|-alt$/g,"")+":"+e(d));continue;case"horiz-align":o[n]="text-align:"+d;continue;case"vert-align":o[n]="vertical-align:"+d;continue;case"font-color":case"mso-foreground":o[n]="color:"+d;continue;case"mso-background":case"mso-highlight":o[n]="background:"+d;continue;case"mso-default-height":o[n]="min-height:"+e(d);continue;case"mso-default-width":o[n]="min-width:"+e(d);continue;case"mso-padding-between-alt":o[n]="border-collapse:separate;border-spacing:"+e(d);continue;case"text-line-through":"single"!=d&&"double"!=d||(o[n]="text-decoration:line-through");continue;case"mso-zero-height":"yes"==d&&(o[n]="display:none");continue;case"margin":if(!/[1-9]/.test(d))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(c)||/text\-indent|padding|margin/.test(c)&&/\-[\d.]+/.test(d))continue;o[n]=c+":"+u[1]}}return a+(o.length?' style="'+o.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(e){return function(e){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(e)}(e)?t(e):e}}();!function(){function e(e,t,a){return e.push(u),t+(a?1:-1)}function t(e,t){for(var a=0;a<t;a++)e.push(d)}function a(s,o,r,n){switch(s.type){case"root":for(var c,d=0;c=s.children[d++];)r&&"element"==c.type&&!dtd.$inlineWithA[c.tagName]&&d>1&&(e(o,n,!0),t(o,n)),a(c,o,r,n);break;case"text":i(s,o);break;case"element":l(s,o,r,n);break;case"comment":!function(e,t){t.push("\x3c!--"+e.data+"--\x3e")}(s,o)}return o}function i(e,t){"pre"==e.parentNode.tagName?t.push(e.data):t.push(c[e.parentNode.tagName]?utils.html(e.data):e.data.replace(/[ ]{2}/g," &nbsp;"))}function l(i,l,s,o){var r="";if(i.attrs){r=[];var c=i.attrs;for(var d in c)r.push(d+(void 0!==c[d]?'="'+(n[d]?utils.html(c[d]).replace(/["]/g,function(e){return"&quot;"}):utils.unhtml(c[d]))+'"':""));r=r.join(" ")}if(l.push("<"+i.tagName+(r?" "+r:"")+(dtd.$empty[i.tagName]?"/":"")+">"),s&&!dtd.$inlineWithA[i.tagName]&&"pre"!=i.tagName&&i.children&&i.children.length&&t(l,o=e(l,o,!0)),i.children&&i.children.length)for(var u,p=0;u=i.children[p++];)s&&"element"==u.type&&!dtd.$inlineWithA[u.tagName]&&p>1&&(e(l,o),t(l,o)),a(u,l,s,o);dtd.$empty[i.tagName]||(s&&!dtd.$inlineWithA[i.tagName]&&"pre"!=i.tagName&&i.children&&i.children.length&&t(l,o=e(l,o)),l.push("</"+i.tagName+">"))}function s(e,t){var a;if("element"==e.type&&e.getAttr("id")==t)return e;if(e.children&&e.children.length)for(var i,l=0;i=e.children[l++];)if(a=s(i,t))return a}function o(e,t,a){if("element"==e.type&&e.tagName==t&&a.push(e),e.children&&e.children.length)for(var i,l=0;i=e.children[l++];)o(i,t,a)}var r=UE.uNode=function(e){this.type=e.type,this.data=e.data,this.tagName=e.tagName,this.parentNode=e.parentNode,this.attrs=e.attrs||{},this.children=e.children},n={href:1,src:1,_src:1,_href:1,cdata_data:1},c={style:1,script:1},d="    ",u="\n";r.createElement=function(e){return/[<>]/.test(e)?UE.htmlparser(e).children[0]:new r({type:"element",children:[],tagName:e})},r.createText=function(e,t){return new UE.uNode({type:"text",data:t?e:utils.unhtml(e||"")})},r.prototype={toHtml:function(e){var t=[];return a(this,t,e,0),t.join("")},innerHTML:function(e){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(utils.isString(e)){if(this.children)for(var t=0;a=this.children[t++];)a.parentNode=null;this.children=[];var a,i=UE.htmlparser(e);for(t=0;a=i.children[t++];)this.children.push(a),a.parentNode=this;return this}return(i=new UE.uNode({type:"root",children:this.children})).toHtml()},innerText:function(e,t){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(e){if(this.children)for(var a,i=0;a=this.children[i++];)a.parentNode=null;return this.children=[],this.appendChild(r.createText(e,t)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var e,t=this.parentNode,a=0;e=t.children[a];a++)if(e===this)return 0==a?null:t.children[a-1]},nextSibling:function(){for(var e,t=this.parentNode,a=0;e=t.children[a++];)if(e===this)return t.children[a]},replaceChild:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var a,i=0;a=this.children[i];i++)if(a===t)return this.children.splice(i,1,e),t.parentNode=null,e.parentNode=this,e}},appendChild:function(e){if("root"==this.type||"element"==this.type&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),e.parentNode&&e.parentNode.removeChild(e);for(var t,a=0;t=this.children[a];a++)if(t===e){this.children.splice(a,1);break}return this.children.push(e),e.parentNode=this,e}},insertBefore:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var a,i=0;a=this.children[i];i++)if(a===t)return this.children.splice(i,0,e),e.parentNode=this,e}},insertAfter:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var a,i=0;a=this.children[i];i++)if(a===t)return this.children.splice(i+1,0,e),e.parentNode=this,e}},removeChild:function(e,t){if(this.children)for(var a,i=0;a=this.children[i];i++)if(a===e){if(this.children.splice(i,1),a.parentNode=null,t&&a.children&&a.children.length)for(var l,s=0;l=a.children[s];s++)this.children.splice(i+s,0,l),l.parentNode=this;return a}},getAttr:function(e){return this.attrs&&this.attrs[e.toLowerCase()]},setAttr:function(e,t){if(e)if(this.attrs||(this.attrs={}),utils.isObject(e))for(var a in e)e[a]?this.attrs[a.toLowerCase()]=e[a]:delete this.attrs[a];else t?this.attrs[e.toLowerCase()]=t:delete this.attrs[e];else delete this.attrs},getIndex:function(){for(var e,t=this.parentNode,a=0;e=t.children[a];a++)if(e===this)return a;return-1},getNodeById:function(e){var t;if(this.children&&this.children.length)for(var a,i=0;a=this.children[i++];)if(t=s(a,e))return t},getNodesByTagName:function(e){e=utils.trim(e).replace(/[ ]{2,}/g," ").split(" ");var t=[],a=this;return utils.each(e,function(e){if(a.children&&a.children.length)for(var i,l=0;i=a.children[l++];)o(i,e,t)}),t},getStyle:function(e){var t=this.getAttr("style");if(!t)return"";var a=new RegExp("(^|;)\\s*"+e+":([^;]+)","i"),i=t.match(a);return i&&i[0]?i[2]:""},setStyle:function(e,t){function a(e,t){var a=new RegExp("(^|;)\\s*"+e+":([^;]+;?)","gi");i=i.replace(a,"$1"),t&&(i=e+":"+utils.unhtml(t)+";"+i)}var i=this.getAttr("style");if(i||(i=""),utils.isObject(e))for(var l in e)a(l,e[l]);else a(e,t);this.setAttr("style",utils.trim(i))},traversal:function(e){return this.children&&this.children.length&&function e(t,a){if(t.children&&t.children.length)for(var i,l=0;i=t.children[l];)e(i,a),i.parentNode&&(i.children&&i.children.length&&a(i),i.parentNode&&l++);else a(t)}(this,e),this}}}();var htmlparser=UE.htmlparser=function(e,t){function a(e,t){if(p[e.tagName]){var a=d.createElement(p[e.tagName]);e.appendChild(a),a.appendChild(d.createText(t)),e=a}else e.appendChild(d.createText(t))}function i(e,t,a){var l;if(l=u[t]){for(var s,r=e;"root"!=r.type;){if(utils.isArray(l)?-1!=utils.indexOf(l,r.tagName):l==r.tagName){e=r,s=!0;break}r=r.parentNode}s||(e=i(e,utils.isArray(l)?l[0]:l))}var n=new d({parentNode:e,type:"element",tagName:t.toLowerCase(),children:dtd.$empty[t]?null:[]});if(a){for(var p,m={};p=o.exec(a);)m[p[1].toLowerCase()]=c[p[1].toLowerCase()]?p[2]||p[3]||p[4]:utils.unhtml(p[2]||p[3]||p[4]);n.attrs=m}return e.children.push(n),dtd.$empty[t]?e:n}function l(e,t){e.children.push(new d({type:"comment",data:t,parentNode:e}))}var s=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,o=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,r={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(new RegExp(domUtils.fillChar,"g"),""),t||(e=e.replace(new RegExp("[\\r\\t\\n"+(t?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(t?"":" ")+"]*","g"),function(e,a){return a&&r[a.toLowerCase()]?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(new RegExp("^[\\r\\n"+(t?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(t?"":" ")+"]+$"),"")}));for(var n,c={href:1,src:1},d=UE.uNode,u={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},p={ol:"li",ul:"li"},m=0,h=0,f=new d({type:"root",children:[]}),g=f;n=s.exec(e);){m=n.index;try{if(m>h&&a(g,e.slice(h,m)),n[3])dtd.$cdata[g.tagName]?a(g,n[0]):g=i(g,n[3].toLowerCase(),n[4]);else if(n[1]){if("root"!=g.type)if(dtd.$cdata[g.tagName]&&!dtd.$cdata[n[1]])a(g,n[0]);else{for(var v=g;"element"==g.type&&g.tagName!=n[1].toLowerCase();)if("root"==(g=g.parentNode).type)throw g=v,"break";g=g.parentNode}}else n[2]&&l(g,n[2])}catch(e){}h=s.lastIndex}return h<e.length&&a(g,e.slice(h)),f},filterNode=UE.filterNode=function(){function e(t,a){switch(t.type){case"text":break;case"element":var i;if(i=a[t.tagName])if("-"===i)t.parentNode.removeChild(t);else if(utils.isFunction(i)){var l=t.parentNode,s=t.getIndex();if(i(t),t.parentNode){if(t.children)for(var o=0;p=t.children[o];)e(p,a),p.parentNode&&o++}else for(o=s;p=l.children[o];)e(p,a),p.parentNode&&o++}else{var r=i.$;if(r&&t.attrs){var n,c={};for(var d in r){if(n=t.getAttr(d),"style"==d&&utils.isArray(r[d])){var u=[];utils.each(r[d],function(e){var a;(a=t.getStyle(e))&&u.push(e+":"+a)}),n=u.join(";")}n&&(c[d]=n)}t.attrs=c}if(t.children)for(o=0;p=t.children[o];)e(p,a),p.parentNode&&o++}else if(dtd.$cdata[t.tagName])t.parentNode.removeChild(t);else{l=t.parentNode,s=t.getIndex();t.parentNode.removeChild(t,!0);var p;for(o=s;p=l.children[o];)e(p,a),p.parentNode&&o++}break;case"comment":t.parentNode.removeChild(t)}}return function(t,a){if(utils.isEmptyObject(a))return t;var i;(i=a["-"])&&utils.each(i.split(" "),function(e){a[e]="-"});for(var l,s=0;l=t.children[s];)e(l,a),l.parentNode&&s++;return t}}();UE.plugin=function(){var e={};return{register:function(t,a,i,l){i&&utils.isFunction(i)&&(l=i,i=null),e[t]={optionName:i||t,execFn:a,afterDisabled:l}},load:function(t){utils.each(e,function(e){var a=e.execFn.call(t);!1!==t.options[e.optionName]?a&&utils.each(a,function(e,a){switch(a.toLowerCase()){case"shortcutkey":t.addshortcutkey(e);break;case"bindevents":utils.each(e,function(e,a){t.addListener(a,e)});break;case"bindmultievents":utils.each(utils.isArray(e)?e:[e],function(e){var a=utils.trim(e.type).split(/\s+/);utils.each(a,function(a){t.addListener(a,e.handler)})});break;case"commands":utils.each(e,function(e,a){t.commands[a]=e});break;case"outputrule":t.addOutputRule(e);break;case"inputrule":t.addInputRule(e);break;case"defaultoptions":t.setOpt(e)}}):e.afterDisabled&&e.afterDisabled.call(t)}),utils.each(UE.plugins,function(e){e.call(t)})},run:function(t,a){var i=e[t];i&&i.exeFn.call(a)}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},LocalStorage=UE.LocalStorage=function(){var e=window.localStorage||function(){var e=document.createElement("div");return e.style.display="none",e.addBehavior?(e.addBehavior("#default#userdata"),{getItem:function(a){var i=null;try{document.body.appendChild(e),e.load(t),i=e.getAttribute(a),document.body.removeChild(e)}catch(e){}return i},setItem:function(a,i){document.body.appendChild(e),e.setAttribute(a,i),e.save(t),document.body.removeChild(e)},removeItem:function(a){document.body.appendChild(e),e.removeAttribute(a),e.save(t),document.body.removeChild(e)}}):null}()||null,t="localStorage";return{saveLocalData:function(t,a){return!(!e||!a||(e.setItem(t,a),0))},getLocalData:function(t){return e?e.getItem(t):null},removeItem:function(t){e&&e.removeItem(t)}}}();!function(){var e="ueditor_preference";UE.Editor.prototype.setPreferences=function(t,a){var i={};utils.isString(t)?i[t]=a:i=t;var l=LocalStorage.getLocalData(e);l&&(l=utils.str2json(l))?utils.extend(l,i):l=i,l&&LocalStorage.saveLocalData(e,utils.json2str(l))},UE.Editor.prototype.getPreferences=function(t){var a=LocalStorage.getLocalData(e);return a&&(a=utils.str2json(a))?t?a[t]:a:null},UE.Editor.prototype.removePreferences=function(t){var a=LocalStorage.getLocalData(e);a&&(a=utils.str2json(a))&&(a[t]=void 0,delete a[t]),a&&LocalStorage.saveLocalData(e,utils.json2str(a))}}(),UE.plugins.defaultfilter=function(){var e=this;e.setOpt({allowDivTransToP:!0,disabledTableInTable:!0}),e.addInputRule(function(t){var a,i=this.options.allowDivTransToP;t.traversal(function(t){if("element"==t.type){if(!dtd.$cdata[t.tagName]&&e.options.autoClearEmptyNode&&dtd.$inline[t.tagName]&&!dtd.$empty[t.tagName]&&(!t.attrs||utils.isEmptyObject(t.attrs)))return void(t.firstChild()?"span"!=t.tagName||t.attrs&&!utils.isEmptyObject(t.attrs)||t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t));switch(t.tagName){case"style":case"script":t.setAttr({cdata_tag:t.tagName,cdata_data:t.innerHTML()||"",_ue_custom_node_:"true"}),t.tagName="div",t.innerHTML("");break;case"a":(a=t.getAttr("href"))&&t.setAttr("_href",a);break;case"img":if((a=t.getAttr("src"))&&/^data:/.test(a)){t.parentNode.removeChild(t);break}t.setAttr("_src",t.getAttr("src"));break;case"span":browser.webkit&&(a=t.getStyle("white-space"))&&/nowrap|normal/.test(a)&&(t.setStyle("white-space",""),e.options.autoClearEmptyNode&&utils.isEmptyObject(t.attrs)&&t.parentNode.removeChild(t,!0)),(a=t.getAttr("id"))&&/^_baidu_bookmark_/i.test(a)&&t.parentNode.removeChild(t);break;case"p":(a=t.getAttr("align"))&&(t.setAttr("align"),t.setStyle("text-align",a)),utils.each(t.children,function(e){if("element"==e.type&&"p"==e.tagName){var a=e.nextSibling();t.parentNode.insertAfter(e,t);for(var i=e;a;){var l=a.nextSibling();t.parentNode.insertAfter(a,i),i=a,a=l}return!1}}),t.firstChild()||t.innerHTML(browser.ie?"&nbsp;":"<br/>");break;case"div":if(t.getAttr("cdata_tag"))break;if((a=t.getAttr("class"))&&/^line number\d+/.test(a))break;if(!i)break;for(var l,s=UE.uNode.createElement("p");l=t.firstChild();)"text"!=l.type&&UE.dom.dtd.$block[l.tagName]?s.firstChild()?(t.parentNode.insertBefore(s,t),s=UE.uNode.createElement("p")):t.parentNode.insertBefore(l,t):s.appendChild(l);s.firstChild()&&t.parentNode.insertBefore(s,t),t.parentNode.removeChild(t);break;case"dl":t.tagName="ul";break;case"dt":case"dd":t.tagName="li";break;case"li":var o=t.getAttr("class");o&&/list\-/.test(o)||t.setAttr();var r=t.getNodesByTagName("ol ul");UE.utils.each(r,function(e){t.parentNode.insertAfter(e,t)});break;case"td":case"th":case"caption":t.children&&t.children.length||t.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":e.options.disabledTableInTable&&function(e){for(;e&&"element"==e.type;){if("td"==e.tagName)return!0;e=e.parentNode}return!1}(t)&&(t.parentNode.insertBefore(UE.uNode.createText(t.innerText()),t),t.parentNode.removeChild(t))}}})}),e.addOutputRule(function(t){var a;t.traversal(function(t){if("element"==t.type){if(e.options.autoClearEmptyNode&&dtd.$inline[t.tagName]&&!dtd.$empty[t.tagName]&&(!t.attrs||utils.isEmptyObject(t.attrs)))return void(t.firstChild()?"span"!=t.tagName||t.attrs&&!utils.isEmptyObject(t.attrs)||t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t));switch(t.tagName){case"div":(a=t.getAttr("cdata_tag"))&&(t.tagName=a,t.appendChild(UE.uNode.createText(t.getAttr("cdata_data"))),t.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""}));break;case"a":(a=t.getAttr("_href"))&&t.setAttr({href:utils.html(a),_href:""});break;case"span":(a=t.getAttr("id"))&&/^_baidu_bookmark_/i.test(a)&&t.parentNode.removeChild(t);break;case"img":(a=t.getAttr("_src"))&&t.setAttr({src:t.getAttr("_src"),_src:""})}}})})},UE.commands.inserthtml={execCommand:function(e,t,a){var i,l,s=this;if(t&&!0!==s.fireEvent("beforeinserthtml",t)){if((l=(i=s.selection.getRange()).document.createElement("div")).style.display="inline",!a){var o=UE.htmlparser(t);s.options.filterRules&&UE.filterNode(o,s.options.filterRules),s.filterInputRule(o),t=o.toHtml()}if(l.innerHTML=utils.trim(t),!i.collapsed){var r=i.startContainer;if(domUtils.isFillChar(r)&&i.setStartBefore(r),r=i.endContainer,domUtils.isFillChar(r)&&i.setEndAfter(r),i.txtToElmBoundary(),i.endContainer&&1==i.endContainer.nodeType&&((r=i.endContainer.childNodes[i.endOffset])&&domUtils.isBr(r)&&i.setEndAfter(r)),0==i.startOffset&&(r=i.startContainer,domUtils.isBoundaryNode(r,"firstChild")&&(r=i.endContainer,i.endOffset==(3==r.nodeType?r.nodeValue.length:r.childNodes.length)&&domUtils.isBoundaryNode(r,"lastChild")&&(s.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",i.setStart(s.body.firstChild,0).collapse(!0)))),!i.collapsed&&i.deleteContents(),1==i.startContainer.nodeType)if((n=i.startContainer.childNodes[i.startOffset])&&domUtils.isBlockElm(n)&&(v=n.previousSibling)&&domUtils.isBlockElm(v)){for(i.setEnd(v,v.childNodes.length).collapse();n.firstChild;)v.appendChild(n.firstChild);domUtils.remove(n)}}var n,c,d,u,p=0;i.inFillChar()&&(n=i.startContainer,domUtils.isFillChar(n)?(i.setStartBefore(n).collapse(!0),domUtils.remove(n)):domUtils.isFillChar(n,!0)&&(n.nodeValue=n.nodeValue.replace(fillCharReg,""),i.startOffset--,i.collapsed&&i.collapse(!0)));var m=domUtils.findParentByTagName(i.startContainer,"li",!0);if(m){for(var h;n=l.firstChild;){for(;n&&(3==n.nodeType||!domUtils.isBlockElm(n)||"HR"==n.tagName);)b=n.nextSibling,i.insertNode(n).collapse(),h=n,n=b;if(n)if(/^(ol|ul)$/i.test(n.tagName)){for(;n.firstChild;)h=n.firstChild,domUtils.insertAfter(m,n.firstChild),m=m.nextSibling;domUtils.remove(n)}else{var f;b=n.nextSibling,f=s.document.createElement("li"),domUtils.insertAfter(m,f),f.appendChild(n),h=n,n=b,m=f}}m=domUtils.findParentByTagName(i.startContainer,"li",!0),domUtils.isEmptyBlock(m)&&domUtils.remove(m),h&&i.setStartAfter(h).collapse(!0).select(!0)}else{for(;n=l.firstChild;){if(p){for(var g=s.document.createElement("p");n&&(3==n.nodeType||!dtd.$block[n.tagName]);)u=n.nextSibling,g.appendChild(n),n=u;g.firstChild&&(n=g)}if(i.insertNode(n),u=n.nextSibling,!p&&n.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(n)&&((c=domUtils.findParent(n,function(e){return domUtils.isBlockElm(e)}))&&"body"!=c.tagName.toLowerCase()&&(!dtd[c.tagName][n.nodeName]||n.parentNode!==c))){if(dtd[c.tagName][n.nodeName])for(d=n.parentNode;d!==c;)v=d,d=d.parentNode;else v=c;domUtils.breakParent(n,v||d);var v=n.previousSibling;domUtils.trimWhiteTextNode(v),v.childNodes.length||domUtils.remove(v),!browser.ie&&(b=n.nextSibling)&&domUtils.isBlockElm(b)&&b.lastChild&&!domUtils.isBr(b.lastChild)&&b.appendChild(s.document.createElement("br")),p=1}var b=n.nextSibling;if(!l.firstChild&&b&&domUtils.isBlockElm(b)){i.setStart(b,0).collapse(!0);break}i.setEndAfter(n).collapse()}if(n=i.startContainer,u&&domUtils.isBr(u)&&domUtils.remove(u),domUtils.isBlockElm(n)&&domUtils.isEmptyNode(n))if(u=n.nextSibling)domUtils.remove(n),1==u.nodeType&&dtd.$block[u.tagName]&&i.setStart(u,0).collapse(!0).shrinkBoundary();else try{n.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(e){i.setStartBefore(n),domUtils.remove(n)}try{i.select(!0)}catch(e){}}setTimeout(function(){(i=s.selection.getRange()).scrollToView(s.autoHeightEnabled,s.autoHeightEnabled?domUtils.getXY(s.iframe).y:0),s.fireEvent("afterinserthtml",t)},200)}}},UE.plugins.autotypeset=function(){function e(e,t){return e&&3!=e.nodeType?domUtils.isBr(e)?1:e&&e.parentNode&&n[e.tagName.toLowerCase()]?i&&i.contains(e)||e.getAttribute("pagebreak")?0:t?!domUtils.isEmptyBlock(e):domUtils.isEmptyBlock(e,new RegExp("[\\s"+domUtils.fillChar+"]","g")):void 0:0}function t(e){e.style.cssText||(domUtils.removeAttributes(e,["style"]),"span"==e.tagName.toLowerCase()&&domUtils.hasNoAttributes(e)&&domUtils.remove(e,!0))}function a(a,l){var n,c,d=this;if(l){if(!s.pasteFilter)return;(n=d.document.createElement("div")).innerHTML=l.html}else n=d.document.body;for(var u,p=domUtils.getElementsByTagName(n,"*"),m=0;u=p[m++];)if(!0!==d.fireEvent("excludeNodeinautotype",u)){if(s.clearFontSize&&u.style.fontSize&&(domUtils.removeStyle(u,"font-size"),t(u)),s.clearFontFamily&&u.style.fontFamily&&(domUtils.removeStyle(u,"font-family"),t(u)),e(u)){if(s.mergeEmptyline)for(var h=u.nextSibling,f=domUtils.isBr(u);e(h)&&(h=(v=h).nextSibling,!f||h&&(!h||domUtils.isBr(h)));)domUtils.remove(v);if(s.removeEmptyline&&domUtils.inDoc(u,n)&&!r[u.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(u)&&((h=u.nextSibling)&&!domUtils.isBr(h)))continue;domUtils.remove(u);continue}}if(e(u,!0)&&"SPAN"!=u.tagName&&(s.indent&&(u.style.textIndent=s.indentValue),s.textAlign&&(u.style.textAlign=s.textAlign)),s.removeClass&&u.className&&!o[u.className.toLowerCase()]){if(i&&i.contains(u))continue;domUtils.removeAttributes(u,["class"])}if(s.imageBlockLine&&"img"==u.tagName.toLowerCase()&&!u.getAttribute("emotion"))if(l){var g=u;switch(s.imageBlockLine){case"left":case"right":case"none":for(var v,b,y=g.parentNode;dtd.$inline[y.tagName]||"A"==y.tagName;)y=y.parentNode;if("P"==(v=y).tagName&&"center"==domUtils.getStyle(v,"text-align")&&!domUtils.isBody(v)&&1==domUtils.getChildCount(v,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)}))if(b=v.previousSibling,h=v.nextSibling,b&&h&&1==b.nodeType&&1==h.nodeType&&b.tagName==h.tagName&&domUtils.isBlockElm(b)){for(b.appendChild(v.firstChild);h.firstChild;)b.appendChild(h.firstChild);domUtils.remove(v),domUtils.remove(h)}else domUtils.setStyle(v,"text-align","");domUtils.setStyle(g,"float",s.imageBlockLine);break;case"center":if("center"!=d.queryCommandValue("imagefloat")){for(y=g.parentNode,domUtils.setStyle(g,"float","none"),v=g;y&&1==domUtils.getChildCount(y,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})&&(dtd.$inline[y.tagName]||"A"==y.tagName);)v=y,y=y.parentNode;var _=d.document.createElement("p");domUtils.setAttributes(_,{style:"text-align:center"}),v.parentNode.insertBefore(_,v),_.appendChild(v),domUtils.setStyle(v,"float","")}}}else{d.selection.getRange().selectNode(u).select(),d.execCommand("imagefloat",s.imageBlockLine)}s.removeEmptyNode&&s.removeTagNames[u.tagName.toLowerCase()]&&domUtils.hasNoAttributes(u)&&domUtils.isEmptyBlock(u)&&domUtils.remove(u)}s.tobdc&&((c=UE.htmlparser(n.innerHTML)).traversal(function(e){"text"==e.type&&(e.data=function(e){e=utils.html(e);for(var t="",a=0;a<e.length;a++)t+=32==e.charCodeAt(a)?String.fromCharCode(12288):e.charCodeAt(a)<127?String.fromCharCode(e.charCodeAt(a)+65248):e.charAt(a);return t}(e.data))}),n.innerHTML=c.toHtml());s.bdc2sb&&((c=UE.htmlparser(n.innerHTML)).traversal(function(e){"text"==e.type&&(e.data=function(e){for(var t="",a=0;a<e.length;a++){var i=e.charCodeAt(a);t+=i>=65281&&i<=65373?String.fromCharCode(e.charCodeAt(a)-65248):12288==i?String.fromCharCode(e.charCodeAt(a)-12288+32):e.charAt(a)}return t}(e.data))}),n.innerHTML=c.toHtml());l&&(l.html=n.innerHTML)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var i,l=this,s=l.options.autotypeset,o={selectTdClass:1,pagebreak:1,anchorclass:1},r={li:1},n={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1};s&&(function(){var e=l.getPreferences("autotypeset");utils.extend(l.options.autotypeset,e)}(),s.pasteFilter&&l.addListener("beforepaste",a),l.commands.autotypeset={execCommand:function(){l.removeListener("beforepaste",a),s.pasteFilter&&l.addListener("beforepaste",a),a.call(l)}})},UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var e=this,t=domUtils.findParentByTagName(e.iframe,"form",!1);if(t){if(!1===e.fireEvent("beforesubmit"))return;e.sync(),t.submit()}}}}}}),UE.plugin.register("background",function(){function e(e){var t={},a=e.split(";");return utils.each(a,function(e){var a=e.indexOf(":"),i=utils.trim(e.substr(0,a)).toLowerCase();i&&(t[i]=utils.trim(e.substr(a+1)||""))}),t}function t(e){if(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a+":"+e[a]+"; ");utils.cssRule(l,t.length?"body{"+t.join("")+"}":"",i.document)}else utils.cssRule(l,"",i.document)}var a,i=this,l="editor_background",s=new RegExp("body[\\s]*\\{(.+)\\}","i"),o=i.hasContents;return i.hasContents=function(){return!!i.queryCommandValue("background")||o.apply(i,arguments)},{bindEvents:{getAllHtml:function(e,t){var a,l=this.body,s=domUtils.getComputedStyle(l,"background-image");a=s.indexOf(i.options.imagePath)>0?s.substring(s.indexOf(i.options.imagePath),s.length-1).replace(/"|\(|\)/gi,""):"none"!=s?s.replace(/url\("?|"?\)/gi,""):"";var o='<style type="text/css">body{',r={"background-color":domUtils.getComputedStyle(l,"background-color")||"#ffffff","background-image":a?"url("+a+")":"","background-repeat":domUtils.getComputedStyle(l,"background-repeat")||"","background-position":browser.ie?domUtils.getComputedStyle(l,"background-position-x")+" "+domUtils.getComputedStyle(l,"background-position-y"):domUtils.getComputedStyle(l,"background-position"),height:domUtils.getComputedStyle(l,"height")};for(var n in r)r.hasOwnProperty(n)&&(o+=n+":"+r[n]+"; ");o+="}</style> ",t.push(o)},aftersetcontent:function(){0==a&&t()}},inputRule:function(i){a=!1,utils.each(i.getNodesByTagName("p"),function(i){var l=i.getAttr("data-background");l&&(a=!0,t(e(l)),i.parentNode.removeChild(i))})},outputRule:function(e){var t=(utils.cssRule(l,this.document)||"").replace(/[\n\r]+/g,"").match(s);t&&e.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(t[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(e,a){t(a)},queryCommandValue:function(){var t=(utils.cssRule(l,this.document)||"").replace(/[\n\r]+/g,"").match(s);return t?e(t[1]):null},notNeedUndo:!0}}}}),UE.commands.imagefloat={execCommand:function(e,t){var a=this,i=a.selection.getRange();if(!i.collapsed){var l=i.getClosedNode();if(l&&"IMG"==l.tagName)switch(t){case"left":case"right":case"none":for(var s,o,r,n=l.parentNode;dtd.$inline[n.tagName]||"A"==n.tagName;)n=n.parentNode;if("P"==(s=n).tagName&&"center"==domUtils.getStyle(s,"text-align")){if(!domUtils.isBody(s)&&1==domUtils.getChildCount(s,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)}))if(o=s.previousSibling,r=s.nextSibling,o&&r&&1==o.nodeType&&1==r.nodeType&&o.tagName==r.tagName&&domUtils.isBlockElm(o)){for(o.appendChild(s.firstChild);r.firstChild;)o.appendChild(r.firstChild);domUtils.remove(s),domUtils.remove(r)}else domUtils.setStyle(s,"text-align","");i.selectNode(l).select()}domUtils.setStyle(l,"float","none"==t?"":t),"none"==t&&domUtils.removeAttributes(l,"align");break;case"center":if("center"!=a.queryCommandValue("imagefloat")){for(n=l.parentNode,domUtils.setStyle(l,"float",""),domUtils.removeAttributes(l,"align"),s=l;n&&1==domUtils.getChildCount(n,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})&&(dtd.$inline[n.tagName]||"A"==n.tagName);)s=n,n=n.parentNode;i.setStartBefore(s).setCursor(!1),(n=a.document.createElement("div")).appendChild(s),domUtils.setStyle(s,"float",""),a.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+n.innerHTML+"</p>"),(s=a.document.getElementById("_img_parent_tmp")).removeAttribute("id"),s=s.firstChild,i.selectNode(s).select(),(r=s.parentNode.nextSibling)&&domUtils.isEmptyNode(r)&&domUtils.remove(r)}}}},queryCommandValue:function(){var e,t,a=this.selection.getRange();return a.collapsed?"none":(e=a.getClosedNode())&&1==e.nodeType&&"IMG"==e.tagName?("none"==(t=domUtils.getComputedStyle(e,"float")||e.getAttribute("align"))&&(t="center"==domUtils.getComputedStyle(e.parentNode,"text-align")?"center":t),{left:1,right:1,center:1}[t]?t:"none"):"none"},queryCommandState:function(){var e,t=this.selection.getRange();return t.collapsed?-1:(e=t.getClosedNode())&&1==e.nodeType&&"IMG"==e.tagName?0:-1}},UE.commands.insertimage={execCommand:function(e,t){function a(e){utils.each("width,height,border,hspace,vspace".split(","),function(t){e[t]&&(e[t]=parseInt(e[t],10)||0)}),utils.each("src,_src".split(","),function(t){e[t]&&(e[t]=utils.unhtmlForUrl(e[t]))}),utils.each("title,alt".split(","),function(t){e[t]&&(e[t]=utils.unhtml(e[t]))})}if((t=utils.isArray(t)?t:[t]).length){var i=this,l=i.selection.getRange(),s=l.getClosedNode();if(!0!==i.fireEvent("beforeinsertimage",t)){if(!s||!/img/i.test(s.tagName)||"edui-faked-video"==s.className&&-1==s.className.indexOf("edui-upload-video")||s.getAttribute("word_img")){var o,r=[],n="";if(o=t[0],1==t.length)a(o),n='<img src="'+o.src+'" '+(o._src?' _src="'+o._src+'" ':"")+(o.width?'width="'+o.width+'" ':"")+(o.height?' height="'+o.height+'" ':"")+("left"==o.floatStyle||"right"==o.floatStyle?' style="float:'+o.floatStyle+';"':"")+(o.title&&""!=o.title?' title="'+o.title+'"':"")+(o.border&&"0"!=o.border?' border="'+o.border+'"':"")+(o.alt&&""!=o.alt?' alt="'+o.alt+'"':"")+(o.hspace&&"0"!=o.hspace?' hspace = "'+o.hspace+'"':"")+(o.vspace&&"0"!=o.vspace?' vspace = "'+o.vspace+'"':"")+"/>","center"==o.floatStyle&&(n='<p style="text-align: center">'+n+"</p>"),r.push(n);else for(var c=0;o=t[c++];)a(o),n="<p "+("center"==o.floatStyle?'style="text-align: center" ':"")+'><img src="'+o.src+'" '+(o.width?'width="'+o.width+'" ':"")+(o._src?' _src="'+o._src+'" ':"")+(o.height?' height="'+o.height+'" ':"")+' style="'+(o.floatStyle&&"center"!=o.floatStyle?"float:"+o.floatStyle+";":"")+(o.border||"")+'" '+(o.title?' title="'+o.title+'"':"")+" /></p>",r.push(n);i.execCommand("insertHtml",r.join(""))}else{var d=t.shift(),u=d.floatStyle;delete d.floatStyle,domUtils.setAttributes(s,d),i.execCommand("imagefloat",u),t.length>0&&(l.setStartAfter(s).setCursor(!1,!0),i.execCommand("insertimage",t))}i.fireEvent("afterinsertimage",t)}}}},UE.plugins.justify=function(){var e=domUtils.isBlockElm,t={left:1,right:1,center:1,justify:1},a=function(t,a){var i=t.createBookmark(),l=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)};t.enlarge(!0);for(var s,o=t.createBookmark(),r=domUtils.getNextDomNode(o.start,!1,l),n=t.cloneRange();r&&!(domUtils.getPosition(r,o.end)&domUtils.POSITION_FOLLOWING);)if(3!=r.nodeType&&e(r))r=domUtils.getNextDomNode(r,!0,l);else{for(n.setStartBefore(r);r&&r!==o.end&&!e(r);)s=r,r=domUtils.getNextDomNode(r,!1,null,function(t){return!e(t)});n.setEndAfter(s);var c=n.getCommonAncestor();if(!domUtils.isBody(c)&&e(c))domUtils.setStyles(c,utils.isString(a)?{"text-align":a}:a),r=c;else{var d=t.document.createElement("p");domUtils.setStyles(d,utils.isString(a)?{"text-align":a}:a);var u=n.extractContents();d.appendChild(u),n.insertNode(d),r=d}r=domUtils.getNextDomNode(r,!1,l)}return t.moveToBookmark(o).moveToBookmark(i)};UE.commands.justify={execCommand:function(e,t){var i,l=this.selection.getRange();return l.collapsed&&(i=this.document.createTextNode("p"),l.insertNode(i)),a(l,t),i&&(l.setStartBefore(i).collapse(!0),domUtils.remove(i)),l.select(),!0},queryCommandValue:function(){var e=this.selection.getStart(),a=domUtils.getComputedStyle(e,"text-align");return t[a]?a:"left"},queryCommandState:function(){var e=this.selection.getStart();return e&&domUtils.findParentByTagName(e,["td","th","caption"],!0)?-1:0}}},UE.plugins.font=function(){function e(e,t,a){if(l[t]&&(e.adjustmentBoundary(),!e.collapsed&&1==e.startContainer.nodeType)){var i=e.startContainer.childNodes[e.startOffset];if(i&&domUtils.isTagNode(i,"span")){var s=e.createBookmark();utils.each(domUtils.getElementsByTagName(i,"span"),function(e){e.parentNode&&!domUtils.isBookmarkNode(e)&&("backcolor"==t&&domUtils.getComputedStyle(e,"background-color").toLowerCase()===a||(domUtils.removeStyle(e,l[t]),0==e.style.cssText.replace(/^\s+$/,"").length&&domUtils.remove(e,!0)))}),e.moveToBookmark(s)}}}function t(t,a,i){var l,s=t.collapsed,o=t.createBookmark();if(s)for(l=o.start.parentNode;dtd.$inline[l.tagName];)l=l.parentNode;else l=domUtils.getCommonAncestor(o.start,o.end);utils.each(domUtils.getElementsByTagName(l,"span"),function(e){if(e.parentNode&&!domUtils.isBookmarkNode(e)){if(/\s*border\s*:\s*none;?\s*/i.test(e.style.cssText))return void(/^\s*border\s*:\s*none;?\s*$/.test(e.style.cssText)?domUtils.remove(e,!0):domUtils.removeStyle(e,"border"));if(/border/i.test(e.style.cssText)&&"SPAN"==e.parentNode.tagName&&/border/i.test(e.parentNode.style.cssText)&&(e.style.cssText=e.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),"fontborder"!=a||"none"!=i)for(var t=e.nextSibling;t&&1==t.nodeType&&"SPAN"==t.tagName;)if(domUtils.isBookmarkNode(t)&&"fontborder"==a)e.appendChild(t),t=e.nextSibling;else{if(t.style.cssText==e.style.cssText&&(domUtils.moveChild(t,e),domUtils.remove(t)),e.nextSibling===t)break;t=e.nextSibling}if(function(e){for(var t;(t=e.parentNode)&&"SPAN"==t.tagName&&1==domUtils.getChildCount(t,function(e){return!domUtils.isBookmarkNode(e)&&!domUtils.isBr(e)});)t.style.cssText+=e.style.cssText,domUtils.remove(e,!0),e=t}(e),browser.ie&&browser.version>8){var l=domUtils.findParent(e,function(e){return"SPAN"==e.tagName&&/background-color/.test(e.style.cssText)});l&&!/background-color/.test(e.style.cssText)&&(e.style.backgroundColor=l.style.backgroundColor)}}}),t.moveToBookmark(o),e(t,a,i)}var a={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},i={underline:1,strikethrough:1,fontborder:1},l={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};for(var s in this.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),this.addInputRule(function(e){utils.each(e.getNodesByTagName("u s del font strike"),function(e){if("font"==e.tagName){var t=[];for(var a in e.attrs)switch(a){case"size":t.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[e.attrs[a]]||e.attrs[a])+"px");break;case"color":t.push("color:"+e.attrs[a]);break;case"face":t.push("font-family:"+e.attrs[a]);break;case"style":t.push(e.attrs[a])}e.attrs={style:t.join(";")}}else{var i="u"==e.tagName?"underline":"line-through";e.attrs={style:(e.getAttr("style")||"")+"text-decoration:"+i+";"}}e.tagName="span"})}),a)!function(e,a){UE.commands[e]={execCommand:function(l,s){s=s||(this.queryCommandState(l)?"none":"underline"==l?"underline":"fontborder"==l?"1px solid #000":"line-through");var o,r=this,n=this.selection.getRange();if("default"==s)n.collapsed&&(o=r.document.createTextNode("font"),n.insertNode(o).select()),r.execCommand("removeFormat","span,a",a),o&&(n.setStartBefore(o).collapse(!0),domUtils.remove(o)),t(n,l,s),n.select();else if(n.collapsed){var c=domUtils.findParentByTagName(n.startContainer,"span",!0);if(o=r.document.createTextNode("font"),!c||c.children.length||c[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){if(n.insertNode(o),n.selectNode(o).select(),c=n.document.createElement("span"),i[e]){if(domUtils.findParentByTagName(o,"a",!0))return n.setStartBefore(o).setCursor(),void domUtils.remove(o);r.execCommand("removeFormat","span,a",a)}if(c.style.cssText=a+":"+s,o.parentNode.insertBefore(c,o),!browser.ie||browser.ie&&9==browser.version)for(var d=c.parentNode;!domUtils.isBlockElm(d);)"SPAN"==d.tagName&&(c.style.cssText=d.style.cssText+";"+c.style.cssText),d=d.parentNode;opera?setTimeout(function(){n.setStart(c,0).collapse(!0),t(n,l,s),n.select()}):(n.setStart(c,0).collapse(!0),t(n,l,s),n.select())}else n.insertNode(o),i[e]&&(n.selectNode(o).select(),r.execCommand("removeFormat","span,a",a,null),c=domUtils.findParentByTagName(o,"span",!0),n.setStartBefore(o)),c&&(c.style.cssText+=";"+a+":"+s),n.collapse(!0).select();domUtils.remove(o)}else i[e]&&r.queryCommandValue(e)&&r.execCommand("removeFormat","span,a",a),(n=r.selection.getRange()).applyInlineStyle("span",{style:a+":"+s}),t(n,l,s),n.select();return!0},queryCommandValue:function(e){var t=this.selection.getStart();if("underline"==e||"strikethrough"==e){for(var i,l=t;l&&!domUtils.isBlockElm(l)&&!domUtils.isBody(l);){if(1==l.nodeType&&"none"!=(i=domUtils.getComputedStyle(l,a)))return i;l=l.parentNode}return"none"}if("fontborder"==e){for(var s,o=t;o&&dtd.$inline[o.tagName];){if((s=domUtils.getComputedStyle(o,"border"))&&/1px/.test(s)&&/solid/.test(s))return s;o=o.parentNode}return""}if("FontSize"==e){var r=domUtils.getComputedStyle(t,a);return(o=/^([\d\.]+)(\w+)$/.exec(r))?Math.floor(o[1])+o[2]:r}return domUtils.getComputedStyle(t,a)},queryCommandState:function(e){if(!i[e])return 0;var t=this.queryCommandValue(e);return"fontborder"==e?/1px/.test(t)&&/solid/.test(t):"underline"==e?/underline/.test(t):/line\-through/.test(t)}}}(s,a[s])},UE.plugins.link=function(){function e(e){var t=e.startContainer,a=e.endContainer;(t=domUtils.findParentByTagName(t,"a",!0))&&e.setStartBefore(t),(a=domUtils.findParentByTagName(a,"a",!0))&&e.setEndAfter(a)}function t(t,a,i){var l=t.cloneRange(),s=i.queryCommandValue("link");e(t=t.adjustmentBoundary());var o=t.startContainer;if(1==o.nodeType&&s&&((o=o.childNodes[t.startOffset])&&1==o.nodeType&&"A"==o.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(o[browser.ie?"innerText":"textContent"])&&(o[browser.ie?"innerText":"textContent"]=utils.html(a.textValue||a.href))),l.collapsed&&!s||(t.removeInlineStyle("a"),l=t.cloneRange()),l.collapsed){var r=t.document.createElement("a"),n="";a.textValue?(n=utils.html(a.textValue),delete a.textValue):n=utils.html(a.href),domUtils.setAttributes(r,a),(o=domUtils.findParentByTagName(l.startContainer,"a",!0))&&domUtils.isInNodeEndBoundary(l,o)&&t.setStartAfter(o).collapse(!0),r[browser.ie?"innerText":"textContent"]=n,t.insertNode(r).selectNode(r)}else t.applyInlineStyle("a",a)}UE.commands.unlink={execCommand:function(){var t,a=this.selection.getRange();a.collapsed&&!domUtils.findParentByTagName(a.startContainer,"a",!0)||(t=a.createBookmark(),e(a),a.removeInlineStyle("a").moveToBookmark(t).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands.link={execCommand:function(e,a){var i;a._href&&(a._href=utils.unhtml(a._href,/[<">]/g)),a.href&&(a.href=utils.unhtml(a.href,/[<">]/g)),a.textValue&&(a.textValue=utils.unhtml(a.textValue,/[<">]/g)),t(i=this.selection.getRange(),a,this),i.collapse().select(!0)},queryCommandValue:function(){var e,t=this.selection.getRange();if(!t.collapsed){t.shrinkBoundary();var a=3!=t.startContainer.nodeType&&t.startContainer.childNodes[t.startOffset]?t.startContainer.childNodes[t.startOffset]:t.startContainer,i=3==t.endContainer.nodeType||0==t.endOffset?t.endContainer:t.endContainer.childNodes[t.endOffset-1],l=t.getCommonAncestor();if(!(e=domUtils.findParentByTagName(l,"a",!0))&&1==l.nodeType)for(var s,o,r,n=l.getElementsByTagName("a"),c=0;r=n[c++];)if(s=domUtils.getPosition(r,a),o=domUtils.getPosition(r,i),(s&domUtils.POSITION_FOLLOWING||s&domUtils.POSITION_CONTAINS)&&(o&domUtils.POSITION_PRECEDING||o&domUtils.POSITION_CONTAINS)){e=r;break}return e}if((e=1==(e=t.startContainer).nodeType?e:e.parentNode)&&(e=domUtils.findParentByTagName(e,"a",!0))&&!domUtils.isInNodeEndBoundary(t,e))return e},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&("edui-faked-video"==e.className||-1!=e.className.indexOf("edui-upload-video"))?-1:0}}},UE.plugins.insertframe=function(){var e=this;e.addListener("selectionchange",function(){e._iframe&&delete e._iframe})},UE.commands.scrawl={queryCommandState:function(){return browser.ie&&browser.version<=8?-1:0}},UE.plugins.removeformat=function(){this.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),this.commands.removeformat={execCommand:function(e,t,a,i,l){function s(e){if(3==e.nodeType||"span"!=e.tagName.toLowerCase())return 0;if(browser.ie){var t=e.attributes;if(t.length){for(var a=0,i=t.length;a<i;a++)if(t[a].specified)return 0;return 1}}return!e.attributes.length}var o,r,n=new RegExp("^(?:"+(t||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),c=a?[]:(i||this.options.removeFormatAttributes).split(","),d=new dom.Range(this.document),u=function(e){return 1==e.nodeType};(function(e){var t=e.createBookmark();if(e.collapsed&&e.enlarge(!0),!l){var i=domUtils.findParentByTagName(e.startContainer,"a",!0);i&&e.setStartBefore(i),(i=domUtils.findParentByTagName(e.endContainer,"a",!0))&&e.setEndAfter(i)}for(f=(o=e.createBookmark()).start;(r=f.parentNode)&&!domUtils.isBlockElm(r);)domUtils.breakParent(f,r),domUtils.clearEmptySibling(f);if(o.end){for(f=o.end;(r=f.parentNode)&&!domUtils.isBlockElm(r);)domUtils.breakParent(f,r),domUtils.clearEmptySibling(f);for(var d,p=domUtils.getNextDomNode(o.start,!1,u);p&&p!=o.end;)d=domUtils.getNextDomNode(p,!0,u),dtd.$empty[p.tagName.toLowerCase()]||domUtils.isBookmarkNode(p)||(n.test(p.tagName)?a?(domUtils.removeStyle(p,a),s(p)&&"text-decoration"!=a&&domUtils.remove(p,!0)):domUtils.remove(p,!0):dtd.$tableContent[p.tagName]||dtd.$list[p.tagName]||(domUtils.removeAttributes(p,c),s(p)&&domUtils.remove(p,!0))),p=d}var m=o.start.parentNode;!domUtils.isBlockElm(m)||dtd.$tableContent[m.tagName]||dtd.$list[m.tagName]||domUtils.removeAttributes(m,c),m=o.end.parentNode,o.end&&domUtils.isBlockElm(m)&&!dtd.$tableContent[m.tagName]&&!dtd.$list[m.tagName]&&domUtils.removeAttributes(m,c),e.moveToBookmark(o).moveToBookmark(t);for(var h,f=e.startContainer,g=e.collapsed;1==f.nodeType&&domUtils.isEmptyNode(f)&&dtd.$removeEmpty[f.tagName];)h=f.parentNode,e.setStartBefore(f),e.startContainer===e.endContainer&&e.endOffset--,domUtils.remove(f),f=h;if(!g)for(f=e.endContainer;1==f.nodeType&&domUtils.isEmptyNode(f)&&dtd.$removeEmpty[f.tagName];)h=f.parentNode,e.setEndBefore(f),domUtils.remove(f),f=h})(d=this.selection.getRange()),d.select()}}},UE.plugins.blockquote=function(){function e(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),"blockquote")}this.commands.blockquote={execCommand:function(t,a){var i=this.selection.getRange(),l=e(this),s=dtd.blockquote,o=i.createBookmark();if(l){var r=i.startContainer,n=domUtils.isBlockElm(r)?r:domUtils.findParent(r,function(e){return domUtils.isBlockElm(e)}),c=i.endContainer,d=domUtils.isBlockElm(c)?c:domUtils.findParent(c,function(e){return domUtils.isBlockElm(e)});n=domUtils.findParentByTagName(n,"li",!0)||n,d=domUtils.findParentByTagName(d,"li",!0)||d,"LI"==n.tagName||"TD"==n.tagName||n===l||domUtils.isBody(n)?domUtils.remove(l,!0):domUtils.breakParent(n,l),n!==d&&((l=domUtils.findParentByTagName(d,"blockquote"))&&("LI"==d.tagName||"TD"==d.tagName||domUtils.isBody(d)?l.parentNode&&domUtils.remove(l,!0):domUtils.breakParent(d,l)));for(var u,p=domUtils.getElementsByTagName(this.document,"blockquote"),m=0;u=p[m++];)u.childNodes.length?domUtils.getPosition(u,n)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(u,d)&domUtils.POSITION_PRECEDING&&domUtils.remove(u,!0):domUtils.remove(u)}else{for(var h=i.cloneRange(),f=1==h.startContainer.nodeType?h.startContainer:h.startContainer.parentNode,g=f,v=1;;){if(domUtils.isBody(f)){g!==f?i.collapsed?(h.selectNode(g),v=0):h.setStartBefore(g):h.setStart(f,0);break}if(!s[f.tagName]){i.collapsed?h.selectNode(g):h.setStartBefore(g);break}g=f,f=f.parentNode}if(v)for(g=f=f=1==h.endContainer.nodeType?h.endContainer:h.endContainer.parentNode;;){if(domUtils.isBody(f)){g!==f?h.setEndAfter(g):h.setEnd(f,f.childNodes.length);break}if(!s[f.tagName]){h.setEndAfter(g);break}g=f,f=f.parentNode}f=i.document.createElement("blockquote"),domUtils.setAttributes(f,a),f.appendChild(h.extractContents()),h.insertNode(f);var b,y=domUtils.getElementsByTagName(f,"blockquote");for(m=0;b=y[m++];)b.parentNode&&domUtils.remove(b,!0)}i.moveToBookmark(o).select()},queryCommandState:function(){return e(this)?1:0}}},UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(e){var t=this.selection.getRange();if(t.collapsed)return t;for(var a=t.createBookmark(),i=a.end,l=function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)},s=domUtils.getNextDomNode(a.start,!1,l);s&&domUtils.getPosition(s,i)&domUtils.POSITION_PRECEDING&&(3==s.nodeType&&(s.nodeValue=s.nodeValue["touppercase"==e?"toUpperCase":"toLowerCase"]()),(s=domUtils.getNextDomNode(s,!0,l))!==i););t.moveToBookmark(a).select()}},UE.commands.indent={execCommand:function(){var e=this,t=e.queryCommandState("indent")?"0em":e.options.indentValue||"2em";e.execCommand("Paragraph","p",{style:"text-indent:"+t})},queryCommandState:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e&&e.style.textIndent&&parseInt(e.style.textIndent)?1:0}},UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},UE.commands.preview={execCommand:function(){var e=window.open("","_blank","").document;e.open(),e.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"><\/script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)<\/script></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>"),e.close()},notNeedUndo:1},UE.plugins.selectall=function(){this.commands.selectall={execCommand:function(){var e=this.body,t=this.selection.getRange();t.selectNodeContents(e),domUtils.isEmptyBlock(e)&&(browser.opera&&e.firstChild&&1==e.firstChild.nodeType&&t.setStartAtFirst(e.firstChild),t.collapse(!0)),t.select(!0)},notNeedUndo:1},this.addshortcutkey({selectAll:"ctrl+65"})},UE.plugins.paragraph=function(){var e=domUtils.isBlockElm,t=["TD","LI","PRE"],a=function(a,i,l,s){var o,r=a.createBookmark(),n=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)};a.enlarge(!0);for(var c,d=a.createBookmark(),u=domUtils.getNextDomNode(d.start,!1,n),p=a.cloneRange();u&&!(domUtils.getPosition(u,d.end)&domUtils.POSITION_FOLLOWING);)if(3!=u.nodeType&&e(u))u=domUtils.getNextDomNode(u,!0,n);else{for(p.setStartBefore(u);u&&u!==d.end&&!e(u);)c=u,u=domUtils.getNextDomNode(u,!1,null,function(t){return!e(t)});p.setEndAfter(c),o=a.document.createElement(i),l&&(domUtils.setAttributes(o,l),s&&"customstyle"==s&&l.style&&(o.style.cssText=l.style)),o.appendChild(p.extractContents()),domUtils.isEmptyNode(o)&&domUtils.fillChar(a.document,o),p.insertNode(o);var m=o.parentNode;e(m)&&!domUtils.isBody(o.parentNode)&&-1==utils.indexOf(t,m.tagName)&&(s&&"customstyle"==s||(m.getAttribute("dir")&&o.setAttribute("dir",m.getAttribute("dir")),m.style.cssText&&(o.style.cssText=m.style.cssText+";"+o.style.cssText),m.style.textAlign&&!o.style.textAlign&&(o.style.textAlign=m.style.textAlign),m.style.textIndent&&!o.style.textIndent&&(o.style.textIndent=m.style.textIndent),m.style.padding&&!o.style.padding&&(o.style.padding=m.style.padding)),l&&/h\d/i.test(m.tagName)&&!/h\d/i.test(o.tagName)?(domUtils.setAttributes(m,l),s&&"customstyle"==s&&l.style&&(m.style.cssText=l.style),domUtils.remove(o,!0),o=m):domUtils.remove(o.parentNode,!0)),u=-1!=utils.indexOf(t,m.tagName)?m:o,u=domUtils.getNextDomNode(u,!1,n)}return a.moveToBookmark(d).moveToBookmark(r)};this.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),this.commands.paragraph={execCommand:function(e,t,i,l){var s=this.selection.getRange();if(s.collapsed){var o=this.document.createTextNode("p");if(s.insertNode(o),browser.ie){var r=o.previousSibling;r&&domUtils.isWhitespace(r)&&domUtils.remove(r),(r=o.nextSibling)&&domUtils.isWhitespace(r)&&domUtils.remove(r)}}if(s=a(s,t,i,l),o&&(s.setStartBefore(o).collapse(!0),pN=o.parentNode,domUtils.remove(o),domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)&&domUtils.fillNode(this.document,pN)),browser.gecko&&s.collapsed&&1==s.startContainer.nodeType){var n=s.startContainer.childNodes[s.startOffset];n&&1==n.nodeType&&n.tagName.toLowerCase()==t&&s.setStart(n,0).collapse(!0)}return s.select(),!0},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e?e.tagName.toLowerCase():""}}},function(){var e=domUtils.isBlockElm,t=function(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),function(e){return e&&1==e.nodeType&&e.getAttribute("dir")})},a=function(a,i,l){var s,o=function(e){return 1==e.nodeType?!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)},r=t(i);if(r&&a.collapsed)return r.setAttribute("dir",l),a;s=a.createBookmark(),a.enlarge(!0);for(var n,c=a.createBookmark(),d=domUtils.getNextDomNode(c.start,!1,o),u=a.cloneRange();d&&!(domUtils.getPosition(d,c.end)&domUtils.POSITION_FOLLOWING);)if(3!=d.nodeType&&e(d))d=domUtils.getNextDomNode(d,!0,o);else{for(u.setStartBefore(d);d&&d!==c.end&&!e(d);)n=d,d=domUtils.getNextDomNode(d,!1,null,function(t){return!e(t)});u.setEndAfter(n);var p=u.getCommonAncestor();if(!domUtils.isBody(p)&&e(p))p.setAttribute("dir",l),d=p;else{var m=a.document.createElement("p");m.setAttribute("dir",l);var h=u.extractContents();m.appendChild(h),u.insertNode(m),d=m}d=domUtils.getNextDomNode(d,!1,o)}return a.moveToBookmark(c).moveToBookmark(s)};UE.commands.directionality={execCommand:function(e,t){var i=this.selection.getRange();if(i.collapsed){var l=this.document.createTextNode("d");i.insertNode(l)}return a(i,this,t),l&&(i.setStartBefore(l).collapse(!0),domUtils.remove(l)),i.select(),!0},queryCommandValue:function(){var e=t(this);return e?e.getAttribute("dir"):"ltr"}}}(),UE.plugins.horizontal=function(){this.commands.horizontal={execCommand:function(e){var t=this;if(-1!==t.queryCommandState(e)){t.execCommand("insertHtml","<hr>");var a,i=t.selection.getRange(),l=i.startContainer;if(1==l.nodeType&&!l.childNodes[i.startOffset])(a=l.childNodes[i.startOffset-1])&&1==a.nodeType&&"HR"==a.tagName&&("p"==t.options.enterTag?(a=t.document.createElement("p"),i.insertNode(a),i.setStart(a,0).setCursor()):(a=t.document.createElement("br"),i.insertNode(a),i.setStartBefore(a).setCursor()));return!0}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}},this.addListener("delkeydown",function(e,t){var a=this.selection.getRange();if(a.txtToElmBoundary(!0),domUtils.isStartInblock(a)){var i=a.startContainer.previousSibling;if(i&&domUtils.isTagNode(i,"hr"))return domUtils.remove(i),a.select(),domUtils.preventDefault(t),!0}})},UE.commands.time=UE.commands.date={execCommand:function(e,t){var a=new Date;this.execCommand("insertHtml","time"==e?function(e,t){var a=("0"+e.getHours()).slice(-2),i=("0"+e.getMinutes()).slice(-2),l=("0"+e.getSeconds()).slice(-2);return(t=t||"hh:ii:ss").replace(/hh/gi,a).replace(/ii/gi,i).replace(/ss/gi,l)}(a,t):function(e,t){var a=("000"+e.getFullYear()).slice(-4),i=a.slice(-2),l=("0"+(e.getMonth()+1)).slice(-2),s=("0"+e.getDate()).slice(-2);return(t=t||"yyyy-mm-dd").replace(/yyyy/gi,a).replace(/yy/gi,i).replace(/mm/gi,l).replace(/dd/gi,s)}(a,t))}},UE.plugins.rowspacing=function(){this.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]}),this.commands.rowspacing={execCommand:function(e,t,a){return this.execCommand("paragraph","p",{style:"margin-"+a+":"+t+"px"}),!0},queryCommandValue:function(e,t){var a=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)});return a?domUtils.getComputedStyle(a,"margin-"+t).replace(/[^\d]/g,"")||0:0}}},UE.plugins.lineheight=function(){this.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]}),this.commands.lineheight={execCommand:function(e,t){return this.execCommand("paragraph","p",{style:"line-height:"+("1"==t?"normal":t+"em")}),!0},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)});if(e){var t=domUtils.getComputedStyle(e,"line-height");return"normal"==t?1:t.replace(/[^\d.]*/gi,"")}}}},UE.plugins.insertcode=function(){var e=this;e.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",e.document)}),e.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"}),e.commands.insertcode={execCommand:function(e,t){var a=this,i=a.selection.getRange(),l=domUtils.findParentByTagName(i.startContainer,"pre",!0);if(l)l.className="brush:"+t+";toolbar:false;";else{var s="";if(i.collapsed)s=browser.ie&&browser.ie11below?browser.version<=8?"&nbsp;":"":"<br/>";else{var o=i.extractContents(),r=a.document.createElement("div");r.appendChild(o),utils.each(UE.filterNode(UE.htmlparser(r.innerHTML.replace(/[\r\t]/g,"")),a.options.filterTxtRules).children,function(e){if(browser.ie&&browser.ie11below&&browser.version>8)"element"==e.type?"br"==e.tagName?s+="\n":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){"element"==t.type?"br"==t.tagName?s+="\n":dtd.$empty[e.tagName]||(s+=t.innerText()):s+=t.data}),/\n$/.test(s)||(s+="\n")):s+=e.data+"\n",!e.nextSibling()&&/\n$/.test(s)&&(s=s.replace(/\n$/,""));else if(browser.ie&&browser.ie11below)"element"==e.type?"br"==e.tagName?s+="<br>":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){"element"==t.type?"br"==t.tagName?s+="<br>":dtd.$empty[e.tagName]||(s+=t.innerText()):s+=t.data}),/br>$/.test(s)||(s+="<br>")):s+=e.data+"<br>",!e.nextSibling()&&/<br>$/.test(s)&&(s=s.replace(/<br>$/,""));else if(s+="element"==e.type?dtd.$empty[e.tagName]?"":e.innerText():e.data,!/br\/?\s*>$/.test(s)){if(!e.nextSibling())return;s+="<br>"}})}a.execCommand("inserthtml",'<pre id="coder"class="brush:'+t+';toolbar:false">'+s+"</pre>",!0),l=a.document.getElementById("coder"),domUtils.removeAttributes(l,"id");var n=l.previousSibling;n&&(3==n.nodeType&&1==n.nodeValue.length&&browser.ie&&6==browser.version||domUtils.isEmptyBlock(n))&&domUtils.remove(n);i=a.selection.getRange();domUtils.isEmptyBlock(l)?i.setStart(l,0).setCursor(!1,!0):i.selectNodeContents(l).select()}},queryCommandValue:function(){var e=this.selection.getStartElementPath(),t="";return utils.each(e,function(e){if("PRE"==e.nodeName){var a=e.className.match(/brush:([^;]+)/);return t=a&&a[1]?a[1]:"",!1}}),t}},e.addInputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t=e.getNodesByTagName("br");if(t.length)browser.ie&&browser.ie11below&&browser.version>8&&utils.each(t,function(e){var t=UE.uNode.createText("\n");e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)});else if(!(browser.ie&&browser.ie11below&&browser.version>8)){var a=e.innerText().split(/\n/);e.innerHTML(""),utils.each(a,function(t){t.length&&e.appendChild(UE.uNode.createText(t)),e.appendChild(UE.uNode.createElement("br"))})}})}),e.addOutputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t="";utils.each(e.children,function(e){t+="text"==e.type?e.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):"br"==e.tagName?"\n":dtd.$empty[e.tagName]?e.innerText():""}),e.innerText(t.replace(/(&nbsp;|\n)+$/,""))})}),e.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1},e.queryCommandState,e.queryCommandState=function(e){var t=this;return!t.notNeedCodeQuery[e.toLowerCase()]&&t.selection&&t.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)},e.addListener("beforeenterkeydown",function(){var t=e.selection.getRange();if(a=domUtils.findParentByTagName(t.startContainer,"pre",!0)){if(e.fireEvent("saveScene"),t.collapsed||t.deleteContents(),!browser.ie||browser.ie9above){var a,i=e.document.createElement("br");for(t.insertNode(i).setStartAfter(i).collapse(!0),i.nextSibling||browser.ie&&!(browser.version>10)?t.setStartAfter(i):t.insertNode(i.cloneNode(!1)),a=i.previousSibling;a;)if(n=a,!(a=a.previousSibling)||"BR"==a.nodeName){a=n;break}if(a){for(var l="";a&&"BR"!=a.nodeName&&new RegExp("^[\\s"+domUtils.fillChar+"]*$").test(a.nodeValue);)l+=a.nodeValue,a=a.nextSibling;if("BR"!=a.nodeName)(c=a.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)")))&&c[1]&&(l+=c[1]);l&&(l=e.document.createTextNode(l),t.insertNode(l).setStartAfter(l))}t.collapse(!0).select(!0)}else if(browser.version>8){var s=e.document.createTextNode("\n"),o=t.startContainer;if(0==t.startOffset){if(o.previousSibling){t.insertNode(s);var r=e.document.createTextNode(" ");t.setStartAfter(s).insertNode(r).setStart(r,0).collapse(!0).select(!0)}}else{t.insertNode(s).setStartAfter(s);r=e.document.createTextNode(" ");(o=t.startContainer.childNodes[t.startOffset])&&!/^\n/.test(o.nodeValue)&&t.setStartBefore(s),t.insertNode(r).setStart(r,0).collapse(!0).select(!0)}}else{var n;i=e.document.createElement("br");for(t.insertNode(i),t.insertNode(e.document.createTextNode(domUtils.fillChar)),t.setStartAfter(i),a=i.previousSibling;a;)if(n=a,!(a=a.previousSibling)||"BR"==a.nodeName){a=n;break}if(a){for(l="";a&&"BR"!=a.nodeName&&new RegExp("^[ "+domUtils.fillChar+"]*$").test(a.nodeValue);)l+=a.nodeValue,a=a.nextSibling;var c;if("BR"!=a.nodeName)(c=a.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)")))&&c[1]&&(l+=c[1]);l=e.document.createTextNode(l),t.insertNode(l).setStartAfter(l)}t.collapse(!0).select()}return e.fireEvent("saveScene"),!0}}),e.addListener("tabkeydown",function(t,a){var i=e.selection.getRange(),l=domUtils.findParentByTagName(i.startContainer,"pre",!0);if(l){if(e.fireEvent("saveScene"),a.shiftKey);else if(i.collapsed){var s=e.document.createTextNode("    ");i.insertNode(s).setStartAfter(s).collapse(!0).select(!0)}else{for(var o=i.createBookmark(),r=o.start.previousSibling;r;){if(l.firstChild===r&&!domUtils.isBr(r)){l.insertBefore(e.document.createTextNode("    "),r);break}if(domUtils.isBr(r)){l.insertBefore(e.document.createTextNode("    "),r.nextSibling);break}r=r.previousSibling}var n=o.end;for(r=o.start.nextSibling,l.firstChild===o.start&&l.insertBefore(e.document.createTextNode("    "),r.nextSibling);r&&r!==n;){if(domUtils.isBr(r)&&r.nextSibling){if(r.nextSibling===n)break;l.insertBefore(e.document.createTextNode("    "),r.nextSibling)}r=r.nextSibling}i.moveToBookmark(o).select()}return e.fireEvent("saveScene"),!0}}),e.addListener("beforeinserthtml",function(e,t){var a=this,i=a.selection.getRange();if(domUtils.findParentByTagName(i.startContainer,"pre",!0)){i.collapsed||i.deleteContents();var l="";if(browser.ie&&browser.version>8){utils.each(UE.filterNode(UE.htmlparser(t),a.options.filterTxtRules).children,function(e){"element"==e.type?"br"==e.tagName?l+="\n":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){"element"==t.type?"br"==t.tagName?l+="\n":dtd.$empty[e.tagName]||(l+=t.innerText()):l+=t.data}),/\n$/.test(l)||(l+="\n")):l+=e.data+"\n",!e.nextSibling()&&/\n$/.test(l)&&(l=l.replace(/\n$/,""))});var s=a.document.createTextNode(utils.html(l.replace(/&nbsp;/g," ")));i.insertNode(s).selectNode(s).select()}else{var o=a.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(t),a.options.filterTxtRules).children,function(e){"element"==e.type?"br"==e.tagName?o.appendChild(a.document.createElement("br")):dtd.$empty[e.tagName]||(utils.each(e.children,function(t){"element"==t.type?"br"==t.tagName?o.appendChild(a.document.createElement("br")):dtd.$empty[e.tagName]||o.appendChild(a.document.createTextNode(utils.html(t.innerText().replace(/&nbsp;/g," ")))):o.appendChild(a.document.createTextNode(utils.html(t.data.replace(/&nbsp;/g," "))))}),"BR"!=o.lastChild.nodeName&&o.appendChild(a.document.createElement("br"))):o.appendChild(a.document.createTextNode(utils.html(e.data.replace(/&nbsp;/g," ")))),e.nextSibling()||"BR"!=o.lastChild.nodeName||o.removeChild(o.lastChild)}),i.insertNode(o).select()}return!0}}),e.addListener("keydown",function(e,t){if(40==(t.keyCode||t.which)){var a,i=this.selection.getRange(),l=i.startContainer;if(i.collapsed&&(a=domUtils.findParentByTagName(i.startContainer,"pre",!0))&&!a.nextSibling){for(var s=a.lastChild;s&&"BR"==s.nodeName;)s=s.previousSibling;(s===l||i.startContainer===a&&i.startOffset==a.childNodes.length)&&(this.execCommand("insertparagraph"),domUtils.preventDefault(t))}}}),e.addListener("delkeydown",function(t,a){var i=this.selection.getRange();i.txtToElmBoundary(!0);var l=i.startContainer;if(domUtils.isTagNode(l,"pre")&&i.collapsed&&domUtils.isStartInblock(i)){var s=e.document.createElement("p");return domUtils.fillNode(e.document,s),l.parentNode.insertBefore(s,l),domUtils.remove(l),i.setStart(s,0).setCursor(!1,!0),domUtils.preventDefault(a),!0}})},UE.commands.cleardoc={execCommand:function(e){var t=this,a=t.options.enterTag,i=t.selection.getRange();"br"==a?(t.body.innerHTML="<br/>",i.setStart(t.body,0).setCursor()):(t.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",i.setStart(t.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){t.fireEvent("clearDoc")},0)}},UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var t;(t=e.getAttr("anchorname"))&&(e.tagName="a",e.setAttr({anchorname:"",name:t,class:""}))})},inputRule:function(e){utils.each(e.getNodesByTagName("a"),function(e){e.getAttr("name")&&!e.getAttr("href")&&(e.tagName="img",e.setAttr({anchorname:e.getAttr("name"),class:"anchorclass"}),e.setAttr("name"))})},commands:{anchor:{execCommand:function(e,t){var a=this.selection.getRange(),i=a.getClosedNode();if(i&&i.getAttribute("anchorname"))t?i.setAttribute("anchorname",t):(a.setStartBefore(i).setCursor(),domUtils.remove(i));else if(t){var l=this.document.createElement("img");a.collapse(!0),domUtils.setAttributes(l,{anchorname:t,class:"anchorclass"}),a.insertNode(l).setStartAfter(l).setCursor(!1,!0)}}}}}}),UE.plugins.wordcount=function(){var e,t=this;t.setOpt("wordCount",!0),t.addListener("contentchange",function(){t.fireEvent("wordcount")}),t.addListener("ready",function(){var t=this;domUtils.on(t.body,"keyup",function(a){(a.keyCode||a.which)in{16:1,18:1,20:1,37:1,38:1,39:1,40:1}||(clearTimeout(e),e=setTimeout(function(){t.fireEvent("wordcount")},200))})})},UE.plugins.pagebreak=function(){function e(e){if(domUtils.isEmptyBlock(e)){for(var t,i=e.firstChild;i&&1==i.nodeType&&domUtils.isEmptyBlock(i);)t=i,i=i.firstChild;!t&&(t=e),domUtils.fillNode(a.document,t)}}function t(e){return e&&1==e.nodeType&&"HR"==e.tagName&&"pagebreak"==e.className}var a=this,i=["td"];a.setOpt("pageBreakTag","_ueditor_page_break_tag_"),a.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",a.document)}),a.addInputRule(function(e){e.traversal(function(e){if("text"==e.type&&e.data==a.options.pageBreakTag){var t=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),a.addOutputRule(function(e){utils.each(e.getNodesByTagName("hr"),function(e){if("pagebreak"==e.getAttr("class")){var t=UE.uNode.createText(a.options.pageBreakTag);e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),a.commands.pagebreak={execCommand:function(){var l=a.selection.getRange(),s=a.document.createElement("hr");domUtils.setAttributes(s,{class:"pagebreak",noshade:"noshade",size:"5"}),domUtils.unSelectable(s);var o=domUtils.findParentByTagName(l.startContainer,i,!0),r=[];if(o)switch(o.tagName){case"TD":if((u=o.parentNode).previousSibling)u.parentNode.insertBefore(s,u),r=domUtils.findParents(s);else{var n=domUtils.findParentByTagName(u,"table");n.parentNode.insertBefore(s,n),r=domUtils.findParents(s,!0)}s!==(u=r[1])&&domUtils.breakParent(s,u),a.fireEvent("afteradjusttable",a.document)}else{if(!l.collapsed){l.deleteContents();for(var c=l.startContainer;!domUtils.isBody(c)&&domUtils.isBlockElm(c)&&domUtils.isEmptyNode(c);)l.setStartBefore(c).collapse(!0),domUtils.remove(c),c=l.startContainer}l.insertNode(s);for(var d,u=s.parentNode;!domUtils.isBody(u);)domUtils.breakParent(s,u),(d=s.nextSibling)&&domUtils.isEmptyBlock(d)&&domUtils.remove(d),u=s.parentNode;d=s.nextSibling;var p=s.previousSibling;if(t(p)?domUtils.remove(p):p&&e(p),d)t(d)?domUtils.remove(d):e(d),l.setEndAfter(s).collapse(!1);else{var m=a.document.createElement("p");s.parentNode.appendChild(m),domUtils.fillNode(a.document,m),l.setStart(m,0).collapse(!0)}l.select(!0)}}}},UE.plugin.register("wordimage",function(){var e=this,t=[];return{commands:{wordimage:{execCommand:function(){for(var t,a=domUtils.getElementsByTagName(e.body,"img"),i=[],l=0;t=a[l++];){var s=t.getAttribute("word_img");s&&i.push(s)}return i},queryCommandState:function(){t=domUtils.getElementsByTagName(e.body,"img");for(var a,i=0;a=t[i++];)if(a.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var a=t.attrs,i=parseInt(a.width)<128||parseInt(a.height)<43,l=e.options,s=l.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";a.src&&/^(?:(file:\/+))/.test(a.src)&&t.setAttr({width:a.width,height:a.height,alt:a.alt,word_img:a.src,src:s,style:"background:url("+(i?l.themePath+l.theme+"/images/word.gif":l.langPath+l.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}}),UE.plugins.dragdrop=function(){var e=this;e.ready(function(){domUtils.on(this.body,"dragend",function(){var t=e.selection.getRange(),a=t.getClosedNode()||e.selection.getStart();if(a&&"IMG"==a.tagName){for(var i,l=a.previousSibling;(i=a.nextSibling)&&1==i.nodeType&&"SPAN"==i.tagName&&!i.firstChild;)domUtils.remove(i);(!l||1!=l.nodeType||domUtils.isEmptyBlock(l))&&l||i&&(!i||domUtils.isEmptyBlock(i))||(l&&"P"==l.tagName&&!domUtils.isEmptyBlock(l)?(l.appendChild(a),domUtils.moveChild(i,l),domUtils.remove(i)):i&&"P"==i.tagName&&!domUtils.isEmptyBlock(i)&&i.insertBefore(a,i.firstChild),l&&"P"==l.tagName&&domUtils.isEmptyBlock(l)&&domUtils.remove(l),i&&"P"==i.tagName&&domUtils.isEmptyBlock(i)&&domUtils.remove(i),t.selectNode(a).select(),e.fireEvent("saveScene"))}})}),e.addListener("keyup",function(t,a){if(13==(a.keyCode||a.which)){var i,l=e.selection.getRange();(i=domUtils.findParentByTagName(l.startContainer,"p",!0))&&"center"==domUtils.getComputedStyle(i,"text-align")&&domUtils.removeStyle(i,"text-align")}})},UE.plugins.undo=function(){function e(e,t){if(e.length!=t.length)return 0;for(var a=0,i=e.length;a<i;a++)if(e[a]!=t[a])return 0;return 1}function t(t,a){return t.collapsed!=a.collapsed?0:e(t.startAddress,a.startAddress)&&e(t.endAddress,a.endAddress)?1:0}var a,i=this,l=i.options.maxUndoCount||20,s=i.options.maxInputCount||20,o=new RegExp(domUtils.fillChar+"|</hr>","gi"),r={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},n=i.options.autoClearEmptyNode;i.undoManger=new function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&1==this.list.length)return void this.reset();for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}},this.restore=function(){var e=this.editor,t=this.list[this.index],a=UE.htmlparser(t.content.replace(o,""));e.options.autoClearEmptyNode=!1,e.filterInputRule(a),e.options.autoClearEmptyNode=n,e.document.body.innerHTML=a.toHtml(),e.fireEvent("afterscencerestore"),browser.ie&&utils.each(domUtils.getElementsByTagName(e.document,"td th caption p"),function(t){domUtils.isEmptyNode(t)&&domUtils.fillNode(e.document,t)});try{var i=new dom.Range(e.document).moveToAddress(t.address);i.select(r[i.startContainer.nodeName.toLowerCase()])}catch(e){}this.update(),this.clearKey(),e.fireEvent("reset",!0)},this.getScene=function(){var e=this.editor,t=e.selection.getRange().createAddress(!1,!0);e.fireEvent("beforegetscene");var a=UE.htmlparser(e.body.innerHTML);e.options.autoClearEmptyNode=!1,e.filterOutputRule(a),e.options.autoClearEmptyNode=n;var i=a.toHtml();return e.fireEvent("aftergetscene"),{address:t,content:i}},this.save=function(e,s){clearTimeout(a);var o=this.getScene(s),r=this.list[this.index];r&&r.content!=o.content&&i.trigger("contentchange"),r&&r.content==o.content&&(e||t(r.address,o.address))||(this.list=this.list.slice(0,this.index+1),this.list.push(o),this.list.length>l&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){d=0,null}},i.undoManger.editor=i,i.addListener("saveScene",function(){var e=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,e)}),i.addListener("reset",function(e,t){t||this.undoManger.reset()}),i.commands.redo=i.commands.undo={execCommand:function(e){this.undoManger[e]()},queryCommandState:function(e){return this.undoManger["has"+("undo"==e.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var c={16:1,17:1,18:1,37:1,38:1,39:1,40:1},d=0,u=!1;i.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){u=!0}),domUtils.on(this.body,"compositionend",function(){u=!1})}),i.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var p=!0;i.addListener("keydown",function(e,t){function i(e){e.undoManger.save(!1,!0),e.fireEvent("selectionchange")}var l=this,o=t.keyCode||t.which;if(!(c[o]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){if(u)return;if(!l.selection.getRange().collapsed)return l.undoManger.save(!1,!0),void(p=!1);0==l.undoManger.list.length&&l.undoManger.save(!0),clearTimeout(a),a=setTimeout(function(){if(u)var e=setInterval(function(){u||(i(l),clearInterval(e))},300);else i(l)},200),o,++d>=s&&i(l)}}),i.addListener("keyup",function(e,t){var a=t.keyCode||t.which;if(!(c[a]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){if(u)return;p||(this.undoManger.save(!1,!0),p=!0)}}),i.stopCmdUndo=function(){i.__hasEnterExecCommand=!0},i.startCmdUndo=function(){i.__hasEnterExecCommand=!1}},UE.plugin.register("copy",function(){function e(){ZeroClipboard.config({debug:!1,swfPath:t.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var e=t.zeroclipboard=new ZeroClipboard;e.on("copy",function(e){var a=e.client,i=t.selection.getRange(),l=document.createElement("div");l.appendChild(i.cloneContents()),a.setText(l.innerText||l.textContent),a.setHtml(l.innerHTML),i.select()}),e.on("mouseover mouseout",function(e){var t=e.target;"mouseover"==e.type?domUtils.addClass(t,"edui-state-hover"):"mouseout"==e.type&&domUtils.removeClasses(t,"edui-state-hover")}),e.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}var t=this;return{bindEvents:{ready:function(){browser.ie||(window.ZeroClipboard?e():utils.loadFile(document,{src:t.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){e()}))}},commands:{copy:{execCommand:function(e){t.document.execCommand("copy")||alert(t.getLang("copymsg"))}}}}}),UE.plugins.paste=function(){function e(e){var t=this.document;if(!t.getElementById("baidu_pastebin")){var a=this.selection.getRange(),i=a.createBookmark(),l=t.createElement("div");l.id="baidu_pastebin",browser.webkit&&l.appendChild(t.createTextNode(domUtils.fillChar+domUtils.fillChar)),t.body.appendChild(l),i.start.style.display="",l.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(i.start).y+"px",a.selectNodeContents(l).select(!0),setTimeout(function(){if(browser.webkit)for(var s,o=0,r=t.querySelectorAll("#baidu_pastebin");s=r[o++];){if(!domUtils.isEmptyNode(s)){l=s;break}domUtils.remove(s)}try{l.parentNode.removeChild(l)}catch(e){}a.moveToBookmark(i).select(!0),e(l)},0)}}function t(e){return e.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(e,t,a,i){return{img:1}[a=a.toLowerCase()]?e:(i=i.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(e,t,a){return{src:1,href:1,name:1}[t.toLowerCase()]?t+"="+a+" ":""}),{span:1,div:1}[a]?"":"<"+t+a+" "+utils.trim(i)+">")})}function a(e){var a;if(e.firstChild){for(var r,n=domUtils.getElementsByTagName(e,"span"),c=0;r=n[c++];)"_baidu_cut_start"!=r.id&&"_baidu_cut_end"!=r.id||domUtils.remove(r);if(browser.webkit){var d,u=e.querySelectorAll("div br");for(c=0;d=u[c++];){var p=d.parentNode;"DIV"==p.tagName&&1==p.childNodes.length&&(p.innerHTML="<p><br/></p>",domUtils.remove(p))}var m,h=e.querySelectorAll("#baidu_pastebin");for(c=0;m=h[c++];){var f=o.document.createElement("p");for(m.parentNode.insertBefore(f,m);m.firstChild;)f.appendChild(m.firstChild);domUtils.remove(m)}var g=e.querySelectorAll("meta");for(c=0;b=g[c++];)domUtils.remove(b);u=e.querySelectorAll("br");for(c=0;b=u[c++];)/^apple-/i.test(b.className)&&domUtils.remove(b)}if(browser.gecko){var v=e.querySelectorAll("[_moz_dirty]");for(c=0;b=v[c++];)b.removeAttribute("_moz_dirty")}if(!browser.ie){var b,y=e.querySelectorAll("span.Apple-style-span");for(c=0;b=y[c++];)domUtils.remove(b,!0)}a=e.innerHTML,a=UE.filterWord(a);var _=UE.htmlparser(a);if(o.options.filterRules&&UE.filterNode(_,o.options.filterRules),o.filterInputRule(_),browser.webkit){var C=_.lastChild();C&&"element"==C.type&&"br"==C.tagName&&_.removeChild(C),utils.each(o.body.querySelectorAll("div"),function(e){domUtils.isEmptyBlock(e)&&domUtils.remove(e,!0)})}if(a={html:_.toHtml()},o.fireEvent("beforepaste",a,_),!a.html)return;_=UE.htmlparser(a.html,!0),1===o.queryCommandState("pasteplain")?o.execCommand("insertHtml",UE.filterNode(_,o.options.filterTxtRules).toHtml(),!0):(UE.filterNode(_,o.options.filterTxtRules),i=_.toHtml(),l=a.html,s=o.selection.getRange().createAddress(!0),o.execCommand("insertHtml",!0===o.getOpt("retainOnlyLabelPasted")?t(l):l,!0)),o.fireEvent("afterpaste",a)}}var i,l,s,o=this;o.setOpt({retainOnlyLabelPasted:!1}),o.addListener("pasteTransfer",function(e,a){if(s&&i&&l&&i!=l){var r=o.selection.getRange();if(r.moveToAddress(s,!0),!r.collapsed){for(;!domUtils.isBody(r.startContainer);){var n=r.startContainer;if(1==n.nodeType){if(!(n=n.childNodes[r.startOffset])){r.setStartBefore(r.startContainer);continue}var c=n.previousSibling;c&&3==c.nodeType&&new RegExp("^[\n\r\t "+domUtils.fillChar+"]*$").test(c.nodeValue)&&r.setStartBefore(c)}if(0!=r.startOffset)break;r.setStartBefore(r.startContainer)}for(;!domUtils.isBody(r.endContainer);){var d=r.endContainer;if(1==d.nodeType){if(!(d=d.childNodes[r.endOffset])){r.setEndAfter(r.endContainer);continue}var u=d.nextSibling;u&&3==u.nodeType&&new RegExp("^[\n\r\t"+domUtils.fillChar+"]*$").test(u.nodeValue)&&r.setEndAfter(u)}if(r.endOffset!=r.endContainer[3==r.endContainer.nodeType?"nodeValue":"childNodes"].length)break;r.setEndAfter(r.endContainer)}}r.deleteContents(),r.select(!0),o.__hasEnterExecCommand=!0;var p=l;2===a?p=t(p):a&&(p=i),o.execCommand("inserthtml",p,!0),o.__hasEnterExecCommand=!1;for(var m=o.selection.getRange();!domUtils.isBody(m.startContainer)&&!m.startOffset&&m.startContainer[3==m.startContainer.nodeType?"nodeValue":"childNodes"].length;)m.setStartBefore(m.startContainer);var h=m.createAddress(!0);s.endAddress=h.startAddress}}),o.addListener("ready",function(){domUtils.on(o.body,"cut",function(){!o.selection.getRange().collapsed&&o.undoManger&&o.undoManger.save()}),domUtils.on(o.body,browser.ie||browser.opera?"keydown":"paste",function(t){(!browser.ie&&!browser.opera||(t.ctrlKey||t.metaKey)&&"86"==t.keyCode)&&e.call(o,function(e){a(e)})})}),o.commands.paste={execCommand:function(t){browser.ie?(e.call(o,function(e){a(e)}),o.document.execCommand("paste")):alert(o.getLang("pastemsg"))}}},UE.plugins.pasteplain=function(){var e=this;e.setOpt({pasteplain:!1,filterTxtRules:function(){function e(e){e.tagName="p",e.setStyle()}function t(e){e.parentNode.removeChild(e,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(e){for(var t,a=UE.uNode.createElement("p");t=e.firstChild();)"text"!=t.type&&UE.dom.dtd.$block[t.tagName]?a.firstChild()?(e.parentNode.insertBefore(a,e),a=UE.uNode.createElement("p")):e.parentNode.insertBefore(t,e):a.appendChild(t);a.firstChild()&&e.parentNode.insertBefore(a,e),e.parentNode.removeChild(e)},ol:t,ul:t,dl:t,dt:t,dd:t,li:t,caption:e,th:e,tr:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,td:function(e){!!e.innerText()&&e.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),e),e.parentNode.removeChild(e,e.innerText())}}}()});var t=e.options.pasteplain;e.commands.pasteplain={queryCommandState:function(){return t?1:0},execCommand:function(){t=0|!t},notNeedUndo:1}},UE.plugins.list=function(){function e(e){var t=[];for(var a in e)t.push(a);return t}function t(e){var t=e.className;return domUtils.hasClass(e,/custom_/)?t.match(/custom_(\w+)/)[1]:domUtils.getStyle(e,"list-style-type")}function a(e,a){utils.each(domUtils.getElementsByTagName(e,"ol ul"),function(s){if(domUtils.inDoc(s,e)){var o=s.parentNode;if(o.tagName==s.tagName){var r=t(s)||("OL"==s.tagName?"decimal":"disc");if(r==(t(o)||("OL"==o.tagName?"decimal":"disc"))){var n=utils.indexOf(d[s.tagName],r);n=n+1==d[s.tagName].length?0:n+1,l(s,d[s.tagName][n])}}var u=0,p=2;domUtils.hasClass(s,/custom_/)?/[ou]l/i.test(o.tagName)&&domUtils.hasClass(o,/custom_/)||(p=1):/[ou]l/i.test(o.tagName)&&domUtils.hasClass(o,/custom_/)&&(p=3);var m=domUtils.getStyle(s,"list-style-type");m&&(s.style.cssText="list-style-type:"+m),s.className=utils.trim(s.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+p,utils.each(domUtils.getElementsByTagName(s,"li"),function(e){if(e.style.cssText&&(e.style.cssText=""),e.firstChild){if(e.parentNode===s){if(u++,domUtils.hasClass(s,/custom_/)){var a=1,i=t(s);if("OL"==s.tagName){if(i)switch(i){case"cn":case"cn1":case"cn2":u>10&&(u%10==0||u>10&&u<20)?a=2:u>20&&(a=3);break;case"num2":u>9&&(a=2)}e.className="list-"+c[i]+u+" list-"+i+"-paddingleft-"+a}else e.className="list-"+c[i]+" list-"+i+"-paddingleft"}else e.className=e.className.replace(/list-[\w\-]+/gi,"");var l=e.getAttribute("class");null===l||l.replace(/\s/g,"")||domUtils.removeAttributes(e,"class")}}else domUtils.remove(e)}),!a&&i(s,s.tagName.toLowerCase(),t(s)||domUtils.getStyle(s,"list-style-type"),!0)}})}function i(e,i,l,s){var o=e.nextSibling;o&&1==o.nodeType&&o.tagName.toLowerCase()==i&&(t(o)||domUtils.getStyle(o,"list-style-type")||("ol"==i?"decimal":"disc"))==l&&(domUtils.moveChild(o,e),0==o.childNodes.length&&domUtils.remove(o)),o&&domUtils.isFillChar(o)&&domUtils.remove(o);var r=e.previousSibling;r&&1==r.nodeType&&r.tagName.toLowerCase()==i&&(t(r)||domUtils.getStyle(r,"list-style-type")||("ol"==i?"decimal":"disc"))==l&&domUtils.moveChild(e,r),r&&domUtils.isFillChar(r)&&domUtils.remove(r),!s&&domUtils.isEmptyBlock(e)&&domUtils.remove(e),t(e)&&a(e.ownerDocument,!0)}function l(e,t){c[t]&&(e.className="custom_"+t);try{domUtils.setStyle(e,"list-style-type",t)}catch(e){}}function s(e){var t=e.previousSibling;t&&domUtils.isEmptyBlock(t)&&domUtils.remove(t),(t=e.nextSibling)&&domUtils.isEmptyBlock(t)&&domUtils.remove(t)}function o(e){for(;e&&!domUtils.isBody(e);){if("TABLE"==e.nodeName)return null;if("LI"==e.nodeName)return e;e=e.parentNode}}var r=this,n={TD:1,PRE:1,BLOCKQUOTE:1},c={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};r.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var d={OL:e(r.options.insertorderedlist),UL:e(r.options.insertunorderedlist)},u=r.options.listiconpath;for(var p in c)r.options.insertorderedlist.hasOwnProperty(p)||r.options.insertunorderedlist.hasOwnProperty(p)||delete c[p];r.ready(function(){var e=[];for(var t in c){if("dash"==t||"dot"==t)e.push("li.list-"+c[t]+"{background-image:url("+u+c[t]+".gif)}"),e.push("ul.custom_"+t+"{list-style:none;}ul.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var a=0;a<99;a++)e.push("li.list-"+c[t]+a+"{background-image:url("+u+"list-"+c[t]+a+".gif)}");e.push("ol.custom_"+t+"{list-style:none;}ol.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(t){case"cn":e.push("li.list-"+t+"-paddingleft-1{padding-left:25px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn1":e.push("li.list-"+t+"-paddingleft-1{padding-left:30px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn2":e.push("li.list-"+t+"-paddingleft-1{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:55px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":e.push("li.list-"+t+"-paddingleft-1{padding-left:25px}");break;case"num2":e.push("li.list-"+t+"-paddingleft-1{padding-left:35px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}");break;case"dash":e.push("li.list-"+t+"-paddingleft{padding-left:35px}");break;case"dot":e.push("li.list-"+t+"-paddingleft{padding-left:20px}")}}e.push(".list-paddingleft-1{padding-left:0}"),e.push(".list-paddingleft-2{padding-left:"+r.options.listDefaultPaddingLeft+"px}"),e.push(".list-paddingleft-3{padding-left:"+2*r.options.listDefaultPaddingLeft+"px}"),utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+e.join("\n"),r.document)}),r.ready(function(){domUtils.on(r.body,"cut",function(){setTimeout(function(){var e,t=r.selection.getRange();if(!t.collapsed&&(e=domUtils.findParentByTagName(t.startContainer,"li",!0))&&!e.nextSibling&&domUtils.isEmptyBlock(e)){var a,i=e.parentNode;if(a=i.previousSibling)domUtils.remove(i),t.setStartAtLast(a).collapse(!0),t.select(!0);else if(a=i.nextSibling)domUtils.remove(i),t.setStartAtFirst(a).collapse(!0),t.select(!0);else{var l=r.document.createElement("p");domUtils.fillNode(r.document,l),i.parentNode.insertBefore(l,i),domUtils.remove(i),t.setStart(l,0).collapse(!0),t.select(!0)}}})})}),r.addListener("beforepaste",function(e,a){var i,l=this.selection.getRange(),s=UE.htmlparser(a.html,!0);if(i=domUtils.findParentByTagName(l.startContainer,"li",!0)){var o=i.parentNode,r="OL"==o.tagName?"ul":"ol";utils.each(s.getNodesByTagName(r),function(a){if(a.tagName=o.tagName,a.setAttr(),a.parentNode===s)e=t(o)||("OL"==o.tagName?"decimal":"disc");else{var i=a.parentNode.getAttr("class");(e=i&&/custom_/.test(i)?i.match(/custom_(\w+)/)[1]:a.parentNode.getStyle("list-style-type"))||(e="OL"==o.tagName?"decimal":"disc")}var l=utils.indexOf(d[o.tagName],e);a.parentNode!==s&&(l=l+1==d[o.tagName].length?0:l+1);var r=d[o.tagName][l];c[r]?a.setAttr("class","custom_"+r):a.setStyle("list-style-type",r)})}a.html=s.toHtml()}),!0===r.getOpt("disablePInList")&&r.addOutputRule(function(e){utils.each(e.getNodesByTagName("li"),function(e){var t=[],a=0;utils.each(e.children,function(i){if("p"==i.tagName){for(var l;l=i.children.pop();)t.splice(a,0,l),l.parentNode=e,lastNode=l;if(!(l=t[t.length-1])||"element"!=l.type||"br"!=l.tagName){var s=UE.uNode.createElement("br");s.parentNode=e,t.push(s)}a=t.length}}),t.length&&(e.children=t)})}),r.addInputRule(function(e){function t(e,t){var l=t.firstChild();if(l&&"element"==l.type&&"span"==l.tagName&&/Wingdings|Symbol/.test(l.getStyle("font-family"))){for(var s in i)if(i[s]==l.data)return s;return"disc"}for(var s in a)if(a[s].test(e))return s}if(utils.each(e.getNodesByTagName("li"),function(e){for(var t,a=UE.uNode.createElement("p"),i=0;t=e.children[i];)"text"==t.type||dtd.p[t.tagName]?a.appendChild(t):a.firstChild()?(e.insertBefore(a,t),a=UE.uNode.createElement("p"),i+=2):i++;(a.firstChild()&&!a.parentNode||!e.firstChild())&&e.appendChild(a),a.firstChild()||a.innerHTML(browser.ie?"&nbsp;":"<br/>");var l=e.firstChild(),s=l.lastChild();s&&"text"==s.type&&/^\s*$/.test(s.data)&&l.removeChild(s)}),r.options.autoTransWordToList){var a={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},i={square:"n"};utils.each(e.getNodesByTagName("p"),function(e){function i(e,t,i){if("ol"==e.tagName)if(browser.ie){var l=t.firstChild();"element"==l.type&&"span"==l.tagName&&a[i].test(l.innerText())&&t.removeChild(l)}else t.innerHTML(t.innerHTML().replace(a[i],""));else t.removeChild(t.firstChild());var s=UE.uNode.createElement("li");s.appendChild(t),e.appendChild(s)}if("MsoListParagraph"==e.getAttr("class")){e.setStyle("margin",""),e.setStyle("margin-left",""),e.setAttr("class","");var l,s=e,o=e;if("li"!=e.parentNode.tagName&&(l=t(e.innerText(),e))){var n=UE.uNode.createElement(r.options.insertorderedlist.hasOwnProperty(l)?"ol":"ul");for(c[l]?n.setAttr("class","custom_"+l):n.setStyle("list-style-type",l);e&&"li"!=e.parentNode.tagName&&t(e.innerText(),e);)(s=e.nextSibling())||e.parentNode.insertBefore(n,e),i(n,e,l),e=s;!n.parentNode&&e&&e.parentNode&&e.parentNode.insertBefore(n,e)}var d=o.firstChild();d&&"element"==d.type&&"span"==d.tagName&&/^\s*(&nbsp;)+\s*$/.test(d.innerText())&&d.parentNode.removeChild(d)}})}}),r.addListener("contentchange",function(){a(r.document)}),r.addListener("keydown",function(e,t){function a(){t.preventDefault?t.preventDefault():t.returnValue=!1,r.fireEvent("contentchange"),r.undoManger&&r.undoManger.save()}function i(e,t){for(;e&&!domUtils.isBody(e);){if(t(e))return null;if(1==e.nodeType&&/[ou]l/i.test(e.tagName))return e;e=e.parentNode}return null}var l=t.keyCode||t.which;if(13==l&&!t.shiftKey){var o=r.selection.getRange(),n=domUtils.findParent(o.startContainer,function(e){return domUtils.isBlockElm(e)},!0),c=domUtils.findParentByTagName(o.startContainer,"li",!0);if(n&&"PRE"!=n.tagName&&!c){var d=n.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");/^\s*1\s*\.[^\d]/.test(d)&&(n.innerHTML=d.replace(/^\s*1\s*\./,""),o.setStartAtLast(n).collapse(!0).select(),r.__hasEnterExecCommand=!0,r.execCommand("insertorderedlist"),r.__hasEnterExecCommand=!1)}var u=r.selection.getRange(),p=i(u.startContainer,function(e){return"TABLE"==e.tagName}),m=u.collapsed?p:i(u.endContainer,function(e){return"TABLE"==e.tagName});if(p&&m&&p===m){if(!u.collapsed){if(p=domUtils.findParentByTagName(u.startContainer,"li",!0),m=domUtils.findParentByTagName(u.endContainer,"li",!0),!p||!m||p!==m){var h=u.cloneRange(),f=h.collapse(!1).createBookmark();return u.deleteContents(),h.moveToBookmark(f),s(c=domUtils.findParentByTagName(h.startContainer,"li",!0)),h.select(),void a()}if(u.deleteContents(),(c=domUtils.findParentByTagName(u.startContainer,"li",!0))&&domUtils.isEmptyBlock(c))return _=c.previousSibling,next=c.nextSibling,v=r.document.createElement("p"),domUtils.fillNode(r.document,v),C=c.parentNode,_&&next?(u.setStart(next,0).collapse(!0).select(!0),domUtils.remove(c)):((_||next)&&_?c.parentNode.parentNode.insertBefore(v,C.nextSibling):C.parentNode.insertBefore(v,C),domUtils.remove(c),C.firstChild||domUtils.remove(C),u.setStart(v,0).setCursor()),void a()}if(c=domUtils.findParentByTagName(u.startContainer,"li",!0)){if(domUtils.isEmptyBlock(c)){if(f=u.createBookmark(),c!==(C=c.parentNode).lastChild?(domUtils.breakParent(c,C),s(c)):(C.parentNode.insertBefore(c,C.nextSibling),domUtils.isEmptyNode(C)&&domUtils.remove(C)),!dtd.$list[c.parentNode.tagName])if(domUtils.isBlockElm(c.firstChild))domUtils.remove(c,!0);else{for(v=r.document.createElement("p"),c.parentNode.insertBefore(v,c);c.firstChild;)v.appendChild(c.firstChild);domUtils.remove(c)}u.moveToBookmark(f).select()}else{var g=c.firstChild;if(!g||!domUtils.isBlockElm(g)){var v=r.document.createElement("p");for(!c.firstChild&&domUtils.fillNode(r.document,v);c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),g=v}var b=r.document.createElement("span");u.insertNode(b),domUtils.breakParent(b,c);var y=b.nextSibling;(g=y.firstChild)||(v=r.document.createElement("p"),domUtils.fillNode(r.document,v),y.appendChild(v),g=v),domUtils.isEmptyNode(g)&&(g.innerHTML="",domUtils.fillNode(r.document,g)),u.setStart(g,0).collapse(!0).shrinkBoundary().select(),domUtils.remove(b);var _=y.previousSibling;_&&domUtils.isEmptyBlock(_)&&(_.innerHTML="<p></p>",domUtils.fillNode(r.document,_.firstChild))}a()}}}if(8==l&&((u=r.selection.getRange()).collapsed&&domUtils.isStartInblock(u)&&(h=u.cloneRange().trimBoundary(),(c=domUtils.findParentByTagName(u.startContainer,"li",!0))&&domUtils.isStartInblock(h)))){if((p=domUtils.findParentByTagName(u.startContainer,"p",!0))&&p!==c.firstChild){var C=domUtils.findParentByTagName(p,["ol","ul"]);return domUtils.breakParent(p,C),s(p),r.fireEvent("contentchange"),u.setStart(p,0).setCursor(!1,!0),r.fireEvent("saveScene"),void domUtils.preventDefault(t)}if(c&&(_=c.previousSibling)){if(46==l&&c.childNodes.length)return;if(dtd.$list[_.tagName]&&(_=_.lastChild),r.undoManger&&r.undoManger.save(),g=c.firstChild,domUtils.isBlockElm(g))if(domUtils.isEmptyNode(g))for(_.appendChild(g),u.setStart(g,0).setCursor(!1,!0);c.firstChild;)_.appendChild(c.firstChild);else b=r.document.createElement("span"),u.insertNode(b),domUtils.isEmptyBlock(_)&&(_.innerHTML=""),domUtils.moveChild(c,_),u.setStartBefore(b).collapse(!0).select(!0),domUtils.remove(b);else if(domUtils.isEmptyNode(c)){v=r.document.createElement("p");_.appendChild(v),u.setStart(v,0).setCursor()}else for(u.setEnd(_,_.childNodes.length).collapse().select(!0);c.firstChild;)_.appendChild(c.firstChild);return domUtils.remove(c),r.fireEvent("contentchange"),r.fireEvent("saveScene"),void domUtils.preventDefault(t)}if(c&&!c.previousSibling){C=c.parentNode,f=u.createBookmark();if(domUtils.isTagNode(C.parentNode,"ol ul"))C.parentNode.insertBefore(c,C),domUtils.isEmptyNode(C)&&domUtils.remove(C);else{for(;c.firstChild;)C.parentNode.insertBefore(c.firstChild,C);domUtils.remove(c),domUtils.isEmptyNode(C)&&domUtils.remove(C)}return u.moveToBookmark(f).setCursor(!1,!0),r.fireEvent("contentchange"),r.fireEvent("saveScene"),void domUtils.preventDefault(t)}}}),r.addListener("keyup",function(e,a){if(8==(a.keyCode||a.which)){var l,s=r.selection.getRange();(l=domUtils.findParentByTagName(s.startContainer,["ol","ul"],!0))&&i(l,l.tagName.toLowerCase(),t(l)||domUtils.getComputedStyle(l,"list-style-type"),!0)}}),r.addListener("tabkeydown",function(){function e(e){if(-1!=r.options.maxListLevel){for(var t=e.parentNode,a=0;/[ou]l/i.test(t.tagName);)a++,t=t.parentNode;if(a>=r.options.maxListLevel)return!0}}var a=r.selection.getRange(),s=domUtils.findParentByTagName(a.startContainer,"li",!0);if(s){var o;if(!a.collapsed){r.fireEvent("saveScene"),o=a.createBookmark();for(var n,c,u=0,p=domUtils.findParents(s);c=p[u++];)if(domUtils.isTagNode(c,"ol ul")){n=c;break}var m=s;if(o.end)for(;m&&!(domUtils.getPosition(m,o.end)&domUtils.POSITION_FOLLOWING);)if(e(m))m=domUtils.getNextDomNode(m,!1,null,function(e){return e!==n});else{var h=m.parentNode,f=r.document.createElement(h.tagName),g=(v=utils.indexOf(d[f.tagName],t(h)||domUtils.getComputedStyle(h,"list-style-type")))+1==d[f.tagName].length?0:v+1;for(l(f,b=d[f.tagName][g]),h.insertBefore(f,m);m&&!(domUtils.getPosition(m,o.end)&domUtils.POSITION_FOLLOWING);){if(s=m.nextSibling,f.appendChild(m),!s||domUtils.isTagNode(s,"ol ul")){if(s)for(;(s=s.firstChild)&&"LI"!=s.tagName;);else s=domUtils.getNextDomNode(m,!1,null,function(e){return e!==n});break}m=s}i(f,f.tagName.toLowerCase(),b),m=s}return r.fireEvent("contentchange"),a.moveToBookmark(o).select(),!0}if(e(s))return!0;var v,b;h=s.parentNode,f=r.document.createElement(h.tagName);if(v=(v=utils.indexOf(d[f.tagName],t(h)||domUtils.getComputedStyle(h,"list-style-type")))+1==d[f.tagName].length?0:v+1,l(f,b=d[f.tagName][v]),domUtils.isStartInblock(a))return r.fireEvent("saveScene"),o=a.createBookmark(),h.insertBefore(f,s),f.appendChild(s),i(f,f.tagName.toLowerCase(),b),r.fireEvent("contentchange"),a.moveToBookmark(o).select(!0),!0}}),r.commands.insertorderedlist=r.commands.insertunorderedlist={execCommand:function(e,a){a||(a="insertorderedlist"==e.toLowerCase()?"decimal":"disc");var s=this,r=this.selection.getRange(),c=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!domUtils.isWhitespace(e)},d="insertorderedlist"==e.toLowerCase()?"ol":"ul",u=s.document.createDocumentFragment();r.adjustmentBoundary().shrinkBoundary();var p,m,h,f,g=r.createBookmark(!0),v=o(s.document.getElementById(g.start)),b=0,y=o(s.document.getElementById(g.end)),_=0;if(v||y){if(v&&(p=v.parentNode),g.end||(y=v),y&&(m=y.parentNode),p===m){for(;v!==y;){if(f=v,v=v.nextSibling,!domUtils.isBlockElm(f.firstChild)){for(var C=s.document.createElement("p");f.firstChild;)C.appendChild(f.firstChild);f.appendChild(C)}u.appendChild(f)}if(f=s.document.createElement("span"),p.insertBefore(f,y),!domUtils.isBlockElm(y.firstChild)){for(C=s.document.createElement("p");y.firstChild;)C.appendChild(y.firstChild);y.appendChild(C)}u.appendChild(y),domUtils.breakParent(f,p),domUtils.isEmptyNode(f.previousSibling)&&domUtils.remove(f.previousSibling),domUtils.isEmptyNode(f.nextSibling)&&domUtils.remove(f.nextSibling);var x=t(p)||domUtils.getComputedStyle(p,"list-style-type")||("insertorderedlist"==e.toLowerCase()?"decimal":"disc");if(p.tagName.toLowerCase()==d&&x==a){for(var k=0,w=s.document.createDocumentFragment();A=u.firstChild;)if(domUtils.isTagNode(A,"ol ul"))w.appendChild(A);else for(;A.firstChild;)w.appendChild(A.firstChild),domUtils.remove(A);f.parentNode.insertBefore(w,f)}else l(h=s.document.createElement(d),a),h.appendChild(u),f.parentNode.insertBefore(h,f);return domUtils.remove(f),h&&i(h,d,a),void r.moveToBookmark(g).select()}if(v){for(;v;){if(f=v.nextSibling,domUtils.isTagNode(v,"ol ul"))u.appendChild(v);else{for(var S=s.document.createDocumentFragment(),T=0;v.firstChild;)domUtils.isBlockElm(v.firstChild)&&(T=1),S.appendChild(v.firstChild);if(T)u.appendChild(S);else{var N=s.document.createElement("p");N.appendChild(S),u.appendChild(N)}domUtils.remove(v)}v=f}p.parentNode.insertBefore(u,p.nextSibling),domUtils.isEmptyNode(p)?(r.setStartBefore(p),domUtils.remove(p)):r.setStartAfter(p),b=1}if(y&&domUtils.inDoc(m,s.document)){for(v=m.firstChild;v&&v!==y;){if(f=v.nextSibling,domUtils.isTagNode(v,"ol ul"))u.appendChild(v);else{for(S=s.document.createDocumentFragment(),T=0;v.firstChild;)domUtils.isBlockElm(v.firstChild)&&(T=1),S.appendChild(v.firstChild);T?u.appendChild(S):((N=s.document.createElement("p")).appendChild(S),u.appendChild(N)),domUtils.remove(v)}v=f}var F=domUtils.createElement(s.document,"div",{tmpDiv:1});domUtils.moveChild(y,F),u.appendChild(F),domUtils.remove(y),m.parentNode.insertBefore(u,m),r.setEndBefore(m),domUtils.isEmptyNode(m)&&domUtils.remove(m),_=1}}b||r.setStartBefore(s.document.getElementById(g.start)),g.end&&!_&&r.setEndAfter(s.document.getElementById(g.end)),r.enlarge(!0,function(e){return n[e.tagName]}),u=s.document.createDocumentFragment();for(var I=r.createBookmark(),D=domUtils.getNextDomNode(I.start,!1,c),L=r.cloneRange(),E=domUtils.isBlockElm;D&&D!==I.end&&domUtils.getPosition(D,I.end)&domUtils.POSITION_PRECEDING;)if(3==D.nodeType||dtd.li[D.tagName]){if(1==D.nodeType&&dtd.$list[D.tagName]){for(;D.firstChild;)u.appendChild(D.firstChild);P=domUtils.getNextDomNode(D,!1,c),domUtils.remove(D),D=P;continue}for(P=D,L.setStartBefore(D);D&&D!==I.end&&(!E(D)||domUtils.isBookmarkNode(D));)P=D,D=domUtils.getNextDomNode(D,!1,null,function(e){return!n[e.tagName]});D&&E(D)&&((f=domUtils.getNextDomNode(P,!1,c))&&domUtils.isBookmarkNode(f)&&(D=domUtils.getNextDomNode(f,!1,c),P=f)),L.setEndAfter(P),D=domUtils.getNextDomNode(P,!1,c);var B=r.document.createElement("li");if(B.appendChild(L.extractContents()),domUtils.isEmptyNode(B)){for(var P=r.document.createElement("p");B.firstChild;)P.appendChild(B.firstChild);B.appendChild(P)}u.appendChild(B)}else D=domUtils.getNextDomNode(D,!0,c);r.moveToBookmark(I).collapse(!0),l(h=s.document.createElement(d),a),h.appendChild(u),r.insertNode(h),i(h,d,a);k=0;for(var A,$=domUtils.getElementsByTagName(h,"div");A=$[k++];)A.getAttribute("tmpDiv")&&domUtils.remove(A,!0);r.moveToBookmark(g).select()},queryCommandState:function(e){for(var t,a="insertorderedlist"==e.toLowerCase()?"ol":"ul",i=this.selection.getStartElementPath(),l=0;t=i[l++];){if("TABLE"==t.nodeName)return 0;if(a==t.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(e){for(var a,i,l="insertorderedlist"==e.toLowerCase()?"ol":"ul",s=this.selection.getStartElementPath(),o=0;i=s[o++];){if("TABLE"==i.nodeName){a=null;break}if(l==i.nodeName.toLowerCase()){a=i;break}}return a?t(a)||domUtils.getComputedStyle(a,"list-style-type"):null}}},function(){var e={textarea:function(e,t){var a=t.ownerDocument.createElement("textarea");return a.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",browser.ie&&browser.version<8&&(a.style.width=t.offsetWidth+"px",a.style.height=t.offsetHeight+"px",t.onresize=function(){a.style.width=t.offsetWidth+"px",a.style.height=t.offsetHeight+"px"}),t.appendChild(a),{setContent:function(e){a.value=e},getContent:function(){return a.value},select:function(){var e;browser.ie?((e=a.createTextRange()).collapse(!0),e.select()):(a.setSelectionRange(0,0),a.focus())},dispose:function(){t.removeChild(a),t.onresize=null,a=null,t=null}}},codemirror:function(e,t){var a=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),i=a.getWrapperElement();return i.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',a.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",a.refresh(),{getCodeMirror:function(){return a},setContent:function(e){a.setValue(e)},getContent:function(){return a.getValue()},select:function(){a.focus()},dispose:function(){t.removeChild(i),i=null,a=null}}}};UE.plugins.source=function(){function t(t){return e["codemirror"==n.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](r,t)}var a,i,l,s,o,r=this,n=this.options,c=!1;n.sourceEditor=browser.ie?"textarea":n.sourceEditor||"codemirror",r.setOpt({sourceEditorFirst:!1}),r.commands.source={execCommand:function(){if(c=!c){o=r.selection.getRange().createAddress(!1,!0),r.undoManger&&r.undoManger.save(!0),browser.gecko&&(r.body.contentEditable=!1),l=r.iframe.style.cssText,r.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",r.fireEvent("beforegetcontent");var e=UE.htmlparser(r.body.innerHTML);r.filterOutputRule(e),e.traversal(function(e){if("element"==e.type)switch(e.tagName){case"td":case"th":case"caption":e.children&&1==e.children.length&&"br"==e.firstChild().tagName&&e.removeChild(e.firstChild());break;case"pre":e.innerText(e.innerText().replace(/&nbsp;/g," "))}}),r.fireEvent("aftergetcontent");var n=e.toHtml(!0);(a=t(r.iframe.parentNode)).setContent(n),i=r.setContent,r.setContent=function(e){var t=UE.htmlparser(e);r.filterInputRule(t),e=t.toHtml(),a.setContent(e)},setTimeout(function(){a.select(),r.addListener("fullscreenchanged",function(){try{a.getCodeMirror().refresh()}catch(e){}})}),s=r.getContent,r.getContent=function(){return a.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{r.iframe.style.cssText=l;var d=a.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";d=d.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(e,t){return t&&!dtd.$inlineWithA[t.toLowerCase()]?e.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):e.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),r.setContent=i,r.setContent(d),a.dispose(),a=null,r.getContent=s;var u=r.body.firstChild;if(u||(r.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",u=r.body.firstChild),r.undoManger&&r.undoManger.save(!0),browser.gecko){var p=document.createElement("input");p.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(p),r.body.contentEditable=!1,setTimeout(function(){domUtils.setViewportOffset(p,{left:-32768,top:0}),p.focus(),setTimeout(function(){r.body.contentEditable=!0,r.selection.getRange().moveToAddress(o).select(!0),domUtils.remove(p)})})}else try{r.selection.getRange().moveToAddress(o).select(!0)}catch(e){}}this.fireEvent("sourcemodechanged",c)},queryCommandState:function(){return 0|c},notNeedUndo:1};var d=r.queryCommandState;r.queryCommandState=function(e){return e=e.toLowerCase(),c?e in{source:1,fullscreen:1}?1:-1:d.apply(this,arguments)},"codemirror"==n.sourceEditor&&r.addListener("ready",function(){utils.loadFile(document,{src:n.codeMirrorJsUrl||n.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){n.sourceEditorFirst&&setTimeout(function(){r.execCommand("source")},0)}),utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:n.codeMirrorCssUrl||n.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}(),UE.plugins.enterkey=function(){var e,t=this,a=t.options.enterTag;t.addListener("keyup",function(a,i){if(13==(i.keyCode||i.which)){var l,s=t.selection.getRange(),o=s.startContainer;if(browser.ie)t.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(e)){if(browser.gecko)domUtils.findParentByTagName(o,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0)||(t.document.execCommand("formatBlock",!1,"<p>"),l=1);else if(1==o.nodeType){var r,n=t.document.createTextNode("");if(s.insertNode(n),r=domUtils.findParentByTagName(n,"div",!0)){for(var c=t.document.createElement("p");r.firstChild;)c.appendChild(r.firstChild);r.parentNode.insertBefore(c,r),domUtils.remove(r),s.setStartBefore(n).setCursor(),l=1}domUtils.remove(n)}t.undoManger&&l&&t.undoManger.save()}browser.opera&&s.select()}}}),t.addListener("keydown",function(i,l){if(13==(l.keyCode||l.which)){if(t.fireEvent("beforeenterkeydown"))return void domUtils.preventDefault(l);t.fireEvent("saveScene",!0,!0),e="";var s=t.selection.getRange();if(!s.collapsed){var o=s.startContainer,r=s.endContainer,n=domUtils.findParentByTagName(o,"td",!0),c=domUtils.findParentByTagName(r,"td",!0);if(n&&c&&n!==c||!n&&c||n&&!c)return void(l.preventDefault?l.preventDefault():l.returnValue=!1)}if("p"==a)browser.ie||((o=domUtils.findParentByTagName(s.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0))||browser.opera?(e=o.tagName,"p"==o.tagName.toLowerCase()&&browser.gecko&&domUtils.removeDirtyAttr(o)):(t.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(s=t.selection.getRange(),(o=domUtils.findParentByTagName(s.startContainer,"p",!0))&&domUtils.removeDirtyAttr(o))));else if(l.preventDefault?l.preventDefault():l.returnValue=!1,s.collapsed){d=s.document.createElement("br"),s.insertNode(d),d.parentNode.lastChild===d?(d.parentNode.insertBefore(d.cloneNode(!0),d),s.setStartBefore(d)):s.setStartAfter(d),s.setCursor()}else if(s.deleteContents(),1==(o=s.startContainer).nodeType&&(o=o.childNodes[s.startOffset])){for(;1==o.nodeType;){if(dtd.$empty[o.tagName])return s.setStartBefore(o).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!o.firstChild){var d=s.document.createElement("br");return o.appendChild(d),s.setStart(o,0).setCursor(),t.undoManger&&t.undoManger.save(),!1}o=o.firstChild}o===s.startContainer.childNodes[s.startOffset]?(d=s.document.createElement("br"),s.insertNode(d).setCursor()):s.setStart(o,0).setCursor()}else d=s.document.createElement("br"),s.insertNode(d).setStartAfter(d).setCursor()}})},UE.plugins.keystrokes=function(){var e=this,t=!0;e.addListener("keydown",function(a,i){var l=i.keyCode||i.which,s=e.selection.getRange();if(!s.collapsed&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)&&(l>=65&&l<=90||l>=48&&l<=57||l>=96&&l<=111||{13:1,8:1,46:1}[l])){var o=s.startContainer;if(domUtils.isFillChar(o)&&s.setStartBefore(o),o=s.endContainer,domUtils.isFillChar(o)&&s.setEndAfter(o),s.txtToElmBoundary(),s.endContainer&&1==s.endContainer.nodeType&&((o=s.endContainer.childNodes[s.endOffset])&&domUtils.isBr(o)&&s.setEndAfter(o)),0==s.startOffset&&(o=s.startContainer,domUtils.isBoundaryNode(o,"firstChild")&&(o=s.endContainer,s.endOffset==(3==o.nodeType?o.nodeValue.length:o.childNodes.length)&&domUtils.isBoundaryNode(o,"lastChild"))))return e.fireEvent("saveScene"),e.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",s.setStart(e.body.firstChild,0).setCursor(!1,!0),void e._selectionChange()}if(l==keymap.Backspace){if(s=e.selection.getRange(),t=s.collapsed,e.fireEvent("delkeydown",i))return;var r,n;if(s.collapsed&&s.inFillChar()&&(r=s.startContainer,domUtils.isFillChar(r)?(s.setStartBefore(r).shrinkBoundary(!0).collapse(!0),domUtils.remove(r)):(r.nodeValue=r.nodeValue.replace(new RegExp("^"+domUtils.fillChar),""),s.startOffset--,s.collapse(!0).select(!0))),r=s.getClosedNode())return e.fireEvent("saveScene"),s.setStartBefore(r),domUtils.remove(r),s.setCursor(),e.fireEvent("saveScene"),void domUtils.preventDefault(i);if(!browser.ie&&(r=domUtils.findParentByTagName(s.startContainer,"table",!0),n=domUtils.findParentByTagName(s.endContainer,"table",!0),r&&!n||!r&&n||r!==n))return void i.preventDefault()}if(l==keymap.Tab){var c={ol:1,ul:1,table:1};if(e.fireEvent("tabkeydown",i))return void domUtils.preventDefault(i);var d=e.selection.getRange();e.fireEvent("saveScene");for(var u=0,p="",m=e.options.tabSize||4,h=e.options.tabNode||"&nbsp;";u<m;u++)p+=h;var f=e.document.createElement("span");if(f.innerHTML=p+domUtils.fillChar,d.collapsed)d.insertNode(f.cloneNode(!0).firstChild).setCursor(!0);else{var g=function(e){return domUtils.isBlockElm(e)&&!c[e.tagName.toLowerCase()]};if(r=domUtils.findParent(d.startContainer,g,!0),n=domUtils.findParent(d.endContainer,g,!0),r&&n&&r===n)d.deleteContents(),d.insertNode(f.cloneNode(!0).firstChild).setCursor(!0);else{var v=d.createBookmark();d.enlarge(!0);for(var b=d.createBookmark(),y=domUtils.getNextDomNode(b.start,!1,g);y&&!(domUtils.getPosition(y,b.end)&domUtils.POSITION_FOLLOWING);)y.insertBefore(f.cloneNode(!0).firstChild,y.firstChild),y=domUtils.getNextDomNode(y,!1,g);d.moveToBookmark(b).moveToBookmark(v).select()}}domUtils.preventDefault(i)}if(browser.gecko&&46==l&&((d=e.selection.getRange()).collapsed&&(r=d.startContainer,domUtils.isEmptyBlock(r)))){for(var _=r.parentNode;1==domUtils.getChildCount(_)&&!domUtils.isBody(_);)r=_,_=_.parentNode;r===_.lastChild&&i.preventDefault()}else;}),e.addListener("keyup",function(e,a){var i,l=this;if((a.keyCode||a.which)==keymap.Backspace){if(l.fireEvent("delkeyup"))return;if((i=l.selection.getRange()).collapsed){if((r=domUtils.findParentByTagName(i.startContainer,["h1","h2","h3","h4","h5","h6"],!0))&&domUtils.isEmptyBlock(r)){var s=r.previousSibling;if(s&&"TABLE"!=s.nodeName)return domUtils.remove(r),void i.setStartAtLast(s).setCursor(!1,!0);var o=r.nextSibling;if(o&&"TABLE"!=o.nodeName)return domUtils.remove(r),void i.setStartAtFirst(o).setCursor(!1,!0)}if(domUtils.isBody(i.startContainer)){var r=domUtils.createElement(l.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});i.insertNode(r).setStart(r,0).setCursor(!1,!0)}}if(!t&&(3==i.startContainer.nodeType||1==i.startContainer.nodeType&&domUtils.isEmptyBlock(i.startContainer)))if(browser.ie){var n=i.document.createElement("span");i.insertNode(n).setStartBefore(n).collapse(!0),i.select(),domUtils.remove(n)}else i.select()}})},UE.plugins.fiximgclick=function(){function e(){this.editor=null,this.resizer=null,this.cover=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var t,a=!1;return t=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]],e.prototype={init:function(e){var t=this;t.editor=e,t.startPos=this.prePos={x:0,y:0},t.dragId=-1;var a=[],l=t.cover=document.createElement("div"),s=t.resizer=document.createElement("div");for(l.id=t.editor.ui.id+"_imagescale_cover",l.style.cssText="position:absolute;display:none;z-index:"+t.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;",domUtils.on(l,"mousedown click",function(){t.hide()}),i=0;i<8;i++)a.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');s.id=t.editor.ui.id+"_imagescale",s.className="edui-editor-imagescale",s.innerHTML=a.join(""),s.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+t.editor.options.zIndex+";",t.editor.ui.getDom().appendChild(l),t.editor.ui.getDom().appendChild(s),t.initStyle(),t.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var e=this;e.startPos.x=e.startPos.y=0,e.isDraging=!1},_eventHandler:function(e){var t=this;switch(e.type){case"mousedown":var i;-1!=(i=e.target||e.srcElement).className.indexOf("edui-editor-imagescale-hand")&&-1==t.dragId&&(t.dragId=i.className.slice(-1),t.startPos.x=t.prePos.x=e.clientX,t.startPos.y=t.prePos.y=e.clientY,domUtils.on(t.doc,"mousemove",t.proxy(t._eventHandler,t)));break;case"mousemove":-1!=t.dragId&&(t.updateContainerStyle(t.dragId,{x:e.clientX-t.prePos.x,y:e.clientY-t.prePos.y}),t.prePos.x=e.clientX,t.prePos.y=e.clientY,a=!0,t.updateTargetElement());break;case"mouseup":-1!=t.dragId&&(t.updateContainerStyle(t.dragId,{x:e.clientX-t.prePos.x,y:e.clientY-t.prePos.y}),t.updateTargetElement(),t.target.parentNode&&t.attachTo(t.target),t.dragId=-1),domUtils.un(t.doc,"mousemove",t.proxy(t._eventHandler,t)),a&&(a=!1,t.editor.fireEvent("contentchange"))}},updateTargetElement:function(){var e=this;domUtils.setStyles(e.target,{width:e.resizer.style.width,height:e.resizer.style.height}),e.target.width=parseInt(e.resizer.style.width),e.target.height=parseInt(e.resizer.style.height),e.attachTo(e.target)},updateContainerStyle:function(e,a){var i,l=this,s=l.resizer;0!=t[e][0]&&(i=parseInt(s.style.left)+a.x,s.style.left=l._validScaledProp("left",i)+"px"),0!=t[e][1]&&(i=parseInt(s.style.top)+a.y,s.style.top=l._validScaledProp("top",i)+"px"),0!=t[e][2]&&(i=s.clientWidth+t[e][2]*a.x,s.style.width=l._validScaledProp("width",i)+"px"),0!=t[e][3]&&(i=s.clientHeight+t[e][3]*a.y,s.style.height=l._validScaledProp("height",i)+"px")},_validScaledProp:function(e,t){var a=this.resizer,i=document;switch(t=isNaN(t)?0:t,e){case"left":return t<0?0:t+a.clientWidth>i.clientWidth?i.clientWidth-a.clientWidth:t;case"top":return t<0?0:t+a.clientHeight>i.clientHeight?i.clientHeight-a.clientHeight:t;case"width":return t<=0?1:t+a.offsetLeft>i.clientWidth?i.clientWidth-a.offsetLeft:t;case"height":return t<=0?1:t+a.offsetTop>i.clientHeight?i.clientHeight-a.offsetTop:t}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var e=this,t=domUtils.getXY(e.editor.ui.getDom()),a=domUtils.getXY(e.editor.iframe);domUtils.setStyles(e.cover,{width:e.editor.iframe.offsetWidth+"px",height:e.editor.iframe.offsetHeight+"px",top:a.y-t.y+"px",left:a.x-t.x+"px",position:"absolute",display:""})},show:function(e){var t=this;t.resizer.style.display="block",e&&t.attachTo(e),domUtils.on(this.resizer,"mousedown",t.proxy(t._eventHandler,t)),domUtils.on(t.doc,"mouseup",t.proxy(t._eventHandler,t)),t.showCover(),t.editor.fireEvent("afterscaleshow",t),t.editor.fireEvent("saveScene")},hide:function(){var e=this;e.hideCover(),e.resizer.style.display="none",domUtils.un(e.resizer,"mousedown",e.proxy(e._eventHandler,e)),domUtils.un(e.doc,"mouseup",e.proxy(e._eventHandler,e)),e.editor.fireEvent("afterscalehide",e)},proxy:function(e,t){return function(a){return e.apply(t||this,arguments)}},attachTo:function(e){var t=this,a=t.target=e,i=this.resizer,l=domUtils.getXY(a),s=domUtils.getXY(t.editor.iframe),o=domUtils.getXY(i.parentNode);domUtils.setStyles(i,{width:a.width+"px",height:a.height+"px",left:s.x+l.x-t.editor.document.body.scrollLeft-o.x-parseInt(i.style.borderLeftWidth)+"px",top:s.y+l.y-t.editor.document.body.scrollTop-o.y-parseInt(i.style.borderTopWidth)+"px"})}},function(){var t,a=this;a.setOpt("imageScaleEnabled",!0),!browser.ie&&a.options.imageScaleEnabled&&a.addListener("click",function(i,l){var s=a.selection.getRange().getClosedNode();if(s&&"IMG"==s.tagName&&"false"!=a.body.contentEditable){if(-1!=s.className.indexOf("edui-faked-music")||s.getAttribute("anchorname")||domUtils.hasClass(s,"loadingclass")||domUtils.hasClass(s,"loaderrorclass"))return;if(!t){(t=new e).init(a),a.ui.getDom().appendChild(t.resizer);var o,r=function(e){t.hide(),t.target&&a.selection.getRange().selectNode(t.target).select()},n=function(e){var t=e.target||e.srcElement;!t||void 0!==t.className&&-1!=t.className.indexOf("edui-editor-imagescale")||r()};a.addListener("afterscaleshow",function(e){a.addListener("beforekeydown",r),a.addListener("beforemousedown",n),domUtils.on(document,"keydown",r),domUtils.on(document,"mousedown",n),a.selection.getNative().removeAllRanges()}),a.addListener("afterscalehide",function(e){a.removeListener("beforekeydown",r),a.removeListener("beforemousedown",n),domUtils.un(document,"keydown",r),domUtils.un(document,"mousedown",n);var i=t.target;i.parentNode&&a.selection.getRange().selectNode(i).select()}),domUtils.on(t.resizer,"mousedown",function(e){a.selection.getNative().removeAllRanges();var i=e.target||e.srcElement;i&&-1==i.className.indexOf("edui-editor-imagescale-hand")&&(o=setTimeout(function(){t.hide(),t.target&&a.selection.getRange().selectNode(i).select()},200))}),domUtils.on(t.resizer,"mouseup",function(e){var t=e.target||e.srcElement;t&&-1==t.className.indexOf("edui-editor-imagescale-hand")&&clearTimeout(o)})}t.show(s)}else t&&"none"!=t.resizer.style.display&&t.hide()}),browser.webkit&&a.addListener("click",function(e,t){"IMG"==t.target.tagName&&"false"!=a.body.contentEditable&&new dom.Range(a.document).selectNode(t.target).select()})}}(),UE.plugin.register("autolink",function(){return browser.ie?{}:{bindEvents:{reset:function(){0},keydown:function(e,t){var a=this,i=t.keyCode||t.which;if(32==i||13==i){for(var l,s,o=a.selection.getNative(),r=o.getRangeAt(0).cloneRange(),n=r.startContainer;1==n.nodeType&&r.startOffset>0&&(n=r.startContainer.childNodes[r.startOffset-1]);)r.setStart(n,1==n.nodeType?n.childNodes.length:n.nodeValue.length),r.collapse(!0),n=r.startContainer;do{if(0==r.startOffset){for(n=r.startContainer.previousSibling;n&&1==n.nodeType;)n=n.lastChild;if(!n||domUtils.isFillChar(n))break;l=n.nodeValue.length}else n=r.startContainer,l=r.startOffset;r.setStart(n,l-1),s=r.toString().charCodeAt(0)}while(160!=s&&32!=s);if(r.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;r.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(r.toString());)try{r.setStart(r.startContainer,r.startOffset+1)}catch(e){for(n=r.startContainer;!(next=n.nextSibling);){if(domUtils.isBody(n))return;n=n.parentNode}r.setStart(next,0)}if(domUtils.findParentByTagName(r.startContainer,"a",!0))return;var c,d=a.document.createElement("a"),u=a.document.createTextNode(" ");a.undoManger&&a.undoManger.save(),d.appendChild(r.extractContents()),d.href=d.innerHTML=d.innerHTML.replace(/<[^>]+>/g,""),c=d.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),""),c=/^(?:https?:\/\/)/gi.test(c)?c:"http://"+c,d.setAttribute("_src",utils.html(c)),d.href=utils.html(c),r.insertNode(d),d.parentNode.insertBefore(u,d.nextSibling),r.setStart(u,0),r.collapse(!0),o.removeAllRanges(),o.addRange(r),a.undoManger&&a.undoManger.save()}}}}}},function(){var e={37:1,38:1,39:1,40:1,13:1,32:1};browser.ie&&this.addListener("keyup",function(t,a){var i=a.keyCode;if(e[i]){var l=this.selection.getRange(),s=l.startContainer;if(13==i){for(;s&&!domUtils.isBody(s)&&!domUtils.isBlockElm(s);)s=s.parentNode;var o;if(s&&!domUtils.isBody(s)&&"P"==s.nodeName)if((o=s.previousSibling)&&1==o.nodeType)(o=function(e){if(3==e.nodeType)return null;if("A"==e.nodeName)return e;for(var t=e.lastChild;t;){if("A"==t.nodeName)return t;if(3==t.nodeType){if(domUtils.isWhitespace(t)){t=t.previousSibling;continue}return null}t=t.lastChild}}(o))&&!o.getAttribute("_href")&&domUtils.remove(o,!0)}else if(32==i)3==s.nodeType&&/^\s$/.test(s.nodeValue)&&((s=s.previousSibling)&&"A"==s.nodeName&&!s.getAttribute("_href")&&domUtils.remove(s,!0));else if((s=domUtils.findParentByTagName(s,"a",!0))&&!s.getAttribute("_href")){var r=l.createBookmark();domUtils.remove(s,!0),l.moveToBookmark(r).select(!0)}}})}),UE.plugins.autoheight=function(){function e(){var e=this;clearTimeout(l),s||(!e.queryCommandState||e.queryCommandState&&1!=e.queryCommandState("source"))&&(l=setTimeout(function(){for(var t=e.body.lastChild;t&&1!=t.nodeType;)t=t.previousSibling;t&&1==t.nodeType&&(t.style.clear="both",(i=Math.max(domUtils.getXY(t).y+t.offsetHeight+25,Math.max(r.minFrameHeight,r.initialFrameHeight)))!=o&&(i!==parseInt(e.iframe.parentNode.style.height)&&(e.iframe.parentNode.style.height=i+"px"),e.body.style.height=i+"px",o=i),domUtils.removeStyle(t,"clear"))},50))}var t=this;if(t.autoHeightEnabled=!1!==t.options.autoHeightEnabled,t.autoHeightEnabled){var a,i,l,s,o=0,r=t.options;t.addListener("fullscreenchanged",function(e,t){s=t}),t.addListener("destroy",function(){t.removeListener("contentchange afterinserthtml keyup mouseup",e)}),t.enableAutoHeight=function(){var t=this;if(t.autoHeightEnabled){var i=t.document;t.autoHeightEnabled=!0,a=i.body.style.overflowY,i.body.style.overflowY="hidden",t.addListener("contentchange afterinserthtml keyup mouseup",e),setTimeout(function(){e.call(t)},browser.gecko?100:0),t.fireEvent("autoheightchanged",t.autoHeightEnabled)}},t.disableAutoHeight=function(){t.body.style.overflowY=a||"",t.removeListener("contentchange",e),t.removeListener("keyup",e),t.removeListener("mouseup",e),t.autoHeightEnabled=!1,t.fireEvent("autoheightchanged",t.autoHeightEnabled)},t.on("setHeight",function(){t.disableAutoHeight()}),t.addListener("ready",function(){var a,i;t.enableAutoHeight(),domUtils.on(browser.ie?t.body:t.document,browser.webkit?"dragover":"drop",function(){clearTimeout(a),a=setTimeout(function(){e.call(t)},100)}),window.onscroll=function(){null===i?i=this.scrollY:0==this.scrollY&&0!=i&&(t.window.scrollTo(0,0),i=null)}})}},UE.plugins.autofloat=function(){function e(){h=!0,m.parentNode&&m.parentNode.removeChild(m),r.style.cssText=o}function t(){var t=c(a.container),i=a.options.toolbarTopOffset||0;t.top<0&&t.bottom-r.offsetHeight>i?function(){var e=domUtils.getXY(r),t=domUtils.getComputedStyle(r,"position"),i=domUtils.getComputedStyle(r,"left");r.style.width=r.offsetWidth+"px",r.style.zIndex=1*a.options.zIndex+1,r.parentNode.insertBefore(m,r),u||p&&browser.ie?("absolute"!=r.style.position&&(r.style.position="absolute"),r.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-n+s+"px"):(browser.ie7Compat&&h&&(h=!1,r.style.left=domUtils.getXY(r).x-document.documentElement.getBoundingClientRect().left+2+"px"),"fixed"!=r.style.position&&(r.style.position="fixed",r.style.top=s+"px",("absolute"==t||"relative"==t)&&parseFloat(i)&&(r.style.left=e.x+"px")))}():e()}var a=this,i=a.getLang();a.setOpt({topOffset:0});var l=!1!==a.options.autoFloatEnabled,s=a.options.topOffset;if(l){var o,r,n,c,d=UE.ui.uiUtils,u=browser.ie&&browser.version<=6,p=browser.quirks,m=document.createElement("div"),h=!0,f=utils.defer(function(){t()},browser.ie?200:100,!0);a.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],t),a.removeListener("keydown",f)}),a.addListener("ready",function(){if(UE.ui||(alert(i.autofloatMsg),0)){if(!a.ui)return;c=d.getClientRect,r=a.ui.getDom("toolbarbox"),n=c(r).top,o=r.style.cssText,m.style.height=r.offsetHeight+"px",u&&function(){var e=document.body.style;e.backgroundImage='url("about:blank")',e.backgroundAttachment="fixed"}(),domUtils.on(window,["scroll","resize"],t),a.addListener("keydown",f),a.addListener("beforefullscreenchange",function(t,a){a&&e()}),a.addListener("fullscreenchanged",function(e,a){a||t()}),a.addListener("sourcemodechanged",function(e,a){setTimeout(function(){t()},0)}),a.addListener("clearDoc",function(){setTimeout(function(){t()},0)})}})}},UE.plugins.video=function(){function e(e,t,i,l,s,o,r){var n;switch(e=utils.unhtmlForUrl(e),s=utils.unhtml(s),o=utils.unhtml(o),t=parseInt(t,10)||0,i=parseInt(i,10)||0,r){case"image":n="<img "+(l?'id="'+l+'"':"")+' width="'+t+'" height="'+i+'" _url="'+e+'" class="'+o.replace(/\bvideo-js\b/,"")+'" src="'+a.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+a.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(s?"float:"+s+";":"")+'" />';break;case"embed":n='<embed type="application/x-shockwave-flash" class="'+o+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+utils.html(e)+'" width="'+t+'" height="'+i+'"'+(s?' style="float:'+s+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var c=e.substr(e.lastIndexOf(".")+1);"ogv"==c&&(c="ogg"),n="<video"+(l?' id="'+l+'"':"")+' class="'+o+' video-js" '+(s?' style="float:'+s+'"':"")+' controls preload="none" width="'+t+'" height="'+i+'" src="'+e+'" data-setup="{}"><source src="'+e+'" type="video/'+c+'" /></video>'}return n}function t(t,a){utils.each(t.getNodesByTagName(a?"img":"embed video"),function(t){var i=t.getAttr("class");if(i&&-1!=i.indexOf("edui-faked-video")){var l=e(a?t.getAttr("_url"):t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),null,t.getStyle("float")||"",i,a?"embed":"image");t.parentNode.replaceChild(UE.uNode.createElement(l),t)}if(i&&-1!=i.indexOf("edui-upload-video")){l=e(a?t.getAttr("_url"):t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),null,t.getStyle("float")||"",i,a?"video":"image");t.parentNode.replaceChild(UE.uNode.createElement(l),t)}})}var a=this;a.addOutputRule(function(e){t(e,!0)}),a.addInputRule(function(e){t(e)}),a.commands.insertvideo={execCommand:function(t,i,l){for(var s,o,r=[],n=0,c=(i=utils.isArray(i)?i:[i]).length;n<c;n++)o=i[n],s="upload"==l?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",r.push(e(o.url,o.width||420,o.height||280,"tmpVedio"+n,null,s,"image"));a.execCommand("inserthtml",r.join(""),!0);var d=this.selection.getRange();for(n=0,c=i.length;n<c;n++){var u=this.document.getElementById("tmpVedio"+n);domUtils.removeAttributes(u,"id"),d.selectNode(u).select(),a.execCommand("imagefloat",i[n].align)}},queryCommandState:function(){var e=a.selection.getRange().getClosedNode();return e&&("edui-faked-video"==e.className||-1!=e.className.indexOf("edui-upload-video"))?1:0}}},function(){var e=UE.UETable=function(e){this.table=e,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(e)};e.removeSelectedClass=function(e){utils.each(e,function(e){domUtils.removeClasses(e,"selectTdClass")})},e.addSelectedClass=function(e){utils.each(e,function(e){domUtils.addClass(e,"selectTdClass")})},e.isEmptyBlock=function(e){var t=new RegExp(domUtils.fillChar,"g");if(e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0)return 0;for(var a in dtd.$isNotEmpty)if(dtd.$isNotEmpty.hasOwnProperty(a)&&e.getElementsByTagName(a).length)return 0;return 1},e.getWidth=function(e){return e?parseInt(domUtils.getComputedStyle(e,"width"),10):0},e.getTableCellAlignState=function(e){!utils.isArray(e)&&(e=[e]);var t={},a=["align","valign"],i=null,l=!0;return utils.each(e,function(e){return utils.each(a,function(a){if(i=e.getAttribute(a),!t[a]&&i)t[a]=i;else if(!t[a]||i!==t[a])return l=!1,!1}),l}),l?t:null},e.getTableItemsByRange=function(e){var t=e.selection.getStart();t&&t.id&&0===t.id.indexOf("_baidu_bookmark_start_")&&t.nextSibling&&(t=t.nextSibling);var a=t&&domUtils.findParentByTagName(t,["td","th"],!0),i=a&&a.parentNode,l=t&&domUtils.findParentByTagName(t,"caption",!0);return{cell:a,tr:i,table:l?l.parentNode:i&&i.parentNode.parentNode,caption:l}},e.getUETableBySelected=function(t){var a=e.getTableItemsByRange(t).table;return a&&a.ueTable&&a.ueTable.selectedTds.length?a.ueTable:null},e.getDefaultValue=function(e,t){var a,i,l,s,o={thin:"0px",medium:"1px",thick:"2px"};if(t)return r=t.getElementsByTagName("td")[0],s=domUtils.getComputedStyle(t,"border-left-width"),a=parseInt(o[s]||s,10),s=domUtils.getComputedStyle(r,"padding-left"),i=parseInt(o[s]||s,10),s=domUtils.getComputedStyle(r,"border-left-width"),{tableBorder:a,tdPadding:i,tdBorder:l=parseInt(o[s]||s,10)};(t=e.document.createElement("table")).insertRow(0).insertCell(0).innerHTML="xxx",e.body.appendChild(t);var r=t.getElementsByTagName("td")[0];return s=domUtils.getComputedStyle(t,"border-left-width"),a=parseInt(o[s]||s,10),s=domUtils.getComputedStyle(r,"padding-left"),i=parseInt(o[s]||s,10),s=domUtils.getComputedStyle(r,"border-left-width"),l=parseInt(o[s]||s,10),domUtils.remove(t),{tableBorder:a,tdPadding:i,tdBorder:l}},e.getUETable=function(t){var a=t.tagName.toLowerCase();return(t="td"==a||"th"==a||"caption"==a?domUtils.findParentByTagName(t,"table",!0):t).ueTable||(t.ueTable=new e(t)),t.ueTable},e.cloneCell=function(e,t,a){if(!e||utils.isString(e))return this.table.ownerDocument.createElement(e||"td");var i=domUtils.hasClass(e,"selectTdClass");i&&domUtils.removeClasses(e,"selectTdClass");var l=e.cloneNode(!0);return t&&(l.rowSpan=l.colSpan=1),!a&&domUtils.removeAttributes(l,"width height"),!a&&domUtils.removeAttributes(l,"style"),l.style.borderLeftStyle="",l.style.borderTopStyle="",l.style.borderLeftColor=e.style.borderRightColor,l.style.borderLeftWidth=e.style.borderRightWidth,l.style.borderTopColor=e.style.borderBottomColor,l.style.borderTopWidth=e.style.borderBottomWidth,i&&domUtils.addClass(e,"selectTdClass"),l},e.prototype={getMaxRows:function(){for(var e,t=this.table.rows,a=1,i=0;e=t[i];i++){for(var l,s=1,o=0;l=e.cells[o++];)s=Math.max(l.rowSpan||1,s);a=Math.max(s+i,a)}return a},getMaxCols:function(){for(var e,t=this.table.rows,a=0,i={},l=0;e=t[l];l++){for(var s,o=0,r=0;s=e.cells[r++];)if(o+=s.colSpan||1,s.rowSpan&&s.rowSpan>1)for(var n=1;n<s.rowSpan;n++)i["row_"+(l+n)]?i["row_"+(l+n)]++:i["row_"+(l+n)]=s.colSpan||1;o+=i["row_"+l]||0,a=Math.max(o,a)}return a},getCellColIndex:function(e){},getHSideCell:function(e,t){try{var a,i,l=this.getCellInfo(e),s=this.selectedTds.length,o=this.cellsRange;return!t&&(s?!o.beginColIndex:!l.colIndex)||t&&(s?o.endColIndex==this.colsNum-1:l.colIndex==this.colsNum-1)?null:(a=s?o.beginRowIndex:l.rowIndex,i=t?s?o.endColIndex+1:l.colIndex+1:s?o.beginColIndex-1:l.colIndex<1?0:l.colIndex-1,this.getCell(this.indexTable[a][i].rowIndex,this.indexTable[a][i].cellIndex))}catch(e){}},getTabNextCell:function(e,t){var a,i=this.getCellInfo(e),l=t||i.rowIndex,s=i.colIndex+1+(i.colSpan-1);try{a=this.getCell(this.indexTable[l][s].rowIndex,this.indexTable[l][s].cellIndex)}catch(e){try{l=1*l+1,s=0,a=this.getCell(this.indexTable[l][s].rowIndex,this.indexTable[l][s].cellIndex)}catch(e){}}return a},getVSideCell:function(e,t,a){try{var i,l,s=this.getCellInfo(e),o=this.selectedTds.length&&!a,r=this.cellsRange;return!t&&0==s.rowIndex||t&&(o?r.endRowIndex==this.rowsNum-1:s.rowIndex+s.rowSpan>this.rowsNum-1)?null:(i=t?o?r.endRowIndex+1:s.rowIndex+s.rowSpan:o?r.beginRowIndex-1:s.rowIndex-1,l=o?r.beginColIndex:s.colIndex,this.getCell(this.indexTable[i][l].rowIndex,this.indexTable[i][l].cellIndex))}catch(e){}},getSameEndPosCells:function(e,t){try{for(var a="x"===t.toLowerCase(),i=domUtils.getXY(e)[a?"x":"y"]+e["offset"+(a?"Width":"Height")],l=this.table.rows,s=null,o=[],r=0;r<this.rowsNum;r++){s=l[r].cells;for(var n,c=0;n=s[c++];){var d=domUtils.getXY(n)[a?"x":"y"]+n["offset"+(a?"Width":"Height")];if(d>i&&a)break;if((e==n||i==d)&&(1==n[a?"colSpan":"rowSpan"]&&o.push(n),a))break}}return o}catch(e){}},setCellContent:function(e,t){e.innerHTML=t||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:e.cloneCell,getSameStartPosXCells:function(e){try{for(var t,a=domUtils.getXY(e).x+e.offsetWidth,i=this.table.rows,l=[],s=0;s<this.rowsNum;s++){t=i[s].cells;for(var o,r=0;o=t[r++];){var n=domUtils.getXY(o).x;if(n>a)break;if(n==a&&1==o.colSpan){l.push(o);break}}}return l}catch(e){}},update:function(e){this.table=e||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[];for(var t=this.table.rows,a=this.getMaxRows(),i=a-t.length,l=this.getMaxCols();i--;)this.table.insertRow(t.length);this.rowsNum=a,this.colsNum=l;for(var s=0,o=t.length;s<o;s++)this.indexTable[s]=new Array(l);for(var r,n=0;r=t[n];n++)for(var c,d=0,u=r.cells;c=u[d];d++){c.rowSpan>a&&(c.rowSpan=a);for(var p=d,m=c.rowSpan||1,h=c.colSpan||1;this.indexTable[n][p];)p++;for(var f=0;f<m;f++)for(var g=0;g<h;g++)this.indexTable[n+f][p+g]={rowIndex:n,cellIndex:d,colIndex:p,rowSpan:m,colSpan:h}}for(f=0;f<a;f++)for(g=0;g<l;g++)void 0===this.indexTable[f][g]&&(c=(c=(r=t[f]).cells[r.cells.length-1])?c.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(c),1!==c.colSpan&&(c.colSpan=1),1!==c.rowSpan&&(c.rowSpan=1),r.appendChild(c),this.indexTable[f][g]={rowIndex:f,cellIndex:c.cellIndex,colIndex:g,rowSpan:1,colSpan:1});var v=domUtils.getElementsByTagName(this.table,"td"),b=[];if(utils.each(v,function(e){domUtils.hasClass(e,"selectTdClass")&&b.push(e)}),b.length){var y=b[0],_=b[b.length-1],C=this.getCellInfo(y),x=this.getCellInfo(_);this.selectedTds=b,this.cellsRange={beginRowIndex:C.rowIndex,beginColIndex:C.colIndex,endRowIndex:x.rowIndex+x.rowSpan-1,endColIndex:x.colIndex+x.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow")){domUtils.addClass(this.table.rows[0],"firstRow");for(s=1;s<this.table.rows.length;s++)domUtils.removeClasses(this.table.rows[s],"firstRow")}},getCellInfo:function(e){if(e)for(var t=e.cellIndex,a=e.parentNode.rowIndex,i=this.indexTable[a],l=this.colsNum,s=t;s<l;s++){var o=i[s];if(o.rowIndex===a&&o.cellIndex===t)return o}},getCell:function(e,t){return e<this.rowsNum&&this.table.rows[e].cells[t]||null},deleteCell:function(e,t){t="number"==typeof t?t:e.parentNode.rowIndex,this.table.rows[t].deleteCell(e.cellIndex)},getCellsRange:function(e,t){try{var a=this,i=a.getCellInfo(e);if(e===t)return{beginRowIndex:i.rowIndex,beginColIndex:i.colIndex,endRowIndex:i.rowIndex+i.rowSpan-1,endColIndex:i.colIndex+i.colSpan-1};var l=a.getCellInfo(t);return function e(t,i,l,s){var o,r,n,c=t,d=i,u=l,p=s;if(t>0)for(r=i;r<s;r++)(n=(o=a.indexTable[t][r]).rowIndex)<t&&(c=Math.min(n,c));if(s<a.colsNum)for(n=t;n<l;n++)(r=(o=a.indexTable[n][s]).colIndex+o.colSpan-1)>s&&(p=Math.max(r,p));if(l<a.rowsNum)for(r=i;r<s;r++)(n=(o=a.indexTable[l][r]).rowIndex+o.rowSpan-1)>l&&(u=Math.max(n,u));if(i>0)for(n=t;n<l;n++)(r=(o=a.indexTable[n][i]).colIndex)<i&&(d=Math.min(o.colIndex,d));return c!=t||d!=i||u!=l||p!=s?e(c,d,u,p):{beginRowIndex:t,beginColIndex:i,endRowIndex:l,endColIndex:s}}(Math.min(i.rowIndex,l.rowIndex),Math.min(i.colIndex,l.colIndex),Math.max(i.rowIndex+i.rowSpan-1,l.rowIndex+l.rowSpan-1),Math.max(i.colIndex+i.colSpan-1,l.colIndex+l.colSpan-1))}catch(e){}},getCells:function(e){this.clearSelected();for(var t,a,i,l=e.beginRowIndex,s=e.beginColIndex,o=e.endRowIndex,r=e.endColIndex,n={},c=[],d=l;d<=o;d++)for(var u=s;u<=r;u++){var p=(a=(t=this.indexTable[d][u]).rowIndex)+"|"+(i=t.colIndex);if(!n[p]){if(n[p]=1,a<d||i<u||a+t.rowSpan-1>o||i+t.colSpan-1>r)return null;c.push(this.getCell(a,t.cellIndex))}}return c},clearSelected:function(){e.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(t){var a=this.getCells(t);e.addSelectedClass(a),this.selectedTds=a,this.cellsRange=t},isFullRow:function(){var e=this.cellsRange;return e.endColIndex-e.beginColIndex+1==this.colsNum},isFullCol:function(){var e=this.cellsRange,t=this.table.getElementsByTagName("th"),a=e.endRowIndex-e.beginRowIndex+1;return t.length?a==this.rowsNum||a==this.rowsNum-1:a==this.rowsNum},getNextCell:function(e,t,a){try{var i,l,s=this.getCellInfo(e),o=this.selectedTds.length&&!a,r=this.cellsRange;return!t&&0==s.rowIndex||t&&(o?r.endRowIndex==this.rowsNum-1:s.rowIndex+s.rowSpan>this.rowsNum-1)?null:(i=t?o?r.endRowIndex+1:s.rowIndex+s.rowSpan:o?r.beginRowIndex-1:s.rowIndex-1,l=o?r.beginColIndex:s.colIndex,this.getCell(this.indexTable[i][l].rowIndex,this.indexTable[i][l].cellIndex))}catch(e){}},getPreviewCell:function(e,t){try{var a,i,l=this.getCellInfo(e),s=this.selectedTds.length,o=this.cellsRange;return!t&&(s?!o.beginColIndex:!l.colIndex)||t&&(s?o.endColIndex==this.colsNum-1:l.rowIndex>this.colsNum-1)?null:(a=t?s?o.beginRowIndex:l.rowIndex<1?0:l.rowIndex-1:s?o.beginRowIndex:l.rowIndex,i=t?s?o.endColIndex+1:l.colIndex:s?o.beginColIndex-1:l.colIndex<1?0:l.colIndex-1,this.getCell(this.indexTable[a][i].rowIndex,this.indexTable[a][i].cellIndex))}catch(e){}},moveContent:function(t,a){if(!e.isEmptyBlock(a)){if(e.isEmptyBlock(t))return void(t.innerHTML=a.innerHTML);var i=t.lastChild;for(3!=i.nodeType&&dtd.$block[i.tagName]||t.appendChild(t.ownerDocument.createElement("br"));i=a.firstChild;)t.appendChild(i)}},mergeRight:function(e){var t=this.getCellInfo(e),a=t.colIndex+t.colSpan,i=this.indexTable[t.rowIndex][a],l=this.getCell(i.rowIndex,i.cellIndex);e.colSpan=t.colSpan+i.colSpan,e.removeAttribute("width"),this.moveContent(e,l),this.deleteCell(l,i.rowIndex),this.update()},mergeDown:function(e){var t=this.getCellInfo(e),a=t.rowIndex+t.rowSpan,i=this.indexTable[a][t.colIndex],l=this.getCell(i.rowIndex,i.cellIndex);e.rowSpan=t.rowSpan+i.rowSpan,e.removeAttribute("height"),this.moveContent(e,l),this.deleteCell(l,i.rowIndex),this.update()},mergeRange:function(){var e=this.cellsRange,t=this.getCell(e.beginRowIndex,this.indexTable[e.beginRowIndex][e.beginColIndex].cellIndex);if("TH"==t.tagName&&e.endRowIndex!==e.beginRowIndex){var a=this.indexTable,i=this.getCellInfo(t);t=this.getCell(1,a[1][i.colIndex].cellIndex),e=this.getCellsRange(t,this.getCell(a[this.rowsNum-1][i.colIndex].rowIndex,a[this.rowsNum-1][i.colIndex].cellIndex))}for(var l,s=this.getCells(e),o=0;l=s[o++];)l!==t&&(this.moveContent(t,l),this.deleteCell(l));if(t.rowSpan=e.endRowIndex-e.beginRowIndex+1,t.rowSpan>1&&t.removeAttribute("height"),t.colSpan=e.endColIndex-e.beginColIndex+1,t.colSpan>1&&t.removeAttribute("width"),t.rowSpan==this.rowsNum&&1!=t.colSpan&&(t.colSpan=1),t.colSpan==this.colsNum&&1!=t.rowSpan){var r=t.parentNode.rowIndex;if(this.table.deleteRow){o=r+1;for(var n=r+1,c=t.rowSpan;o<c;o++)this.table.deleteRow(n)}else for(o=0,c=t.rowSpan-1;o<c;o++){var d=this.table.rows[r+1];d.parentNode.removeChild(d)}t.rowSpan=1}this.update()},insertRow:function(e,t){function a(e,t,a){if(0==e){var i=(a.nextSibling||a.previousSibling).cells[e];"TH"==i.tagName&&((i=t.ownerDocument.createElement("th")).appendChild(t.firstChild),a.insertBefore(i,t),domUtils.remove(t))}else if("TH"==t.tagName){var l=t.ownerDocument.createElement("td");l.appendChild(t.firstChild),a.insertBefore(l,t),domUtils.remove(t)}}var i,l=this.colsNum,s=this.table.insertRow(e),o="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.rowsNum)for(var r=0;r<l;r++)i=this.cloneCell(t,!0),this.setCellContent(i),i.getAttribute("vAlign")&&i.setAttribute("vAlign",i.getAttribute("vAlign")),s.appendChild(i),o||a(r,i,s);else{var n=this.indexTable[e];for(r=0;r<l;r++){var c=n[r];c.rowIndex<e?(i=this.getCell(c.rowIndex,c.cellIndex)).rowSpan=c.rowSpan+1:(i=this.cloneCell(t,!0),this.setCellContent(i),s.appendChild(i)),o||a(r,i,s)}}return this.update(),s},deleteRow:function(e){for(var t=this.table.rows[e],a=this.indexTable[e],i=this.colsNum,l=0,s=0;s<i;){var o=a[s],r=this.getCell(o.rowIndex,o.cellIndex);if(r.rowSpan>1&&o.rowIndex==e){var n=r.cloneNode(!0);n.rowSpan=r.rowSpan-1,n.innerHTML="",r.rowSpan=1;var c,d=e+1,u=this.table.rows[d],p=this.getPreviewMergedCellsNum(d,s)-l;p<s?(c=s-p-1,domUtils.insertAfter(u.cells[c],n)):u.cells.length&&u.insertBefore(n,u.cells[0]),l+=1}s+=r.colSpan||1}var m=[],h={};for(s=0;s<i;s++){var f=a[s].rowIndex,g=a[s].cellIndex,v=f+"_"+g;h[v]||(h[v]=1,r=this.getCell(f,g),m.push(r))}var b=[];utils.each(m,function(e){1==e.rowSpan?e.parentNode.removeChild(e):b.push(e)}),utils.each(b,function(e){e.rowSpan--}),t.parentNode.removeChild(t),this.update()},insertCol:function(e,t,a){function i(e,t,a){if(0==e){var i=t.nextSibling||t.previousSibling;"TH"==i.tagName&&((i=t.ownerDocument.createElement("th")).appendChild(t.firstChild),a.insertBefore(i,t),domUtils.remove(t))}else if("TH"==t.tagName){var l=t.ownerDocument.createElement("td");l.appendChild(t.firstChild),a.insertBefore(l,t),domUtils.remove(t)}}var l,s,o,r=this.rowsNum,n=0,c=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),d="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.colsNum)for(;n<r;n++)o=(l=this.table.rows[n]).cells[0==e?e:l.cells.length],s=this.cloneCell(t,!0),this.setCellContent(s),s.setAttribute("vAlign",s.getAttribute("vAlign")),o&&s.setAttribute("width",o.getAttribute("width")),e?domUtils.insertAfter(l.cells[l.cells.length-1],s):l.insertBefore(s,l.cells[0]),d||i(n,s,l);else for(;n<r;n++){var u=this.indexTable[n][e];u.colIndex<e?(s=this.getCell(u.rowIndex,u.cellIndex)).colSpan=u.colSpan+1:(o=(l=this.table.rows[n]).cells[u.cellIndex],s=this.cloneCell(t,!0),this.setCellContent(s),s.setAttribute("vAlign",s.getAttribute("vAlign")),o&&s.setAttribute("width",o.getAttribute("width")),o?l.insertBefore(s,o):l.appendChild(s)),d||i(n,s,l)}this.update(),this.updateWidth(c,a||{tdPadding:10,tdBorder:1})},updateWidth:function(t,a){var i=this.table,l=e.getWidth(i)-2*a.tdPadding-a.tdBorder+t;if(l<i.ownerDocument.body.offsetWidth)i.setAttribute("width",l);else{var s=domUtils.getElementsByTagName(this.table,"td th");utils.each(s,function(e){e.setAttribute("width",t)})}},deleteCol:function(e){for(var t=this.indexTable,a=this.table.rows,i=this.table.getAttribute("width"),l=0,s=this.rowsNum,o={},r=0;r<s;){var n=t[r][e],c=n.rowIndex+"_"+n.colIndex;if(!o[c]){o[c]=1;var d=this.getCell(n.rowIndex,n.cellIndex);l||(l=d&&parseInt(d.offsetWidth/d.colSpan,10).toFixed(0)),d.colSpan>1?d.colSpan--:a[r].deleteCell(n.cellIndex),r+=n.rowSpan||1}}this.table.setAttribute("width",i-l),this.update()},splitToCells:function(e){var t=this,a=this.splitToRows(e);utils.each(a,function(e){t.splitToCols(e)})},splitToRows:function(e){var t=this.getCellInfo(e),a=t.rowIndex,i=t.colIndex,l=[];e.rowSpan=1,l.push(e);for(var s=a,o=a+t.rowSpan;s<o;s++)if(s!=a){var r=this.table.rows[s].insertCell(i-this.getPreviewMergedCellsNum(s,i));r.colSpan=t.colSpan,this.setCellContent(r),r.setAttribute("vAlign",e.getAttribute("vAlign")),r.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(r.style.cssText=e.style.cssText),l.push(r)}return this.update(),l},getPreviewMergedCellsNum:function(e,t){for(var a=this.indexTable[e],i=0,l=0;l<t;){var s=a[l].colSpan;i+=s-(a[l].rowIndex==e?1:0),l+=s}return i},splitToCols:function(e){var t=(e.offsetWidth/e.colSpan-22).toFixed(0),a=this.getCellInfo(e),i=a.rowIndex,l=a.colIndex,s=[];e.colSpan=1,e.setAttribute("width",t),s.push(e);for(var o=l,r=l+a.colSpan;o<r;o++)if(o!=l){var n=this.table.rows[i],c=n.insertCell(this.indexTable[i][o].cellIndex+1);if(c.rowSpan=a.rowSpan,this.setCellContent(c),c.setAttribute("vAlign",e.getAttribute("vAlign")),c.setAttribute("align",e.getAttribute("align")),c.setAttribute("width",t),e.style.cssText&&(c.style.cssText=e.style.cssText),"TH"==e.tagName){var d=e.ownerDocument.createElement("th");d.appendChild(c.firstChild),d.setAttribute("vAlign",e.getAttribute("vAlign")),d.rowSpan=c.rowSpan,n.insertBefore(d,c),domUtils.remove(c)}s.push(c)}return this.update(),s},isLastCell:function(e,t,a){t=t||this.rowsNum,a=a||this.colsNum;var i=this.getCellInfo(e);return i.rowIndex+i.rowSpan==t&&i.colIndex+i.colSpan==a},getLastCell:function(e){e=e||this.table.getElementsByTagName("td");var t,a=(this.getCellInfo(e[0]),this),i=e[0],l=i.parentNode,s=0,o=0;return utils.each(e,function(e){e.parentNode==l&&(o+=e.colSpan||1),s+=e.rowSpan*e.colSpan||1}),t=s/o,utils.each(e,function(e){if(a.isLastCell(e,t,o))return i=e,!1}),i},selectRow:function(e){var t=this.indexTable[e],a=this.getCell(t[0].rowIndex,t[0].cellIndex),i=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),l=this.getCellsRange(a,i);this.setSelected(l)},selectTable:function(){var e=this.table.getElementsByTagName("td"),t=this.getCellsRange(e[0],e[e.length-1]);this.setSelected(t)},setBackground:function(e,t){if("string"==typeof t)utils.each(e,function(e){e.style.backgroundColor=t});else if("object"==typeof t){t=utils.extend({repeat:!0,colorList:["#ddd","#fff"]},t);for(var a,i=this.getCellInfo(e[0]).rowIndex,l=0,s=t.colorList,o=function(e,t,a){return e[t]?e[t]:a?e[t%e.length]:""},r=0;a=e[r++];){var n=this.getCellInfo(a);a.style.backgroundColor=o(s,i+l==n.rowIndex?l:++l,t.repeat)}}},removeBackground:function(e){utils.each(e,function(e){e.style.backgroundColor=""})}}}(),function(){function e(e,t){var a=domUtils.getElementsByTagName(e,"td th");utils.each(a,function(e){e.removeAttribute("width")}),e.setAttribute("width",function(e,t,a){var i=e.body;return i.offsetWidth-(t?2*parseInt(domUtils.getComputedStyle(i,"margin-left"),10):0)-2*a.tableBorder-(e.options.offsetWidth||0)}(t,!0,s(t,e)));var i=[];setTimeout(function(){utils.each(a,function(e){1==e.colSpan&&i.push(e.offsetWidth)}),utils.each(a,function(e,t){1==e.colSpan&&e.setAttribute("width",i[t]+"")})},0)}function t(e){var t=i(e).cell;if(t){var a=o(t);return a.selectedTds.length?a.selectedTds:[t]}return[]}var a=UE.UETable,i=function(e){return a.getTableItemsByRange(e)},l=function(e){return a.getUETableBySelected(e)},s=function(e,t){return a.getDefaultValue(e,t)},o=function(e){return a.getUETable(e)};UE.commands.inserttable={queryCommandState:function(){return i(this).table?-1:0},execCommand:function(e,t){t||(t=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var a=this,i=this.selection.getRange().startContainer,l=domUtils.findParent(i,function(e){return domUtils.isBlockElm(e)},!0)||a.body,o=s(a),r=l.offsetWidth,n=Math.floor(r/t.numCols-2*o.tdPadding-o.tdBorder);!t.tdvalign&&(t.tdvalign=a.options.tdvalign),a.execCommand("inserthtml",function(e,t){for(var a=[],i=e.numRows,l=e.numCols,s=0;s<i;s++){a.push("<tr"+(0==s?' class="firstRow"':"")+">");for(var o=0;o<l;o++)a.push('<td width="'+t+'"  vAlign="'+e.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>");a.push("</tr>")}return"<table><tbody>"+a.join("")+"</tbody></table>"}(t,n))}},UE.commands.insertparagraphbeforetable={queryCommandState:function(){return i(this).cell?0:-1},execCommand:function(){var e=i(this).table;if(e){var t=this.document.createElement("p");t.innerHTML=browser.ie?"&nbsp;":"<br />",e.parentNode.insertBefore(t,e),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletetable={queryCommandState:function(){var e=this.selection.getRange();return domUtils.findParentByTagName(e.startContainer,"table",!0)?0:-1},execCommand:function(e,t){var a=this.selection.getRange();if(t=t||domUtils.findParentByTagName(a.startContainer,"table",!0)){var i=t.nextSibling;i||(i=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"}),t.parentNode.insertBefore(i,t)),domUtils.remove(t),a=this.selection.getRange(),3==i.nodeType?a.setStartBefore(i):a.setStart(i,0),a.setCursor(!1,!0),this.fireEvent("tablehasdeleted")}}},UE.commands.cellalign={queryCommandState:function(){return t(this).length?0:-1},execCommand:function(e,a){var i=t(this);if(i.length)for(var l,s=0;l=i[s++];)l.setAttribute("align",a)}},UE.commands.cellvalign={queryCommandState:function(){return t(this).length?0:-1},execCommand:function(e,a){var i=t(this);if(i.length)for(var l,s=0;l=i[s++];)l.setAttribute("vAlign",a)}},UE.commands.insertcaption={queryCommandState:function(){var e=i(this).table;return e&&0==e.getElementsByTagName("caption").length?1:-1},execCommand:function(){var e=i(this).table;if(e){var t=this.document.createElement("caption");t.innerHTML=browser.ie?domUtils.fillChar:"<br/>",e.insertBefore(t,e.firstChild),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletecaption={queryCommandState:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");return t?0==t.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");t&&(domUtils.remove(t.getElementsByTagName("caption")[0]),this.selection.getRange().setStart(t.rows[0].cells[0],0).setCursor())}},UE.commands.inserttitle={queryCommandState:function(){var e=i(this).table;if(e){var t=e.rows[0];return"th"!=t.cells[t.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var e=i(this).table;e&&o(e).insertRow(0,"th");var t=e.getElementsByTagName("th")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},UE.commands.deletetitle={queryCommandState:function(){var e=i(this).table;if(e){var t=e.rows[0];return"th"==t.cells[t.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var e=i(this).table;e&&domUtils.remove(e.rows[0]);var t=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},UE.commands.inserttitlecol={queryCommandState:function(){var e=i(this).table;return e?e.rows[e.rows.length-1].getElementsByTagName("th").length?-1:0:-1},execCommand:function(t){var a=i(this).table;a&&o(a).insertCol(0,"th"),e(a,this);var l=a.getElementsByTagName("th")[0];this.selection.getRange().setStart(l,0).setCursor(!1,!0)}},UE.commands.deletetitlecol={queryCommandState:function(){var e=i(this).table;return e&&e.rows[e.rows.length-1].getElementsByTagName("th").length?0:-1},execCommand:function(){var t=i(this).table;if(t)for(var a=0;a<t.rows.length;a++)domUtils.remove(t.rows[a].children[0]);e(t,this);var l=t.getElementsByTagName("td")[0];this.selection.getRange().setStart(l,0).setCursor(!1,!0)}},UE.commands.mergeright={queryCommandState:function(e){var t=i(this),a=t.table,l=t.cell;if(!a||!l)return-1;var s=o(a);if(s.selectedTds.length)return-1;var r=s.getCellInfo(l),n=r.colIndex+r.colSpan;if(n>=s.colsNum)return-1;var c=s.indexTable[r.rowIndex][n],d=a.rows[c.rowIndex].cells[c.cellIndex];return d&&l.tagName==d.tagName&&c.rowIndex==r.rowIndex&&c.rowSpan==r.rowSpan?0:-1},execCommand:function(e){var t=this.selection.getRange(),a=t.createBookmark(!0),l=i(this).cell;o(l).mergeRight(l),t.moveToBookmark(a).select()}},UE.commands.mergedown={queryCommandState:function(e){var t=i(this),a=t.table,l=t.cell;if(!a||!l)return-1;var s=o(a);if(s.selectedTds.length)return-1;var r=s.getCellInfo(l),n=r.rowIndex+r.rowSpan;if(n>=s.rowsNum)return-1;var c=s.indexTable[n][r.colIndex],d=a.rows[c.rowIndex].cells[c.cellIndex];return d&&l.tagName==d.tagName&&c.colIndex==r.colIndex&&c.colSpan==r.colSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),a=i(this).cell;o(a).mergeDown(a),e.moveToBookmark(t).select()}},UE.commands.mergecells={queryCommandState:function(){return l(this)?0:-1},execCommand:function(){var e=l(this);if(e&&e.selectedTds.length){var t=e.selectedTds[0];e.mergeRange();var a=this.selection.getRange();domUtils.isEmptyBlock(t)?a.setStart(t,0).collapse(!0):a.selectNodeContents(t),a.select()}}},UE.commands.insertrow={queryCommandState:function(){var e=i(this),t=e.cell;return t&&("TD"==t.tagName||"TH"==t.tagName&&e.tr!==e.table.rows[0])&&o(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),a=i(this),l=a.cell,s=a.table,r=o(s),n=r.getCellInfo(l);if(r.selectedTds.length)for(var c=r.cellsRange,d=0,u=c.endRowIndex-c.beginRowIndex+1;d<u;d++)r.insertRow(c.beginRowIndex,l);else r.insertRow(n.rowIndex,l);e.moveToBookmark(t).select(),"enabled"===s.getAttribute("interlaced")&&this.fireEvent("interlacetable",s)}},UE.commands.insertrownext={queryCommandState:function(){var e=i(this),t=e.cell;return t&&"TD"==t.tagName&&o(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),a=i(this),l=a.cell,s=a.table,r=o(s),n=r.getCellInfo(l);if(r.selectedTds.length)for(var c=r.cellsRange,d=0,u=c.endRowIndex-c.beginRowIndex+1;d<u;d++)r.insertRow(c.endRowIndex+1,l);else r.insertRow(n.rowIndex+n.rowSpan,l);e.moveToBookmark(t).select(),"enabled"===s.getAttribute("interlaced")&&this.fireEvent("interlacetable",s)}},UE.commands.deleterow={queryCommandState:function(){return i(this).cell?0:-1},execCommand:function(){var e=i(this).cell,t=o(e),a=t.cellsRange,l=t.getCellInfo(e),s=t.getVSideCell(e),r=t.getVSideCell(e,!0),n=this.selection.getRange();if(utils.isEmptyObject(a))t.deleteRow(l.rowIndex);else for(var c=a.beginRowIndex;c<a.endRowIndex+1;c++)t.deleteRow(a.beginRowIndex);var d=t.table;if(d.getElementsByTagName("td").length)if(1==l.rowSpan||l.rowSpan==a.endRowIndex-a.beginRowIndex+1)(r||s)&&n.selectNodeContents(r||s).setCursor(!1,!0);else{var u=t.getCell(l.rowIndex,t.indexTable[l.rowIndex][l.colIndex].cellIndex);u&&n.selectNodeContents(u).setCursor(!1,!0)}else{var p=d.nextSibling;domUtils.remove(d),p&&n.setStart(p,0).setCursor(!1,!0)}"enabled"===d.getAttribute("interlaced")&&this.fireEvent("interlacetable",d)}},UE.commands.insertcol={queryCommandState:function(e){var t=i(this),a=t.cell;return a&&("TD"==a.tagName||"TH"==a.tagName&&a!==t.tr.cells[0])&&o(t.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var t=this.selection.getRange(),a=t.createBookmark(!0);if(-1!=this.queryCommandState(e)){var l=i(this).cell,s=o(l),r=s.getCellInfo(l);if(s.selectedTds.length)for(var n=s.cellsRange,c=0,d=n.endColIndex-n.beginColIndex+1;c<d;c++)s.insertCol(n.beginColIndex,l);else s.insertCol(r.colIndex,l);t.moveToBookmark(a).select(!0)}}},UE.commands.insertcolnext={queryCommandState:function(){var e=i(this);return e.cell&&o(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),a=i(this).cell,l=o(a),s=l.getCellInfo(a);if(l.selectedTds.length)for(var r=l.cellsRange,n=0,c=r.endColIndex-r.beginColIndex+1;n<c;n++)l.insertCol(r.endColIndex+1,a);else l.insertCol(s.colIndex+s.colSpan,a);e.moveToBookmark(t).select()}},UE.commands.deletecol={queryCommandState:function(){return i(this).cell?0:-1},execCommand:function(){var e=i(this).cell,t=o(e),a=t.cellsRange,l=t.getCellInfo(e),s=t.getHSideCell(e),r=t.getHSideCell(e,!0);if(utils.isEmptyObject(a))t.deleteCol(l.colIndex);else for(var n=a.beginColIndex;n<a.endColIndex+1;n++)t.deleteCol(a.beginColIndex);var c=t.table,d=this.selection.getRange();if(c.getElementsByTagName("td").length)domUtils.inDoc(e,this.document)?d.setStart(e,0).setCursor(!1,!0):r&&domUtils.inDoc(r,this.document)?d.selectNodeContents(r).setCursor(!1,!0):s&&domUtils.inDoc(s,this.document)&&d.selectNodeContents(s).setCursor(!0,!0);else{var u=c.nextSibling;domUtils.remove(c),u&&d.setStart(u,0).setCursor(!1,!0)}}},UE.commands.splittocells={queryCommandState:function(){var e=i(this),t=e.cell;return t?o(e.table).selectedTds.length>0?-1:t&&(t.colSpan>1||t.rowSpan>1)?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),a=i(this).cell;o(a).splitToCells(a),e.moveToBookmark(t).select()}},UE.commands.splittorows={queryCommandState:function(){var e=i(this),t=e.cell;return t?o(e.table).selectedTds.length>0?-1:t&&t.rowSpan>1?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),a=i(this).cell;o(a).splitToRows(a),e.moveToBookmark(t).select()}},UE.commands.splittocols={queryCommandState:function(){var e=i(this),t=e.cell;return t?o(e.table).selectedTds.length>0?-1:t&&t.colSpan>1?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),a=i(this).cell;o(a).splitToCols(a),e.moveToBookmark(t).select()}},UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return i(this).table?0:-1},execCommand:function(t){var a=i(this).table;if(a)if("adaptbywindow"==t)e(a,this);else{var l=domUtils.getElementsByTagName(a,"td th");utils.each(l,function(e){e.removeAttribute("width")}),a.removeAttribute("width")}}},UE.commands.averagedistributecol={queryCommandState:function(){var e=l(this);return e&&(e.isFullRow()||e.isFullCol())?0:-1},execCommand:function(e){var t=this,a=l(t);a&&a.selectedTds.length&&function(e){utils.each(domUtils.getElementsByTagName(a.table,"th"),function(e){e.setAttribute("width","")});var t=a.isFullRow()?domUtils.getElementsByTagName(a.table,"td"):a.selectedTds;utils.each(t,function(t){1==t.colSpan&&t.setAttribute("width",e)})}(function(){var e=a.table,i=0,l=0,o=s(t,e);if(a.isFullRow())i=e.offsetWidth,l=a.colsNum;else for(var r,n=a.cellsRange.beginColIndex,c=a.cellsRange.endColIndex,d=n;d<=c;)i+=(r=a.selectedTds[d]).offsetWidth,d+=r.colSpan,l+=1;return Math.ceil(i/l)-2*o.tdBorder-2*o.tdPadding}())}},UE.commands.averagedistributerow={queryCommandState:function(){var e=l(this);return e?e.selectedTds&&/th/gi.test(e.selectedTds[0].tagName)?-1:e.isFullRow()||e.isFullCol()?0:-1:-1},execCommand:function(e){var t=this,a=l(t);a&&a.selectedTds.length&&function(e){var t=a.isFullCol()?domUtils.getElementsByTagName(a.table,"td"):a.selectedTds;utils.each(t,function(t){1==t.rowSpan&&t.setAttribute("height",e)})}(function(){var e,i=0,l=a.table,o=s(t,l),r=parseInt(domUtils.getComputedStyle(l.getElementsByTagName("td")[0],"padding-top"));if(a.isFullCol()){var n,c,d=domUtils.getElementsByTagName(l,"caption"),u=domUtils.getElementsByTagName(l,"th");d.length>0&&(n=d[0].offsetHeight),u.length>0&&(c=u[0].offsetHeight),i=l.offsetHeight-(n||0)-(c||0),e=0==u.length?a.rowsNum:a.rowsNum-1}else{for(var p=a.cellsRange.beginRowIndex,m=a.cellsRange.endRowIndex,h=0,f=domUtils.getElementsByTagName(l,"tr"),g=p;g<=m;g++)i+=f[g].offsetHeight,h+=1;e=h}return browser.ie&&browser.version<9?Math.ceil(i/e):Math.ceil(i/e)-2*o.tdBorder-2*r}())}},UE.commands.cellalignment={queryCommandState:function(){return i(this).table?0:-1},execCommand:function(e,t){var a=this,i=l(a);if(i)utils.each(i.selectedTds,function(e){domUtils.setAttributes(e,t)});else{var s=a.selection.getStart(),o=s&&domUtils.findParentByTagName(s,["td","th","caption"],!0);/caption/gi.test(o.tagName)?(o.style.textAlign=t.align,o.style.verticalAlign=t.vAlign):domUtils.setAttributes(o,t),a.selection.getRange().setCursor(!0)}},queryCommandValue:function(e){var a=i(this).cell;if(a||(a=t(this)[0]),a){var l=UE.UETable.getUETable(a).selectedTds;return!l.length&&(l=a),UE.UETable.getTableCellAlignState(l)}return null}},UE.commands.tablealignment={queryCommandState:function(){return browser.ie&&browser.version<8?-1:i(this).table?0:-1},execCommand:function(e,t){var a=this.selection.getStart(),i=a&&domUtils.findParentByTagName(a,["table"],!0);i&&i.setAttribute("align",t)}},UE.commands.edittable={queryCommandState:function(){return i(this).table?0:-1},execCommand:function(e,t){var a=this.selection.getRange(),i=domUtils.findParentByTagName(a.startContainer,"table");if(i){var l=domUtils.getElementsByTagName(i,"td").concat(domUtils.getElementsByTagName(i,"th"),domUtils.getElementsByTagName(i,"caption"));utils.each(l,function(e){e.style.borderColor=t})}}},UE.commands.edittd={queryCommandState:function(){return i(this).table?0:-1},execCommand:function(e,t){var a=l(this);if(a)utils.each(a.selectedTds,function(e){e.style.backgroundColor=t});else{var i=this.selection.getStart(),s=i&&domUtils.findParentByTagName(i,["td","th","caption"],!0);s&&(s.style.backgroundColor=t)}}},UE.commands.settablebackground={queryCommandState:function(){return t(this).length>1?0:-1},execCommand:function(e,a){var i;i=t(this),o(i[0]).setBackground(i,a)}},UE.commands.cleartablebackground={queryCommandState:function(){var e=t(this);if(!e.length)return-1;for(var a,i=0;a=e[i++];)if(""!==a.style.backgroundColor)return 0;return-1},execCommand:function(){var e=t(this);o(e[0]).removeBackground(e)}},UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(e){var t=i(this).table;if(!t)return-1;var a=t.getAttribute("interlaced");return"interlacetable"==e?"enabled"===a?-1:0:a&&"disabled"!==a?0:-1},execCommand:function(e,t){var a=i(this).table;"interlacetable"==e?(a.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",a,t)):(a.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",a))}},UE.commands.setbordervisible={queryCommandState:function(e){return i(this).table?0:-1},execCommand:function(){var e=i(this).table;utils.each(domUtils.getElementsByTagName(e,"td"),function(e){e.style.borderWidth="1px",e.style.borderStyle="solid"})}}}(),UE.plugins.table=function(){function e(e,a){t(e,"width",!0),t(e,"height",!0)}function t(e,t,a){e.style[t]&&(a&&e.setAttribute(t,parseInt(e.style[t],10)),e.style[t]="")}function a(e){return"TD"==e.tagName||"TH"==e.tagName?e:(t=domUtils.findParentByTagName(e,"td",!0)||domUtils.findParentByTagName(e,"th",!0))?t:null;var t}function i(e){var t=new RegExp(domUtils.fillChar,"g");if(e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0)return 0;for(var a in dtd.$isNotEmpty)if(e.getElementsByTagName(a).length)return 0;return 1}function l(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+T.document.body.scrollLeft-T.document.body.clientLeft,y:e.clientY+T.document.body.scrollTop-T.document.body.clientTop}}function s(e){if(!v())try{var t,i=a(e.target||e.srcElement);if(I&&(T.body.style.webkitUserSelect="none",(Math.abs(B.x-e.clientX)>L||Math.abs(B.y-e.clientY)>L)&&(p(),I=!1,E=0,m(e))),z&&G)return E=0,T.body.style.webkitUserSelect="none",T.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),t=l(e),n(T,!0,z,t,i),void("h"==z?W.style.left=function(e,t){var a=$(e);if(a){var i=a.getSameEndPosCells(e,"x")[0],s=a.getSameStartPosXCells(e)[0],o=l(t).x,r=(i?domUtils.getXY(i).x:domUtils.getXY(a.table).x)+20,n=s?domUtils.getXY(s).x+s.offsetWidth-20:T.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(T.body,"width"),10);return n-=F,o<(r+=F)?r:o>n?n:o}}(G,e)+"px":"v"==z&&(W.style.top=function(e,t){try{var a=domUtils.getXY(e).y,i=l(t).y;return i<a?a:i}catch(e){}}(G,e)+"px"));if(i){if(!0===T.fireEvent("excludetable",i))return;var s=c(i,t=l(e)),d=domUtils.findParentByTagName(i,"table",!0);if(r(d,i,e,!0)){if(!0===T.fireEvent("excludetable",d))return;T.body.style.cursor="url("+T.options.cursorpath+"h.png),pointer"}else if(r(d,i,e)){if(!0===T.fireEvent("excludetable",d))return;T.body.style.cursor="url("+T.options.cursorpath+"v.png),pointer"}else T.body.style.cursor="text",/\d/.test(s)&&(s=s.replace(/\d/,""),i=$(i).getPreviewCell(i,"v"==s)),n(T,!!i&&!!s,i?s:"",t,i)}else o(!1,d,T)}catch(e){}}function o(e,t,a){if(e)!function(e,t){function a(a,i){clearTimeout(l),l=setTimeout(function(){t.fireEvent("tableClicked",e,i)},300)}function i(a){clearTimeout(l);var i=$(e),s=e.rows[0].cells[0],o=i.getLastCell(),r=i.getCellsRange(s,o);t.selection.getRange().setStart(s,0).setCursor(!1,!0),i.setSelected(r)}var l,s=domUtils.getXY(e),o=e.ownerDocument;if(V&&V.parentNode)return V;(V=o.createElement("div")).contentEditable=!1,V.innerHTML="",V.style.cssText="width:15px;height:15px;background-image:url("+t.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(s.y-15)+"px;left:"+s.x+"px;",domUtils.unSelectable(V),V.onmouseover=function(e){H=!0},V.onmouseout=function(e){H=!1},domUtils.on(V,"click",function(e,t){a(t,this)}),domUtils.on(V,"dblclick",function(e,t){i(t)}),domUtils.on(V,"dragstart",function(e,t){domUtils.preventDefault(t)}),o.body.appendChild(V)}(t,a);else{if(H)return;setTimeout(function(){!H&&V&&V.parentNode&&V.parentNode.removeChild(V)},2e3)}}function r(e,t,a,i){var s=l(a),o=c(t,s);if(i){var r=e.getElementsByTagName("caption")[0],n=r?r.offsetHeight:0;return"v1"==o&&s.y-domUtils.getXY(e).y-n<8}return"h1"==o&&s.x-domUtils.getXY(e).x<8}function n(e,t,a,i,l){try{e.body.style.cursor="h"==a?"col-resize":"v"==a?"row-resize":"text",browser.ie&&(!a||J||U(e)?x(e):(C(e,e.document),k(a,l))),q=t}catch(e){}}function c(e,t){var a=domUtils.getXY(e);return a?a.x+e.offsetWidth-t.x<D?"h":t.x-a.x<D?"h1":a.y+e.offsetHeight-t.y<D?"v":t.y-a.y<D?"v1":"":""}function d(e,t){if(!v())if(B={x:t.clientX,y:t.clientY},2==t.button){var a=U(T),i=!1;if(a){var l=S(T,t);utils.each(a.selectedTds,function(e){e===l&&(i=!0)}),i?(l=a.selectedTds[0],setTimeout(function(){T.selection.getRange().setStart(l,0).setCursor(!1,!0)},0)):(j(domUtils.getElementsByTagName(T.body,"th td")),a.clearSelected())}}else!function(e){if(j(domUtils.getElementsByTagName(T.body,"td th")),utils.each(T.document.getElementsByTagName("table"),function(e){e.ueTable=null}),O=S(T,e)){var t=domUtils.findParentByTagName(O,"table",!0);ut=$(t),ut&&ut.clearSelected(),q?function(e){browser.ie&&(e=function(e){var t=["pageX","pageY","clientX","clientY","srcElement","target"],a={};if(e)for(var i,l,s=0;i=t[s];s++)(l=e[i])&&(a[i]=l);return a}(e)),p(),I=!0,N=setTimeout(function(){m(e)},P)}(e):(T.document.body.style.webkitUserSelect="",J=!0,T.addListener("mouseover",f))}}(t)}function u(e){E=0;var t,i=a((e=e||T.window.event).target||e.srcElement);if(i&&(t=c(i,l(e)))){if(x(T),"h1"==t)if(t="h",r(domUtils.findParentByTagName(i,"table"),i,e))T.execCommand("adaptbywindow");else if(i=$(i).getPreviewCell(i)){T.selection.getRange().selectNodeContents(i).setCursor(!0,!0)}if("h"==t){var s=$(i),o=b(i,s.table,!0);o=function(e,t){for(var a=[],i=null,l=0,s=e.length;l<s;l++)(i=e[l][t])&&a.push(i);return a}(o,"left"),s.width=s.offsetWidth;var n=[],d=[];utils.each(o,function(e){n.push(e.offsetWidth)}),utils.each(o,function(e){e.removeAttribute("width")}),window.setTimeout(function(){var e=!0;utils.each(o,function(t,a){var i=t.offsetWidth;return i>n[a]?(e=!1,!1):void d.push(i)});var t=e?d:n;utils.each(o,function(e,a){e.width=t[a]-_()})},0)}}}function p(){N&&clearTimeout(N),N=null}function m(e){if(I=!1,O=e.target||e.srcElement){var t=c(O,l(e));/\d/.test(t)&&(t=t.replace(/\d/,""),O=$(O).getPreviewCell(O,"v"==t)),x(T),C(T,T.document),T.fireEvent("saveScene"),k(t,O),J=!0,z=t,G=O}}function h(e,t){if(!v()){if(p(),I=!1,q&&(E=++E%3,B={x:t.clientX,y:t.clientY},setTimeout(function(){E>0&&E--},P),2===E))return E=0,void u(t);if(2!=t.button){var a=this,i=a.selection.getRange(),l=domUtils.findParentByTagName(i.startContainer,"table",!0),s=domUtils.findParentByTagName(i.endContainer,"table",!0);if((l||s)&&(l===s?(l=domUtils.findParentByTagName(i.startContainer,["td","th","caption"],!0))!==(s=domUtils.findParentByTagName(i.endContainer,["td","th","caption"],!0))&&a.selection.clearRange():a.selection.clearRange()),J=!1,a.document.body.style.webkitUserSelect="",z&&G&&(a.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),E=0,W=a.document.getElementById("ue_tableDragLine"))){var o=domUtils.getXY(G),r=domUtils.getXY(W);switch(z){case"h":!function(e,t){var a=$(e);if(a){var i=a.table,l=b(e,i);i.style.width="",i.removeAttribute("width"),t=function(e,t,a){if((e-=_())<0)return 0;var i=(e-=y(t))<0?"left":"right";return e=Math.abs(e),utils.each(a,function(t){var a=t[i];a&&(e=Math.min(e,y(a)-F))}),e=e<0?0:e,"left"===i?-e:e}(t,e,l),e.nextSibling?utils.each(l,function(e){e.left.width=+e.left.width+t,e.right&&(e.right.width=+e.right.width-t)}):utils.each(l,function(e){e.left.width-=-t})}}(G,r.x-o.x);break;case"v":!function(e,t){if(!(Math.abs(t)<10)){var a=$(e);if(a)for(var i,l=a.getSameEndPosCells(e,"y"),s=l[0]?l[0].offsetHeight:0,o=0;i=l[o++];)g(i,t,s)}}(G,r.y-o.y-G.offsetHeight)}return z="",G=null,x(a),void a.fireEvent("saveScene")}if(O){var n=$(O),c=n?n.selectedTds[0]:null;if(c)i=new dom.Range(a.document),domUtils.isEmptyBlock(c)?i.setStart(c,0).setCursor(!1,!0):i.selectNodeContents(c).shrinkBoundary().setCursor(!1,!0);else if(!(i=a.selection.getRange().shrinkBoundary()).collapsed){l=domUtils.findParentByTagName(i.startContainer,["td","th"],!0),s=domUtils.findParentByTagName(i.endContainer,["td","th"],!0);(l&&!s||!l&&s||l&&s&&l!==s)&&i.setCursor(!1,!0)}O=null,a.removeListener("mouseover",f)}else{var d=domUtils.findParentByTagName(t.target||t.srcElement,"td",!0);if(d||(d=domUtils.findParentByTagName(t.target||t.srcElement,"th",!0)),d&&("TD"==d.tagName||"TH"==d.tagName)){if(!0===a.fireEvent("excludetable",d))return;(i=new dom.Range(a.document)).setStart(d,0).setCursor(!1,!0)}}a._selectionChange(250,t)}}}function f(e,t){if(!v()){var a=this,i=t.target||t.srcElement;if(M=domUtils.findParentByTagName(i,"td",!0)||domUtils.findParentByTagName(i,"th",!0),O&&M&&("TD"==O.tagName&&"TD"==M.tagName||"TH"==O.tagName&&"TH"==M.tagName)&&domUtils.findParentByTagName(O,"table")==domUtils.findParentByTagName(M,"table")){var l=$(M);if(O!=M){a.document.body.style.webkitUserSelect="none",a.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var s=l.getCellsRange(O,M);l.setSelected(s)}else a.document.body.style.webkitUserSelect="",l.clearSelected()}t.preventDefault?t.preventDefault():t.returnValue=!1}}function g(e,t,a){var i=parseInt(domUtils.getComputedStyle(e,"line-height"),10),l=a+t;t=l<i?i:l,e.style.height&&(e.style.height=""),1==e.rowSpan?e.setAttribute("height",t):e.removeAttribute&&e.removeAttribute("height")}function v(){return"false"===T.body.contentEditable}function b(e,t,a){if(t||(t=domUtils.findParentByTagName(e,"table")),!t)return null;for(var i=(domUtils.getNodeIndex(e),e),l=t.rows,s=0;i;)1===i.nodeType&&(s+=i.colSpan||1),i=i.previousSibling;i=null;var o=[];return utils.each(l,function(e){var t=e.cells,i=0;utils.each(t,function(e){return(i+=e.colSpan||1)===s?(o.push({left:e,right:e.nextSibling||null}),!1):i>s?(a&&o.push({left:e}),!1):void 0})}),o}function y(e){var t=0;t=e.offsetWidth-_();e.nextSibling||(t-=function(e){if(tab=domUtils.findParentByTagName(e,"table",!1),void 0===tab.offsetVal){var t=e.previousSibling;tab.offsetVal=t&&e.offsetWidth-t.offsetWidth===A.borderWidth?A.borderWidth:0}return tab.offsetVal}(e)),t=t<0?0:t;try{e.width=t}catch(e){}return t}function _(){if(void 0===A.tabcellSpace){var e=T.document.createElement("table"),t=T.document.createElement("tbody"),a=T.document.createElement("tr"),i=T.document.createElement("td"),l=null;i.style.cssText="border: 0;",i.width=1,a.appendChild(i),a.appendChild(l=i.cloneNode(!1)),t.appendChild(a),e.appendChild(t),e.style.cssText="visibility: hidden;",T.body.appendChild(e),A.paddingSpace=i.offsetWidth-1;var s=e.offsetWidth;i.style.cssText="",l.style.cssText="",A.borderWidth=(e.offsetWidth-s)/3,A.tabcellSpace=A.paddingSpace+A.borderWidth,T.body.removeChild(e)}return _=function(){return A.tabcellSpace},A.tabcellSpace}function C(e,t){J||(W=e.document.createElement("div"),domUtils.setAttributes(W,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),e.body.appendChild(W))}function x(e){if(!J)for(var t;t=e.document.getElementById("ue_tableDragLine");)domUtils.remove(t)}function k(e,t){if(t){var a,i=domUtils.findParentByTagName(t,"table"),l=i.getElementsByTagName("caption"),s=i.offsetWidth,o=i.offsetHeight-(l.length>0?l[0].offsetHeight:0),r=domUtils.getXY(i),n=domUtils.getXY(t);switch(e){case"h":a="height:"+o+"px;top:"+(r.y+(l.length>0?l[0].offsetHeight:0))+"px;left:"+(n.x+t.offsetWidth),W.style.cssText=a+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":a="width:"+s+"px;left:"+r.x+"px;top:"+(n.y+t.offsetHeight),W.style.cssText=a+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}function w(e,t){for(var a,i,l=domUtils.getElementsByTagName(e.body,"table"),s=0;i=l[s++];){var o=domUtils.getElementsByTagName(i,"td");o[0]&&(t?(a=o[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/gi.test(a)&&domUtils.addClass(i,"noBorderTable")):domUtils.removeClasses(i,"noBorderTable"))}}function S(e,t){var a,i=domUtils.findParentByTagName(t.target||t.srcElement,["td","th"],!0);if(!i)return null;if(a=c(i,l(t)),!i)return null;if("h1"===a&&i.previousSibling){var s=domUtils.getXY(i),o=i.offsetWidth;Math.abs(s.x+o-t.clientX)>o/3&&(i=i.previousSibling)}else if("v1"===a&&i.parentNode.previousSibling){s=domUtils.getXY(i);var r=i.offsetHeight;Math.abs(s.y+r-t.clientY)>r/3&&(i=i.parentNode.previousSibling.firstChild)}return i&&!0!==e.fireEvent("excludetable",i)?i:null}var T=this,N=null,F=5,I=!1,D=5,L=10,E=0,B=null,P=360,A=UE.UETable,$=function(e){return A.getUETable(e)},U=function(e){return A.getUETableBySelected(e)},R=function(e,t){return A.getDefaultValue(e,t)},j=function(e){return A.removeSelectedClass(e)};T.ready(function(){var e=this,t=e.selection.getText;e.selection.getText=function(){var a=U(e);if(a){var i="";return utils.each(a.selectedTds,function(e){i+=e[browser.ie?"innerText":"textContent"]}),i}return t.call(e.selection)}});var O=null,M=null,z="",q=!1,V=null,H=!1,W=null,G=null,J=!1;T.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:T.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]}),T.getUETable=$;var Y={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};T.ready(function(){var t,l,c,u;utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",T.document),T.addListener("keydown",function(e,a){var s=this,o=a.keyCode||a.which;if(8==o){var r;(r=U(s))&&r.selectedTds.length&&(r.isFullCol()?s.execCommand("deletecol"):r.isFullRow()?s.execCommand("deleterow"):s.fireEvent("delcells"),domUtils.preventDefault(a));var n=domUtils.findParentByTagName(s.selection.getStart(),"caption",!0),d=s.selection.getRange();if(d.collapsed&&n&&i(n)){s.fireEvent("saveScene");var u=n.parentNode;domUtils.remove(n),u&&d.setStart(u.rows[0].cells[0],0).setCursor(!1,!0),s.fireEvent("saveScene")}}if(46==o&&(r=U(s))){s.fireEvent("saveScene");for(var p=0;y=r.selectedTds[p++];)domUtils.fillNode(s.document,y);s.fireEvent("saveScene"),domUtils.preventDefault(a)}if(13==o){var m=s.selection.getRange();if(n=domUtils.findParentByTagName(m.startContainer,"caption",!0)){var u=domUtils.findParentByTagName(n,"table");return m.collapsed?n&&m.setStart(u.rows[0].cells[0],0).setCursor(!1,!0):(m.deleteContents(),s.fireEvent("saveScene")),void domUtils.preventDefault(a)}if(m.collapsed)if(u=domUtils.findParentByTagName(m.startContainer,"table")){var h=u.rows[0].cells[0],f=domUtils.findParentByTagName(s.selection.getStart(),["td","th"],!0),g=u.previousSibling;if(h===f&&(!g||1==g.nodeType&&"TABLE"==g.tagName)&&domUtils.isStartInblock(m)){var v=domUtils.findParent(s.selection.getStart(),function(e){return domUtils.isBlockElm(e)},!0);v&&(/t(h|d)/i.test(v.tagName)||v===f.firstChild)&&(s.execCommand("insertparagraphbeforetable"),domUtils.preventDefault(a))}}}if((a.ctrlKey||a.metaKey)&&"67"==a.keyCode&&(t=null,r=U(s))){var b=r.selectedTds;l=r.isFullCol(),c=r.isFullRow(),t=[[r.cloneCell(b[0],null,!0)]];var y;for(p=1;y=b[p];p++)y.parentNode!==b[p-1].parentNode?t.push([r.cloneCell(y,null,!0)]):t[t.length-1].push(r.cloneCell(y,null,!0))}}),T.addListener("tablehasdeleted",function(){n(this,!1,""),V&&domUtils.remove(V)}),T.addListener("beforepaste",function(a,s){var o=this,r=o.selection.getRange();if(domUtils.findParentByTagName(r.startContainer,"caption",!0))return(d=o.document.createElement("div")).innerHTML=s.html,void(s.html=d[browser.ie9below?"innerText":"textContent"]);var n,d,u=U(o);if(t){o.fireEvent("saveScene");r=o.selection.getRange();var p,m,h=domUtils.findParentByTagName(r.startContainer,["td","th"],!0);if(h){var f=$(h);if(c){var g=f.getCellInfo(h).rowIndex;"TH"==h.tagName&&g++;for(var v=0;x=t[v++];){for(var b=f.insertRow(g++,"td"),y=0;S=x[y];y++){var _=b.cells[y];_||(_=b.insertCell(y)),_.innerHTML=S.innerHTML,S.getAttribute("width")&&_.setAttribute("width",S.getAttribute("width")),S.getAttribute("vAlign")&&_.setAttribute("vAlign",S.getAttribute("vAlign")),S.getAttribute("align")&&_.setAttribute("align",S.getAttribute("align")),S.style.cssText&&(_.style.cssText=S.style.cssText)}for(y=0;(S=b.cells[y])&&x[y];y++)S.innerHTML=x[y].innerHTML,x[y].getAttribute("width")&&S.setAttribute("width",x[y].getAttribute("width")),x[y].getAttribute("vAlign")&&S.setAttribute("vAlign",x[y].getAttribute("vAlign")),x[y].getAttribute("align")&&S.setAttribute("align",x[y].getAttribute("align")),x[y].style.cssText&&(S.style.cssText=x[y].style.cssText)}}else{if(l){w=f.getCellInfo(h);for(var C=0,x=(y=0,t[0]);S=x[y++];)C+=S.colSpan||1;for(o.__hasEnterExecCommand=!0,v=0;v<C;v++)o.execCommand("insertcol");o.__hasEnterExecCommand=!1,"TH"==(h=f.table.rows[0].cells[w.cellIndex]).tagName&&(h=f.table.rows[1].cells[w.cellIndex])}for(v=0;x=t[v++];){p=h;for(y=0;S=x[y++];)if(h)h.innerHTML=S.innerHTML,S.getAttribute("width")&&h.setAttribute("width",S.getAttribute("width")),S.getAttribute("vAlign")&&h.setAttribute("vAlign",S.getAttribute("vAlign")),S.getAttribute("align")&&h.setAttribute("align",S.getAttribute("align")),S.style.cssText&&(h.style.cssText=S.style.cssText),m=h,h=h.nextSibling;else{var k=S.cloneNode(!0);domUtils.removeAttributes(k,["class","rowSpan","colSpan"]),m.parentNode.appendChild(k)}if(h=f.getNextCell(p,!0,!0),!t[v])break;if(!h){var w=f.getCellInfo(p);f.table.insertRow(f.table.rows.length),f.update(),h=f.getVSideCell(p,!0)}}}f.update()}else{u=o.document.createElement("table");for(v=0;x=t[v++];){var S;for(b=u.insertRow(u.rows.length),y=0;S=x[y++];)k=A.cloneCell(S,null,!0),domUtils.removeAttributes(k,["class"]),b.appendChild(k);2==y&&k.rowSpan>1&&(k.rowSpan=1)}var T=R(o),N=o.body.offsetWidth-2*parseInt(domUtils.getComputedStyle(o.body,"margin-left"),10)-2*T.tableBorder-(o.options.offsetWidth||0);o.execCommand("insertHTML","<table  "+(l&&c?'width="'+N+'"':"")+">"+u.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}return o.fireEvent("contentchange"),o.fireEvent("saveScene"),s.html="",!0}(d=o.document.createElement("div")).innerHTML=s.html,n=d.getElementsByTagName("table"),domUtils.findParentByTagName(o.selection.getStart(),"table")?(utils.each(n,function(e){domUtils.remove(e)}),domUtils.findParentByTagName(o.selection.getStart(),"caption",!0)&&(d.innerHTML=d[browser.ie?"innerText":"textContent"])):utils.each(n,function(t){e(t),domUtils.removeAttributes(t,["style","border"]),utils.each(domUtils.getElementsByTagName(t,"td"),function(t){i(t)&&domUtils.fillNode(o.document,t),e(t)})}),s.html=d.innerHTML}),T.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(T.body,"table"),function(e){if(e.offsetWidth>T.body.offsetWidth){var t=R(T,e);e.style.width=T.body.offsetWidth-2*parseInt(domUtils.getComputedStyle(T.body,"margin-left"),10)-2*t.tableBorder-(T.options.offsetWidth||0)+"px"}})}),T.addListener("blur",function(){t=null}),T.addListener("keydown",function(){clearTimeout(u),u=setTimeout(function(){var e=T.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,["th","td"],!0);if(t){var a=t.parentNode.parentNode.parentNode;a.offsetWidth>a.getAttribute("width")&&(t.style.wordBreak="break-all")}},100)}),T.addListener("selectionchange",function(){n(T,!1,"")}),T.addListener("contentchange",function(){var e=this;if(x(e),!U(e)){var t=e.selection.getRange().startContainer;t=domUtils.findParentByTagName(t,["td","th"],!0),utils.each(domUtils.getElementsByTagName(e.document,"table"),function(t){!0!==e.fireEvent("excludetable",t)&&(t.ueTable=new A(t),t.onmouseover=function(){e.fireEvent("tablemouseover",t)},t.onmousemove=function(){e.fireEvent("tablemousemove",t),e.options.tableDragable&&o(!0,this,e),utils.defer(function(){e.fireEvent("contentchange",50)},!0)},t.onmouseout=function(){e.fireEvent("tablemouseout",t),n(e,!1,""),x(e)},t.onclick=function(t){var i=a((t=e.window.event||t).target||t.srcElement);if(i){var l,s=$(i),o=s.table,n=s.getCellInfo(i),c=e.selection.getRange();if(r(o,i,t,!0)){var d=s.getCell(s.indexTable[s.rowsNum-1][n.colIndex].rowIndex,s.indexTable[s.rowsNum-1][n.colIndex].cellIndex);return void(t.shiftKey&&s.selectedTds.length?s.selectedTds[0]!==d?(l=s.getCellsRange(s.selectedTds[0],d),s.setSelected(l)):c&&c.selectNodeContents(d).select():i!==d?(l=s.getCellsRange(i,d),s.setSelected(l)):c&&c.selectNodeContents(d).select())}if(r(o,i,t)){var u=s.getCell(s.indexTable[n.rowIndex][s.colsNum-1].rowIndex,s.indexTable[n.rowIndex][s.colsNum-1].cellIndex);t.shiftKey&&s.selectedTds.length?s.selectedTds[0]!==u?(l=s.getCellsRange(s.selectedTds[0],u),s.setSelected(l)):c&&c.selectNodeContents(u).select():i!==u?(l=s.getCellsRange(i,u),s.setSelected(l)):c&&c.selectNodeContents(u).select()}}})}),w(e,!0)}}),domUtils.on(T.document,"mousemove",s),domUtils.on(T.document,"mouseout",function(e){"TABLE"==(e.target||e.srcElement).tagName&&n(T,!1,"")}),T.addListener("interlacetable",function(e,t,a){if(t)for(var i=t.rows,l=i.length,s=function(e,t,a){return e[t]?e[t]:a?e[t%e.length]:""},o=0;o<l;o++)i[o].className=s(a||this.options.classList,o,!0)}),T.addListener("uninterlacetable",function(e,t){if(t)for(var a=t.rows,i=this.options.classList,l=a.length,s=0;s<l;s++)domUtils.removeClasses(a[s],i)}),T.addListener("mousedown",d),T.addListener("mouseup",h),domUtils.on(T.body,"dragstart",function(e){h.call(T,"dragstart",e)}),T.addOutputRule(function(e){utils.each(e.getNodesByTagName("div"),function(e){"ue_tableDragLine"==e.getAttr("id")&&e.parentNode.removeChild(e)})});var p=0;T.addListener("mousedown",function(){p=0}),T.addListener("tabkeydown",function(){var e=this.selection.getRange(),t=e.getCommonAncestor(!0,!0),a=domUtils.findParentByTagName(t,"table");if(a){if(domUtils.findParentByTagName(t,"caption",!0)){(l=domUtils.getElementsByTagName(a,"th td"))&&l.length&&e.setStart(l[0],0).setCursor(!1,!0)}else{var l=domUtils.findParentByTagName(t,["td","th"],!0),s=$(l);p=l.rowSpan>1?p:s.getCellInfo(l).rowIndex;var o=s.getTabNextCell(l,p);o?i(o)?e.setStart(o,0).setCursor(!1,!0):e.selectNodeContents(o).select():(T.fireEvent("saveScene"),T.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),T.__hasEnterExecCommand=!1,(e=this.selection.getRange()).setStart(a.rows[a.rows.length-1].cells[0],0).setCursor(),T.fireEvent("saveScene"))}return!0}}),browser.ie&&T.addListener("selectionchange",function(){n(this,!1,"")}),T.addListener("keydown",function(e,t){var a=t.keyCode||t.which;if(8!=a&&46!=a){var i=!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey);i&&j(domUtils.getElementsByTagName(this.body,"td"));var l=U(this);l&&i&&l.clearSelected()}}),T.addListener("beforegetcontent",function(){w(this,!1),browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(e){domUtils.isEmptyNode(e)&&(e.innerHTML="&nbsp;")})}),T.addListener("aftergetcontent",function(){w(this,!0)}),T.addListener("getAllHtml",function(){j(T.document.getElementsByTagName("td"))}),T.addListener("fullscreenchanged",function(e,t){if(!t){var a=this.body.offsetWidth/document.body.offsetWidth,i=domUtils.getElementsByTagName(this.body,"table");utils.each(i,function(e){if(e.offsetWidth<T.body.offsetWidth)return!1;var t=domUtils.getElementsByTagName(e,"td"),i=[];utils.each(t,function(e){i.push(e.offsetWidth)});for(var l,s=0;l=t[s];s++)l.setAttribute("width",Math.floor(i[s]*a));e.setAttribute("width",Math.floor(function(e,t,a){var i=e.body;return i.offsetWidth-(t?2*parseInt(domUtils.getComputedStyle(i,"margin-left"),10):0)-2*a.tableBorder-(e.options.offsetWidth||0)}(T,!0,R(T))))})}});var m=T.execCommand;T.execCommand=function(e,t){var a=this;e=e.toLowerCase();var l,s,o=U(a),r=new dom.Range(a.document),n=a.commands[e]||UE.commands[e];if(n){if(!o||Y[e]||n.notNeedUndo||a.__hasEnterExecCommand)s=m.apply(a,arguments);else{a.__hasEnterExecCommand=!0,a.fireEvent("beforeexeccommand",e),l=o.selectedTds;for(var c,d,u,p=-2,h=-2,f=0;u=l[f];f++)i(u)?r.setStart(u,0).setCursor(!1,!0):r.selectNode(u).select(!0),d=a.queryCommandState(e),c=a.queryCommandValue(e),-1!=d&&(p===d&&h===c||(a._ignoreContentChange=!0,s=m.apply(a,arguments),a._ignoreContentChange=!1),p=a.queryCommandState(e),h=a.queryCommandValue(e),domUtils.isEmptyBlock(u)&&domUtils.fillNode(a.document,u));r.setStart(l[0],0).shrinkBoundary(!0).setCursor(!1,!0),a.fireEvent("contentchange"),a.fireEvent("afterexeccommand",e),a.__hasEnterExecCommand=!1,a._selectionChange()}return s}}})},UE.UETable.prototype.sortTable=function(e,t){var a=this.table,i=a.rows,l=[],s="TH"===i[0].cells[0].tagName,o=0;if(this.selectedTds.length){for(var r=this.cellsRange,n=r.endRowIndex+1,c=r.beginRowIndex;c<n;c++)l[c]=i[c];l.splice(0,r.beginRowIndex),o=r.endRowIndex+1===this.rowsNum?0:r.endRowIndex+1}else for(c=0,n=i.length;c<n;c++)l[c]=i[c];var d={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){var a=e.innerText||e.textContent,i=t.innerText||t.textContent;return a.localeCompare(i)},reversebyasc:function(e,t){var a=e.innerHTML;return t.innerHTML.localeCompare(a)},orderbynum:function(e,t){var a=e[browser.ie?"innerText":"textContent"].match(/\d+/),i=t[browser.ie?"innerText":"textContent"].match(/\d+/);return a&&(a=+a[0]),i&&(i=+i[0]),(a||0)-(i||0)},reversebynum:function(e,t){var a=e[browser.ie?"innerText":"textContent"].match(/\d+/),i=t[browser.ie?"innerText":"textContent"].match(/\d+/);return a&&(a=+a[0]),i&&(i=+i[0]),(i||0)-(a||0)}};a.setAttribute("data-sort-type",t&&"string"==typeof t&&d[t]?t:""),s&&l.splice(0,1),l=utils.sort(l,function(a,i){return t&&"function"==typeof t?t.call(this,a.cells[e],i.cells[e]):t&&"number"==typeof t?1:t&&"string"==typeof t&&d[t]?d[t].call(this,a.cells[e],i.cells[e]):d.orderbyasc.call(this,a.cells[e],i.cells[e])});var u=a.ownerDocument.createDocumentFragment(),p=0;for(n=l.length;p<n;p++)u.appendChild(l[p]);var m=a.getElementsByTagName("tbody")[0];o?m.insertBefore(u,i[o-r.endRowIndex+r.beginRowIndex-1]):m.appendChild(u)},UE.plugins.tablesort=function(){var e=this,t=UE.UETable,a=function(e){return t.getUETable(e)},i=function(e){return t.getTableItemsByRange(e)};e.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+e.options.themePath+e.options.theme+"/images/sortable.png);}",e.document),e.addListener("afterexeccommand",function(e,t){"mergeright"!=t&&"mergedown"!=t&&"mergecells"!=t||this.execCommand("disablesort")})}),UE.commands.sorttable={queryCommandState:function(){var e=i(this);if(!e.cell)return-1;for(var t,a=e.table.getElementsByTagName("td"),l=0;t=a[l++];)if(1!=t.rowSpan||1!=t.colSpan)return-1;return 0},execCommand:function(e,t){var l=this.selection.getRange(),s=l.createBookmark(!0),o=i(this),r=o.cell,n=a(o.table),c=n.getCellInfo(r);n.sortTable(c.cellIndex,t),l.moveToBookmark(s);try{l.select()}catch(e){}}},UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(e){var t=i(this).table;if(t&&"enablesort"==e)for(var a=domUtils.getElementsByTagName(t,"th td"),l=0;l<a.length;l++)if(a[l].getAttribute("colspan")>1||a[l].getAttribute("rowspan")>1)return-1;return t?"enablesort"==e^"sortEnabled"!=t.getAttribute("data-sort")?-1:0:-1},execCommand:function(e){var t=i(this).table;t.setAttribute("data-sort","enablesort"==e?"sortEnabled":"sortDisabled"),"enablesort"==e?domUtils.addClass(t,"sortEnabled"):domUtils.removeClasses(t,"sortEnabled")}}},UE.plugins.contextmenu=function(){var e=this;if(e.setOpt("enableContextMenu",!0),!1!==e.getOpt("enableContextMenu")){var t,a=e.getLang("contextMenu"),i=e.options.contextMenu||[{label:a.selectall,cmdName:"selectall"},{label:a.cleardoc,cmdName:"cleardoc",exec:function(){confirm(a.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:a.unlink,cmdName:"unlink"},"-",{group:a.paragraph,icon:"justifyjustify",subMenu:[{label:a.justifyleft,cmdName:"justify",value:"left"},{label:a.justifyright,cmdName:"justify",value:"right"},{label:a.justifycenter,cmdName:"justify",value:"center"},{label:a.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:a.table,icon:"table",subMenu:[{label:a.inserttable,cmdName:"inserttable"},{label:a.deletetable,cmdName:"deletetable"},"-",{label:a.deleterow,cmdName:"deleterow"},{label:a.deletecol,cmdName:"deletecol"},{label:a.insertcol,cmdName:"insertcol"},{label:a.insertcolnext,cmdName:"insertcolnext"},{label:a.insertrow,cmdName:"insertrow"},{label:a.insertrownext,cmdName:"insertrownext"},"-",{label:a.insertcaption,cmdName:"insertcaption"},{label:a.deletecaption,cmdName:"deletecaption"},{label:a.inserttitle,cmdName:"inserttitle"},{label:a.deletetitle,cmdName:"deletetitle"},{label:a.inserttitlecol,cmdName:"inserttitlecol"},{label:a.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:a.mergecells,cmdName:"mergecells"},{label:a.mergeright,cmdName:"mergeright"},{label:a.mergedown,cmdName:"mergedown"},"-",{label:a.splittorows,cmdName:"splittorows"},{label:a.splittocols,cmdName:"splittocols"},{label:a.splittocells,cmdName:"splittocells"},"-",{label:a.averageDiseRow,cmdName:"averagedistributerow"},{label:a.averageDisCol,cmdName:"averagedistributecol"},"-",{label:a.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this),this.getDialog("edittd").open()}},{label:a.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this),this.getDialog("edittable").open()}},{label:a.setbordervisible,cmdName:"setbordervisible"}]},{group:a.tablesort,icon:"tablesort",subMenu:[{label:a.enablesort,cmdName:"enablesort"},{label:a.disablesort,cmdName:"disablesort"},"-",{label:a.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:a.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:a.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:a.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:a.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:a.borderbk,icon:"borderBack",subMenu:[{label:a.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:a.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:a.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:a.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:a.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:a.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:a.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:a.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:a.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:a.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:a.tableright,value:"right"}]},"-",{label:a.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:a.insertparagraphafter,cmdName:"insertparagraph"},{label:a.copy,cmdName:"copy"},{label:a.paste,cmdName:"paste"}];if(i.length){var l=UE.ui.uiUtils;e.addListener("contextmenu",function(s,o){var r=l.getViewportOffsetByEvent(o);e.fireEvent("beforeselectionchange"),t&&t.destroy();for(var n,c=0,d=[];n=i[c];c++){var u;!function(t){if("-"==t)(u=d[d.length-1])&&"-"!==u&&d.push("-");else if(t.hasOwnProperty("group")){for(var i,l=0,s=[];i=t.subMenu[l];l++)!function(t){"-"==t?(u=s[s.length-1])&&"-"!==u?s.push("-"):s.splice(s.length-1):(e.commands[t.cmdName]||UE.commands[t.cmdName]||t.query)&&(t.query?t.query():e.queryCommandState(t.cmdName))>-1&&s.push({label:t.label||e.getLang("contextMenu."+t.cmdName+(t.value||""))||"",className:"edui-for-"+t.cmdName+(t.className?" edui-for-"+t.cmdName+"-"+t.className:""),onclick:t.exec?function(){t.exec.call(e)}:function(){e.execCommand(t.cmdName,t.value)}})}(i);s.length&&d.push({label:function(){switch(t.icon){case"table":return e.getLang("contextMenu.table");case"justifyjustify":return e.getLang("contextMenu.paragraph");case"aligntd":return e.getLang("contextMenu.aligntd");case"aligntable":return e.getLang("contextMenu.aligntable");case"tablesort":return a.tablesort;case"borderBack":return a.borderbk;default:return""}}(),className:"edui-for-"+t.icon,subMenu:{items:s,editor:e}})}else(e.commands[t.cmdName]||UE.commands[t.cmdName]||t.query)&&(t.query?t.query.call(e):e.queryCommandState(t.cmdName))>-1&&d.push({label:t.label||e.getLang("contextMenu."+t.cmdName),className:"edui-for-"+(t.icon?t.icon:t.cmdName+(t.value||"")),onclick:t.exec?function(){t.exec.call(e)}:function(){e.execCommand(t.cmdName,t.value)}})}(n)}if("-"==d[d.length-1]&&d.pop(),(t=new UE.ui.Menu({items:d,className:"edui-contextmenu",editor:e})).render(),t.showAt(r),e.fireEvent("aftershowcontextmenu",t),domUtils.preventDefault(o),browser.ie){var p;try{p=e.selection.getNative().createRange()}catch(e){return}if(p.item)new dom.Range(e.document).selectNode(p.item(0)).select(!0,!0)}}),e.addListener("aftershowcontextmenu",function(t,a){if(e.zeroclipboard){var i=a.items;for(var l in i)"edui-for-copy"==i[l].className&&e.zeroclipboard.clip(i[l].getDom())}})}}},UE.plugins.shortcutmenu=function(){var e,t=this,a=t.options.shortcutMenu||[];a.length&&(t.addListener("contextmenu mouseup",function(t,i){var l=this,s={type:t,target:i.target||i.srcElement,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY};if(setTimeout(function(){!1!==l.selection.getRange().collapsed&&"contextmenu"!=t||(e||((e=new baidu.editor.ui.ShortCutMenu({editor:l,items:a,theme:l.options.theme,className:"edui-shortcutmenu"})).render(),l.fireEvent("afterrendershortcutmenu",e)),e.show(s,!!UE.plugins.contextmenu))}),"contextmenu"==t&&(domUtils.preventDefault(i),browser.ie9below)){var o;try{o=l.selection.getNative().createRange()}catch(i){return}if(o.item)new dom.Range(l.document).selectNode(o.item(0)).select(!0,!0)}}),t.addListener("keydown",function(t){"keydown"==t&&e&&!e.isHidden&&e.hide()}))},UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){return domUtils.filterNodeList(e.selection.getStartElementPath(),t)},a=this;for(var i in a.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),a.addInputRule(function(e){utils.each(e.getNodesByTagName("b i"),function(e){switch(e.tagName){case"b":e.tagName="strong";break;case"i":e.tagName="em"}})}),e)!function(e,i){a.commands[e]={execCommand:function(e){var l=a.selection.getRange(),s=t(this,i);if(l.collapsed){if(s){var o=a.document.createTextNode("");l.insertNode(o).removeInlineStyle(i),l.setStartBefore(o),domUtils.remove(o)}else{var r=l.document.createElement(i[0]);"superscript"!=e&&"subscript"!=e||(o=a.document.createTextNode(""),l.insertNode(o).removeInlineStyle(["sub","sup"]).setStartBefore(o).collapse(!0)),l.insertNode(r).setStart(r,0)}l.collapse(!0)}else"superscript"!=e&&"subscript"!=e||s&&s.tagName.toLowerCase()==e||l.removeInlineStyle(["sub","sup"]),s?l.removeInlineStyle(i):l.applyInlineStyle(i[0]);l.select()},queryCommandState:function(){return t(this,i)?1:0}}}(i,e[i])},UE.plugins.elementpath=function(){var e,t,a=this;a.setOpt("elementPathEnabled",!0),a.options.elementPathEnabled&&(a.commands.elementpath={execCommand:function(i,l){var s=t[l],o=a.selection.getRange();e=1*l,o.selectNode(s).select()},queryCommandValue:function(){var a=[].concat(this.selection.getStartElementPath()).reverse(),i=[];t=a;for(var l,s=0;l=a[s];s++)if(3!=l.nodeType){var o=l.tagName.toLowerCase();if("img"==o&&l.getAttribute("anchorname")&&(o="anchor"),i[s]=o,e==s){e=-1;break}}return i}})},UE.plugins.formatmatch=function(){function e(s,o){if(browser.webkit)var r="IMG"==o.target.tagName?o.target:null;a.undoManger&&a.undoManger.save();var n=a.selection.getRange(),c=r||n.getClosedNode();if(t&&c&&"IMG"==c.tagName)c.style.cssText+=";float:"+(t.style.cssFloat||t.style.styleFloat||"none")+";display:"+(t.style.display||"inline"),t=null;else if(!t){if(n.collapsed){var d=a.document.createTextNode("match");n.insertNode(d).select()}a.__hasEnterExecCommand=!0;var u=a.options.removeFormatAttributes;a.options.removeFormatAttributes="",a.execCommand("removeformat"),a.options.removeFormatAttributes=u,a.__hasEnterExecCommand=!1,n=a.selection.getRange(),i.length&&function(e){d&&e.selectNode(d),e.applyInlineStyle(i[i.length-1].tagName,null,i)}(n),d&&n.setStartBefore(d).collapse(!0),n.select(),d&&domUtils.remove(d)}a.undoManger&&a.undoManger.save(),a.removeListener("mouseup",e),l=0}var t,a=this,i=[],l=0;a.addListener("reset",function(){i=[],l=0}),a.commands.formatmatch={execCommand:function(s){if(l)return l=0,i=[],void a.removeListener("mouseup",e);var o=a.selection.getRange();if(!(t=o.getClosedNode())||"IMG"!=t.tagName){o.collapse(!0).shrinkBoundary();var r=o.startContainer;i=domUtils.findParents(r,!0,function(e){return!domUtils.isBlockElm(e)&&1==e.nodeType});for(var n,c=0;n=i[c];c++)if("A"==n.tagName){i.splice(c,1);break}}a.addListener("mouseup",e),l=1},queryCommandState:function(){return l},notNeedUndo:1}},UE.plugin.register("searchreplace",function(){function e(e,t,a){var i=t.searchStr;-1==t.dir&&(e=e.split("").reverse().join(""),i=i.split("").reverse().join(""),a=e.length-a);for(var l,s=new RegExp(i,"g"+(t.casesensitive?"":"i"));l=s.exec(e);)if(l.index>=a)return-1==t.dir?e.length-l.index-t.searchStr.length:l.index;return-1}function t(t,a,i){var l,s=i.all||1==i.dir?"getNextDomNode":"getPreDomNode";domUtils.isBody(t)&&(t=t.firstChild);for(;t;){if(0,-1!=(l=e(3==t.nodeType?t.nodeValue:t[browser.ie?"innerText":"textContent"],i,a)))return{node:t,index:l};for(t=domUtils[s](t);t&&o[t.nodeName.toLowerCase()];)t=domUtils[s](t,!0);t&&(a=-1==i.dir?(3==t.nodeType?t.nodeValue:t[browser.ie?"innerText":"textContent"]).length:0)}}function a(e,t,i){for(var l,s=0,o=e.firstChild,r=0;o;){if(3==o.nodeType){if((s+=r=o.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length)>=t)return{node:o,index:r-(s-t)}}else if(!dtd.$empty[o.tagName]&&((s+=r=o[browser.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length)>=t&&(l=a(o,r-(s-t),i))))return l;o=domUtils.getNextDomNode(o)}}function i(e,i){var s,o=e.selection.getRange(),r=i.searchStr,n=e.document.createElement("span");if(n.innerHTML="$$ueditor_searchreplace_key$$",o.shrinkBoundary(!0),!o.collapsed){o.select();var c=e.selection.getText();if(new RegExp("^"+i.searchStr+"$",i.casesensitive?"":"i").test(c)){if(void 0!=i.replaceStr)return l(o,i.replaceStr),o.select(),!0;o.collapse(-1==i.dir)}}o.insertNode(n),o.enlargeToBlockElm(!0);var d=(s=o.startContainer)[browser.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");o.setStartBefore(n),domUtils.remove(n);var u=t(s,d,i);if(u){var p=a(u.node,u.index,r),m=a(u.node,u.index+r.length,r);return o.setStart(p.node,p.index).setEnd(m.node,m.index),void 0!==i.replaceStr&&l(o,i.replaceStr),o.select(),!0}o.setCursor()}function l(e,t){t=s.document.createTextNode(t),e.deleteContents().insertNode(t)}var s=this,o={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(e,t){utils.extend(t,{all:!1,casesensitive:!1,dir:1},!0);var a=0;if(t.all){var l=s.selection.getRange(),o=s.body.firstChild;for(o&&1==o.nodeType?(l.setStart(o,0),l.shrinkBoundary(!0)):3==o.nodeType&&l.setStartBefore(o),l.collapse(!0).select(!0),void 0!==t.replaceStr&&s.fireEvent("saveScene");i(this,t);)a++;a&&s.fireEvent("saveScene")}else void 0!==t.replaceStr&&s.fireEvent("saveScene"),i(this,t)&&a++,a&&s.fireEvent("saveScene");return a},notNeedUndo:1}}}}),UE.plugins.customstyle=function(){var e=this;e.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]}),e.commands.customstyle={execCommand:function(e,t){var a,i,l=this,s=t.tag,o=domUtils.findParent(l.selection.getStart(),function(e){return e.getAttribute("label")},!0),r={};for(var n in t)void 0!==t[n]&&(r[n]=t[n]);if(delete r.tag,o&&o.getAttribute("label")==t.label){if(i=(a=this.selection.getRange()).createBookmark(),a.collapsed)if(dtd.$block[o.tagName]){var c=l.document.createElement("p");domUtils.moveChild(o,c),o.parentNode.insertBefore(c,o),domUtils.remove(o)}else domUtils.remove(o,!0);else{var d=domUtils.getCommonAncestor(i.start,i.end),u=domUtils.getElementsByTagName(d,s);new RegExp(s,"i").test(d.tagName)&&u.push(d);for(var p,m=0;p=u[m++];)if(p.getAttribute("label")==t.label){var h=domUtils.getPosition(p,i.start),f=domUtils.getPosition(p,i.end);if((h&domUtils.POSITION_FOLLOWING||h&domUtils.POSITION_CONTAINS)&&(f&domUtils.POSITION_PRECEDING||f&domUtils.POSITION_CONTAINS)&&dtd.$block[s]){c=l.document.createElement("p");domUtils.moveChild(p,c),p.parentNode.insertBefore(c,p)}domUtils.remove(p,!0)}(o=domUtils.findParent(d,function(e){return e.getAttribute("label")==t.label},!0))&&domUtils.remove(o,!0)}a.moveToBookmark(i).select()}else if(dtd.$block[s]){if(this.execCommand("paragraph",s,r,"customstyle"),!(a=l.selection.getRange()).collapsed){a.collapse(),o=domUtils.findParent(l.selection.getStart(),function(e){return e.getAttribute("label")==t.label},!0);var g=l.document.createElement("p");domUtils.insertAfter(o,g),domUtils.fillNode(l.document,g),a.setStart(g,0).setCursor()}}else{if((a=l.selection.getRange()).collapsed)return o=l.document.createElement(s),domUtils.setAttributes(o,r),void a.insertNode(o).setStart(o,0).setCursor();i=a.createBookmark(),a.applyInlineStyle(s,r).moveToBookmark(i).select()}},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return e.getAttribute("label")});return e?e.getAttribute("label"):""}},e.addListener("keyup",function(t,a){var i=a.keyCode||a.which;if(32==i||13==i){var l=e.selection.getRange();if(l.collapsed){var s=domUtils.findParent(e.selection.getStart(),function(e){return e.getAttribute("label")},!0);if(s&&dtd.$block[s.tagName]&&domUtils.isEmptyNode(s)){var o=e.document.createElement("p");domUtils.insertAfter(s,o),domUtils.fillNode(e.document,o),domUtils.remove(s),l.setStart(o,0).setCursor()}}}})},UE.plugins.catchremoteimage=function(){var me=this,ajax=UE.ajax;!1!==me.options.catchRemoteImageEnable&&(me.setOpt({catchRemoteImageEnable:!1}),me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")}),me.addListener("catchRemoteImage",function(){function catchremoteimage(e,t){var a=utils.serializeParam(me.queryCommandValue("serverparam"))||"",i=utils.formatUrl(catcherActionUrl+(-1==catcherActionUrl.indexOf("?")?"?":"&")+a),l={method:"POST",dataType:utils.isCrossDomainUrl(i)?"jsonp":"",timeout:6e4,onsuccess:t.success,onerror:t.error};l[catcherFieldName]=e,ajax.request(i,l)}for(var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName"),remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,"img"),test=function(e,t){if(-1!=e.indexOf(location.host)||/(^\.)|(^\/)/.test(e))return!0;if(t)for(var a,i=0;a=t[i++];)if(-1!==e.indexOf(a))return!0;return!1},i=0,ci;ci=imgs[i++];)if(!ci.getAttribute("word_img")){var src=ci.getAttribute("_src")||ci.src||"";/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)&&remoteImages.push(src)}remoteImages.length&&catchremoteimage(remoteImages,{success:function(r){try{var info=void 0!==r.state?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list;for(i=0;ci=imgs[i++];)for(oldSrc=ci.getAttribute("_src")||ci.src||"",j=0;cj=list[j++];)if(oldSrc==cj.source&&"SUCCESS"==cj.state){newSrc=catcherUrlPrefix+cj.url,domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}me.fireEvent("catchremotesuccess")},error:function(){me.fireEvent("catchremoteerror")}})}))},UE.plugin.register("snapscreen",function(){function getLocation(e){var t,a=document.createElement("a"),i=utils.serializeParam(me.queryCommandValue("serverparam"))||"";return a.href=e,browser.ie&&(a.href=a.href),t=a.search,i&&(t=(t=t+(-1==t.indexOf("?")?"?":"&")+i).replace(/[&]+/gi,"&")),{port:a.port,hostname:a.hostname,path:a.pathname+t||+a.hash}}var me=this,snapplugin;return{commands:{snapscreen:{execCommand:function(cmd){function onSuccess(rs){try{if(rs=eval("("+rs+")"),"SUCCESS"==rs.state){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else alert(rs.state)}catch(e){alert(lang.callBackErrorMsg)}}var url,local,res,lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container,doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;",snapplugin.setAttribute("width","0"),snapplugin.setAttribute("height","0"),container.appendChild(snapplugin)}url=me.getActionUrl(me.getOpt("snapscreenActionName")),local=getLocation(url),setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(e){return void me.ui._dialogs.snapscreenDialog.open()}onSuccess(res)},50)},queryCommandState:function(){return-1!=navigator.userAgent.indexOf("Windows",0)?0:-1}}}}}),UE.commands.insertparagraph={execCommand:function(e,t){for(var a,i=this,l=i.selection.getRange(),s=l.startContainer;s&&!domUtils.isBody(s);)a=s,s=s.parentNode;if(a){var o=i.document.createElement("p");t?a.parentNode.insertBefore(o,a):a.parentNode.insertBefore(o,a.nextSibling),domUtils.fillNode(i.document,o),l.setStart(o,0).setCursor(!1,!0)}}},UE.plugin.register("webapp",function(){function e(e,a){return a?'<iframe class="edui-faked-webapp" title="'+e.title+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+'width="'+e.width+'" height="'+e.height+'"  scrolling="no" frameborder="0" src="'+e.url+'" logo_url = "'+e.logo+'"></iframe>':'<img title="'+e.title+'" width="'+e.width+'" height="'+e.height+'" src="'+t.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+e.logo+'" style="background:url('+e.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+e.url+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+"/>"}var t=this;return{outputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var a;if("edui-faked-webapp"==t.getAttr("class")){a=e({title:t.getAttr("title"),width:t.getAttr("width"),height:t.getAttr("height"),align:t.getAttr("align"),cssfloat:t.getStyle("float"),url:t.getAttr("_url"),logo:t.getAttr("_logo_url")},!0);var i=UE.uNode.createElement(a);t.parentNode.replaceChild(i,t)}})},inputRule:function(t){utils.each(t.getNodesByTagName("iframe"),function(t){if("edui-faked-webapp"==t.getAttr("class")){var a=UE.uNode.createElement(e({title:t.getAttr("title"),width:t.getAttr("width"),height:t.getAttr("height"),align:t.getAttr("align"),cssfloat:t.getStyle("float"),url:t.getAttr("src"),logo:t.getAttr("logo_url")}));t.parentNode.replaceChild(a,t)}})},commands:{webapp:{execCommand:function(t,a){var i=e(utils.extend(a,{align:"none"}),!1);this.execCommand("inserthtml",i)},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&"edui-faked-webapp"==e.className?1:0}}}}}),UE.plugins.template=function(){UE.commands.template={execCommand:function(e,t){t.html&&this.execCommand("inserthtml",t.html)}},this.addListener("click",function(e,t){var a=t.target||t.srcElement,i=this.selection.getRange(),l=domUtils.findParent(a,function(e){if(e.className&&domUtils.hasClass(e,"ue_t"))return e},!0);l&&i.selectNode(l).shrinkBoundary().select()}),this.addListener("keydown",function(e,t){var a=this.selection.getRange();if(!a.collapsed&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var i=domUtils.findParent(a.startContainer,function(e){if(e.className&&domUtils.hasClass(e,"ue_t"))return e},!0);i&&domUtils.removeClasses(i,["ue_t"])}})},UE.plugin.register("music",function(){function e(e,a,i,l,s,o){return o?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+e+'" width="'+a+'" height="'+i+'" '+(l&&!s?'align="'+l+'"':"")+(s?'style="float:'+s+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(l&&!s?'align="'+l+'"':"")+(s?'style="float:'+s+'"':"")+' width="'+a+'" height="'+i+'" _url="'+e+'" class="edui-faked-music" src="'+t.options.langPath+t.options.lang+'/images/music.png" />'}var t=this;return{outputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var a;if("edui-faked-music"==t.getAttr("class")){var i=t.getStyle("float"),l=t.getAttr("align");a=e(t.getAttr("_url"),t.getAttr("width"),t.getAttr("height"),l,i,!0);var s=UE.uNode.createElement(a);t.parentNode.replaceChild(s,t)}})},inputRule:function(t){utils.each(t.getNodesByTagName("embed"),function(t){if("edui-faked-music"==t.getAttr("class")){var a=t.getStyle("float"),i=t.getAttr("align");html=e(t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),i,a,!1);var l=UE.uNode.createElement(html);t.parentNode.replaceChild(l,t)}})},commands:{music:{execCommand:function(t,a){var i=e(a.url,a.width||400,a.height||95,"none",!1);this.execCommand("inserthtml",i)},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&"edui-faked-music"==e.className?1:0}}}}}),UE.plugin.register("autoupload",function(){function e(e,t){var a,i,l,s,o,r,n,c,d=t,u=/image\/\w+/i.test(e.type)?"image":"file",p="loading_"+(+new Date).toString(36);if(a=d.getOpt(u+"FieldName"),i=d.getOpt(u+"UrlPrefix"),l=d.getOpt(u+"MaxSize"),s=d.getOpt(u+"AllowFiles"),o=d.getActionUrl(d.getOpt(u+"ActionName")),n=function(e){var t=d.document.getElementById(p);t&&domUtils.remove(t),d.fireEvent("showmessage",{id:p,content:e,type:"error",timeout:4e3})},"image"==u?(r='<img class="loadingclass" id="'+p+'" src="'+d.options.themePath+d.options.theme+'/images/spacer.gif" title="'+(d.getLang("autoupload.loading")||"")+'" >',c=function(e){var t=i+e.url,a=d.document.getElementById(p);a&&(a.setAttribute("src",t),a.setAttribute("_src",t),a.setAttribute("title",e.title||""),a.setAttribute("alt",e.original||""),a.removeAttribute("id"),domUtils.removeClasses(a,"loadingclass"))}):(r='<p><img class="loadingclass" id="'+p+'" src="'+d.options.themePath+d.options.theme+'/images/spacer.gif" title="'+(d.getLang("autoupload.loading")||"")+'" ></p>',c=function(e){var t=i+e.url,a=d.document.getElementById(p),l=d.selection.getRange(),s=l.createBookmark();l.selectNode(a).select(),d.execCommand("insertfile",{url:t}),l.moveToBookmark(s).select()}),d.execCommand("inserthtml",r),d.getOpt(u+"ActionName"))if(e.size>l)n(d.getLang("autoupload.exceedSizeError"));else{var m=e.name?e.name.substr(e.name.lastIndexOf(".")):"";if(m&&"image"!=u||s&&-1==(s.join("")+".").indexOf(m.toLowerCase()+"."))n(d.getLang("autoupload.exceedTypeError"));else{var h=new XMLHttpRequest,f=new FormData,g=utils.serializeParam(d.queryCommandValue("serverparam"))||"",v=utils.formatUrl(o+(-1==o.indexOf("?")?"?":"&")+g);f.append(a,e,e.name||"blob."+e.type.substr("image/".length)),f.append("type","ajax"),h.open("post",v,!0),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.addEventListener("load",function(e){try{var t=new Function("return "+utils.trim(e.target.response))();"SUCCESS"==t.state&&t.url?c(t):n(t.state)}catch(e){n(d.getLang("autoupload.loadError"))}}),h.send(f)}}else n(d.getLang("autoupload.errorLoadConfig"))}return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)}),utils.each(e.getNodesByTagName("p"),function(e){/\bloadpara\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},bindEvents:{ready:function(t){var a=this;window.FormData&&window.FileReader&&(domUtils.on(a.body,"paste drop",function(t){var i,l=!1;if(i="paste"==t.type?function(e){return e.clipboardData&&e.clipboardData.items&&1==e.clipboardData.items.length&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null}(t):function(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}(t)){for(var s,o=i.length;o--;)(s=i[o]).getAsFile&&(s=s.getAsFile()),s&&s.size>0&&(e(s,a),l=!0);l&&t.preventDefault()}}),domUtils.on(a.body,"dragover",function(e){"Files"==e.dataTransfer.types[0]&&e.preventDefault()}),utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document))}}}}),UE.plugin.register("autosave",function(){function e(e){var s;if(!(new Date-a<i)){if(!e.hasContents())return void(l&&t.removePreferences(l));a=new Date,e._saveFlag=null,s=t.body.innerHTML,!1!==e.fireEvent("beforeautosave",{content:s})&&(t.setPreferences(l,s),e.fireEvent("afterautosave",{content:s}))}}var t=this,a=new Date,i=20,l=null;return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var e,a="-drafts-data";e=t.key?t.key+a:(t.container.parentNode.id||"ue-common")+a,l=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+e},contentchange:function(){l&&(t._saveFlag&&window.clearTimeout(t._saveFlag),t.options.saveInterval>0?t._saveFlag=window.setTimeout(function(){e(t)},t.options.saveInterval):e(t))}},commands:{clearlocaldata:{execCommand:function(e,a){l&&t.getPreferences(l)&&t.removePreferences(l)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(e,a){return l&&t.getPreferences(l)||""},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(e,a){l&&(t.body.innerHTML=t.getPreferences(l)||"<p>"+domUtils.fillHtml+"</p>",t.focus(!0))},queryCommandState:function(){return l?null===t.getPreferences(l)?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}}),UE.plugin.register("charts",function(){function e(e){var t,a;if(e.rows.length<2)return!1;if(e.rows[0].cells.length<2)return!1;a=(t=e.rows[0].cells).length;for(var i=0;s=t[i];i++)if("th"!==s.tagName.toLowerCase())return!1;var l;for(i=1;l=e.rows[i];i++){if(l.cells.length!=a)return!1;if("th"!==l.cells[0].tagName.toLowerCase())return!1;for(var s,o=1;s=l.cells[o];o++){var r=utils.trim(s.innerText||s.textContent||"");if(r=r.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,""),!/^\d*\.?\d+$/.test(r))return!1}}return!0}var t=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(a,i){var l=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0),s=[],o={};if(!l)return!1;if(!e(l))return t.fireEvent("chartserror"),!1;for(var r in o.title=i.title||"",o.subTitle=i.subTitle||"",o.xTitle=i.xTitle||"",o.yTitle=i.yTitle||"",o.suffix=i.suffix||"",o.tip=i.tip||"",o.dataFormat=i.tableDataFormat||"",o.chartType=i.chartType||0,o)o.hasOwnProperty(r)&&s.push(r+":"+o[r]);l.setAttribute("data-chart",s.join(";")),domUtils.addClass(l,"edui-charts-table")},queryCommandState:function(t,a){var i=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0);return i&&e(i)?0:-1}}},inputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style")})},outputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style","display: none;")})}}}),UE.plugin.register("section",function(){function e(e){var t=new function(e){this.tag="",this.level=-1,this.dom=null,this.nextSection=null,this.previousSection=null,this.parentSection=null,this.startAddress=[],this.endAddress=[],this.children=[]};return utils.extend(t,e)}function t(e,t){for(var a=t,i=0;i<e.length;i++){if(!a.childNodes)return null;a=a.childNodes[e[i]]}return a}var a=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){a.fireEvent("updateSections")}},bindEvents:{ready:function(){a.fireEvent("updateSections"),domUtils.on(a.body,"drop paste",function(){a.fireEvent("updateSections")})},afterexeccommand:function(e,t){"paragraph"==t&&a.fireEvent("updateSections")},keyup:function(e,t){var a=this;if(1!=a.selection.getRange().collapsed)a.fireEvent("updateSections");else{var i=t.keyCode||t.which;13!=i&&8!=i&&46!=i||a.fireEvent("updateSections")}}},commands:{getsections:{execCommand:function(t,a){function i(e){for(var t=0;t<l.length;t++)if(l[t](e))return t;return-1}for(var l=a||["h1","h2","h3","h4","h5","h6"],s=0;s<l.length;s++)"string"==typeof l[s]?l[s]=function(e){return function(t){return t.tagName==e.toUpperCase()}}(l[s]):"function"!=typeof l[s]&&(l[s]=function(e){return null});var o=this,r=e({level:-1,title:"root"}),n=r;return function t(a,l){for(var s,r,c,d=null,u=a.childNodes,p=0,m=u.length;p<m;p++)if((s=i(c=u[p]))>=0){var h=o.selection.getRange().selectNode(c).createAddress(!0).startAddress,f=e({tag:c.tagName,title:c.innerText||c.textContent||"",level:s,dom:c,startAddress:utils.clone(h,[]),endAddress:utils.clone(h,[]),children:[]});for(n.nextSection=f,f.previousSection=n,r=n;s<=r.level;)r=r.parentSection;f.parentSection=r,r.children.push(f),d=n=f}else 1===c.nodeType&&t(c,l),d&&d.endAddress[d.endAddress.length-1]++}(o.body,r),r},notNeedUndo:!0},movesection:{execCommand:function(e,a,i,l){var s,o,r=this;if(a&&i&&-1!=i.level&&(o=t(s=l?i.endAddress:i.startAddress,r.body),s&&o&&!function(e,t,a){for(var i=!1,l=!1,s=0;s<e.length&&!(s>=a.length);s++){if(a[s]>e[s]){i=!0;break}if(a[s]<e[s])break}for(s=0;s<t.length&&!(s>=a.length);s++){if(a[s]<e[s]){l=!0;break}if(a[s]>e[s])break}return i&&l}(a.startAddress,a.endAddress,s))){var n,c,d=t(a.startAddress,r.body),u=t(a.endAddress,r.body);if(l)for(n=u;n&&!(domUtils.getPosition(d,n)&domUtils.POSITION_FOLLOWING)&&(c=n.previousSibling,domUtils.insertAfter(o,n),n!=d);)n=c;else for(n=d;n&&!(domUtils.getPosition(n,u)&domUtils.POSITION_FOLLOWING)&&(c=n.nextSibling,o.parentNode.insertBefore(n,o),n!=u);)n=c;r.fireEvent("updateSections")}}},deletesection:{execCommand:function(e,t,a){function i(e){for(var t=l.body,a=0;a<e.length;a++){if(!t.childNodes)return null;t=t.childNodes[e[a]]}return t}var l=this;if(t){var s,o=i(t.startAddress),r=i(t.endAddress),n=o;if(a)domUtils.remove(n);else for(;n&&domUtils.inDoc(r,l.document)&&!(domUtils.getPosition(n,r)&domUtils.POSITION_FOLLOWING);)s=n.nextSibling,domUtils.remove(n),n=s;l.fireEvent("updateSections")}}},selectsection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var a=this.selection.getRange(),i={startAddress:utils.clone(t.startAddress,[]),endAddress:utils.clone(t.endAddress,[])};return i.endAddress[i.endAddress.length-1]++,a.moveToAddress(i).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var a=this.selection.getRange(),i={startAddress:t.startAddress,endAddress:t.endAddress};return i.endAddress[i.endAddress.length-1]++,a.moveToAddress(i).scrollToView(),!0},notNeedUndo:!0}}}}),UE.plugin.register("simpleupload",function(){function e(){var e=t.offsetWidth||20,l=t.offsetHeight||20,s=document.createElement("iframe"),o="display:block;width:"+e+"px;height:"+l+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(s,"load",function(){var t,r,n,c=(+new Date).toString(36);n=(r=s.contentDocument||s.contentWindow.document).body,(t=r.createElement("div")).innerHTML='<form id="edui_form_'+c+'" target="edui_iframe_'+c+'" method="POST" enctype="multipart/form-data" action="'+a.getOpt("serverUrl")+'" style="'+o+'"><input id="edui_input_'+c+'" type="file" accept="image/*" name="'+a.options.imageFieldName+'" style="'+o+'"></form><iframe id="edui_iframe_'+c+'" name="edui_iframe_'+c+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',t.className="edui-"+a.options.theme,t.id=a.ui.id+"_iframeupload",n.style.cssText=o,n.style.width=e+"px",n.style.height=l+"px",n.appendChild(t),n.parentNode&&(n.parentNode.style.width=e+"px",n.parentNode.style.height=e+"px");var d,u=r.getElementById("edui_form_"+c),p=r.getElementById("edui_input_"+c),m=r.getElementById("edui_iframe_"+c);domUtils.on(p,"change",function(){function e(e){if(t){var i=a.document.getElementById(t);i&&domUtils.remove(i),a.fireEvent("showmessage",{id:t,content:e,type:"error",timeout:4e3})}}if(p.value){var t="loading_"+(+new Date).toString(36),i=utils.serializeParam(a.queryCommandValue("serverparam"))||"",l=a.getActionUrl(a.getOpt("imageActionName")),s=a.getOpt("imageAllowFiles");if(a.focus(),a.execCommand("inserthtml",'<img class="loadingclass" id="'+t+'" src="'+a.options.themePath+a.options.theme+'/images/spacer.gif" title="'+(a.getLang("simpleupload.loading")||"")+'" >'),!a.getOpt("imageActionName"))return void errorHandler(a.getLang("autoupload.errorLoadConfig"));var o=p.value,r=o?o.substr(o.lastIndexOf(".")):"";if(!r||s&&-1==(s.join("")+".").indexOf(r.toLowerCase()+"."))return void e(a.getLang("simpleupload.exceedTypeError"));domUtils.on(m,"load",function i(){try{var l,s,o,r=(m.contentDocument||m.contentWindow.document).body,n=r.innerText||r.textContent||"";s=new Function("return "+n)(),l=a.options.imageUrlPrefix+s.url,"SUCCESS"==s.state&&s.url?((o=a.document.getElementById(t)).setAttribute("src",l),o.setAttribute("_src",l),o.setAttribute("title",s.title||""),o.setAttribute("alt",s.original||""),o.removeAttribute("id"),domUtils.removeClasses(o,"loadingclass")):e&&e(s.state)}catch(t){e&&e(a.getLang("simpleupload.loadError"))}u.reset(),domUtils.un(m,"load",i)}),u.action=utils.formatUrl(l+(-1==l.indexOf("?")?"?":"&")+i),u.submit()}}),a.addListener("selectionchange",function(){clearTimeout(d),d=setTimeout(function(){var e=a.queryCommandState("simpleupload");p.disabled=-1==e&&"disabled"},400)}),i=!0}),s.style.cssText=o,t.appendChild(s)}var t,a=this,i=!1;return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(i,l){t=l,a.afterConfigReady(e)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},commands:{simpleupload:{queryCommandState:function(){return i?0:-1}}}}}),UE.plugin.register("serverparam",function(){var e={};return{commands:{serverparam:{execCommand:function(t,a,i){void 0===a||null===a?e={}:utils.isString(a)?void 0===i||null===i?delete e[a]:e[a]=i:utils.isObject(a)?utils.extend(e,a,!0):utils.isFunction(a)&&utils.extend(e,a(),!0)},queryCommandValue:function(){return e||{}}}}}}),UE.plugin.register("insertfile",function(){function e(e){var t=e.substr(e.lastIndexOf(".")+1).toLowerCase(),a={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};return a[t]?a[t]:a.txt}var t=this;return{commands:{insertfile:{execCommand:function(a,i){i=utils.isArray(i)?i:[i];var l,s,o,r,n="",c=t.getOpt("UEDITOR_HOME_URL"),d=c+("/"==c.substr(c.length-1)?"":"/")+"dialogs/attachment/fileTypeImages/";for(l=0;l<i.length;l++)o=d+e((s=i[l]).url),r=s.title||s.url.substr(s.url.lastIndexOf("/")+1),n+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+o+'" _src="'+o+'" /><a style="font-size:12px; color:#0066cc;" href="'+s.url+'" title="'+r+'">'+r+"</a></p>";t.execCommand("insertHtml",n)}}}}}),UE.plugins.xssFilter=function(){function e(e){var t=e.tagName,i=e.attrs;return a.hasOwnProperty(t)?void UE.utils.each(i,function(i,l){-1===a[t].indexOf(l)&&e.setAttr(l)}):(e.parentNode.removeChild(e),!1)}var t=UEDITOR_CONFIG,a=t.whitList;a&&t.xssFilterRules&&(this.options.filterRules=function(){var t={};return UE.utils.each(a,function(a,i){t[i]=function(t){return e(t)}}),t}());var i=[];UE.utils.each(a,function(e,t){i.push(t)}),a&&t.inputXssFilter&&this.addInputRule(function(t){t.traversal(function(t){return"element"===t.type&&void e(t)})}),a&&t.outputXssFilter&&this.addOutputRule(function(t){t.traversal(function(t){return"element"===t.type&&void e(t)})})};var baidu=baidu||{};baidu.editor=baidu.editor||{},UE.ui=baidu.editor.ui={},function(){function e(){var e=document.getElementById("edui_fixedlayer");n.setViewportOffset(e,{left:0,top:0})}function t(t){i.on(window,"scroll",e),i.on(window,"resize",baidu.editor.utils.defer(e,0,!0))}var a=baidu.editor.browser,i=baidu.editor.dom.domUtils,l="$EDITORUI",s=window[l]={},o="ID"+l,r=0,n=baidu.editor.ui.uiUtils={uid:function(e){return e?e[o]||(e[o]=++r):++r},hook:function(e,t){var a;return e&&e._callbacks?a=e:(a=function(){var t;e&&(t=e.apply(this,arguments));for(var i=a._callbacks,l=i.length;l--;){var s=i[l].apply(this,arguments);void 0===t&&(t=s)}return t})._callbacks=[],a._callbacks.push(t),a},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,(t=t.firstChild).parentNode.removeChild(t),t},getViewportElement:function(){return a.ie&&a.quirks?document.body:document.documentElement},getClientRect:function(e){var t;try{t=e.getBoundingClientRect()}catch(e){t={left:0,top:0,height:0,width:0}}for(var a,l={left:Math.round(t.left),top:Math.round(t.top),height:Math.round(t.bottom-t.top),width:Math.round(t.right-t.left)};(a=e.ownerDocument)!==document&&(e=i.getWindow(a).frameElement);)t=e.getBoundingClientRect(),l.left+=t.left,l.top+=t.top;return l.bottom=l.top+l.height,l.right=l.left+l.width,l},getViewportRect:function(){var e=n.getViewportElement(),t=0|(window.innerWidth||e.clientWidth),a=0|(window.innerHeight||e.clientHeight);return{left:0,top:0,height:a,width:t,bottom:a,right:t}},setViewportOffset:function(e,t){var a=n.getFixedLayer();e.parentNode===a?(e.style.left=t.left+"px",e.style.top=t.top+"px"):i.setViewportOffset(e,t)},getEventOffset:function(e){var t=e.target||e.srcElement,a=n.getClientRect(t),i=n.getViewportOffsetByEvent(e);return{left:i.left-a.left,top:i.top-a.top}},getViewportOffsetByEvent:function(e){var t=e.target||e.srcElement,a=i.getWindow(t).frameElement,l={left:e.clientX,top:e.clientY};if(a&&t.ownerDocument!==document){var s=n.getClientRect(a);l.left+=s.left,l.top+=s.top}return l},setGlobal:function(e,t){return s[e]=t,l+'["'+e+'"]'},unsetGlobal:function(e){delete s[e]},copyAttributes:function(e,t){for(var l=t.attributes,s=l.length;s--;){var o=l[s];"style"==o.nodeName||"class"==o.nodeName||a.ie&&!o.specified||e.setAttribute(o.nodeName,o.nodeValue)}t.className&&i.addClass(e,t.className),t.style.cssText&&(e.style.cssText+=";"+t.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&e!==t&&(e.contains?e.contains(t):16&e.compareDocumentPosition(t))},startDrag:function(e,t,a){function i(e){var a=e.clientX-o,i=e.clientY-r;t.ondragmove(a,i,e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function l(e){a.removeEventListener("mousemove",i,!0),a.removeEventListener("mouseup",l,!0),window.removeEventListener("mouseup",l,!0),t.ondragstop()}function s(){n.releaseCapture(),n.detachEvent("onmousemove",i),n.detachEvent("onmouseup",s),n.detachEvent("onlosecaptrue",s),t.ondragstop()}a=a||document;var o=e.clientX,r=e.clientY;if(a.addEventListener)a.addEventListener("mousemove",i,!0),a.addEventListener("mouseup",l,!0),window.addEventListener("mouseup",l,!0),e.preventDefault();else{var n=e.srcElement;n.setCapture(),n.attachEvent("onmousemove",i),n.attachEvent("onmouseup",s),n.attachEvent("onlosecaptrue",s),e.returnValue=!1}t.ondragstart()},getFixedLayer:function(){var i=document.getElementById("edui_fixedlayer");return null==i&&((i=document.createElement("div")).id="edui_fixedlayer",document.body.appendChild(i),a.ie&&a.version<=8?(i.style.position="absolute",t(),setTimeout(e)):i.style.position="fixed",i.style.left="0",i.style.top="0",i.style.width="0",i.style.height="0"),i},makeUnselectable:function(e){if(a.opera||a.ie&&a.version<9){if(e.unselectable="on",e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++)1==e.childNodes[t].nodeType&&n.makeUnselectable(e.childNodes[t])}else void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":void 0!==e.style.WebkitUserSelect?e.style.WebkitUserSelect="none":void 0!==e.style.KhtmlUserSelect&&(e.style.KhtmlUserSelect="none")}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,a=baidu.editor.EventBase,i=baidu.editor.ui.UIBase=function(){};i.prototype={className:"",uiName:"",initOptions:function(e){for(var a in e)this[a]=e[a];this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=e.unhtml(t.setGlobal(this.id,this))},render:function(e){for(var a,i=this.renderHtml(),l=t.createElementByHtml(i),s=domUtils.getElementsByTagName(l,"*"),o="edui-"+(this.theme||this.editor.options.theme),r=document.getElementById("edui_fixedlayer"),n=0;a=s[n++];)domUtils.addClass(a,o);domUtils.addClass(l,o),r&&(r.className="",domUtils.addClass(r,o));var c=this.getDom();null!=c?(c.parentNode.replaceChild(l,c),t.copyAttributes(l,c)):("string"==typeof e&&(e=document.getElementById(e)),e=e||t.getFixedLayer(),domUtils.addClass(e,o),e.appendChild(l)),this.postRender()},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&baidu.editor.dom.domUtils.remove(e),t.unsetGlobal(this.id)}},e.inherits(i,a)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,a=baidu.editor.ui.Separator=function(e){this.initOptions(e),this.initSeparator()};a.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},e.inherits(a,t)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,a=baidu.editor.ui.UIBase,i=baidu.editor.ui.uiUtils,l=baidu.editor.ui.Mask=function(e){this.initOptions(e),this.initUIBase()};l.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var e=this;t.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e._fill()})})},show:function(e){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=e},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(e,t){this.fireEvent("click",e,t)},_fill:function(){var e=this.getDom(),t=i.getViewportRect();e.style.width=t.width+"px",e.style.height=t.height+"px"}},e.inherits(l,a)}(),function(){function e(e,t){for(var a=0;a<o.length;a++){var i=o[a];if(!i.isHidden()&&!1!==i.queryAutoHide(t)){if(e&&/scroll/gi.test(e.type)&&"edui-wordpastepop"==i.className)return;i.hide()}}o.length&&i.editor.fireEvent("afterhidepop")}var t=baidu.editor.utils,a=baidu.editor.ui.uiUtils,i=baidu.editor.dom.domUtils,l=baidu.editor.ui.UIBase,s=baidu.editor.ui.Popup=function(e){this.initOptions(e),this.initPopup()},o=[];s.postHide=e;var r=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];s.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),o.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:l.prototype.postRender,postRender:function(){if(this.content instanceof l&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var e=(document.documentElement.clientHeight||document.body.clientHeight)-80,t=this.getDom().offsetHeight,s=a.getClientRect(this.combox.getDom()).top,o=this.getDom("content"),r=this.getDom("body").getElementsByTagName("iframe"),n=this;for(r.length&&(r=r[0]);s+t>e;)t-=30;o.style.height=t+"px",r&&(r.style.height=t+"px"),window.XMLHttpRequest?i.on(o,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,e.wheelDelta?o.scrollTop-=e.wheelDelta/120*60:o.scrollTop-=e.detail/-3*60}):i.on(this.getDom(),"mousewheel",function(e){e.returnValue=!1,n.getDom("content").scrollTop-=e.wheelDelta/120*60})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var e=this.getDom("content");return a.getClientRect(e)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var e=this.getDom("body");e.style.width="",e.style.height="";var t=this.mesureSize();if(this.captureWheel){e.style.width=-(-20-t.width)+"px";var a=parseInt(this.getDom("content").style.height,10);!window.isNaN(a)&&(t.height=a)}else e.style.width=t.width+"px";return e.style.height=t.height+"px",this.__size=t,this.captureWheel&&(this.getDom("content").style.overflow="auto"),t},showAnchor:function(e,t){this.showAnchorRect(a.getClientRect(e),t)},showAnchorRect:function(e,t,l){this._doAutoRender();var s=a.getViewportRect();this.getDom().style.visibility="hidden",this._show();var o,n,c,d,u=this.fitSize();t?(o=this.canSideLeft&&e.right+u.width>s.right&&e.left>u.width,n=this.canSideUp&&e.top+u.height>s.bottom&&e.bottom>u.height,c=o?e.left-u.width:e.right,d=n?e.bottom-u.height:e.top):(o=this.canSideLeft&&e.right+u.width>s.right&&e.left>u.width,n=this.canSideUp&&e.top+u.height>s.bottom&&e.bottom>u.height,c=o?e.right-u.width:e.left,d=n?e.top-u.height:e.bottom);var p=this.getDom();a.setViewportOffset(p,{left:c,top:d}),i.removeClasses(p,r),p.className+=" "+r[2*(n?1:0)+(o?1:0)],this.editor&&(p.style.zIndex=1*this.editor.container.style.zIndex+10,baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=p.style.zIndex-1),this.getDom().style.visibility="visible"},showAt:function(e){var t=e.left,a=e.top,i={left:t,top:a,right:t,bottom:a,height:0,width:0};this.showAnchorRect(i,!1,!0)},_show:function(){this._hidden&&(this.getDom().style.display="",this._hidden=!1,this.fireEvent("show"))},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(e){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,e||this.fireEvent("hide"))},queryAutoHide:function(e){return!e||!a.contains(this.getDom(),e)}},t.inherits(s,l),i.on(document,"mousedown",function(t){e(t,t.target||t.srcElement)}),i.on(window,"scroll",function(t,a){e(t,a)})}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,a=baidu.editor.ui.ColorPicker=function(e){this.initOptions(e),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};a.prototype={getHtmlTpl:function(){return function(e,t){for(var a='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+e+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+t.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',l=0;l<i.length;l++)l&&l%10==0&&(a+="</tr>"+(60==l?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+t.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==l?' class="edui-colorpicker-tablefirstrow"':"")+">"),a+=l<70?'<td style="padding: 0 2px;"><a hidefocus title="'+i[l]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+i[l]+'" style="background-color:#'+i[l]+";border:solid #ccc;"+(l<10||l>=60?"border-width:1px;":l>=10&&l<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':"";return a+"</tr></table></div>"}(this.noColorText,this.editor)},_onTableClick:function(e){var t=(e.target||e.srcElement).getAttribute("data-color");t&&this.fireEvent("pickcolor",t)},_onTableOver:function(e){var t=(e.target||e.srcElement).getAttribute("data-color");t&&(this.getDom("preview").style.backgroundColor=t)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},e.inherits(a,t);var i="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",")}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,a=baidu.editor.ui.UIBase,i=baidu.editor.ui.TablePicker=function(e){this.initOptions(e),this.initTablePicker()};i.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:a.prototype.render,render:function(e){this._UIBase_render(e),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(e,t){var a=this.getDom("overlay").style,i=this.lengthOfCellSide;a.width=e*i+"px",a.height=t*i+"px",this.getDom("label").innerHTML=e+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row"),this.numCols=e,this.numRows=t},_onMouseOver:function(e,a){var i=e.relatedTarget||e.fromElement;t.contains(a,i)||a===i||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(e,a){var i=e.relatedTarget||e.toElement;t.contains(a,i)||a===i||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(e,a){var i=(this.getDom("overlay").style,t.getEventOffset(e)),l=this.lengthOfCellSide,s=Math.ceil(i.left/l),o=Math.ceil(i.top/l);this._track(s,o)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},e.inherits(i,a)}(),function(){var e=baidu.editor.browser,t=baidu.editor.dom.domUtils,a=baidu.editor.ui.uiUtils,i='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(e.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');baidu.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){return this._Stateful_dGetHtmlTpl().replace(/stateful/g,function(){return i})},Stateful_onMouseEnter:function(e,t){this.target=t,this.isDisabled()&&!this.alwalysHoverable||(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(e,t){this.isDisabled()&&!this.alwalysHoverable||(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(e,t){var i=e.relatedTarget;a.contains(t,i)||t===i||this.Stateful_onMouseEnter(e,t)},Stateful_onMouseOut:function(e,t){var i=e.relatedTarget;a.contains(t,i)||t===i||this.Stateful_onMouseLeave(e,t)},Stateful_onMouseDown:function(e,t){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(e,t){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(e){return t.hasClass(this.getStateDom(),"edui-state-"+e)},addState:function(e){this.hasState(e)||(this.getStateDom().className+=" edui-state-"+e)},removeState:function(e){this.hasState(e)&&t.removeClasses(this.getStateDom(),["edui-state-"+e])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(e){!this.isDisabled()&&e?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(e){e?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,a=baidu.editor.ui.Stateful,i=baidu.editor.ui.Button=function(e){if(e.name){var t=e.name,a=e.cssRules;e.className||(e.className="edui-for-"+t),e.cssRules=".edui-default  .edui-for-"+t+" .edui-icon {"+a+"}"}this.initOptions(e),this.initButton()};i.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&e.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(e){var t=e.target||e.srcElement,a=t&&t.tagName&&t.tagName.toLowerCase();if("input"==a||"object"==a||"object"==a)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(e){this.getDom("label").innerHTML=e}},e.inherits(i,t),e.extend(i.prototype,a)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,a=(baidu.editor.dom.domUtils,baidu.editor.ui.UIBase),i=baidu.editor.ui.Stateful,l=baidu.editor.ui.SplitButton=function(e){this.initOptions(e),this.initSplitButton()};l.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){if(this.initUIBase(),this.Stateful_init(),null!=this.popup){var e=this.popup;this.popup=null,this.setPopup(e)}},_UIBase_postRender:a.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(a){this.popup!==a&&(null!=this.popup&&this.popup.dispose(),a.addListener("show",e.bind(this._onPopupShow,this)),a.addListener("hide",e.bind(this._onPopupHide,this)),a.addListener("postrender",e.bind(function(){a.getDom("body").appendChild(t.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(t.getClientRect(this.getDom()).width+20)+'px"></div>')),a.getDom().className+=" "+this.className},this)),this.popup=a)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var e=t.getClientRect(this.getDom());e.top-=this.popup.SHADOW_RADIUS,e.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(e)},_onArrowClick:function(e,t){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},e.inherits(l,a),e.extend(l.prototype,i,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,a=baidu.editor.ui.ColorPicker,i=baidu.editor.ui.Popup,l=baidu.editor.ui.SplitButton,s=baidu.editor.ui.ColorButton=function(e){this.initOptions(e),this.initColorButton()};s.prototype={initColorButton:function(){var e=this;this.popup=new i({content:new a({noColorText:e.editor.getLang("clearColor"),editor:e.editor,onpickcolor:function(t,a){e._onPickColor(a)},onpicknocolor:function(t,a){e._onPickNoColor(a)}}),editor:e.editor}),this.initSplitButton()},_SplitButton_postRender:l.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(t.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.getDom("colorlump").style.backgroundColor=e,this.color=e},_onPickColor:function(e){!1!==this.fireEvent("pickcolor",e)&&(this.setColor(e),this.popup.hide())},_onPickNoColor:function(e){!1!==this.fireEvent("picknocolor")&&this.popup.hide()}},e.inherits(s,l)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,a=baidu.editor.ui.TablePicker,i=baidu.editor.ui.SplitButton,l=baidu.editor.ui.TableButton=function(e){this.initOptions(e),this.initTableButton()};l.prototype={initTableButton:function(){var e=this;this.popup=new t({content:new a({editor:e.editor,onpicktable:function(t,a,i){e._onPickTable(a,i)}}),editor:e.editor}),this.initSplitButton()},_onPickTable:function(e,t){!1!==this.fireEvent("picktable",e,t)&&this.popup.hide()}},e.inherits(l,i)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,a=baidu.editor.ui.AutoTypeSetPicker=function(e){this.initOptions(e),this.initAutoTypeSetPicker()};a.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this.editor,t=e.options.autotypeset,a=e.getLang("autoTypeSet"),i="textAlignValue"+e.uid,l="imageBlockLineValue"+e.uid,s="symbolConverValue"+e.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(t.mergeEmptyline?"checked":"")+">"+a.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(t.removeEmptyline?"checked":"")+">"+a.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(t.removeClass?"checked":"")+">"+a.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(t.indent?"checked":"")+">"+a.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(t.textAlign?"checked":"")+">"+a.alignment+'</td><td colspan="2" id="'+i+'"><input type="radio" name="'+i+'" value="left" '+(t.textAlign&&"left"==t.textAlign?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+i+'" value="center" '+(t.textAlign&&"center"==t.textAlign?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+i+'" value="right" '+(t.textAlign&&"right"==t.textAlign?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(t.imageBlockLine?"checked":"")+">"+a.imageFloat+'</td><td nowrap id="'+l+'"><input type="radio" name="'+l+'" value="none" '+(t.imageBlockLine&&"none"==t.imageBlockLine?"checked":"")+">"+e.getLang("default")+'<input type="radio" name="'+l+'" value="left" '+(t.imageBlockLine&&"left"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+l+'" value="center" '+(t.imageBlockLine&&"center"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+l+'" value="right" '+(t.imageBlockLine&&"right"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(t.clearFontSize?"checked":"")+">"+a.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(t.clearFontFamily?"checked":"")+">"+a.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(t.removeEmptyNode?"checked":"")+">"+a.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(t.pasteFilter?"checked":"")+">"+a.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(t.bdc2sb||t.tobdc?"checked":"")+">"+a.symbol+'</td><td id="'+s+'"><input type="radio" name="bdc" value="bdc2sb" '+(t.bdc2sb?"checked":"")+">"+a.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(t.tobdc?"checked":"")+">"+a.tobdc+'</td><td nowrap align="right"><button >'+a.run+"</button></td></tr></table></div></div>"},_UIBase_render:t.prototype.render},e.inherits(a,t)}(),function(){function e(e){for(var a,i={},l=e.getDom(),s=e.editor.uid,o=null,r=domUtils.getElementsByTagName(l,"input"),n=r.length-1;a=r[n--];)if("checkbox"==a.getAttribute("type"))if(i[o=a.getAttribute("name")]&&delete i[o],a.checked){var c=document.getElementById(o+"Value"+s);if(c){if(/input/gi.test(c.tagName))i[o]=c.value;else for(var d,u=c.getElementsByTagName("input"),p=u.length-1;d=u[p--];)if(d.checked){i[o]=d.value;break}}else i[o]=!0}else i[o]=!1;else i[a.getAttribute("value")]=a.checked;var m,h=domUtils.getElementsByTagName(l,"select");for(n=0;m=h[n++];){var f=m.getAttribute("name");i[f]=i[f]?m.value:""}t.extend(e.editor.options.autotypeset,i),e.editor.setPreferences("autotypeset",i)}var t=baidu.editor.utils,a=baidu.editor.ui.Popup,i=baidu.editor.ui.AutoTypeSetPicker,l=baidu.editor.ui.SplitButton,s=baidu.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e),this.initAutoTypeSetButton()};s.prototype={initAutoTypeSetButton:function(){var t=this;this.popup=new a({content:new i({editor:t.editor}),editor:t.editor,hide:function(){!this._hidden&&this.getDom()&&(e(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var l=0;this.popup.addListener("postRenderAfter",function(){var a=this;if(!l){var i=this.getDom();i.getElementsByTagName("button")[0].onclick=function(){e(a),t.editor.execCommand("autotypeset"),a.hide()},domUtils.on(i,"click",function(i){var l=i.target||i.srcElement,s=t.editor.uid;if(l&&"INPUT"==l.tagName){if("imageBlockLine"==l.name||"textAlign"==l.name||"symbolConver"==l.name)for(var o=l.checked,r=document.getElementById(l.name+"Value"+s).getElementsByTagName("input"),n={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},c=0;c<r.length;c++)o?r[c].value==n[l.name]&&(r[c].checked="checked"):r[c].checked=!1;if(l.name=="imageBlockLineValue"+s||l.name=="textAlignValue"+s||"bdc"==l.name){var d=l.parentNode.previousSibling.getElementsByTagName("input");d&&(d[0].checked=!0)}e(a)}}),l=1}}),this.initSplitButton()}},t.inherits(s,l)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,a=baidu.editor.ui.Stateful,i=baidu.editor.ui.UIBase,l=baidu.editor.ui.CellAlignPicker=function(e){this.initOptions(e),this.initSelected(),this.initCellAlignPicker()};l.prototype={initSelected:function(){var e={top:0,middle:1,bottom:2},t={left:0,center:1,right:2},a=3;this.selected&&(this.selectedIndex=e[this.selected.valign]*a+t[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){for(var e=["left","center","right"],t=null,a=-1,i=[],l=0;l<9;l++)t=this.selectedIndex===l?' class="edui-cellalign-selected" ':"",0===(a=l%3)&&i.push("<tr>"),i.push('<td index="'+l+'" '+t+' stateful><div class="edui-icon edui-'+e[a]+'"></div></td>'),2===a&&i.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+i.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(e){var a=e.target||e.srcElement;/icon/.test(a.className)&&(this.items[a.parentNode.getAttribute("index")].onclick(),t.postHide(e))},_UIBase_render:i.prototype.render},e.inherits(l,i),e.extend(l.prototype,a,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Stateful,a=baidu.editor.ui.uiUtils,i=baidu.editor.ui.UIBase,l=baidu.editor.ui.PastePicker=function(e){this.initOptions(e),this.initPastePicker()};l.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(e){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",e)},_onClick:function(e){var t=domUtils.getNextDomNode(e),i=a.getViewportRect().height,l=a.getClientRect(t);l.top+l.height>i?t.style.top=-l.height-e.offsetHeight+"px":t.style.top="",/hidden/gi.test(domUtils.getComputedStyle(t,"visibility"))?(t.style.visibility="visible",domUtils.addClass(e,"edui-state-opened")):(t.style.visibility="hidden",domUtils.removeClasses(e,"edui-state-opened"))},_UIBase_render:i.prototype.render},e.inherits(l,i),e.extend(l.prototype,t,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,a=baidu.editor.ui.UIBase,i=baidu.editor.ui.Toolbar=function(e){this.initOptions(e),this.initToolbar()};i.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(e,t){void 0===t?this.items.push(e):this.items.splice(t,0,e)},getHtmlTpl:function(){for(var e=[],t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e.join("")+"</div>"},postRender:function(){for(var e=this.getDom(),a=0;a<this.items.length;a++)this.items[a].postRender();t.makeUnselectable(e)},_onMouseDown:function(e){var t=e.target||e.srcElement,a=t&&t.tagName&&t.tagName.toLowerCase();if("input"==a||"object"==a||"object"==a)return!1}},e.inherits(i,a)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,a=baidu.editor.ui.uiUtils,i=baidu.editor.ui.UIBase,l=baidu.editor.ui.Popup,s=baidu.editor.ui.Stateful,o=baidu.editor.ui.CellAlignPicker,r=baidu.editor.ui.Menu=function(e){this.initOptions(e),this.initMenu()},n={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};r.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];"-"==t?this.items[e]=this.getSeparator():t instanceof c||(t.editor=this.editor,t.theme=this.editor.options.theme,this.items[e]=this.createItem(t))}},getSeparator:function(){return n},createItem:function(e){return e.menu=this,new c(e)},_Popup_getContentHtmlTpl:l.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var e=[],t=0;t<this.items.length;t++){var a=this.items[t];e[t]=a.renderHtml()}return'<div class="%%-body">'+e.join("")+"</div>"},_Popup_postRender:l.prototype.postRender,postRender:function(){for(var e=this,i=0;i<this.items.length;i++){var l=this.items[i];l.ownerMenu=this,l.postRender()}t.on(this.getDom(),"mouseover",function(t){var i=(t=t||event).relatedTarget||t.fromElement,l=e.getDom();a.contains(l,i)||l===i||e.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(e){if(e){if(a.contains(this.getDom(),e))return!1;for(var t=0;t<this.items.length;t++){if(!1===this.items[t].queryAutoHide(e))return!1}}},clearItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];clearTimeout(t._showingTimer),clearTimeout(t._closingTimer),t.subMenu&&t.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&t.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},e.inherits(r,l);var c=baidu.editor.ui.MenuItem=function(e){if(this.initOptions(e),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof r))if(e.className&&-1!=e.className.indexOf("aligntd")){var a=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new l({content:new o(this.subMenu),parentMenu:a,editor:a.editor,destroy:function(){this.getDom()&&t.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){t.on(this.getDom(),"mouseover",function(){a.addState("opened")})})}else this.subMenu=new r(this.subMenu)};c.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var e=this;this.addListener("over",function(){e.ownerMenu.fireEvent("submenuover",e),e.subMenu&&e.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){e.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(e._closingTimer),e._closingTimer=null,e.addState("opened")}),this.ownerMenu.addListener("hide",function(){e.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(t,a){a!==e&&e.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(t){return(!t||!a.contains(e.getDom(),t))&&this._bakQueryAutoHide(t)}),this.getDom().style.tabIndex="-1",a.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var e=this;e.isDisabled()||(e.addState("opened"),clearTimeout(e._showingTimer),clearTimeout(e._closingTimer),e._closingTimer=null,e._showingTimer=setTimeout(function(){e.showSubMenu()},250))},delayHideSubMenu:function(){var e=this;e.isDisabled()||(e.removeState("opened"),clearTimeout(e._showingTimer),e._closingTimer||(e._closingTimer=setTimeout(function(){e.hasState("opened")||e.hideSubMenu(),e._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(e){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(e)},_onClick:function(e,t){this.hasState("disabled")||!1!==this.fireEvent("click",e,t)&&(this.subMenu?this.showSubMenu():l.postHide(e))},showSubMenu:function(){var e=a.getClientRect(this.getDom());e.right-=5,e.left+=2,e.width-=7,e.top-=4,e.bottom+=4,e.height+=8,this.subMenu.showAnchorRect(e,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},e.inherits(c,i),e.extend(c.prototype,s,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,a=baidu.editor.ui.Menu,i=baidu.editor.ui.SplitButton,l=baidu.editor.ui.Combox=function(e){this.initOptions(e),this.initCombox()};l.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var e=this;this.items=this.items||[];for(var t=0;t<this.items.length;t++){var i=this.items[t];i.uiName="listitem",i.index=t,i.onclick=function(){e.selectByIndex(this.index)}}this.popup=new a({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:i.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var e=t.getClientRect(this.getDom());e.top+=1,e.bottom-=1,e.height-=2,this.popup.showAnchorRect(e)},getValue:function(){return this.value},setValue:function(e){var t=this.indexByValue(e);-1!=t?(this.selectedIndex=t,this.setLabel(this.items[t].label),this.value=this.items[t].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(e)),this.value=e)},setLabel:function(e){this.getDom("button_body").innerHTML=e,this.label=e},getLabelForUnknowValue:function(e){return e},indexByValue:function(e){for(var t=0;t<this.items.length;t++)if(e==this.items[t].value)return t;return-1},getItem:function(e){return this.items[e]},selectByIndex:function(e){e<this.items.length&&!1!==this.fireEvent("select",e)&&(this.selectedIndex=e,this.value=this.items[e].value,this.setLabel(this.items[e].label))}},e.inherits(l,i)}(),function(){var e,t,a,i=baidu.editor.utils,l=baidu.editor.dom.domUtils,s=baidu.editor.ui.uiUtils,o=baidu.editor.ui.Mask,r=baidu.editor.ui.UIBase,n=baidu.editor.ui.Button,c=baidu.editor.ui.Dialog=function(e){if(e.name){var t=e.name,a=e.cssRules;e.className||(e.className="edui-for-"+t),a&&(e.cssRules=".edui-default .edui-for-"+t+" .edui-dialog-content  {"+a+"}")}this.initOptions(i.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(e,t){return t?this.onok():this.oncancel()},holdScroll:!1},e)),this.initDialog()};c.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var l=this,s=this.editor.options.theme;if(this.cssRules&&i.cssRule("edui-customize-"+this.name+"-style",this.cssRules),this.initUIBase(),this.modalMask=e||(e=new o({className:"edui-dialog-modalmask",theme:s,onclick:function(){a&&a.close(!1)}})),this.dragMask=t||(t=new o({className:"edui-dialog-dragmask",theme:s})),this.closeButton=new n({className:"edui-dialog-closebutton",title:l.closeDialog,theme:s,onclick:function(){l.close(!1)}}),this.fullscreen&&this.initResizeEvent(),this.buttons)for(var r=0;r<this.buttons.length;r++)this.buttons[r]instanceof n||(this.buttons[r]=new n(i.extend(this.buttons[r],{editor:this.editor},!0)))},initResizeEvent:function(){var e=this;l.on(window,"resize",function(){e._hidden||void 0===e._hidden||(e.__resizeTimer&&window.clearTimeout(e.__resizeTimer),e.__resizeTimer=window.setTimeout(function(){e.__resizeTimer=null;var t=e.getDom(),a=e.getDom("content"),i=UE.ui.uiUtils.getClientRect(t),l=UE.ui.uiUtils.getClientRect(a),o=s.getViewportRect();a.style.width=o.width-i.width+l.width+"px",a.style.height=o.height-i.height+l.height+"px",t.style.width=o.width+"px",t.style.height=o.height+"px",e.fireEvent("resize")},100))})},fitSize:function(){var e=this.getDom("body"),t=this.mesureSize();return e.style.width=t.width+"px",e.style.height=t.height+"px",t},safeSetOffset:function(e){var t=this.getDom(),a=s.getViewportRect(),i=s.getClientRect(t),l=e.left;l+i.width>a.right&&(l=a.right-i.width);var o=e.top;o+i.height>a.bottom&&(o=a.bottom-i.height),t.style.left=Math.max(l,0)+"px",t.style.top=Math.max(o,0)+"px"},showAtCenter:function(){var e=s.getViewportRect();if(this.fullscreen){var t=this.getDom(),a=this.getDom("content");t.style.display="block";var i=UE.ui.uiUtils.getClientRect(t),o=UE.ui.uiUtils.getClientRect(a);t.style.left="-100000px",a.style.width=e.width-i.width+o.width+"px",a.style.height=e.height-i.height+o.height+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}else{this.getDom().style.display="";var r=this.fitSize(),n=0|this.getDom("titlebar").offsetHeight,c=e.width/2-r.width/2,d=e.height/2-(r.height-n)/2-n,u=this.getDom();this.safeSetOffset({left:Math.max(0|c,0),top:Math.max(0|d,0)}),l.hasClass(u,"edui-state-centered")||(u.className+=" edui-state-centered")}this._show()},getContentHtml:function(){var e="";return"string"==typeof this.content?e=this.content:this.iframeUrl&&(e='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),e},getHtmlTpl:function(){var e="";if(this.buttons){for(var t=[],a=0;a<this.buttons.length;a++)t[a]=this.buttons[a].renderHtml();e='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+t.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+e+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var e=this;if(this.addListener("show",function(){e.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){e.modalMask.hide()}),this.buttons)for(var t=0;t<this.buttons.length;t++)this.buttons[t].postRender();l.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e.safeSetOffset(s.getClientRect(e.getDom()))})}),this._hide()},mesureSize:function(){var e=this.getDom("body"),t=s.getClientRect(this.getDom("content")).width;return e.style.width=t,s.getClientRect(e)},_onTitlebarMouseDown:function(e,t){if(this.draggable){var a,i=(s.getViewportRect(),this);s.startDrag(e,{ondragstart:function(){a=s.getClientRect(i.getDom()),i.getDom("contmask").style.visibility="visible",i.dragMask.show(i.getDom().style.zIndex-1)},ondragmove:function(e,t){var l=a.left+e,s=a.top+t;i.safeSetOffset({left:l,top:s})},ondragstop:function(){i.getDom("contmask").style.visibility="hidden",l.removeClasses(i.getDom(),["edui-state-centered"]),i.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var e=this.getDom();e.style.display="none",e.style.zIndex="",e.style.width="",e.style.height="",this._hidden=!0,this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(e){this.render(),this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom("iframe").focus()}catch(e){}a=this},_onCloseButtonClick:function(e,t){this.close(!1)},close:function(e){if(!1!==this.fireEvent("close",e)){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide();var t=this.getDom("content"),a=this.getDom("iframe");if(t&&a){var i=a.contentDocument||a.contentWindow.document;i&&(i.body.innerHTML=""),l.remove(t)}}}},i.inherits(c,r)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Menu,a=baidu.editor.ui.SplitButton,i=baidu.editor.ui.MenuButton=function(e){this.initOptions(e),this.initMenuButton()};i.prototype={initMenuButton:function(){var e=this;this.uiName="menubutton",this.popup=new t({items:e.items,className:e.className,editor:e.editor}),this.popup.addListener("show",function(){for(var t=this,a=0;a<t.items.length;a++)t.items[a].removeState("checked"),t.items[a].value==e._value&&(t.items[a].addState("checked"),this.value=e._value)}),this.initSplitButton()},setValue:function(e){this._value=e}},e.inherits(i,a)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,a=baidu.editor.ui.SplitButton,i=baidu.editor.ui.MultiMenuPop=function(e){this.initOptions(e),this.initMultiMenu()};i.prototype={initMultiMenu:function(){var e=this;this.popup=new t({content:"",editor:e.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+e.id+'_iframe" src="'+e.iframeUrl+'" frameborder="0"></iframe>',e.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*e.editor.container.style.zIndex+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},e.inherits(i,a)}(),function(){function e(e){var t=e.target||e.srcElement;if(!o.findParent(t,function(e){return o.hasClass(e,"edui-shortcutmenu")||o.hasClass(e,"edui-popup")},!0))for(var a,i=0;a=r[i++];)a.hide()}var t,a=baidu.editor.ui,i=a.UIBase,l=a.uiUtils,s=baidu.editor.utils,o=baidu.editor.dom.domUtils,r=[],n=!1,c=a.ShortCutMenu=function(e){this.initOptions(e),this.initShortCutMenu()};c.postHide=e,c.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),r.push(this)},initEvent:function(){var e=this,a=e.editor.document;o.on(a,"mousemove",function(a){if(!1===e.isHidden){if(e.getSubMenuMark()||"contextmenu"==e.eventType)return;var i=!0,l=e.getDom(),s=l.offsetWidth,o=l.offsetHeight,r=s/2+e.SPACE,n=o/2,c=Math.abs(a.screenX-e.left),d=Math.abs(a.screenY-e.top);clearTimeout(t),t=setTimeout(function(){d>0&&d<n?e.setOpacity(l,"1"):d>n&&d<n+70?(e.setOpacity(l,"0.5"),i=!1):d>n+70&&d<n+140&&e.hide(),i&&c>0&&c<r?e.setOpacity(l,"1"):c>r&&c<r+70?e.setOpacity(l,"0.5"):c>r+70&&c<r+140&&e.hide()})}}),browser.chrome&&o.on(a,"mouseout",function(t){var a=t.relatedTarget||t.toElement;null!=a&&"HTML"!=a.tagName||e.hide()}),e.editor.addListener("afterhidepop",function(){e.isHidden||(n=!0)})},initItems:function(){if(s.isArray(this.items))for(var e=0,t=this.items.length;e<t;e++){var i=this.items[e].toLowerCase();a[i]&&(this.items[e]=new a[i](this.editor),this.items[e].className+=" edui-shortcutsubmenu ")}},setOpacity:function(e,t){browser.ie&&browser.version<9?e.style.filter="alpha(opacity = "+100*parseFloat(t)+");":e.style.opacity=t},getSubMenuMark:function(){n=!1;for(var e,t=l.getFixedLayer(),a=o.getElementsByTagName(t,"div",function(e){return o.hasClass(e,"edui-shortcutsubmenu edui-popup")}),i=0;e=a[i++];)"none"!=e.style.display&&(n=!0);return n},show:function(e,t){function a(e){e.left<0&&(e.left=0),e.top<0&&(e.top=0),n.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;"}function i(e){e.tagName||(e=e.getDom()),r.left=parseInt(e.style.left),r.top=parseInt(e.style.top),r.top-=n.offsetHeight+15,a(r)}var s=this,r={},n=this.getDom(),c=l.getFixedLayer();if(s.eventType=e.type,n.style.cssText="display:block;left:-9999px","contextmenu"==e.type&&t){var d=o.getElementsByTagName(c,"div","edui-contextmenu")[0];d?i(d):s.editor.addListener("aftershowcontextmenu",function(e,t){i(t)})}else(r=l.getViewportOffsetByEvent(e)).top-=n.offsetHeight+s.SPACE,r.left+=s.SPACE+20,a(r),s.setOpacity(n,.2);s.isHidden=!1,s.left=e.screenX+n.offsetWidth/2-s.SPACE,s.top=e.screenY-n.offsetHeight/2-s.SPACE,s.editor&&(n.style.zIndex=1*s.editor.container.style.zIndex+10,c.style.zIndex=n.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(s.isArray(this.items))for(var e,t=0;e=this.items[t++];)e.postRender()},getHtmlTpl:function(){var e;if(s.isArray(this.items)){e=[];for(var t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();e=e.join("")}else e=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+e+"</div>"}},s.inherits(c,i),o.on(document,"mousedown",function(t){e(t)}),o.on(window,"scroll",function(t){e(t)})}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,a=baidu.editor.ui.Breakline=function(e){this.initOptions(e),this.initSeparator()};a.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},e.inherits(a,t)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,a=baidu.editor.ui.UIBase,i=baidu.editor.ui.Message=function(e){this.initOptions(e),this.initMessage()};i.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(e){var t=this;e.keepshow||(clearTimeout(this.timer),t.timer=setTimeout(function(){t.hide()},e.timeout||4e3)),void 0!==e.content&&t.setContent(e.content),void 0!==e.type&&t.setType(e.type),t.show()},postRender:function(){var e=this,a=this.getDom("closer");a&&t.on(a,"click",function(){e.hide()})},setContent:function(e){this.getDom("content").innerHTML=e},setType:function(e){e=e||"info";var t=this.getDom("body");t.className=t.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+e)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var e=this.getDom("body").match(/edui-message-type-([\w-]+)/);return e?e[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var e=this.getDom();e&&(e.style.display="none",e.parentNode&&e.parentNode.removeChild(e))}},e.inherits(i,a)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui,a=t.Dialog;t.buttons={},t.Dialog=function(e){var t=new a(e);return t.addListener("hide",function(){if(t.editor){var e=t.editor;try{if(browser.gecko){var a=e.window.scrollY,i=e.window.scrollX;e.body.focus(),e.window.scrollTo(i,a)}else e.focus()}catch(e){}}}),t};for(var i={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},l=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"],s=0;n=l[s++];)n=n.toLowerCase(),t[n]=function(e){return function(a){var i=new t.Button({className:"edui-for-"+e,title:a.options.labelMap[e]||a.getLang("labelMap."+e)||"",onclick:function(){a.execCommand(e)},theme:a.options.theme,showText:!1});return t.buttons[e]=i,a.addListener("selectionchange",function(t,l,s){var o=a.queryCommandState(e);-1==o?(i.setDisabled(!0),i.setChecked(!1)):s||(i.setDisabled(!1),i.setChecked(o))}),i}}(n);t.cleardoc=function(e){var a=new t.Button({className:"edui-for-cleardoc",title:e.options.labelMap.cleardoc||e.getLang("labelMap.cleardoc")||"",theme:e.options.theme,onclick:function(){confirm(e.getLang("confirmClear"))&&e.execCommand("cleardoc")}});return t.buttons.cleardoc=a,e.addListener("selectionchange",function(){a.setDisabled(-1==e.queryCommandState("cleardoc"))}),a};var o={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var r in o)!function(e,a){for(var i,l=0;i=a[l++];)!function(a){t[e.replace("float","")+a]=function(i){var l=new t.Button({className:"edui-for-"+e.replace("float","")+a,title:i.options.labelMap[e.replace("float","")+a]||i.getLang("labelMap."+e.replace("float","")+a)||"",theme:i.options.theme,onclick:function(){i.execCommand(e,a)}});return t.buttons[e]=l,i.addListener("selectionchange",function(t,s,o){l.setDisabled(-1==i.queryCommandState(e)),l.setChecked(i.queryCommandValue(e)==a&&!o)}),l}}(i)}(r,o[r]);var n;for(s=0;n=["backcolor","forecolor"][s++];)t[n]=function(e){return function(a){var i=new t.ColorButton({className:"edui-for-"+e,color:"default",title:a.options.labelMap[e]||a.getLang("labelMap."+e)||"",editor:a,onpickcolor:function(t,i){a.execCommand(e,i)},onpicknocolor:function(){a.execCommand(e,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){a.execCommand(e,this.color)}});return t.buttons[e]=i,a.addListener("selectionchange",function(){i.setDisabled(-1==a.queryCommandState(e))}),i}}(n);var c={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var r in c)!function(a,l){for(var s,o=0;s=l[o++];)browser.opera&&"searchreplace"===s||function(l){t[l]=function(s,o,r){var n;o=o||(s.options.iframeUrlMap||{})[l]||i[l],r=s.options.labelMap[l]||s.getLang("labelMap."+l)||"",o&&(n=new t.Dialog(e.extend({iframeUrl:s.ui.mapUrl(o),editor:s,className:"edui-for-"+l,title:r,holdScroll:"insertimage"===l,fullscreen:/charts|preview/.test(l),closeDialog:s.getLang("closeDialog")},"ok"==a?{buttons:[{className:"edui-okbutton",label:s.getLang("ok"),editor:s,onclick:function(){n.close(!0)}},{className:"edui-cancelbutton",label:s.getLang("cancel"),editor:s,onclick:function(){n.close(!1)}}]}:{})),s.ui._dialogs[l+"Dialog"]=n);var c=new t.Button({className:"edui-for-"+l,title:r,onclick:function(){if(n)switch(l){case"wordimage":var e=s.execCommand("wordimage");e&&e.length&&(n.render(),n.open());break;case"scrawl":-1!=s.queryCommandState("scrawl")&&(n.render(),n.open());break;default:n.render(),n.open()}},theme:s.options.theme,disabled:"scrawl"==l&&-1==s.queryCommandState("scrawl")||"charts"==l});return t.buttons[l]=c,s.addListener("selectionchange",function(){if(!(l in{edittable:1})){var e=s.queryCommandState(l);c.getDom()&&(c.setDisabled(-1==e),c.setChecked(e))}}),c}}(s.toLowerCase())}(r,c[r]);t.snapscreen=function(e,a,l){l=e.options.labelMap.snapscreen||e.getLang("labelMap.snapscreen")||"";var s=new t.Button({className:"edui-for-snapscreen",title:l,onclick:function(){e.execCommand("snapscreen")},theme:e.options.theme});if(t.buttons.snapscreen=s,a=a||(e.options.iframeUrlMap||{}).snapscreen||i.snapscreen){var o=new t.Dialog({iframeUrl:e.ui.mapUrl(a),editor:e,className:"edui-for-snapscreen",title:l,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){o.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){o.close(!1)}}]});o.render(),e.ui._dialogs.snapscreenDialog=o}return e.addListener("selectionchange",function(){s.setDisabled(-1==e.queryCommandState("snapscreen"))}),s},t.insertcode=function(a,i,l){i=a.options.insertcode||[],l=a.options.labelMap.insertcode||a.getLang("labelMap.insertcode")||"";var s=[];e.each(i,function(e,t){s.push({label:e,value:t,theme:a.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var o=new t.Combox({editor:a,items:s,onselect:function(e,t){a.execCommand("insertcode",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:l,initValue:l,className:"edui-for-insertcode",indexByValue:function(e){if(e)for(var t,a=0;t=this.items[a];a++)if(-1!=t.value.indexOf(e))return a;return-1}});return t.buttons.insertcode=o,a.addListener("selectionchange",function(e,t,i){if(!i)if(-1==a.queryCommandState("insertcode"))o.setDisabled(!0);else{o.setDisabled(!1);var s=a.queryCommandValue("insertcode");if(!s)return void o.setValue(l);s&&(s=s.replace(/['"]/g,"").split(",")[0]),o.setValue(s)}}),o},t.fontfamily=function(a,i,l){if(i=a.options.fontfamily||[],l=a.options.labelMap.fontfamily||a.getLang("labelMap.fontfamily")||"",i.length){for(var s,o=0,r=[];s=i[o];o++){var n=a.getLang("fontfamily")[s.name]||"";!function(t,i){r.push({label:t,value:i,theme:a.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+e.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})}(s.label||n,s.val)}var c=new t.Combox({editor:a,items:r,onselect:function(e,t){a.execCommand("FontFamily",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:l,initValue:l,className:"edui-for-fontfamily",indexByValue:function(e){if(e)for(var t,a=0;t=this.items[a];a++)if(-1!=t.value.indexOf(e))return a;return-1}});return t.buttons.fontfamily=c,a.addListener("selectionchange",function(e,t,i){if(!i)if(-1==a.queryCommandState("FontFamily"))c.setDisabled(!0);else{c.setDisabled(!1);var l=a.queryCommandValue("FontFamily");l&&(l=l.replace(/['"]/g,"").split(",")[0]),c.setValue(l)}}),c}},t.fontsize=function(e,a,i){if(i=e.options.labelMap.fontsize||e.getLang("labelMap.fontsize")||"",(a=a||e.options.fontsize||[]).length){for(var l=[],s=0;s<a.length;s++){var o=a[s]+"px";l.push({label:o,value:o,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var r=new t.Combox({editor:e,items:l,title:i,initValue:i,onselect:function(t,a){e.execCommand("FontSize",this.items[a].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return t.buttons.fontsize=r,e.addListener("selectionchange",function(t,a,i){i||(-1==e.queryCommandState("FontSize")?r.setDisabled(!0):(r.setDisabled(!1),r.setValue(e.queryCommandValue("FontSize"))))}),r}},t.paragraph=function(a,i,l){if(l=a.options.labelMap.paragraph||a.getLang("labelMap.paragraph")||"",i=a.options.paragraph||[],!e.isEmptyObject(i)){var s=[];for(var o in i)s.push({value:o,label:i[o]||a.getLang("paragraph")[o],theme:a.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var r=new t.Combox({editor:a,items:s,title:l,initValue:l,className:"edui-for-paragraph",onselect:function(e,t){a.execCommand("Paragraph",this.items[t].value)},onbuttonclick:function(){this.showPopup()}});return t.buttons.paragraph=r,a.addListener("selectionchange",function(e,t,i){if(!i)if(-1==a.queryCommandState("Paragraph"))r.setDisabled(!0);else{r.setDisabled(!1);var l=a.queryCommandValue("Paragraph");-1!=r.indexByValue(l)?r.setValue(l):r.setValue(r.initValue)}}),r}},t.customstyle=function(e){var a=e.options.customstyle||[],i=e.options.labelMap.customstyle||e.getLang("labelMap.customstyle")||"";if(a.length){for(var l,s=e.getLang("customstyle"),o=0,r=[];l=a[o++];)!function(t){var a={};a.label=t.label?t.label:s[t.name],a.style=t.style,a.className=t.className,a.tag=t.tag,r.push({label:a.label,value:a,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+a.tag+" "+(a.className?' class="'+a.className+'"':"")+(a.style?' style="'+a.style+'"':"")+">"+a.label+"</"+a.tag+"></div>"}})}(l);var n=new t.Combox({editor:e,items:r,title:i,initValue:i,className:"edui-for-customstyle",onselect:function(t,a){e.execCommand("customstyle",this.items[a].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(e){for(var t,a=0;t=this.items[a++];)if(t.label==e)return a-1;return-1}});return t.buttons.customstyle=n,e.addListener("selectionchange",function(t,a,i){if(!i)if(-1==e.queryCommandState("customstyle"))n.setDisabled(!0);else{n.setDisabled(!1);var l=e.queryCommandValue("customstyle");-1!=n.indexByValue(l)?n.setValue(l):n.setValue(n.initValue)}}),n}},t.inserttable=function(e,a,i){i=e.options.labelMap.inserttable||e.getLang("labelMap.inserttable")||"";var l=new t.TableButton({editor:e,title:i,className:"edui-for-inserttable",onpicktable:function(t,a,i){e.execCommand("InsertTable",{numRows:i,numCols:a,border:1})},onbuttonclick:function(){this.showPopup()}});return t.buttons.inserttable=l,e.addListener("selectionchange",function(){l.setDisabled(-1==e.queryCommandState("inserttable"))}),l},t.lineheight=function(e){var a=e.options.lineheight||[];if(a.length){for(var i,l=0,s=[];i=a[l++];)s.push({label:i,value:i,theme:e.options.theme,onclick:function(){e.execCommand("lineheight",this.value)}});var o=new t.MenuButton({editor:e,className:"edui-for-lineheight",title:e.options.labelMap.lineheight||e.getLang("labelMap.lineheight")||"",items:s,onbuttonclick:function(){var t=e.queryCommandValue("LineHeight")||this.value;e.execCommand("LineHeight",t)}});return t.buttons.lineheight=o,e.addListener("selectionchange",function(){var t=e.queryCommandState("LineHeight");if(-1==t)o.setDisabled(!0);else{o.setDisabled(!1);var a=e.queryCommandValue("LineHeight");a&&o.setValue((a+"").replace(/cm/,"")),o.setChecked(t)}}),o}};for(var d,u=["top","bottom"],p=0;d=u[p++];)!function(e){t["rowspacing"+e]=function(a){var i=a.options["rowspacing"+e]||[];if(!i.length)return null;for(var l,s=0,o=[];l=i[s++];)o.push({label:l,value:l,theme:a.options.theme,onclick:function(){a.execCommand("rowspacing",this.value,e)}});var r=new t.MenuButton({editor:a,className:"edui-for-rowspacing"+e,title:a.options.labelMap["rowspacing"+e]||a.getLang("labelMap.rowspacing"+e)||"",items:o,onbuttonclick:function(){var t=a.queryCommandValue("rowspacing",e)||this.value;a.execCommand("rowspacing",t,e)}});return t.buttons[e]=r,a.addListener("selectionchange",function(){var t=a.queryCommandState("rowspacing",e);if(-1==t)r.setDisabled(!0);else{r.setDisabled(!1);var i=a.queryCommandValue("rowspacing",e);i&&r.setValue((i+"").replace(/%/,"")),r.setChecked(t)}}),r}}(d);for(var m,h=["insertorderedlist","insertunorderedlist"],f=0;m=h[f++];)!function(e){t[e]=function(a){var i=a.options[e],l=function(){a.execCommand(e,this.value)},s=[];for(var o in i)s.push({label:i[o]||a.getLang()[e][o]||"",value:o,theme:a.options.theme,onclick:l});var r=new t.MenuButton({editor:a,className:"edui-for-"+e,title:a.getLang("labelMap."+e)||"",items:s,onbuttonclick:function(){var t=a.queryCommandValue(e)||this.value;a.execCommand(e,t)}});return t.buttons[e]=r,a.addListener("selectionchange",function(){var t=a.queryCommandState(e);if(-1==t)r.setDisabled(!0);else{r.setDisabled(!1);var i=a.queryCommandValue(e);r.setValue(i),r.setChecked(t)}}),r}}(m);t.fullscreen=function(e,a){a=e.options.labelMap.fullscreen||e.getLang("labelMap.fullscreen")||"";var i=new t.Button({className:"edui-for-fullscreen",title:a,theme:e.options.theme,onclick:function(){e.ui&&e.ui.setFullScreen(!e.ui.isFullScreen()),this.setChecked(e.ui.isFullScreen())}});return t.buttons.fullscreen=i,e.addListener("selectionchange",function(){var t=e.queryCommandState("fullscreen");i.setDisabled(-1==t),i.setChecked(e.ui.isFullScreen())}),i},t.emotion=function(e,a){var l="emotion",s=new t.MultiMenuPop({title:e.options.labelMap[l]||e.getLang("labelMap."+l)||"",editor:e,className:"edui-for-"+l,iframeUrl:e.ui.mapUrl(a||(e.options.iframeUrlMap||{})[l]||i[l])});return t.buttons[l]=s,e.addListener("selectionchange",function(){s.setDisabled(-1==e.queryCommandState(l))}),s},t.autotypeset=function(e){var a=new t.AutoTypeSetButton({editor:e,title:e.options.labelMap.autotypeset||e.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){e.execCommand("autotypeset")}});return t.buttons.autotypeset=a,e.addListener("selectionchange",function(){a.setDisabled(-1==e.queryCommandState("autotypeset"))}),a},t.simpleupload=function(e){var a="simpleupload",i=new t.Button({className:"edui-for-"+a,title:e.options.labelMap[a]||e.getLang("labelMap."+a)||"",onclick:function(){},theme:e.options.theme,showText:!1});return t.buttons[a]=i,e.addListener("ready",function(){var t=i.getDom("body").children[0];e.fireEvent("simpleuploadbtnready",t)}),e.addListener("selectionchange",function(t,l,s){var o=e.queryCommandState(a);-1==o?(i.setDisabled(!0),i.setChecked(!1)):s||(i.setDisabled(!1),i.setChecked(o))}),i}}(),function(){function e(e){this.initOptions(e),this.initEditorUI()}var t=baidu.editor.utils,a=baidu.editor.ui.uiUtils,i=baidu.editor.ui.UIBase,l=baidu.editor.dom.domUtils,s=[];e.prototype={uiName:"editor",initEditorUI:function(){function e(e,t){e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var a=e.options,i=a.maximumWords,l=a.wordCountMsg,s=a.wordOverFlowMsg,o=t.getDom("wordcount");if(a.wordCount){var r=e.getContentLength(!0);r>i?(o.innerHTML=s,e.fireEvent("wordcountoverflow")):o.innerHTML=l.replace("{#leave}",i-r).replace("{#count}",r)}}this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var t=this.editor,a=this;t.addListener("ready",function(){t.getDialog=function(e){return t.ui._dialogs[e+"Dialog"]},l.on(t.window,"scroll",function(e){baidu.editor.ui.Popup.postHide(e)}),t.ui._actualFrameWidth=t.options.initialFrameWidth,UE.browser.ie&&6===UE.browser.version&&t.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),t.options.elementPathEnabled&&(t.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+t.getLang("elementPathTip")+":</div>"),t.options.wordCount&&(l.on(t.document,"click",function(){e(t,a),l.un(t.document,"click",arguments.callee)}),t.ui.getDom("wordcount").innerHTML=t.getLang("wordCountTip")),t.ui._scale(),t.options.scaleEnabled?(t.autoHeightEnabled&&t.disableAutoHeight(),a.enableScale()):a.disableScale(),t.options.elementPathEnabled||t.options.wordCount||t.options.scaleEnabled||(t.ui.getDom("elementpath").style.display="none",t.ui.getDom("wordcount").style.display="none",t.ui.getDom("scale").style.display="none"),t.selection.isFocus()&&t.fireEvent("selectionchange",!1,!0)}),t.addListener("mousedown",function(e,t){var a=t.target||t.srcElement;baidu.editor.ui.Popup.postHide(t,a),baidu.editor.ui.ShortCutMenu.postHide(t)}),t.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(t),t.getDialog("edittip").open()});var i,s,o=!1;t.addListener("afterpaste",function(){t.queryCommandState("pasteplain")||(baidu.editor.ui.PastePicker&&(i=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:t}),editor:t,className:"edui-wordpastepop"})).render(),o=!0)}),t.addListener("afterinserthtml",function(){clearTimeout(s),s=setTimeout(function(){if(i&&(o||t.ui._isTransfer)){if(i.isHidden()){var e=l.createElement(t.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"});t.selection.getRange().insertNode(e);var a=getDomNode(e,"firstChild","previousSibling");a&&i.showAnchor(3==a.nodeType?a.parentNode:a),l.remove(e)}else i.show();delete t.ui._isTransfer,o=!1}},200)}),t.addListener("contextmenu",function(e,t){baidu.editor.ui.Popup.postHide(t)}),t.addListener("keydown",function(e,t){i&&i.dispose(t);var a=t.keyCode||t.which;t.altKey&&90==a&&UE.ui.buttons.fullscreen.onclick()}),t.addListener("wordcount",function(t){e(this,a)}),t.addListener("selectionchange",function(){t.options.elementPathEnabled&&a[(-1==t.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"](),t.options.scaleEnabled&&a[(-1==t.queryCommandState("scale")?"dis":"en")+"ableScale"]()});var r=new baidu.editor.ui.Popup({editor:t,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),t.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(e){this.hide(),t.ui._dialogs[e]&&t.ui._dialogs[e].open()},_onImgSetFloat:function(e){this.hide(),t.execCommand("imagefloat",e)},_setIframeAlign:function(e){var t=r.anchorEl,a=t.cloneNode(!0);switch(e){case-2:a.setAttribute("align","");break;case-1:a.setAttribute("align","left");break;case 1:a.setAttribute("align","right")}t.parentNode.insertBefore(a,t),l.remove(t),r.anchorEl=a,r.showAnchor(r.anchorEl)},_updateIframe:function(){var e=t._iframe=r.anchorEl;l.hasClass(e,"ueditor_baidumap")?(t.selection.getRange().selectNode(e).select(),t.ui._dialogs.mapDialog.open(),r.hide()):(t.ui._dialogs.insertframeDialog.open(),r.hide())},_onRemoveButtonClick:function(e){t.execCommand(e),this.hide()},queryAutoHide:function(e){return e&&e.ownerDocument==t.document&&("img"==e.tagName.toLowerCase()||l.findParentByTagName(e,"a",!0))?e!==r.anchorEl:baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,e)}});r.render(),t.options.imagePopup&&(t.addListener("mouseover",function(e,a){var i=(a=a||window.event).target||a.srcElement;if(t.ui._dialogs.insertframeDialog&&/iframe/gi.test(i.tagName)){var l=r.formatHtml("<nobr>"+t.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+t.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+t.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+t.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+t.getLang("modify")+"</span></nobr>");l?(r.getDom("content").innerHTML=l,r.anchorEl=i,r.showAnchor(r.anchorEl)):r.hide()}}),t.addListener("selectionchange",function(e,a){if(a){var i="",s="",o=t.selection.getRange().getClosedNode(),n=t.ui._dialogs;if(o&&"IMG"==o.tagName){var c="insertimageDialog";if(-1==o.className.indexOf("edui-faked-video")&&-1==o.className.indexOf("edui-upload-video")||(c="insertvideoDialog"),-1!=o.className.indexOf("edui-faked-webapp")&&(c="webappDialog"),-1!=o.src.indexOf("http://api.map.baidu.com")&&(c="mapDialog"),-1!=o.className.indexOf("edui-faked-music")&&(c="musicDialog"),-1!=o.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(c="gmapDialog"),o.getAttribute("anchorname")&&(c="anchorDialog",i=r.formatHtml("<nobr>"+t.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+t.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+t.getLang("delete")+"</span></nobr>")),o.getAttribute("word_img")&&(t.word_img=[o.getAttribute("word_img")],c="wordimageDialog"),(l.hasClass(o,"loadingclass")||l.hasClass(o,"loaderrorclass"))&&(c=""),!n[c])return;s="<nobr>"+t.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+t.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+t.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+t.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+t.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+c+'\');" class="edui-clickable">'+t.getLang("modify")+"</span></nobr>",!i&&(i=r.formatHtml(s))}if(t.ui._dialogs.linkDialog){var d,u=t.queryCommandValue("link");if(u&&(d=u.getAttribute("_href")||u.getAttribute("href",2))){var p=d;d.length>30&&(p=d.substring(0,20)+"..."),i&&(i+='<div style="height:5px;"></div>'),i+=r.formatHtml("<nobr>"+t.getLang("anthorMsg")+': <a target="_blank" href="'+d+'" title="'+d+'" >'+p+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+t.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+t.getLang("clear")+"</span></nobr>"),r.showAnchor(u)}}i?(r.getDom("content").innerHTML=i,r.anchorEl=o||u,r.showAnchor(r.anchorEl)):r.hide()}}))},_initToolbars:function(){for(var e=this.editor,a=this.toolbars||[],i=[],l=0;l<a.length;l++){for(var s=a[l],o=new baidu.editor.ui.Toolbar({theme:e.options.theme}),r=0;r<s.length;r++){var n=s[r],c=null;if("string"==typeof n){if("|"==(n=n.toLowerCase())&&(n="Separator"),"||"==n&&(n="Breakline"),baidu.editor.ui[n]&&(c=new baidu.editor.ui[n](e)),"fullscreen"==n){i&&i[0]?i[0].items.splice(0,0,c):c&&o.items.splice(0,0,c);continue}}else c=n;c&&c.id&&o.add(c)}i[l]=o}t.each(UE._customizeUI,function(t,a){var i,l;return(!t.id||t.id==e.key)&&void((i=t.execFn.call(e,e,a))&&(l=t.index,void 0===l&&(l=o.items.length),o.add(i,l)))}),this.toolbars=i},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var e=[],t=0;t<this.toolbars.length;t++)e.push(this.toolbars[t].renderHtml());return e.join("")},setFullScreen:function(e){var t=this.editor,a=t.container.parentNode.parentNode;if(this._fullscreen!=e){if(this._fullscreen=e,this.editor.fireEvent("beforefullscreenchange",e),baidu.editor.browser.gecko)var i=t.selection.getRange().createBookmark();if(e){for(;"BODY"!=a.tagName;){var l=baidu.editor.dom.domUtils.getComputedStyle(a,"position");s.push(l),a.style.position="static",a=a.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=t.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(t.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,t.iframe.parentNode.style.width="",this._updateFullScreen()}else{for(;"BODY"!=a.tagName;)a.style.position=s.shift(),a=a.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(t.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,t.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&"true"===t.body.contentEditable){var o=document.createElement("input");document.body.appendChild(o),t.body.contentEditable=!1,setTimeout(function(){o.focus(),setTimeout(function(){t.body.contentEditable=!0,t.fireEvent("fullscreenchanged",e),t.selection.getRange().moveToBookmark(i).select(!0),baidu.editor.dom.domUtils.remove(o),e&&window.scroll(0,0)},0)},0)}"true"===t.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",e),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var e=a.getViewportRect();if(this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+(1*this.getDom().style.zIndex+100),a.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(e.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0),browser.gecko)try{window.onresize()}catch(e){}}},_updateElementPath:function(){var e,t=this.getDom("elementpath");if(this.elementPathEnabled&&(e=this.editor.queryCommandValue("elementpath"))){for(var a,i=[],l=0;a=e[l];l++)i[l]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+l+'&quot;);">'+a+"</span>");t.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+i.join(" &gt; ")+"</div>"}else t.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){this.getDom("elementpath").style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function e(){h=l.getXY(r),f||(f=o.options.minFrameHeight+c.offsetHeight+d.offsetHeight),p.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+r.offsetWidth+"px;height:"+r.offsetHeight+"px;z-index:"+(o.options.zIndex+1),l.on(s,"mousemove",t),l.on(n,"mouseup",a),l.on(s,"mouseup",a)}function t(e){i();var t=e||window.event;v=t.pageX||s.documentElement.scrollLeft+t.clientX,b=t.pageY||s.documentElement.scrollTop+t.clientY,y=v-h.x,_=b-h.y,y>=g&&(m=!0,p.style.width=y+"px"),_>=f&&(m=!0,p.style.height=_+"px")}function a(){m&&(m=!1,o.ui._actualFrameWidth=p.offsetWidth-2,r.style.width=o.ui._actualFrameWidth+"px",o.setHeight(p.offsetHeight-d.offsetHeight-c.offsetHeight-2,!0)),p&&(p.style.display="none"),i(),l.un(s,"mousemove",t),l.un(n,"mouseup",a),l.un(s,"mouseup",a)}function i(){browser.ie?s.selection.clear():window.getSelection().removeAllRanges()}var s=document,o=this.editor,r=o.container,n=o.document,c=this.getDom("toolbarbox"),d=this.getDom("bottombar"),u=this.getDom("scale"),p=this.getDom("scalelayer"),m=!1,h=null,f=0,g=o.options.minFrameWidth,v=0,b=0,y=0,_=0,C=this;this.editor.addListener("fullscreenchanged",function(e,t){if(t)C.disableScale();else if(C.editor.options.scaleEnabled){C.enableScale();var a=C.editor.document.createElement("span");C.editor.body.appendChild(a),C.editor.body.style.height=Math.max(l.getXY(a).y,C.editor.iframe.offsetHeight-20)+"px",l.remove(a)}}),this.enableScale=function(){1!=o.queryCommandState("source")&&(u.style.display="",this.scaleEnabled=!0,l.on(u,"mousedown",e))},this.disableScale=function(){u.style.display="none",this.scaleEnabled=!1,l.un(u,"mousedown",e)}},isFullScreen:function(){return this._fullscreen},postRender:function(){i.prototype.postRender.call(this);for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].postRender();var t,a=this,l=baidu.editor.dom.domUtils,s=function(){clearTimeout(t),t=setTimeout(function(){a._updateFullScreen()})};l.on(window,"resize",s),a.addListener("destroy",function(){l.un(window,"resize",s),clearTimeout(t)})},showToolbarMsg:function(e,t){(this.getDom("toolbarmsg_label").innerHTML=e,this.getDom("toolbarmsg").style.display="",t)||(this.getDom("upload_dialog").style.display="none")},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();"1"==e.style.zoom?e.style.zoom="100%":e.style.zoom="1"}},t.inherits(e,baidu.editor.ui.UIBase);var o={};UE.ui.Editor=function(a){var i=new UE.Editor(a);i.options.editor=i,t.loadFile(document,{href:i.options.themePath+i.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var s=i.render;return i.render=function(a){a.constructor===String&&(i.key=a,o[a]=i),t.domReady(function(){function t(){if(i.setOpt({labelMap:i.options.labelMap||i.getLang("labelMap")}),new e(i.options),a&&(a.constructor===String&&(a=document.getElementById(a)),a&&a.getAttribute("name")&&(i.options.textarea=a.getAttribute("name")),a&&/script|textarea/gi.test(a.tagName))){var t=document.createElement("div");a.parentNode.insertBefore(t,a);var o=a.value||a.innerHTML;i.options.initialContent=/^[\t\r\n ]*$/.test(o)?i.options.initialContent:o.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),a.className&&(t.className=a.className),a.style.cssText&&(t.style.cssText=a.style.cssText),/textarea/i.test(a.tagName)?(i.textarea=a,i.textarea.style.display="none"):a.parentNode.removeChild(a),a.id&&(t.id=a.id,l.removeAttributes(a,"id")),(a=t).innerHTML=""}l.addClass(a,"edui-"+i.options.theme),i.ui.render(a);var r=i.options;i.container=i.ui.getDom();for(var n=l.findParents(a,!0),c=[],d=0;p=n[d];d++)c[d]=p.style.display,p.style.display="block";if(r.initialFrameWidth)r.minFrameWidth=r.initialFrameWidth;else{r.minFrameWidth=r.initialFrameWidth=a.offsetWidth;var u=a.style.width;/%$/.test(u)&&(r.initialFrameWidth=u)}r.initialFrameHeight?r.minFrameHeight=r.initialFrameHeight:r.initialFrameHeight=r.minFrameHeight=a.offsetHeight;var p;for(d=0;p=n[d];d++)p.style.display=c[d];a.style.height&&(a.style.height=""),i.container.style.width=r.initialFrameWidth+(/%$/.test(r.initialFrameWidth)?"":"px"),i.container.style.zIndex=r.zIndex,s.call(i,i.ui.getDom("iframeholder")),i.fireEvent("afteruiready")}i.langIsReady?t():i.addListener("langReady",t)})},i},UE.getEditor=function(e,t){var a=o[e];return a||(a=o[e]=new UE.ui.Editor(t)).render(e),a},UE.delEditor=function(e){var t;(t=o[e])&&(t.key&&t.destroy(),delete o[e])},UE.registerUI=function(e,a,i,l){t.each(e.split(/\s+/),function(e){UE._customizeUI[e]={id:l,execFn:a,index:i}})}}(),UE.registerUI("message",function(e){function t(){var e=s.ui.getDom("toolbarbox");e&&(a.style.top=e.offsetHeight+3+"px"),a.style.zIndex=Math.max(s.options.zIndex,s.iframe.style.zIndex)+1}var a,i=baidu.editor.ui.Message,l=[],s=e;s.addListener("ready",function(){a=document.getElementById(s.ui.id+"_message_holder"),t(),setTimeout(function(){t()},500)}),s.addListener("showmessage",function(e,o){o=utils.isString(o)?{content:o}:o;var r=new i({timeout:o.timeout,type:o.type,content:o.content,keepshow:o.keepshow,editor:s}),n=o.id||"msg_"+(+new Date).toString(36);return r.render(a),l[n]=r,r.reset(o),t(),n}),s.addListener("updatemessage",function(e,t,i){i=utils.isString(i)?{content:i}:i;var s=l[t];s.render(a),s&&s.reset(i)}),s.addListener("hidemessage",function(e,t){var a=l[t];a&&a.hide()})}),UE.registerUI("autosave",function(e){var t=null,a=null;e.on("afterautosave",function(){clearTimeout(t),t=setTimeout(function(){a&&e.trigger("hidemessage",a),a=e.trigger("showmessage",{content:e.getLang("autosave.success"),timeout:2e3})},2e3)})})}()},iLpS:function(e,t){},jPOy:function(e,t){},"jah/":function(e,t){},joYe:function(e,t){},lKaE:function(e,t){},ldFB:function(e,t){},mgS3:function(e,t){},p4eX:function(e,t){},r3QK:function(e,t){},"rM9/":function(e,t){},rxmx:function(e,t){},tvR6:function(e,t){},uVQ1:function(e,t){},wHZD:function(e,t){},ygOC:function(e,t,a){(function(e,t){
/*!
 * UEditor
 * version: ueditor
 * build: Wed Aug 10 2016 11:05:24 GMT+0800 (CST)
 */
(function(){UE=window.UE||{};var e=!!window.ActiveXObject,t={removeLastbs:function(e){return e.replace(/\/$/,"")},extend:function(e,t){for(var a=arguments,i=!!this.isBoolean(a[a.length-1])&&a[a.length-1],l=this.isBoolean(a[a.length-1])?a.length-1:a.length,s=1;s<l;s++){var o=a[s];for(var r in o)i&&e.hasOwnProperty(r)||(e[r]=o[r])}return e},isIE:e,cssRule:e?function(e,t,a){var i,l,s;if((i=(a=a||document).indexList?a.indexList:a.indexList={})[e])s=a.styleSheets[i[e]];else{if(void 0===t)return"";s=a.createStyleSheet("",l=a.styleSheets.length),i[e]=l}return void 0===t?s.cssText:void(s.cssText=s.cssText+"\n"+(t||""))}:function(e,t,a){var i,l=(a=a||document).getElementsByTagName("head")[0];if(!(i=a.getElementById(e))){if(void 0===t)return"";(i=a.createElement("style")).id=e,l.appendChild(i)}return void 0===t?i.innerHTML:void(""!==t?i.innerHTML=i.innerHTML+"\n"+t:l.removeChild(i))},domReady:function(t){var a=window.document;"complete"===a.readyState?t():e?(function(){if(!a.isReady){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}(),window.attachEvent("onload",function(){t()})):(a.addEventListener("DOMContentLoaded",function(){a.removeEventListener("DOMContentLoaded",arguments.callee,!1),t()},!1),window.addEventListener("load",function(){t()},!1))},each:function(e,t,a){if(null!=e)if(e.length===+e.length){for(var i=0,l=e.length;i<l;i++)if(!1===t.call(a,e[i],i,e))return!1}else for(var s in e)if(e.hasOwnProperty(s)&&!1===t.call(a,e[s],s,e))return!1},inArray:function(e,t){var a=-1;return this.each(e,function(e,i){if(e===t)return a=i,!1}),a},pushItem:function(e,t){-1==this.inArray(e,t)&&e.push(t)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},indexOf:function(e,t,a){var i=-1;return a=this.isNumber(a)?a:0,this.each(e,function(e,l){if(l>=a&&e===t)return i=l,!1}),i},hasClass:function(e,t){t=t.replace(/(^[ ]+)|([ ]+$)/g,"").replace(/[ ]{2,}/g," ").split(" ");for(var a,i=0,l=e.className;a=t[i++];)if(!new RegExp("\\b"+a+"\\b","i").test(l))return!1;return i-1==t.length},addClass:function(e,a){if(e){a=this.trim(a).replace(/[ ]{2,}/g," ").split(" ");for(var i,l=0,s=e.className;i=a[l++];)new RegExp("\\b"+i+"\\b").test(s)||(s+=" "+i);e.className=t.trim(s)}},removeClass:function(e,t){t=this.isArray(t)?t:this.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var a,i=0,l=e.className;a=t[i++];)l=l.replace(new RegExp("\\b"+a+"\\b"),"");l=this.trim(l).replace(/[ ]{2,}/g," "),e.className=l,!l&&e.removeAttribute("className")},on:function(e,a,i){var l=this.isArray(a)?a:a.split(/\s+/),s=l.length;if(s)for(;s--;)if(a=l[s],e.addEventListener)e.addEventListener(a,i,!1);else{i._d||(i._d={els:[]});var o=a+i.toString(),r=t.indexOf(i._d.els,e);i._d[o]&&-1!=r||(-1==r&&i._d.els.push(e),i._d[o]||(i._d[o]=function(e){return i.call(e.srcElement,e||window.event)}),e.attachEvent("on"+a,i._d[o]))}e=null},off:function(e,a,i){var l=this.isArray(a)?a:a.split(/\s+/),s=l.length;if(s)for(;s--;)if(a=l[s],e.removeEventListener)e.removeEventListener(a,i,!1);else{var o=a+i.toString();try{e.detachEvent("on"+a,i._d?i._d[o]:i)}catch(e){}if(i._d&&i._d[o]){var r=t.indexOf(i._d.els,e);-1!=r&&i._d.els.splice(r,1),0==i._d.els.length&&delete i._d[o]}}},loadFile:function(){function e(e,a){try{for(var i,l=0;i=t[l++];)if(i.doc===e&&i.url==(a.src||a.href))return i}catch(e){return null}}var t=[];return function(a,i,l){var s=e(a,i);if(s)s.ready?l&&l():s.funs.push(l);else if(t.push({doc:a,url:i.src||i.href,funs:[l]}),a.body){if(!i.id||!a.getElementById(i.id)){var o=a.createElement(i.tag);for(var r in delete i.tag,i)o.setAttribute(r,i[r]);o.onload=o.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if((s=e(a,i)).funs.length>0){s.ready=1;for(var t;t=s.funs.pop();)t()}o.onload=o.onreadystatechange=null}},o.onerror=function(){throw Error("The load "+(i.href||i.src)+" fails,check the url")},a.getElementsByTagName("head")[0].appendChild(o)}}else{var n=[];for(var r in i)"tag"!=r&&n.push(r+'="'+i[r]+'"');a.write("<"+i.tag+" "+n.join(" ")+" ></"+i.tag+">")}}}()};t.each(["String","Function","Array","Number","RegExp","Object","Boolean"],function(e){t["is"+e]=function(t){return Object.prototype.toString.apply(t)=="[object "+e+"]"}});var a={};UE.parse={register:function(e,t){a[e]=t},load:function(e){t.each(a,function(a){a.call(e,t)})}},uParse=function(e,a){t.domReady(function(){if(document.querySelectorAll)i=document.querySelectorAll(e);else if(/^#/.test(e))i=[document.getElementById(e.replace(/^#/,""))];else if(/^\./.test(e)){var i=[];t.each(document.getElementsByTagName("*"),function(t){t.className&&new RegExp("\\b"+e.replace(/^\./,"")+"\\b","i").test(t.className)&&i.push(t)})}else i=document.getElementsByTagName(e);t.each(i,function(i){UE.parse.load(t.extend({root:i,selector:e},a))})})}})(),UE.parse.register("insertcode",function(e){var t=this.root.getElementsByTagName("pre");if(t.length)if("undefined"==typeof XRegExp){var a,i;void 0!==this.rootPath?(a=e.removeLastbs(this.rootPath)+"/third-party/SyntaxHighlighter/shCore.js",i=e.removeLastbs(this.rootPath)+"/third-party/SyntaxHighlighter/shCoreDefault.css"):(a=this.highlightJsUrl,i=this.highlightCssUrl),e.loadFile(document,{id:"syntaxhighlighter_css",tag:"link",rel:"stylesheet",type:"text/css",href:i}),e.loadFile(document,{id:"syntaxhighlighter_js",src:a,tag:"script",type:"text/javascript",defer:"defer"},function(){e.each(t,function(e){e&&/brush/i.test(e.className)&&SyntaxHighlighter.highlight(e)})})}else e.each(t,function(e){e&&/brush/i.test(e.className)&&SyntaxHighlighter.highlight(e)})}),UE.parse.register("table",function(e){function t(t,a){var i,l=t;for(a=e.isArray(a)?a:[a];l;){for(i=0;i<a.length;i++)if(l.tagName==a[i].toUpperCase())return l;l=l.parentNode}return null}var a=this,i=this.root;if((s=i.getElementsByTagName("table")).length){var l=this.selector;e.cssRule("table",l+" table.noBorderTable td,"+l+" table.noBorderTable th,"+l+" table.noBorderTable caption{border:1px dashed #ddd !important}"+l+" table.sortEnabled tr.firstRow th,"+l+" table.sortEnabled tr.firstRow td{padding-right:20px; background-repeat: no-repeat;background-position: center right; background-image:url("+this.rootPath+"themes/default/images/sortable.png);}"+l+" table.sortEnabled tr.firstRow th:hover,"+l+" table.sortEnabled tr.firstRow td:hover{background-color: #EEE;}"+l+" table{margin-bottom:10px;border-collapse:collapse;display:table;}"+l+" td,"+l+" th{ background:white; padding: 5px 10px;border: 1px solid #DDD;}"+l+" caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}"+l+" th{border-top:1px solid #BBB;background:#F7F7F7;}"+l+" table tr.firstRow th{border-top:2px solid #BBB;background:#F7F7F7;}"+l+" tr.ue-table-interlace-color-single td{ background: #fcfcfc; }"+l+" tr.ue-table-interlace-color-double td{ background: #f7faff; }"+l+" td p{margin:0;padding:0;}",document),e.each("td th caption".split(" "),function(t){var a=i.getElementsByTagName(t);a.length&&e.each(a,function(e){e.firstChild||(e.innerHTML="&nbsp;")})});var s=i.getElementsByTagName("table");e.each(s,function(i){/\bsortEnabled\b/.test(i.className)&&e.on(i,"click",function(i){var l=i.target||i.srcElement,s=t(l,["td","th"]),o=t(l,"table"),r=e.indexOf(o.rows[0].cells,s),n=o.getAttribute("data-sort-type");-1!=r&&(function(t,a,i){for(var l=t.rows,s=[],o="TH"===l[0].cells[0].tagName,r=0,n=l.length;r<n;r++)s[r]=l[r];var c={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){var a=e.innerText||e.textContent,i=t.innerText||t.textContent;return a.localeCompare(i)},reversebyasc:function(e,t){var a=e.innerHTML;return t.innerHTML.localeCompare(a)},orderbynum:function(t,a){var i=t[e.isIE?"innerText":"textContent"].match(/\d+/),l=a[e.isIE?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),l&&(l=+l[0]),(i||0)-(l||0)},reversebynum:function(t,a){var i=t[e.isIE?"innerText":"textContent"].match(/\d+/),l=a[e.isIE?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),l&&(l=+l[0]),(l||0)-(i||0)}};t.setAttribute("data-sort-type",i&&"string"==typeof i&&c[i]?i:""),o&&s.splice(0,1),s=function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var a=0,i=e.length;a<i;a++)for(var l=a,s=e.length;l<s;l++)if(t(e[a],e[l])>0){var o=e[a];e[a]=e[l],e[l]=o}return e}(s,function(e,t){return i&&"function"==typeof i?i.call(this,e.cells[a],t.cells[a]):i&&"number"==typeof i?1:i&&"string"==typeof i&&c[i]?c[i].call(this,e.cells[a],t.cells[a]):c.orderbyasc.call(this,e.cells[a],t.cells[a])});var d=t.ownerDocument.createDocumentFragment(),u=0;for(n=s.length;u<n;u++)d.appendChild(s[u]);var p=t.getElementsByTagName("tbody")[0];p.appendChild(d)}(o,r,a.tableSortCompareFn||n),function(t){if(!e.hasClass(t.rows[0],"firstRow")){for(var a=1;a<t.rows.length;a++)e.removeClass(t.rows[a],"firstRow");e.addClass(t.rows[0],"firstRow")}}(o))})})}}),UE.parse.register("charts",function(a){function i(e){for(var t,a=e.getAttribute("data-chart"),i={},l=[],s=0;t=e.rows[s];s++){for(var o,r=[],n=0;o=t.cells[n];n++){var c=o.innerText||o.textContent||"";r.push("TH"==o.tagName?c:0|c)}l.push(r)}var d;for(a=a.split(";"),s=0;d=a[s];s++)i[(d=d.split(":"))[0]]=d[1];return{table:e,meta:i,data:l}}function l(){window.Highcharts?s():a.loadFile(document,{src:c+"/third-party/highcharts/highcharts.js",tag:"script",type:"text/javascript",defer:"defer"},function(){s()})}function s(){a.loadFile(document,{src:c+"/dialogs/charts/chart.config.js",tag:"script",type:"text/javascript",defer:"defer"},function(){!function(){for(var e=null,t=null,a=0,i=u.length;a<i;a++)e=u[a],t=n(e),o(r(e.table),typeConfig[e.meta.chartType],t)}()})}function o(e,a,i){t(e).highcharts(t.extend({},a,{credits:{enabled:!1},exporting:{enabled:!1},title:{text:i.title,x:-20},subtitle:{text:i.subTitle,x:-20},xAxis:{title:{text:i.xTitle},categories:i.categories},yAxis:{title:{text:i.yTitle},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{enabled:!0,valueSuffix:i.suffix},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:1},series:i.series}))}function r(e){var t=document.createElement("div");return t.className="edui-chart-container",e.parentNode.replaceChild(t,e),t}function n(e){var t=[],a=[],i=[],l=e.data,s=e.meta;if("1"!=s.dataFormat){for(var o=0,r=l.length;o<r;o++)for(var n=0,c=l[o].length;n<c;n++)i[n]||(i[n]=[]),i[n][o]=l[o][n];l=i}if(i={},s.chartType!=typeConfig.length-1){for(a=l[0].slice(1),o=1;d=l[o];o++)t.push({name:d[0],data:d.slice(1)});i.series=t,i.categories=a,i.title=s.title,i.subTitle=s.subTitle,i.xTitle=s.xTitle,i.yTitle=s.yTitle,i.suffix=s.suffix}else{var d=[];for(o=1,r=l[0].length;o<r;o++)d.push([l[0][o],0|l[1][o]]);t[0]={type:"pie",name:s.tip,data:d},i.series=t,i.title=s.title,i.suffix=s.suffix}return i}a.cssRule("chartsContainerHeight",".edui-chart-container { height:"+(this.chartContainerHeight||300)+"px}");var c=this.rootPath,d=this.root,u=null;c&&(u=d?function(e){for(var t,a=[],l=e.getElementsByTagName("table"),s=0;t=l[s];s++)null!==t.getAttribute("data-chart")&&a.push(i(t));return a.length?a:null}(d):null)&&(e?l():a.loadFile(document,{src:c+"/third-party/jquery-1.10.2.min.js",tag:"script",type:"text/javascript",defer:"defer"},function(){l()}))}),UE.parse.register("background",function(e){for(var t,a,i=this.root.getElementsByTagName("p"),l=0;a=i[l++];)(t=a.getAttribute("data-background"))&&a.parentNode.removeChild(a);t&&e.cssRule("ueditor_background",this.selector+"{"+t+"}",document)}),UE.parse.register("list",function(e){function t(t){var l=this;e.each(t,function(t){if(t.className&&/custom_/i.test(t.className)){var s=t.className.match(/custom_(\w+)/)[1];if("dash"==s||"dot"==s)e.pushItem(a,r+" li.list-"+i[s]+"{background-image:url("+l.liiconpath+i[s]+".gif)}"),e.pushItem(a,r+" ul.custom_"+s+"{list-style:none;} "+r+" ul.custom_"+s+" li{background-position:0 3px;background-repeat:no-repeat}");else{var o=1;e.each(t.childNodes,function(t){"LI"==t.tagName&&(e.pushItem(a,r+" li.list-"+i[s]+o+"{background-image:url("+l.liiconpath+"list-"+i[s]+o+".gif)}"),o++)}),e.pushItem(a,r+" ol.custom_"+s+"{list-style:none;}"+r+" ol.custom_"+s+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(s){case"cn":e.pushItem(a,r+" li.list-"+s+"-paddingleft-1{padding-left:25px}"),e.pushItem(a,r+" li.list-"+s+"-paddingleft-2{padding-left:40px}"),e.pushItem(a,r+" li.list-"+s+"-paddingleft-3{padding-left:55px}");break;case"cn1":e.pushItem(a,r+" li.list-"+s+"-paddingleft-1{padding-left:30px}"),e.pushItem(a,r+" li.list-"+s+"-paddingleft-2{padding-left:40px}"),e.pushItem(a,r+" li.list-"+s+"-paddingleft-3{padding-left:55px}");break;case"cn2":e.pushItem(a,r+" li.list-"+s+"-paddingleft-1{padding-left:40px}"),e.pushItem(a,r+" li.list-"+s+"-paddingleft-2{padding-left:55px}"),e.pushItem(a,r+" li.list-"+s+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":e.pushItem(a,r+" li.list-"+s+"-paddingleft-1{padding-left:25px}");break;case"num2":e.pushItem(a,r+" li.list-"+s+"-paddingleft-1{padding-left:35px}"),e.pushItem(a,r+" li.list-"+s+"-paddingleft-2{padding-left:40px}");break;case"dash":e.pushItem(a,r+" li.list-"+s+"-paddingleft{padding-left:35px}");break;case"dot":e.pushItem(a,r+" li.list-"+s+"-paddingleft{padding-left:20px}")}}})}var a=[],i={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};e.extend(this,{liiconpath:"http://bs.baidu.com/listicon/",listDefaultPaddingLeft:"20"});var l=this.root,s=l.getElementsByTagName("ol"),o=l.getElementsByTagName("ul"),r=this.selector;s.length&&t.call(this,s),o.length&&t.call(this,o),(s.length||o.length)&&(a.push(r+" .list-paddingleft-1{padding-left:0}"),a.push(r+" .list-paddingleft-2{padding-left:"+this.listDefaultPaddingLeft+"px}"),a.push(r+" .list-paddingleft-3{padding-left:"+2*this.listDefaultPaddingLeft+"px}"),e.cssRule("list",r+" ol,"+r+" ul{margin:0;padding:0;}li{clear:both;}"+a.join("\n"),document))}),UE.parse.register("vedio",function(e){var t=this.root.getElementsByTagName("video"),a=this.root.getElementsByTagName("audio");if(document.createElement("video"),document.createElement("audio"),t.length||a.length){var i=e.removeLastbs(this.rootPath),l=i+"/third-party/video-js/video.js",s=i+"/third-party/video-js/video-js.min.css",o=i+"/third-party/video-js/video-js.swf";window.videojs?videojs.autoSetup():(e.loadFile(document,{id:"video_css",tag:"link",rel:"stylesheet",type:"text/css",href:s}),e.loadFile(document,{id:"video_js",src:l,tag:"script",type:"text/javascript"},function(){videojs.options.flash.swf=o,videojs.autoSetup()}))}})}).call(t,a("7t+N"),a("7t+N"))},"zC/2":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.353be5d9667207f76b95.js.map