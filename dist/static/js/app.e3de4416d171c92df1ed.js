webpackJsonp([1],{"+g39":function(t,e){},"5m+o":function(t,e){},Bg0K:function(t,e){},"C1+6":function(t,e){},DaY2:function(t,e){},KDGZ:function(t,e){},MlWk:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r={data:function(){return{name:""}},created:function(){this.name=JSON.parse(sessionStorage.getItem("tyUserInfo")).name},methods:{submit:function(){this.$router.push({path:"/login"}),sessionStorage.removeItem("tyToken"),sessionStorage.removeItem("tyUserInfo")},listUser:function(){this.$router.push({path:"/accountInfor"})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[t._m(0),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"vertical-line"}),t._v(" "),a("div",{staticClass:"icon el-icon-service"},[a("span",{attrs:{id:"nameNum"},on:{click:t.listUser}},[t._v(t._s(t.name))])]),t._v(" "),a("div",{staticClass:"vertical-line1"}),t._v(" "),a("div",{staticClass:"icon1",on:{click:t.submit}},[t._v("退出")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"log"},[e("div",{staticClass:"left"},[this._v("嘉麒管理后台")])])}]};var i={data:function(){return{category:[{name:"同业系统",img:"account.png",items:[{value:"产品预定",router:"/productList"},{value:"订单管理",router:"/orderManagement"},{value:"账户信息",router:"/userList"}]}],isRouter:!0,menuNumber:[],index:""}},methods:{handleOpen:function(t){for(var e=Number(t),a=0;a<this.category.length;a++)this.menuNumber[a]=a;if(-1!==this.menuNumber.indexOf(e))for(var s=0;s<this.menuNumber.length;s++)if(e!==this.menuNumber[s]){var r=String(this.menuNumber[s]);this.$refs.menu.close(r)}}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav"},[a("el-row",{staticClass:"tac"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("el-menu",{ref:"menu",staticClass:"el-menu-vertical-demo",attrs:{"default-active":this.$route.name,"background-color":"#0F2350","text-color":"#B9B9BB","active-text-color":"#fff",router:t.isRouter},on:{open:t.handleOpen}},t._l(t.category,function(e,s){return a("el-submenu",{key:s,staticClass:"nav_mouseActive",attrs:{index:String(s)}},[a("template",{slot:"title"},[a("i",{staticClass:"mouseActive",attrs:{id:"d"+s}}),a("img",{attrs:{src:"../static/navLeft/"+e.img,width:"15px",alt:""}}),t._v(" "),a("span",{staticClass:"actionName"},[t._v(t._s(e.name))])]),t._v(" "),t._l(e.items,function(e,s){return[a("el-menu-item",{key:s,staticClass:"suboptions",attrs:{index:e.value,route:{path:e.router}}},[t._v(t._s(e.value))])]})],2)}))],1)],1)],1)},staticRenderFns:[]};var n={name:"App",components:{pageHeader:a("VU/8")(r,o,!1,function(t){a("lRES")},"data-v-d949b0ae",null).exports,navLeft:a("VU/8")(i,l,!1,function(t){a("W9Y/")},"data-v-bb6c36e6",null).exports}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-header",{staticClass:"page-header"},[t.$route.meta.keepAlive?a("page-header"):t._e()],1),t._v(" "),a("el-container",{staticClass:"container"},[t.$route.meta.keepAlive?a("el-aside",{staticClass:"navigation"},[a("nav-left")],1):t._e(),t._v(" "),a("el-main",{staticClass:"content-body"},[a("div",{staticClass:"content-position"},[t._v(t._s(this.$route.name))]),t._v(" "),a("div",{staticClass:"el-mainl content-body1"},[a("router-view")],1)])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(t){a("tU4U")},null,null).exports,u=a("/ocq"),v={data:function(){return{title:"",day:"",days:[{value:1,label:"1天"},{value:2,label:"2天"},{value:3,label:"3天"},{value:4,label:"4天"},{value:5,label:"5天"},{value:6,label:"6天"},{value:7,label:"7天"},{value:8,label:"8天"},{value:9,label:"大于8天"}],startDate:"",endDate:"",pod:"",podID:0,destination:"",destinationID:0,isPod:!1,isDes:!1,productType:"",productGenre:[{value:"0",label:"全部类型"},{value:"1",label:"跟团游"}],customerPrice:!1,tableData:[],pageshow:!0,pageSize:10,pageIndex:1,total:0}},methods:{empty:function(){this.title="",this.day="",this.startDate="",this.endDate="",this.pod="",this.podID=0,this.destination="",this.destinationID=0,this.productType=""},getRowClass:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;return 0==e?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},handleSizeChange:function(t){this.pageSize=t,this.pageIndex=1,this.list(1,t)},handleCurrentChange:function(t){this.list(t,this.pageSize),this.pageIndex=t},checkIncome:function(t){this.$router.push({path:"/productDetails",query:{id:t}})},list:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.title,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.day,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.startDate,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.endDate,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.podID,l=this,n=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.destinationID,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:this.productType;r?r=""+r.getFullYear()+(r.getMonth()+1>9?r.getMonth()+1:"0"+(r.getMonth()+1))+(r.getDate()>9?r.getDate():"0"+r.getDate()):r=0;o?o=""+o.getFullYear()+(o.getMonth()+1>9?o.getMonth()+1:"0"+(o.getMonth()+1))+(o.getDate()>9?o.getDate():"0"+o.getDate()):o=0;this.$http.post(this.GLOBAL.serverSrc+"/indirect/team/pc/page",{pageIndex:t,pageSize:e,object:{title:a,day:s||0,startDate:r,endDate:o,podID:i,destinationID:n,productType:c||0}}).then(function(t){l.tableData=[],l.tableData=t.data.objects,l.total=t.data.total,l.tableData.forEach(function(t){t.date=t.date.toString();var e=t.date.substr(0,4)+"-"+t.date.substr(4,2)+"-"+t.date.substr(6,2);t.date=e}),l.$nextTick(function(){l.pageshow=!0})})},querySearch:function(t,e){var a=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/universal/area/fuzzy",{object:{areaName:t}}).then(function(s){if(s.data.objects.length>0){for(var r=[],o=0;o<s.data.objects.length;o++)r.push({value:s.data.objects[o].areaName,id:s.data.objects[o].id});var i=t?r.filter(a.createFilter(t)):[];e(i)}else a.isDes=!0,a.isPod=!0,e&&e([])}).catch(function(t){console.log(t)})},createFilter:function(t){return function(t){return t.value}},departure1:function(t){this.podID=t.id,this.pod=t.value},departure2:function(t){this.destinationID=t.id,this.destination=t.value},isToastFun:function(t){1==t?(this.isDes=!1,this.pod="",this.podID=0):(this.isPod=!1,this.destination="",this.destinationID=0)},endDateChange:function(){var t=new Date(this.startDate).getTime(),e=new Date(this.endDate).getTime();""!==this.startDate&&e<t&&(this.$message.error("结束时间不能早于开始时间"),this.endDate="")}},mounted:function(){this.list(1,this.pageSize)}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"1150px"}},[a("div",{staticClass:"searchbox"},[a("span",{staticClass:"search-title"},[t._v("产品名称")]),t._v(" "),a("el-input",{staticClass:"input",attrs:{placeholder:"请输入产品内容"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("span",{staticClass:"search-title"},[t._v("天数")]),t._v(" "),a("el-select",{staticClass:"input",attrs:{placeholder:"全部天数"},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}},t._l(t.days,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("span",{staticClass:"search-title"},[t._v("出发日期")]),t._v(" "),a("el-date-picker",{staticClass:"input_01",attrs:{type:"date",placeholder:"开始天数"},on:{change:t.endDateChange},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),a("span",{staticClass:"dateline"},[t._v("——")]),t._v(" "),a("el-date-picker",{staticClass:"input_01",attrs:{type:"date",placeholder:"结束天数"},on:{change:t.endDateChange},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),t._v(" "),a("span",{staticClass:"search-title por"},[t._v("出发地"),t.isPod?a("span",{staticClass:"poa"},[t._v("没有该地区名称")]):t._e()]),t._v(" "),a("el-autocomplete",{staticClass:"input",attrs:{"fetch-suggestions":t.querySearch,"trigger-on-focus":!1,placeholder:"请输入出发地"},on:{select:t.departure1,blur:function(e){t.isToastFun(1)}},model:{value:t.pod,callback:function(e){t.pod=e},expression:"pod"}}),t._v(" "),a("span",{staticClass:"search-title por"},[t._v("目的地"),t.isDes?a("span",{staticClass:"poa"},[t._v("没有该地区名称")]):t._e()]),t._v(" "),a("el-autocomplete",{staticClass:"input",attrs:{"fetch-suggestions":t.querySearch,"trigger-on-focus":!1,placeholder:"请输入目的地"},on:{select:t.departure2,blur:function(e){t.isToastFun(2)}},model:{value:t.destination,callback:function(e){t.destination=e},expression:"destination"}}),t._v(" "),a("span",{staticClass:"search-title"},[t._v("产品类型")]),t._v(" "),a("el-select",{staticClass:"input",attrs:{placeholder:"全部类型"},model:{value:t.productType,callback:function(e){t.productType=e},expression:"productType"}},t._l(t.productGenre,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"productButton"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.list(1,t.pageSize)}}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.empty()}}},[t._v("重置")])],1),t._v(" "),a("div",{staticClass:"switch"},[a("div",{staticClass:"switchText"},[t._v("直客价")]),t._v(" "),a("el-switch",{staticClass:"switchButton",model:{value:t.customerPrice,callback:function(e){t.customerPrice=e},expression:"customerPrice"}})],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"labelTable",attrs:{data:t.tableData,"header-cell-style":t.getRowClass,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名称",width:"249",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productType",label:"类型",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.row.productType,expression:"scope.row.productType == 1"}]},[t._v("跟团游")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"place",label:"出发地/目的地",width:"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"价格",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.customerPrice?a("span",[t._v(t._s(e.row.minPrice01))]):t._e(),t._v(" "),0==t.customerPrice?a("span",[t._v(t._s(e.row.minPrice02))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"day",label:"天数",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"最早出发日期",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"table_details",attrs:{type:"text",size:"small"},on:{click:function(a){t.checkIncome(e.row.id)}}},[t._v("预订")])]}}])})],1),t._v(" "),t.pageshow?a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)},staticRenderFns:[]};var m=a("VU/8")(v,p,!1,function(t){a("Bg0K")},"data-v-063c639e",null).exports,_={data:function(){return{tyUserInfo:{},productInfo:{},tourInfo:{},tourInfoCopy:{},localcomp:{},customerPrice:!0,sales:{tradeSales:""},otherPrice:"",otherNote:"",total:0,order:"3",contact:{Name:"",Tel:""},guests:[],dialogFormTour:!1,winTitle:"",conForm:{},guestsi:0,guestsk:0,rules:{Name:[{required:!0,message:"请输入姓名",trigger:"blur"}],Tel:[{required:!0,message:"请输入电话",trigger:"blur"}],tradeSales:[{required:!0,message:"请选择同业销售",trigger:"blur"}],cnName:[{required:!0,message:"请输入姓名",trigger:"blur"}],enName:[{required:!0,message:"请输入姓（拼音）",trigger:"blur"},{pattern:/(a[io]?|ou?|e[inr]?|ang?|ng|[bmp](a[io]?|[aei]ng?|ei|ie?|ia[no]|o|u)|pou|me|m[io]u|[fw](a|[ae]ng?|ei|o|u)|fou|wai|[dt](a[io]?|an|e|[aeio]ng|ie?|ia[no]|ou|u[ino]?|uan)|dei|diu|[nl](a[io]?|ei?|[eio]ng|i[eu]?|i?ang?|iao|in|ou|u[eo]?|ve?|uan)|nen|lia|lun|[ghk](a[io]?|[ae]ng?|e|ong|ou|u[aino]?|uai|uang?)|[gh]ei|[jqx](i(ao?|ang?|e|ng?|ong|u)?|u[en]?|uan)|([csz]h?|r)([ae]ng?|ao|e|i|ou|u[ino]?|uan)|[csz](ai?|ong)|[csz]h(ai?|uai|uang)|zei|[sz]hua|([cz]h|r)ong|y(ao?|[ai]ng?|e|i|ong|ou|u[en]?|uan))/,message:"姓（拼音）格式不正确"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^(13[0-9]|14[5|7|9]|15[0|1|2|3|5|6|7|8|9]|16[6]|17[0|1|2|3|5|6|7|8]|18[0-9]|19[8|9])\d{8}$/,message:"手机号格式不正确"}]}}},watch:{otherPrice:function(){this.changecout()},customerPrice:function(){this.changecout()}},beforeDestroy:function(){sessionStorage.removeItem("tourInfo")},mounted:function(){this.tyUserInfo=JSON.parse(sessionStorage.getItem("tyUserInfo")),this.getTourInfo(),this.getProductInfo(),this.getLocalcomp(),this.changecout(),this.changeinfo()},methods:{getTourInfo:function(){var t=sessionStorage.getItem("tourInfo");t?this.tourInfo=JSON.parse(t):(this.tourInfo=this.$route.params.page,sessionStorage.setItem("tourInfo",JSON.stringify(this.$route.params.page)))},getProductInfo:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/teamquery/get/siteampreview",{planID:this.tourInfo.id,localCompID:this.tyUserInfo.localCompID}).then(function(e){t.productInfo=e.data.object}).catch(function(t){})},getLocalcomp:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/localcomp/api/get",{id:this.tyUserInfo.id}).then(function(e){t.localcomp=e.data.object}).catch(function(t){})},changecout:function(){var t=this;this.total=0,this.tourInfo.enrolls.forEach(function(e){1==t.customerPrice?t.total+=e.adult*e.price_01:t.total+=e.adult*e.price_02}),this.total+=parseInt(""!=this.otherPrice?this.otherPrice:0)},changeinfo:function(){var t=this;this.tourInfo.enrolls.forEach(function(e){t.guests.push([])});for(var e=0;e<this.guests.length;e++)for(var a=0;a<this.tourInfo.enrolls[e].adult;a++)this.guests[e].push({cnName:"",enName:"",enrollName:this.tourInfo.enrolls[e].enrollName,mobile:"",idCard:"",sex:3,isDeleted:0,enrollPrice:0,productType:1,enrollID:this.tourInfo.enrolls[e].enrollID,singlePrice:0,bornDate:0,credType:0,credCode:"",orderID:0,orgID:this.tyUserInfo.localCompID,userID:this.tyUserInfo.id,teamID:this.$route.query.id,planID:this.tourInfo.id,createTime:Date.parse(new Date),code:0});this.tourInfoCopy=JSON.parse(JSON.stringify(this.tourInfo))},handleChange:function(t,e){if(t.adult>this.tourInfoCopy.enrolls[e].adult)this.guests[e].push({cnName:"",enName:"",enrollName:t.enrollName,mobile:"",idCard:"",sex:3,isDeleted:0,enrollPrice:0,productType:1,enrollID:t.enrollID,singlePrice:0,bornDate:0,credType:0,credCode:"",orderID:0,orgID:this.tyUserInfo.localCompID,userID:this.tyUserInfo.id,teamID:this.$route.query.id,planID:this.tourInfo.id,createTime:Date.parse(new Date),code:0});else{1==this.guests[e].length&&(this.guests[e]=[]);for(var a=this.guests[e].length;a>0;a--)if(""==this.guests[e][a-1].enName){this.guests[e].splice(a-1,1);break}}this.tourInfoCopy=JSON.parse(JSON.stringify(this.tourInfo)),this.changecout()},handleDelete:function(t,e){var a=this;this.$confirm("是否删除该条信息","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.guests[t].splice(e,1),a.tourInfo.enrolls[t].adult--,a.$message.success("删除成功"),a.tourInfoCopy=JSON.parse(JSON.stringify(a.tourInfo)),a.changecout()}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},cancel:function(){this.$router.push({path:"/productDetails",query:{id:this.$route.query.id}})},fillTour:function(t,e){this.dialogFormTour=!0,this.winTitle=this.guests[t][e].enrollName,this.conForm=JSON.parse(JSON.stringify(this.guests[t][e])),this.guestsi=t,this.guestsk=e},cancelInfo:function(t){this.dialogFormTour=!1,this.$refs[t].resetFields()},subInfo:function(t){var e=this;this.$refs[t].validate(function(a){a&&(e.guests[e.guestsi][e.guestsk]=JSON.parse(JSON.stringify(e.conForm)),e.cancelInfo(t))})},submit:function(){var t=this,e=!0,a=!0;if(this.$refs.sales.validate(function(t){t||(e=!1)}),this.$refs.contact.validate(function(t){t||(a=!1)}),0!=e&&0!=a){var s=0;if(this.tourInfo.enrolls.forEach(function(t){s+=parseInt(t.adult)}),0!=s)if(1==this.localcomp.settlementType&&this.total>this.localcomp.quota)this.$message.error("剩余额度小于订单总额");else{for(var r="",o=[],i=0;i<this.guests.length;i++){r+=this.tourInfo.enrolls[i].enrollName,r+=1==this.customerPrice?this.tourInfo.enrolls[i].price_01:this.tourInfo.enrolls[i].price_02,r+="*"+this.guests[i].length;for(var l=0;l<this.guests[i].length;l++)1==this.customerPrice?this.guests[i][l].singlePrice=this.tourInfo.enrolls[i].price_01:this.guests[i][l].singlePrice=this.tourInfo.enrolls[i].price_02,this.guests[i][l].orgID=this.tyUserInfo.localCompID,this.guests[i][l].userID=this.tyUserInfo.id,o.push(this.guests[i][l])}this.$http.post(this.GLOBAL.serverSrc+"/indirect/order/mobile/insert",{object:{teamID:this.$route.query.id,planID:this.tourInfo.id,orderStatus:0,refundStatus:0,occupyStatus:this.order,payable:this.total,favourable:[{id:0,createTime:0,orderID:0,price:this.otherPrice?this.otherPrice:0,title:this.otherNote,favMode:1,mark:"string"}],contact:JSON.stringify(this.contact),endTime:0,orgID:this.tyUserInfo.localCompID,userID:this.tyUserInfo.id,guests:o,number:s,productType:1,remark:"",topID:this.tyUserInfo.topID,platform:2,enrollDetail:r,plan:{id:this.tourInfo.id},settlementType:this.localcomp.settlementType,indirectSale:this.sales.tradeSales}}).then(function(e){if(1==e.data.isSuccess){t.$message.success("提交成功");var a=JSON.parse(e.data.result.details);t.startUpWorkFlowForJQ(a.OrderID,a.FlowModel,a.FlowModelName,a.Usercode),t.cancel()}else t.$message.error(e.data.result.message)})}else this.$message.error("报名类型个数为0,不能下单")}},startUpWorkFlowForJQ:function(t,e,a,s){var r=this;this.$http.post(this.GLOBAL.jqUrl+"/JQ/StartUpWorkFlowForJQ",{jQ_ID:t,jQ_Type:e,workflowCode:a,userCode:s}).then(function(t){r.submitWAForJQ(s,JSON.parse(t.data).data.workItemID)})},submitWAForJQ:function(t,e){this.$http.post(this.GLOBAL.jqUrl+"/JQ/SubmitWorkAssignmentsForJQ",{userCode:t,workItemID:e,commentText:"测试"}).then(function(t){})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reserveList"},[a("div",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("预订")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1),t._v(" "),a("div",{staticClass:"reserveTitle"},[a("span",[t._v(t._s(t.productInfo.title))])]),t._v(" "),a("table",{staticClass:"reserveTable"},[a("tr",[a("td",[a("div",{staticClass:"reserveTd_01"},[t._v("团期计划：")]),t._v(" "),a("div",{staticClass:"reserveTd_02"},[t._v(t._s(t.productInfo.groupCode))])]),t._v(" "),a("td",[a("div",{staticClass:"reserveTd_01"},[t._v("套餐名称：")]),t._v(" "),a("div",{staticClass:"reserveTd_02"},[t._v(t._s(t.productInfo.package))])]),t._v(" "),a("td",[a("div",{staticClass:"reserveTd_01"},[t._v("出发地：")]),t._v(" "),a("div",{staticClass:"reserveTd_02"},[t._v(t._s(t.productInfo.pod))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"reserveTd_01"},[t._v("目的地：")]),t._v(" "),a("div",{staticClass:"reserveTd_02"},[t._v(t._s(t.productInfo.destination))])]),t._v(" "),a("td",[a("div",{staticClass:"reserveTd_01"},[t._v("出发日期：")]),t._v(" "),a("div",{staticClass:"reserveTd_02"},[t._v(t._s(t.productInfo.date))])]),t._v(" "),a("td",[a("div",{staticClass:"reserveTd_01"},[t._v("同业：")]),t._v(" "),a("div",{staticClass:"reserveTd_02"},[t._v(t._s(t.localcomp.name))])])]),t._v(" "),1==t.localcomp.settlementType?a("tr",[a("td",[a("div",{staticClass:"reserveTd_01"},[t._v("剩余额度：")]),t._v(" "),a("div",{staticClass:"reserveTd_02"},[t._v(t._s(t.localcomp.quota))])])]):t._e()]),t._v(" "),a("div",{staticClass:"switchText"},[a("div",{staticClass:"table_details"},[a("el-form",{ref:"sales",attrs:{rules:t.rules,model:t.sales}},[a("div",[a("span",{staticClass:"table_details_01"},[t._v("*")]),t._v("同业销售")]),t._v(" "),a("el-form-item",{staticClass:"ml10",attrs:{prop:"tradeSales"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.sales.tradeSales,callback:function(e){t.$set(t.sales,"tradeSales",e)},expression:"sales.tradeSales"}},t._l(t.localcomp.jqAdminList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.userCode}})}))],1)],1)],1),t._v(" "),a("div",{staticClass:"table_details"},[t._m(0),t._v(" "),a("div",{staticClass:"table_details_02"},[a("el-switch",{staticClass:"switchButton",model:{value:t.customerPrice,callback:function(e){t.customerPrice=e},expression:"customerPrice"}})],1)]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"mb10"},[t._l(t.tourInfo.enrolls,function(e,s){return a("div",{staticClass:"adult"},[a("div",{staticClass:"ml10"},[t._v(t._s(e.enrollName)+"￥"+t._s(1==t.customerPrice?e.price_01:e.price_02)+"*"+t._s(e.adult))]),t._v(" "),a("div",{staticClass:"ml10"},[a("el-input-number",{attrs:{min:0,max:0==e.quota?t.tourInfo.remaining:e.quota,size:"mini"},on:{change:function(a){t.handleChange(e,s)}},model:{value:e.adult,callback:function(a){t.$set(e,"adult",a)},expression:"item.adult"}})],1),t._v(" "),a("div",[t._v("余位："+t._s(0==e.quota?t.tourInfo.remaining:e.quota))])])}),t._v(" "),a("div",{staticClass:"order"},[a("div",{staticClass:"ml10"},[t._v("其他费用")]),t._v(" "),a("div",{staticClass:"ml10"},[a("el-input",{staticClass:"order_input01",attrs:{placeholder:"请输入金额"},model:{value:t.otherPrice,callback:function(e){t.otherPrice=e},expression:"otherPrice"}}),t._v(" "),a("el-input",{staticClass:"order_input02",attrs:{placeholder:"请输入摘要"},model:{value:t.otherNote,callback:function(e){t.otherNote=e},expression:"otherNote"}})],1)]),t._v(" "),a("div",{staticClass:"total"},[a("span",{staticClass:"total-price"},[t._v("总价：￥"+t._s(t.total))]),a("br"),1==t.localcomp.settlementType?a("span",[t._v("剩余预存款和额度："+t._s(t.localcomp.quota))]):t._e()]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"ml10"},[a("el-radio",{attrs:{label:"3"},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}},[t._v("确认占位")])],1)],2)]),t._v(" "),a("div",{staticClass:"switchText mb10"},[a("el-form",{ref:"contact",attrs:{rules:t.rules,model:t.contact}},[a("div",{staticClass:"people"},[a("div",[a("span",{staticClass:"table_details_01"},[t._v("*")]),t._v("订单联系人")]),t._v(" "),a("el-form-item",{staticClass:"ml10",attrs:{prop:"Name"}},[a("el-input",{staticClass:"w300",model:{value:t.contact.Name,callback:function(e){t.$set(t.contact,"Name",e)},expression:"contact.Name"}})],1)],1),t._v(" "),a("div",{staticClass:"people"},[a("div",[a("span",{staticClass:"table_details_01"},[t._v("*")]),t._v("联系电话")]),t._v(" "),a("el-form-item",{staticClass:"ml10",attrs:{prop:"Tel"}},[a("el-input",{staticClass:"w300",model:{value:t.contact.Tel,callback:function(e){t.$set(t.contact,"Tel",e)},expression:"contact.Tel"}})],1)],1)]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),a("table",{staticClass:"tour-list",attrs:{cellpadding:"3",cellspacing:"1",width:"1080"}},[t._m(3),t._v(" "),t._l(t.guests,function(e,s){return a("tbody",{key:s,attrs:{bgcolor:"#fff"}},t._l(e,function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(""==e.cnName?e.enrollName+(r+1):e.cnName))]),t._v(" "),a("td",[t._v(t._s(e.enrollName))]),t._v(" "),a("td",[t._v(t._s(e.mobile))]),t._v(" "),a("td",[t._v(t._s(e.idCard))]),t._v(" "),a("td",[0==e.sex?a("span",[t._v("男")]):t._e(),t._v(" "),1==e.sex?a("span",[t._v("女")]):t._e()]),t._v(" "),a("td",[a("span",{staticClass:"color-blue",on:{click:function(e){t.fillTour(s,r)}}},[t._v("编辑")]),t._v(" |\n            "),a("span",{staticClass:"color-blue",on:{click:function(e){t.handleDelete(s,r)}}},[t._v("删除")])])])}))})],2),t._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:"出行人信息（"+t.winTitle+"）",visible:t.dialogFormTour,width:"700px"},on:{"update:visible":function(e){t.dialogFormTour=e},close:function(e){t.cancelInfo("conForm")}}},[a("el-form",{ref:"conForm",staticStyle:{height:"260px"},attrs:{model:t.conForm,rules:t.rules}},[a("el-form-item",{staticClass:"fl",attrs:{label:"中文姓名",prop:"cnName","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.cnName,callback:function(e){t.$set(t.conForm,"cnName",e)},expression:"conForm.cnName"}})],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"英文姓名",prop:"enName","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.enName,callback:function(e){t.$set(t.conForm,"enName",e)},expression:"conForm.enName"}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("el-form-item",{staticClass:"fl",staticStyle:{width:"310px"},attrs:{label:"性别",prop:"sex","label-width":"110px"}},[a("el-radio-group",{model:{value:t.conForm.sex,callback:function(e){t.$set(t.conForm,"sex",e)},expression:"conForm.sex"}},[a("el-radio",{attrs:{label:0}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"电话",prop:"mobile","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.mobile,callback:function(e){t.$set(t.conForm,"mobile",e)},expression:"conForm.mobile"}})],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"身份证",prop:"idCard","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.idCard,callback:function(e){t.$set(t.conForm,"idCard",e)},expression:"conForm.idCard"}})],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"出生日期",prop:"bornDate","label-width":"110px"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.conForm.bornDate,callback:function(e){t.$set(t.conForm,"bornDate",e)},expression:"conForm.bornDate"}})],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件类型",prop:"credType","label-width":"110px"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.conForm.credType,callback:function(e){t.$set(t.conForm,"credType",e)},expression:"conForm.credType"}},[a("el-option",{attrs:{label:"请选择",value:0}}),t._v(" "),a("el-option",{attrs:{label:"护照",value:1}}),t._v(" "),a("el-option",{attrs:{label:"港澳通行证",value:2}}),t._v(" "),a("el-option",{attrs:{label:"军官证",value:3}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件号码",prop:"credCode","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.credCode,callback:function(e){t.$set(t.conForm,"credCode",e)},expression:"conForm.credCode"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer cb",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelInfo("conForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.subInfo("conForm")}}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"table_details_01"},[this._v("*")]),this._v("直客价：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"table_details_01"},[this._v("*")]),this._v("报名人数")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"table_details_01"},[this._v("*")]),this._v("下单方式")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{attrs:{bgcolor:"#f7f7f7"}},[a("td",{attrs:{width:"100"}},[t._v("姓名")]),t._v(" "),a("td",{attrs:{width:"160"}},[t._v("报名类型")]),t._v(" "),a("td",{attrs:{width:"160"}},[t._v("电话")]),t._v(" "),a("td",[t._v("身份证")]),t._v(" "),a("td",{attrs:{width:"100"}},[t._v("性别")]),t._v(" "),a("td",{attrs:{width:"100"}},[t._v("操作")])])}]};var f=a("VU/8")(_,h,!1,function(t){a("jc7z")},"data-v-2e32b06e",null).exports,g={data:function(){return{crowdlist:[],themelist:[],ruleForm:{},packageInfo:"",currentPIndex:0,scheduleData:[{name:"出行信息"},{name:"酒店信息"},{name:"日程信息"}],monthsTitle:[],calendarDate:[],currentYear:0,currentMonth:0,currentIndex:0,arrDay:[],chooseDate:0,rowDate:{travelTime:"----年--月--日",Total:0},ulLeft:0}},mounted:function(){var t=this;this.getCrowdlist(),this.getThemelist(),setTimeout(function(){t.getProductInfo()},300)},methods:{getCrowdlist:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/universal/crowd/crowdlist",{object:{isDeleted:0}}).then(function(e){t.crowdlist=e.data.objects})},getThemelist:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/universal/theme/themelist",{object:{isDeleted:0}}).then(function(e){t.themelist=e.data.objects})},getProductInfo:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/team/mobile/detail",{id:this.$route.query.id}).then(function(e){t.ruleForm=e.data.object,t.crowdlist.filter(function(e){e.id==t.ruleForm.crowdID&&(t.ruleForm.crowdID=e.name)}),t.themelist.filter(function(e){e.id==t.ruleForm.themeID&&(t.ruleForm.themeID=e.name)}),t.clickPackage(0)})},getMonths:function(){if(0!=this.calendarDate.length){for(var t=[],e=0;e<this.calendarDate.length;e++){0==t.length&&t.push({Month:this.calendarDate[0].date.toString().substr(4,2),Year:this.calendarDate[0].date.toString().substr(0,4)});for(var a=0,s=0;s<t.length;s++)this.calendarDate[e].date.toString().substr(0,6)==t[s].Year+""+t[s].Month&&(a=1);0==a&&t.push({Month:this.calendarDate[e].date.toString().substr(4,2),Year:this.calendarDate[e].date.toString().substr(0,4)})}this.monthsTitle=t}else this.monthsTitle=[{Month:(new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1),Year:(new Date).getFullYear()}];this.currentYear=this.monthsTitle[0].Year,this.currentMonth=this.monthsTitle[0].Month,this.currentIndex=0,this.initCalendarTbody()},clickPackage:function(t){this.currentPIndex=t,this.packageInfo=this.ruleForm.package[t],this.getCalendarDate()},getCalendarDate:function(){var t=this;this.chooseDate=0,this.rowDate={travelTime:"----年--月--日",Total:0};(new Date).getMonth(),(new Date).getMonth();this.$http.post(this.GLOBAL.serverSrc+"/indirect/team/mobile/package",{object:{packageID:this.ruleForm.package[this.currentPIndex].id}}).then(function(e){e.data.objects.map(function(t){t.enrolls.map(function(t){t.adult=0})}),t.calendarDate=[],t.calendarDate=e.data.objects,t.getMonths()})},pickNav:function(t,e,a,s){"pre"==t&&this.currentIndex>0&&(this.currentIndex--,this.sider("pre")),"next"==t&&this.currentIndex<this.monthsTitle.length-1&&(this.currentIndex++,this.sider("next")),"nav"==t&&(this.currentIndex=s),this.currentYear=this.monthsTitle[this.currentIndex].Year,this.currentMonth=this.monthsTitle[this.currentIndex].Month,this.initCalendarTbody()},sider:function(t){var e,a=this;e="next"==t?0==this.ulLeft?-130:Number(this.ulLeft.slice(0,-2))-130:0==this.ulLeft?130:Number(this.ulLeft.slice(0,-2))+130;var s=document.getElementById("month");if(this.monthsTitle.length>4)var r=setInterval(o,"10");function o(){var o=a.ulLeft;o=0==o?0:o.slice(0,-2),o=Number(o),"next"==t?o>e?o-=5:clearInterval(r):o<e?o+=5:clearInterval(r),a.ulLeft=s.style.left=o+"px"}},initCalendarTbody:function(){0==this.currentYear&&(this.currentYear=this.monthsTitle[0].Year,this.currentMonth=this.monthsTitle[0].Month);for(var t=0;t<42;t++)this.arrDay[t]="";for(t=0;t<new Date(this.currentYear,this.currentMonth,0).getDate();t++)this.arrDay[t+new Date(this.currentYear,this.currentMonth-1,1).getDay()]=t+1},handleChange:function(t){var e=0;this.rowDate.enrolls.forEach(function(t){return e+=t.adult*t.price_02}),this.rowDate.Total=e},chooseDateMes:function(t,e,a){0!=e&&(this.chooseDate=t,a.Total=0,a.travelTime=String(a.date).substring(0,4)+"年"+String(a.date).substring(4,6)+"月"+String(a.date).substring(6)+"日",this.rowDate=a)},handeSave:function(){0!=this.chooseDate?this.$router.push({name:"详情预定",params:{page:this.rowDate},query:{id:this.$route.query.id}}):this.$message.error("请选择团期")}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reserveList"},[a("div",{staticClass:"color_d7"},[t._v("ID:"+t._s(t.ruleForm.id))]),t._v(" "),a("div",{staticClass:"title"},[t._v(t._s(t.ruleForm.title))]),t._v(" "),a("div",{staticClass:"mt20"},[a("div",{staticClass:"picture"},[a("el-carousel",{attrs:{interval:6e3,trigger:"click",height:"380px"}},t._l(t.ruleForm.pepeatpic,function(t,e){return a("el-carousel-item",{key:t.id},[a("img",{staticStyle:{width:"100%",height:"380px"},attrs:{src:t.picturePath}})])})),t._v(" "),a("div",{staticClass:"w570"},[a("ul",{staticClass:"mouth",attrs:{id:"month"}},t._l(t.monthsTitle,function(e,s){return a("li",{staticClass:"mouth_date",class:{current:t.currentIndex==s},on:{click:function(a){t.pickNav("nav",e.Year,e.Month,s)}}},[t._v(t._s(e.Year)+"年"+t._s(e.Month)+"月")])})),t._v(" "),a("div",{staticClass:"mouth_fl",on:{click:function(e){t.pickNav("pre")}}},[t._v("<")]),t._v(" "),a("div",{staticClass:"mouth_fr",on:{click:function(e){t.pickNav("next")}}},[t._v(">")]),t._v(" "),t._m(0),t._v(" "),a("ul",{staticClass:"days"},t._l(t.arrDay,function(e,s){return a("li",{class:{active:t.chooseDate==t.currentYear+t.currentMonth+(e<10?"0"+e:e)}},[a("div",{staticClass:"tc"},[t._v(t._s(e))]),t._v(" "),t._l(t.calendarDate,function(s){return s.date==t.currentYear+t.currentMonth+(e<10?"0"+e:e)?a("div",{class:{price_color:0==s.remaining},on:{click:function(e){t.chooseDateMes(s.date,s.surplus,s)}}},[a("div",[t._v(t._s(s.enrolls[0].price_02))]),t._v(" "),0==s.remaining?a("div",[t._v("已售罄")]):a("div",[t._v("余位"+t._s(s.remaining))])]):t._e()})],2)}))])],1),t._v(" "),a("div",{staticClass:"fl"},[a("div",{staticClass:"information"},[a("div",{staticClass:"infor_bor"},[a("div",[a("div",{staticClass:"infor_title"},[t._v("亮点：")]),t._v(" "),t._l(t.ruleForm.strengths,function(e,s){return a("div",{key:s,staticClass:"fl"},[t._v(t._s(e.strength)+"  ")])})],2),a("br"),t._v(" "),a("div",[a("div",{staticClass:"infor_title"},[t._v("行程天数：")]),t._v(" "),a("div",{staticClass:"fl"},[t._v(t._s(t.ruleForm.day)+"天"+t._s(t.ruleForm.night)+"晚")])]),a("br"),t._v(" "),a("div",[a("div",{staticClass:"infor_title"},[t._v("出游人群：")]),t._v(" "),a("div",{staticClass:"fl"},[t._v(t._s(this.ruleForm.crowdID)+" ")])]),a("br"),t._v(" "),a("div",[a("div",{staticClass:"infor_title"},[t._v("主题：")]),t._v(" "),a("div",{staticClass:"fl"},[t._v(t._s(this.ruleForm.themeID)+" ")])]),a("br"),t._v(" "),a("div",[a("div",{staticClass:"infor_title"},[t._v("套餐：")]),t._v(" "),a("div",{staticClass:"block"},t._l(t.ruleForm.package,function(e,s){return a("div",{key:s,staticClass:"package_01",class:{border_blue:t.currentPIndex==s},on:{click:function(e){t.clickPackage(s)}}},[a("div",{staticClass:"package_01_title"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"tc"},[t._v("出发地："+t._s(e.pod))]),t._v(" "),a("div",{staticClass:"tc"},[t._v("目的地："+t._s(e.destination))])])}))]),t._v(" "),a("div",{staticClass:"cb"},[a("div",{staticClass:"infor_title"},[t._v("出行日期：")]),t._v(" "),a("div",{staticClass:"fl"},[t._v(t._s(t.rowDate.travelTime))])]),t._v(" "),a("br"),t._v(" "),a("div",t._l(t.rowDate.enrolls,function(e,s){return a("div",{key:s,staticClass:"adult"},[a("div",[t._v(t._s(e.enrollName)+"￥"+t._s(e.price_02)+"*"+t._s(e.adult))]),t._v(" "),a("div",[a("el-input-number",{attrs:{min:0,max:0==e.quota?t.rowDate.remaining:e.quota,size:"mini"},on:{change:function(a){t.handleChange(e)}},model:{value:e.adult,callback:function(a){t.$set(e,"adult",a)},expression:"item.adult"}})],1)])}))])]),t._v(" "),a("div",{staticClass:"price"},[a("div",{staticClass:"price_text"},[t._v("总价："+t._s(t.rowDate.Total))]),t._v(" "),a("el-button",{staticClass:"price_button",attrs:{type:"primary"},on:{click:t.handeSave}},[t._v("预订")])],1)])]),t._v(" "),a("div",{staticClass:"cb"},[a("div",{staticClass:"survey"},[t._v("产品概况")]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),a("div",{staticClass:"mark",domProps:{innerHTML:t._s(t.ruleForm.mark)}})]),t._v(" "),a("div",{staticStyle:{clear:"both"}},[a("div",{staticClass:"survey"},[t._v("行程信息")]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),a("div",{staticStyle:{"margin-left":"94px"}},t._l(t.ruleForm.package,function(e,s){return a("div",{key:s,staticClass:"package_02",class:{border_blue:t.currentPIndex==s},on:{click:function(e){t.clickPackage(s)}}},[a("div",{staticClass:"package_01_title"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"tc"},[t._v("出发地："+t._s(e.pod))]),t._v(" "),a("div",{staticClass:"tc"},[t._v("目的地："+t._s(e.destination))])])})),t._v(" "),a("div",{staticClass:"nav"},[a("div",{staticClass:"nav_left"},t._l(t.scheduleData,function(e,s){return a("div",{staticClass:"nav_left_02"},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticClass:"travel"},[a("div",{staticClass:"travel_bc"},[a("div",{staticClass:"nav_right"},t._l(this.packageInfo.traffic,function(e,s){return a("div",{key:s,staticStyle:{clear:"both",padding:"20px 0 80px 30px"}},[a("div",{staticClass:"nav_days"},[t._v("第"+t._s(e.day)+"天")]),t._v(" "),a("div",{staticClass:"fl"},[a("div",{staticClass:"nav_travel"},[t._v(t._s(e.podCity)+"-"+t._s(e.arriveCity))]),t._v(" "),a("div",{staticClass:"airport"},[a("div",{staticClass:"fb"},[t._v(t._s(e.podTime))]),t._v(" "),a("div",{staticClass:"airport01"},[t._v(t._s(e.podPlace))])]),t._v(" "),a("div",{staticClass:"aviation"},[a("div",{staticClass:"aviation_01"},[t._v(t._s(e.company)+t._s(e.theNumber))]),t._v(" "),a("div",{staticClass:"aviation_line"}),t._v(" "),"[]"!=e.ext_Stopover?a("div",{staticClass:"fb"},[t._v("经停："+t._s(e.ext_Stopover))]):t._e()]),t._v(" "),a("div",{staticClass:"airport"},[a("div",{staticClass:"fb"},[t._v(t._s(e.arriveTime))]),t._v(" "),a("div",{staticClass:"airport01"},[t._v(t._s(e.arrivePlace))])])])])}))]),t._v(" "),t._e(),t._v(" "),t._l(this.packageInfo.schedules,function(e,s){return a("div",{key:s,staticClass:"schedule"},[a("div",[a("div",{staticClass:"dateDays"},[t._v(t._s(s+1))]),t._v(" "),a("div",{staticClass:"fl lh50"},[t._v(t._s(e.subject))])]),t._v(" "),a("div",{staticClass:"schedule_hotel"},[a("div",{staticClass:"w60"},[t._v("酒店：")]),t._v(" "),a("div",{staticClass:"fl"},[t._v(t._s(JSON.parse(e.ext_Hotel).Details))])]),t._v(" "),a("div",{staticClass:"schedule_hotel"},[a("div",{staticClass:"food"},[t._v("餐饮：")]),t._v(" "),t._l(JSON.parse(e.ext_Meals),function(e,s){return a("div",{key:s,staticClass:"ml60"},[a("div",[0==s?a("span",[t._v("早餐：")]):t._e(),t._v(" "),1==s?a("span",[t._v("午餐：")]):t._e(),t._v(" "),2==s?a("span",[t._v("晚餐：")]):t._e(),t._v(" "),1==e.Myself?a("span",[t._v(t._s(e.Detail))]):t._e(),t._v(" "),0==e.Myself?a("span",[t._v(t._s(e.Detail))]):t._e()])])})],2),t._v(" "),a("div",{staticClass:"schedule_hotel"},[a("div",{staticClass:"food"},[t._v("详情：")]),t._v(" "),a("div",{staticClass:"ml60",domProps:{innerHTML:t._s(e.info)}})]),t._v(" "),a("div",{staticClass:"schedule_hotel"},[a("div",{staticClass:"food"},[t._v("活动：")]),t._v(" "),t._l(e.activitys,function(e,s){return a("div",{key:s,staticClass:"bc_f2"},[a("div",[a("div",{staticClass:"fl ml20"},[a("span",{staticClass:"fb"},[t._v("类型：")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.activityType,expression:"row.activityType == 0"}]},[t._v("景点")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.activityType,expression:"row.activityType == 1"}]},[t._v("购物")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.activityType,expression:"row.activityType == 2"}]},[t._v("自费")])]),t._v(" "),a("div",{staticClass:"fl ml20"},[a("span",{staticClass:"fb"},[t._v("城市：")]),t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"fl ml20"},[a("span",{staticClass:"fb"},[t._v("景点名称：")]),t._v(t._s(e.typeExt))]),t._v(" "),a("div",{staticClass:"fl ml20"},[a("span",{staticClass:"fb"},[t._v("活动时间：")]),t._v(t._s(e.time)+"分钟")])]),t._v(" "),a("div",{staticClass:"cb"},[a("div",{staticClass:"w80"},[t._v("详情说明：")]),t._v(" "),a("div",{staticClass:"w700",domProps:{innerHTML:t._s(e.details)}})]),t._v(" "),a("div",{staticClass:"cb"},[a("div",{staticClass:"w80"},[t._v("景点简介：")]),t._v(" "),a("div",{staticClass:"w700 memo",domProps:{innerHTML:t._s(e.memo)}})]),t._v(" "),a("div",{staticClass:"cb"},[a("div",{staticClass:"w80"},[t._v("图片：")]),t._v(" "),a("div",{staticClass:"w700",staticStyle:{margin:"20px 0"}},t._l(JSON.parse(e.picture),function(t,s){return a("div",{staticClass:"fl"},[a("img",{staticStyle:{width:"300px",margin:"0 10px 0 0"},attrs:{src:e.picturePath.split("，",s+1)}})])}))])])})],2)])})],2)])]),t._v(" "),a("div",{staticClass:"cb"},[a("div",{staticClass:"survey"},[t._v("费用说明")]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),a("div",{staticStyle:{margin:"20px 0 0 0"}},[a("div",{staticClass:"nav_left"},t._l(t.ruleForm.instructions,function(e,s){return a("div",{key:s,staticClass:"nav_left_02"},[t._v(t._s(e.title))])})),t._v(" "),a("div",{staticClass:"cost"},t._l(t.ruleForm.instructions,function(e,s){return a("div",{key:s,staticClass:"schedule"},[a("div",{staticClass:"cost_title"},[t._v("#"+t._s(e.title))]),t._v(" "),a("ul",[a("li",{domProps:{innerHTML:t._s(e.content)}})])])}))])]),t._v(" "),a("div",{staticClass:"cb"},[a("div",{staticClass:"survey"},[t._v("预订须知")]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),t._l(t.ruleForm.others,function(e,s){return a("div",{key:s,staticStyle:{margin:"20px 0 0 0"}},[2==e.menuType?a("div",{staticClass:"cost_01 schedule"},[a("div",{staticClass:"cost_title"},[t._v("#"+t._s(e.title))]),t._v(" "),a("ul",[a("li",{domProps:{innerHTML:t._s(e.content)}})])]):t._e()])})],2),t._v(" "),a("div",{staticClass:"cb"},[a("div",{staticClass:"survey"},[t._v("使用说明")]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),t._l(t.ruleForm.others,function(e,s){return a("div",{key:s,staticStyle:{margin:"20px 0 0 0"}},[3==e.menuType?a("div",{staticClass:"cost_01 schedule"},[a("div",{staticClass:"cost_title"},[t._v("#"+t._s(e.title))]),t._v(" "),a("ul",[a("li",{domProps:{innerHTML:t._s(e.content)}})])]):t._e()])})],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"week"},[a("li",[t._v("日")]),t._v(" "),a("li",[t._v("一")]),t._v(" "),a("li",[t._v("二")]),t._v(" "),a("li",[t._v("三")]),t._v(" "),a("li",[t._v("四")]),t._v(" "),a("li",[t._v("五")]),t._v(" "),a("li",[t._v("六")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt20"},[a("div",{staticClass:"hotel_img"}),t._v(" "),a("div",{staticClass:"holiday"},[a("div",{staticClass:"holiday_title"},[t._v("洲际斐济高尔夫度假村及Spa")]),t._v(" "),a("div",[t._v("InterContinental Fiji Golf Resort & Spa")]),t._v(" "),a("div",[a("span",{staticClass:"fb"},[t._v("地址：")]),t._v("Maro Road, 辛加东卡, 斐济")]),t._v(" "),a("div",[a("span",{staticClass:"fb"},[t._v("星级：")]),t._v("3星")]),t._v(" "),a("div",[a("span",{staticClass:"fb"},[t._v("入住晚数：")]),t._v("3晚")]),t._v(" "),a("div",[a("span",{staticClass:"fb"},[t._v("房型：")]),t._v("海景房")]),t._v(" "),a("div",[a("span",{staticClass:"fb"},[t._v("床型：")]),t._v("大床房")])]),t._v(" "),a("div",{staticClass:"cb"},[t._v("酒店周边环境很好，景色优美，非常适合拍照，饮食娱乐也都很方便。酒店员工服务非常的热情，房间宽敞明亮，各种设施齐全，值得推荐！")])])}]};var C=a("VU/8")(g,b,!1,function(t){a("+g39")},"data-v-93bd9d1a",null).exports,w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"city_list",staticStyle:{"margin-top":"-100px"},attrs:{title:"详情",visible:t.dialogFormMark,width:"800px"},on:{"update:visible":function(e){t.dialogFormMark=e}}},[a("table",{staticStyle:{"margin-top":"-10px"},attrs:{border:"0",cellpadding:"7",cellspacing:"10",bgcolor:"#f7f7f7",width:"760"}},[a("tr",[a("td",[t._v("产品名称：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.name))])]),t._v(" "),a("tr",[a("td",[t._v("订单ID：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.orderCode))])]),t._v(" "),a("tr",[a("td",[t._v("团期计划：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.groupCode))])]),t._v(" "),a("tr",[a("td",[t._v("下单时间：")]),t._v(" "),a("td",[t._v(t._s(t.formatDate(new Date(t.orderForm.createTime))))])]),t._v(" "),a("tr",[a("td",[t._v("出发日期：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.planTime))])]),t._v(" "),a("tr",[a("td",[t._v("订单状态：")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 1"}]},[t._v("补充游客材料")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:2==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 2"}]},[t._v("电子合同")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:3==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 3"}]},[t._v("待出行")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:4==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 4"}]},[t._v("旅游中")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:5==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 5"}]},[t._v("待评价")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:6==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 6"}]},[t._v("完成")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:0==t.orderForm.orderStatus&&1==t.orderForm.occupyStatus,expression:"orderForm.orderStatus == 0 && orderForm.occupyStatus == 1"}]},[t._v("预定不占")]),a("td",{directives:[{name:"show",rawName:"v-show",value:0==t.orderForm.orderStatus&&2==t.orderForm.occupyStatus,expression:"orderForm.orderStatus == 0 && orderForm.occupyStatus == 2"}]},[t._v("预定占位")]),a("td",{directives:[{name:"show",rawName:"v-show",value:0==t.orderForm.orderStatus&&3==t.orderForm.occupyStatus,expression:"orderForm.orderStatus == 0 && orderForm.occupyStatus == 3"}]},[t._v("确认占位")]),a("td",{directives:[{name:"show",rawName:"v-show",value:8==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 8"}]},[t._v("签署合同")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:9==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 9"}]},[t._v("作废订单")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:10==t.orderForm.orderStatus,expression:"orderForm.orderStatus == 10"}]},[t._v("确认占位")])]),t._v(" "),a("tr",[a("td",[t._v("套餐名称：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.package))])]),t._v(" "),a("tr",[a("td",[t._v("出发地：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.pod))])]),t._v(" "),a("tr",[a("td",[t._v("目的地：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.destination))])]),t._v(" "),a("tr",[a("td",[t._v("操作人：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.op))])]),t._v(" "),a("tr",[a("td",[t._v("商户销售：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.saler))])]),t._v(" "),a("tr",[a("td",[t._v("联系人：")]),t._v(" "),a("td",[t._v(t._s(JSON.parse(t.orderForm.contact).Name))])]),t._v(" "),a("tr",[a("td",[t._v("电话：")]),t._v(" "),a("td",[t._v(t._s(JSON.parse(t.orderForm.contact).Tel))])]),t._v(" "),a("tr",[a("td",[t._v("数量：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.enrollDetail))])]),t._v(" "),a("tr",[a("td",[t._v("其他费用：")]),t._v(" "),a("td",t._l(t.orderForm.favourable,function(e,s){return a("span",{directives:[{name:"show",rawName:"v-show",value:0==s,expression:"index == 0"}],key:s,staticClass:"table_span"},[t._v(t._s(e.title)+" "+t._s(e.price))])}))]),t._v(" "),a("tr",[a("td",[t._v("订单总额：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.payable))])]),t._v(" "),a("tr",[a("td",[t._v("欠款金额：")]),t._v(" "),a("td",[t._v(t._s(t.orderForm.payable-t.orderForm.paid))])]),t._v(" "),a("tr",[a("td",[t._v("还款日期：")]),t._v(" "),a("td",[t._v(t._s(t.formatDate(new Date(t.orderForm.repaymentDate))))])])]),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.orderForm.guests,"header-cell-style":t.getRowClass,border:"","cell-style":t.getCellClass}},[a("el-table-column",{attrs:{prop:"cnName",label:"姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"enrollName",label:"报名类型",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"idCard",label:"身份证","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.sex?a("span",[t._v("男")]):t._e(),t._v(" "),1===e.row.sex?a("span",[t._v("女")]):t._e(),t._v(" "),3===e.row.sex?a("span",[t._v("未选择")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"cancel"},[a("el-button",{on:{click:t.close}},[t._v(" 取消 ")])],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")({props:{orderData:"",variable:0,dialogType:0},data:function(){return{dialogFormMark:!1,orderForm:{contact:"{}"}}},created:function(){},watch:{variable:function(){1==this.dialogType&&(this.dialogFormMark=!0,this.getOrderData())}},methods:{formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var s=t.getDate();s=s<10?"0"+s:s;var r=t.getHours();r=r<10?"0"+r:r;var o=t.getMinutes();o=o<10?"0"+o:o;var i=t.getSeconds();return e+"-"+a+"-"+s+" "+r+":"+o+":"+(i=i<10?"0"+i:i)},getOrderData:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/orderquery/get/siorders",{orderCode:this.orderData.orderCode,id:this.orderData.id}).then(function(e){t.orderForm=e.data.object;var a=e.data.object.planTime+"";t.orderForm.planTime=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)})},getRowClass:function(t){t.row,t.column;var e=t.rowIndex;return t.columnIndex,0==e?"background:#f7f7f7;height:50px;textAlign:center;color:#333;fontSize:15px":""},getCellClass:function(){return"textAlign:center"},close:function(){this.dialogFormMark=!1}}},w,!1,function(t){a("udCb")},"data-v-35aa5860",null).exports,x={props:{orderData:"",variable:0,dialogType:0},data:function(){return{name:JSON.parse(sessionStorage.getItem("tyUserInfo")).name,dialogFormMark:!1,markFormAdd:{content:""},markForms:[],rules:{content:[{required:!0,message:"请填写备注信息",trigger:"blur"}]}}},created:function(){},watch:{variable:function(){2==this.dialogType&&(this.getCommentList(),this.dialogFormMark=!0)}},methods:{getCommentList:function(t){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/orderquery/get/GetOrderCommentList",{orderCode:this.orderData.orderCode}).then(function(t){1==t.data.isSuccess&&(e.markForms=t.data.objects)}).catch(function(t){})},close:function(){this.dialogFormMark=!1,this.$refs.markFormAdd.resetFields()},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var s=t.getDate();s=s<10?"0"+s:s;var r=t.getHours();r=r<10?"0"+r:r;var o=t.getMinutes();o=o<10?"0"+o:o;var i=t.getSeconds();return e+"-"+a+"-"+s+" "+r+":"+o+":"+(i=i<10?"0"+i:i)},submitMark:function(){var t=this;this.$refs.markFormAdd.validate(function(e){e&&t.$http.post(t.GLOBAL.serverSrc+"/indirect/orderquery/get/inserordercomment",{object:{id:t.orderData.id,userID:JSON.parse(sessionStorage.getItem("tyUserInfo")).id,orderCode:t.orderData.orderCode,content:t.markFormAdd.content,createTime:new Date,isDeleted:0}}).then(function(e){t.dialogFormMark=!1,t.$message.success("保存成功")})})}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"city_list",attrs:{title:"备注",visible:t.dialogFormMark,width:"780px"},on:{"update:visible":function(e){t.dialogFormMark=e},close:t.close}},[a("el-form",{ref:"markFormAdd",staticClass:"demo-ruleForm",attrs:{model:t.markFormAdd,rules:t.rules,"label-width":"80px"}},[t._l(t.markForms,function(e){return a("div",[a("el-form-item",{attrs:{label:t.name}},[a("el-input",{staticClass:"remark",attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容",disabled:!0},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"item.content"}}),t._v(" "),a("div",{staticClass:"time"},[t._v(t._s(e.CreateTime))])],1)],1)}),t._v(" "),a("el-form-item",{attrs:{label:"填写备注",prop:"content"}},[a("el-input",{staticClass:"remark",attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:t.markFormAdd.content,callback:function(e){t.$set(t.markFormAdd,"content",e)},expression:"markFormAdd.content"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"submitMark",attrs:{type:"info",size:"medium"},on:{click:t.submitMark}},[t._v("提交备注")])],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"colse",on:{click:t.close}},[t._v("关闭")])],1)],2)],1)],1)},staticRenderFns:[]};var F={props:{orderData:"",variable:0,dialogType:0},data:function(){return{dialogFormMark:!1,orderForm:{},guests:[],contact:{},dialogFormTour:!1,winTitle:"",conForm:{},guestsi:0,rules:{Name:[{required:!0,message:"请输入姓名",trigger:"blur"}],Tel:[{required:!0,message:"请输入电话",trigger:"blur"}],cnName:[{required:!0,message:"请输入姓名",trigger:"blur"}],enName:[{required:!0,message:"请输入姓（拼音）",trigger:"blur"},{pattern:/(a[io]?|ou?|e[inr]?|ang?|ng|[bmp](a[io]?|[aei]ng?|ei|ie?|ia[no]|o|u)|pou|me|m[io]u|[fw](a|[ae]ng?|ei|o|u)|fou|wai|[dt](a[io]?|an|e|[aeio]ng|ie?|ia[no]|ou|u[ino]?|uan)|dei|diu|[nl](a[io]?|ei?|[eio]ng|i[eu]?|i?ang?|iao|in|ou|u[eo]?|ve?|uan)|nen|lia|lun|[ghk](a[io]?|[ae]ng?|e|ong|ou|u[aino]?|uai|uang?)|[gh]ei|[jqx](i(ao?|ang?|e|ng?|ong|u)?|u[en]?|uan)|([csz]h?|r)([ae]ng?|ao|e|i|ou|u[ino]?|uan)|[csz](ai?|ong)|[csz]h(ai?|uai|uang)|zei|[sz]hua|([cz]h|r)ong|y(ao?|[ai]ng?|e|i|ong|ou|u[en]?|uan))/,message:"姓（拼音）格式不正确"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^(13[0-9]|14[5|7|9]|15[0|1|2|3|5|6|7|8|9]|16[6]|17[0|1|2|3|5|6|7|8]|18[0-9]|19[8|9])\d{8}$/,message:"手机号格式不正确",trigger:"blur"}]}}},created:function(){},watch:{variable:function(){3==this.dialogType&&(this.dialogFormMark=!0,this.getOrderData())}},methods:{getOrderData:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/orderquery/get/siorders",{orderCode:this.orderData.orderCode,id:this.orderData.id}).then(function(e){t.orderForm=e.data.object,t.guests=t.orderForm.guests,t.contact=JSON.parse(t.orderForm.contact)})},getRowClass:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;return 0==e?"background:#f7f7f7;height:50px;textAlign:center;color:#333;fontSize:15px":""},getCellClass:function(){return"textAlign:center"},close:function(){this.dialogFormMark=!1,this.$refs.contact.resetFields(),this.orderForm={},this.guests=[]},fillTour:function(t){this.dialogFormTour=!0,this.winTitle=this.guests[t].enrollName,this.conForm=JSON.parse(JSON.stringify(this.guests[t])),3==this.conForm.sex&&(this.conForm.sex=""),this.guestsi=t},cancelInfo:function(t){this.dialogFormTour=!1,this.$refs[t].resetFields()},subInfo:function(t){var e=this;this.$refs[t].validate(function(a){a&&(e.$set(e.guests,e.guestsi,JSON.parse(JSON.stringify(e.conForm))),e.cancelInfo(t))})},save:function(){var t=this;this.$refs.contact.validate(function(e){e&&t.$http.post(t.GLOBAL.serverSrc+"/indirect/order/mobile/update",{object:{orderCode:t.orderForm.orderCode,plan:{groupCode:t.orderForm.groupCode},favourable:t.orderForm.favourable,guests:t.guests,number:t.orderForm.number,id:t.orderForm.id,payable:t.orderForm.payable,contact:JSON.stringify(t.contact),occupyStatus:t.orderForm.occupyStatus,orderStatus:t.orderForm.orderStatus,localComp:{id:t.orderForm.localCompID,settlementType:t.orderForm.settlementType}}}).then(function(e){1==e.data.isSuccess&&(t.$message.success("修改成功"),t.close())})})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"city_list",staticStyle:{"margin-top":"-100px"},attrs:{title:"修改",visible:t.dialogFormMark,width:"900px"},on:{"update:visible":function(e){t.dialogFormMark=e},close:t.close}},[a("el-form",{ref:"contact",attrs:{rules:t.rules,model:t.contact}},[a("div",{staticClass:"people"},[a("div",[a("span",{staticClass:"color-red"},[t._v("*")]),t._v("订单联系人")]),t._v(" "),a("el-form-item",{attrs:{prop:"Name"}},[a("el-input",{staticClass:"con-el",model:{value:t.contact.Name,callback:function(e){t.$set(t.contact,"Name",e)},expression:"contact.Name"}})],1)],1),t._v(" "),a("div",{staticClass:"people"},[a("div",[a("span",{staticClass:"color-red"},[t._v("*")]),t._v("联系电话")]),t._v(" "),a("el-form-item",{attrs:{prop:"Tel"}},[a("el-input",{staticClass:"con-el",model:{value:t.contact.Tel,callback:function(e){t.$set(t.contact,"Tel",e)},expression:"contact.Tel"}})],1)],1)]),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.guests,"header-cell-style":t.getRowClass,border:"","cell-style":t.getCellClass}},[a("el-table-column",{attrs:{prop:"cnName",label:"姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"enrollName",label:"报名类型",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"idCard",label:"身份证","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.sex?a("span",[t._v("男")]):t._e(),t._v(" "),1===e.row.sex?a("span",[t._v("女")]):t._e(),t._v(" "),3===e.row.sex?a("span",[t._v("未选择")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"idCard",label:"签署状态","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"idCard",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"color-blue",on:{click:function(a){t.fillTour(e.$index)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticClass:"cancel"},[a("el-button",{on:{click:t.close}},[t._v(" 取消 ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"city_list",attrs:{title:"出行人信息（"+t.winTitle+"）",visible:t.dialogFormTour,width:"700px"},on:{"update:visible":function(e){t.dialogFormTour=e},close:function(e){t.cancelInfo("conForm")}}},[a("el-form",{ref:"conForm",staticStyle:{height:"260px"},attrs:{model:t.conForm,rules:t.rules}},[a("el-form-item",{staticClass:"fl",attrs:{label:"中文姓名",prop:"cnName","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.cnName,callback:function(e){t.$set(t.conForm,"cnName",e)},expression:"conForm.cnName"}})],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"英文姓名",prop:"enName","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.enName,callback:function(e){t.$set(t.conForm,"enName",e)},expression:"conForm.enName"}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("el-form-item",{staticClass:"fl",staticStyle:{width:"310px"},attrs:{label:"性别",prop:"sex","label-width":"110px"}},[a("el-radio-group",{model:{value:t.conForm.sex,callback:function(e){t.$set(t.conForm,"sex",e)},expression:"conForm.sex"}},[a("el-radio",{attrs:{label:0}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"电话",prop:"mobile","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.mobile,callback:function(e){t.$set(t.conForm,"mobile",e)},expression:"conForm.mobile"}})],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"身份证",prop:"idCard","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.idCard,callback:function(e){t.$set(t.conForm,"idCard",e)},expression:"conForm.idCard"}})],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"出生日期",prop:"bornDate","label-width":"110px"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.conForm.bornDate,callback:function(e){t.$set(t.conForm,"bornDate",e)},expression:"conForm.bornDate"}})],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件类型",prop:"credType","label-width":"110px"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.conForm.credType,callback:function(e){t.$set(t.conForm,"credType",e)},expression:"conForm.credType"}},[a("el-option",{attrs:{label:"请选择",value:0}}),t._v(" "),a("el-option",{attrs:{label:"护照",value:1}}),t._v(" "),a("el-option",{attrs:{label:"港澳通行证",value:2}}),t._v(" "),a("el-option",{attrs:{label:"军官证",value:3}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"fl",attrs:{label:"证件号码",prop:"credCode","label-width":"110px"}},[a("el-input",{staticClass:"w200",attrs:{type:"text"},model:{value:t.conForm.credCode,callback:function(e){t.$set(t.conForm,"credCode",e)},expression:"conForm.credCode"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer cb",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelInfo("conForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.subInfo("conForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var I={components:{"order-detail":y,"order-remarks":a("VU/8")(x,S,!1,function(t){a("lLWn")},"data-v-34062ed4",null).exports,"edit-order":a("VU/8")(F,k,!1,function(t){a("C1+6")},"data-v-611cb789",null).exports},data:function(){return{productName:"",orderCode:"",startDate:"",endDate:"",productType:"",proType:[{value:"0",label:"全部类型"},{value:"1",label:"跟团游"}],orderStatus:0,elTabs:[{lable:"全部订单",orderStatus:"0"},{lable:"未确认",orderStatus:"7"},{lable:"补充资料",orderStatus:"1"},{lable:"待出行",orderStatus:"3"},{lable:"出行中",orderStatus:"4"},{lable:"订单完成",orderStatus:"6"},{lable:"作废订单",orderStatus:"9"}],orderList:[],pageshow:!0,pageSize:10,pageIndex:1,total:0,orderData:"",variable:0,dialogType:0}},mounted:function(){this.initData()},methods:{initData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.productName,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.orderCode,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.startDate,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.endDate,i=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.productType,n=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.orderStatus;r?r=""+r.getFullYear()+(r.getMonth()+1>9?r.getMonth()+1:"0"+(r.getMonth()+1))+(r.getDate()>9?r.getDate():"0"+r.getDate()):r=0;o?o=""+o.getFullYear()+(o.getMonth()+1>9?o.getMonth()+1:"0"+(o.getMonth()+1))+(o.getDate()>9?o.getDate():"0"+o.getDate()):o=0;""==l&&(l=0),this.$http.post(this.GLOBAL.serverSrc+"/indirect/orderquery/get/sipage",{pageIndex:t,pageSize:e,object:{condition:{productName:a,orderCode:s,startDate:r,endDate:o,productType:l,orderStatus:n}}}).then(function(t){i.orderList=[],i.orderList=t.data.objects,i.total=t.data.total,i.$nextTick(function(){i.pageshow=!0})})},operation:function(t,e){this.orderData=t,this.variable++,this.dialogType=e},reset:function(){this.productName="",this.orderCode="",this.startDate="",this.endDate="",this.productType=""},getRowClass:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;return 0==e?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},handleClick:function(t,e){this.orderStatus=t.name,this.initData(1,this.pageSize)},handleSizeChange:function(t){this.pageSize=t,this.pageIndex=1,this.initData(1,t)},handleCurrentChange:function(t){this.initData(t,this.pageSize),this.pageIndex=t},cancelOrder:function(t){var e=this;this.$confirm("是否取消该订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.GLOBAL.serverSrc+"/indirect/order/mobile/delete",{orderCode:t.orderCode,orderStatus:9}).then(function(t){1==t.data.isSuccess?e.initData(e.pageIndex,e.pageSize):e.$message.error(t.data.result.message)})}).catch(function(){e.$message({type:"info",message:"已取消"})})},endDateChange:function(){var t=new Date(this.startDate).getTime(),e=new Date(this.endDate).getTime();""!==this.startDate&&e<t&&(this.$message.error("结束时间不能早于开始时间"),this.endDate="")},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var s=t.getDate();s=s<10?"0"+s:s;var r=t.getHours();r=r<10?"0"+r:r;var o=t.getMinutes();o=o<10?"0"+o:o;var i=t.getSeconds();return e+"-"+a+"-"+s+" "+r+":"+o+":"+(i=i<10?"0"+i:i)}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"search-title"},[t._v("产品名称")]),t._v(" "),a("el-input",{staticClass:"input",model:{value:t.productName,callback:function(e){t.productName=e},expression:"productName"}}),t._v(" "),a("span",{staticClass:"search-title"},[t._v("订单ID")]),t._v(" "),a("el-input",{staticClass:"input",model:{value:t.orderCode,callback:function(e){t.orderCode=e},expression:"orderCode"}}),t._v(" "),a("span",{staticClass:"search-title"},[t._v("下单日期")]),t._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"开始天数"},on:{change:t.endDateChange},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),a("div",{staticClass:"date-line"}),t._v(" "),a("el-date-picker",{staticClass:"start-time",attrs:{type:"date",placeholder:"结束天数"},on:{change:t.endDateChange},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("br"),t._v(" "),a("span",{staticClass:"search-title"},[t._v("产品类型")]),t._v(" "),a("el-select",{staticClass:"sec-type",attrs:{placeholder:"全部类型"},model:{value:t.productType,callback:function(e){t.productType=e},expression:"productType"}},t._l(t.proType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),a("br"),t._v(" "),a("el-button",{staticClass:"search-but",attrs:{type:"primary"},on:{click:function(e){t.initData(1,t.pageSize)}}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"search-but",attrs:{type:"primary",plain:""},on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("el-tabs",{staticClass:"el-tab",on:{"tab-click":t.handleClick},model:{value:t.orderStatus,callback:function(e){t.orderStatus=e},expression:"orderStatus"}},t._l(t.elTabs,function(t){return a("el-tab-pane",{key:t.orderStatus,attrs:{label:t.lable,name:t.orderStatus}})})),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.orderList,"header-cell-style":t.getRowClass,border:""}},[a("el-table-column",{attrs:{prop:"orderCode",label:"ID","min-width":"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名称",width:"240",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productTypeCN",label:"类型",width:"90",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"place",label:"出发地/目的地",width:"135",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"total",label:"价格",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.row.orderStatus,expression:"scope.row.orderStatus == 1"}]},[t._v("补充游客材料")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.row.orderStatus,expression:"scope.row.orderStatus == 2"}]},[t._v("电子合同")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:3==e.row.orderStatus,expression:"scope.row.orderStatus == 3"}]},[t._v("待出行")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:4==e.row.orderStatus,expression:"scope.row.orderStatus == 4"}]},[t._v("旅游中")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:5==e.row.orderStatus,expression:"scope.row.orderStatus == 5"}]},[t._v("待评价")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:6==e.row.orderStatus,expression:"scope.row.orderStatus == 6"}]},[t._v("完成")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.orderStatus&&1==e.row.occupyStatus,expression:"scope.row.orderStatus == 0 && scope.row.occupyStatus == 1"}]},[t._v("预定不占")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.orderStatus&&2==e.row.occupyStatus,expression:"scope.row.orderStatus == 0 && scope.row.occupyStatus == 2"}]},[t._v("预定占位")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.orderStatus&&3==e.row.occupyStatus,expression:"scope.row.orderStatus == 0 && scope.row.occupyStatus == 3"}]},[t._v("确认占位")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:8==e.row.orderStatus,expression:"scope.row.orderStatus == 8"}]},[t._v("签署合同")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:9==e.row.orderStatus,expression:"scope.row.orderStatus == 9"}]},[t._v("作废订单")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:10==e.row.orderStatus,expression:"scope.row.orderStatus == 10"}]},[t._v("确认占位")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"op",label:"操作人",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatDate(new Date(e.row.createTime))))]),a("br")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"cursor blue",on:{click:function(a){t.operation(e.row,1)}}},[t._v("详情")]),t._v(" "),a("span",{staticClass:"em"},[t._v("|")]),t._v(" "),9!=e.row.orderStatus&&4!=e.row.orderStatus&&6!=e.row.orderStatus?[a("span",{staticClass:"cursor red",on:{click:function(a){t.cancelOrder(e.row)}}},[t._v("取消订单")]),t._v(" "),a("span",{staticClass:"em"},[t._v("|")])]:t._e(),t._v(" "),a("span",{staticClass:"cursor blue",on:{click:function(a){t.operation(e.row,2)}}},[t._v("备注")]),t._v(" "),a("span",{staticClass:"em"},[t._v("|")]),t._v(" "),a("span",{staticClass:"cursor blue",on:{click:function(a){t.operation(e.row,3)}}},[t._v("修改")])]}}])})],1),t._v(" "),a("div",{staticStyle:{width:"1350px",overflow:"hidden"}},[t.pageshow?a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e(),t._v(" "),a("order-detail",{attrs:{orderData:t.orderData,variable:t.variable,dialogType:t.dialogType}}),t._v(" "),a("order-remarks",{attrs:{orderData:t.orderData,variable:t.variable,dialogType:t.dialogType}}),t._v(" "),a("edit-order",{attrs:{orderData:t.orderData,variable:t.variable,dialogType:t.dialogType}})],1)],1)},staticRenderFns:[]};var T=a("VU/8")(I,D,!1,function(t){a("5m+o")},"data-v-616d15df",null).exports,N={props:{accountId:0,variable:0},data:function(){return{dialogForm:!1,title:"",ruleForm:{id:0,isDeleted:0,name:"",userCode:"",phone:"",email:"",sex:"",wx:"",qq:"",passWord:"",createTime:0,localCompID:JSON.parse(sessionStorage.getItem("tyUserInfo")).localCompID,mark:"",localCompName:JSON.parse(sessionStorage.getItem("tyUserInfo")).localCompName},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"change"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30个字符",trigger:"blur"}],peerUserType:[{required:!0,message:"请选择职务",trigger:"change"}]}}},watch:{variable:function(){this.dialogForm=!0,0==this.accountId?this.title="添加账户":(this.title="编辑账户",this.getData())}},methods:{getData:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/localcomp/api/peeruserpage",{pageIndex:1,pageSize:10,object:{phone:this.accountId}}).then(function(e){t.ruleForm={},1==e.data.isSuccess&&(t.ruleForm=e.data.objects[0],3==t.ruleForm.sex&&(t.ruleForm.sex=""))})},close:function(){this.dialogForm=!1,this.$refs.ruleForm.resetFields(),this.ruleForm={}},save:function(){var t=this,e="";e=0==this.accountId?"/indirect/localcomp/api/peeruserinsert":"/indirect/localcomp/api/peeruserupdate",this.$refs.ruleForm.validate(function(a){a&&t.$http.post(t.GLOBAL.serverSrc+e,{object:t.ruleForm}).then(function(e){1==e.data.isSuccess&&(t.$message.success("提交成功"),t.close(),t.$parent.accoutList())})})}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"city_list",staticStyle:{"margin-top":"-100px"},attrs:{title:t.title,visible:t.dialogForm,width:"580px"},on:{"update:visible":function(e){t.dialogForm=e},close:t.close}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:t.ruleForm.email,callback:function(e){t.$set(t.ruleForm,"email",e)},expression:"ruleForm.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.ruleForm.sex,callback:function(e){t.$set(t.ruleForm,"sex",e)},expression:"ruleForm.sex"}},[a("el-option",{attrs:{label:"男",value:0}}),t._v(" "),a("el-option",{attrs:{label:"女",value:1}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"微信"}},[a("el-input",{model:{value:t.ruleForm.wx,callback:function(e){t.$set(t.ruleForm,"wx",e)},expression:"ruleForm.wx"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"QQ"}},[a("el-input",{model:{value:t.ruleForm.qq,callback:function(e){t.$set(t.ruleForm,"qq",e)},expression:"ruleForm.qq"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.ruleForm.state,callback:function(e){t.$set(t.ruleForm,"state",e)},expression:"ruleForm.state"}},[a("el-option",{attrs:{label:"正常",value:2}}),t._v(" "),a("el-option",{attrs:{label:"停用",value:3}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"passWord"}},[a("el-input",{model:{value:t.ruleForm.passWord,callback:function(e){t.$set(t.ruleForm,"passWord",e)},expression:"ruleForm.passWord"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"职务",prop:"peerUserType"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.ruleForm.peerUserType,callback:function(e){t.$set(t.ruleForm,"peerUserType",e)},expression:"ruleForm.peerUserType"}},[a("el-option",{attrs:{label:"管理员",value:1}}),t._v(" "),a("el-option",{attrs:{label:"旅游顾问",value:2}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.close}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var L={components:{"add-user":a("VU/8")(N,$,!1,function(t){a("MlWk")},"data-v-4dc3cd92",null).exports},data:function(){return{tyUserInfo:{},localcompInfo:{},fileList:[],acconutList:[],pageSize:10,pageIndex:1,total:0,accountId:0,variable:0,peerUser:!1}},mounted:function(){this.tyUserInfo=JSON.parse(sessionStorage.getItem("tyUserInfo")),this.peerUser=1!=this.tyUserInfo.peerUserType,this.companyinfo(),this.accoutList()},methods:{companyinfo:function(){var t=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/localcomp/api/get",{id:this.tyUserInfo.id}).then(function(e){if(t.localcompInfo={},1==e.data.isSuccess&&(t.localcompInfo=e.data.object,t.localcompInfo.fileUrl)){var a={url:t.localcompInfo.fileUrl};t.fileList.push(a)}}).catch(function(t){})},saveLocalcompInfo:function(){var t=this;this.localcompInfo.fileUrl=this.fileList[0].url,this.$http.post(this.GLOBAL.serverSrc+"/indirect/universal/localcomp/save",{object:this.localcompInfo}).then(function(e){1==e.data.isSuccess&&t.$message.success("提交成功")}).catch(function(t){})},handleSuccess:function(t,e,a){this.fileList[0].url=JSON.parse(a[0].response).paths[0].Url},handleRemove:function(t,e){},handleExceed:function(t,e){this.$message.error("只能上传一个文件")},beforeRemove:function(t,e){return this.$confirm("确定移除公司logo？")},getRowClass:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;return 0==e?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},accoutList:function(t){var e=this;this.$http.post(this.GLOBAL.serverSrc+"/indirect/localcomp/api/peeruserpage",{pageIndex:this.pageIndex,pageSize:this.pageSize,object:{localCompID:this.tyUserInfo.localCompID}}).then(function(t){e.acconutList=t.data.objects,e.total=t.data.total}).catch(function(t){})},handleSizeChange:function(t){this.pageSize=t,this.pageIndex=1,this.accoutList(1,t)},handleCurrentChange:function(t){this.initData(t,this.pageSize),this.accoutList=t},operation:function(t,e){this.variable++,this.accountId=2==t?e:0}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user_list"},[a("div",{staticClass:"cominfo"},[a("div",{staticClass:"cominfo-title"},[t._v("公司信息")]),t._v(" "),a("div",{staticClass:"comContent"},[a("table",[a("tr",[a("td",{attrs:{width:"75"}},[t._v("名称：")]),t._v(" "),a("td",{attrs:{width:"300"}},[t._v(t._s(t.localcompInfo.name))]),t._v(" "),a("td",{attrs:{width:"80",align:"right"}},[t._v("类型：")]),t._v(" "),a("td",{attrs:{width:"270"}},[1==t.localcompInfo.localCompType?a("span",[t._v("门店")]):t._e(),t._v(" "),2==t.localcompInfo.localCompType?a("span",[t._v("同业社")]):t._e(),t._v(" "),3==t.localcompInfo.localCompType?a("span",[t._v("翻牌门店")]):t._e(),t._v(" "),4==t.localcompInfo.localCompType?a("span",[t._v("个体分销")]):t._e()]),t._v(" "),a("td",[t._v("到期时间：")]),t._v(" "),a("td",{attrs:{width:"270"}},[t._v(t._s(t.localcompInfo.expTime))])]),t._v(" "),a("tr",[a("td",[t._v("剩余额度：")]),t._v(" "),a("td",{attrs:{colspan:"4"}},[t._v(t._s(t.localcompInfo.balance))])])])])]),t._v(" "),a("div",{staticClass:"cominfo"},[a("div",{staticClass:"cominfo-title"},[t._v("联系人和账户信息")]),t._v(" "),a("div",{staticClass:"comContent"},[a("div",{staticClass:"com-info"},[a("p",[t._v("联系人名称")]),t._v(" "),a("el-input",{staticClass:"w250",attrs:{placeholder:"请输入内容",disabled:t.peerUser},model:{value:t.localcompInfo.linker,callback:function(e){t.$set(t.localcompInfo,"linker",e)},expression:"localcompInfo.linker"}})],1),t._v(" "),a("div",{staticClass:"com-info"},[a("p",[t._v("电话")]),t._v(" "),a("el-input",{staticClass:"w250",attrs:{placeholder:"请输入内容",disabled:t.peerUser},model:{value:t.localcompInfo.phone,callback:function(e){t.$set(t.localcompInfo,"phone",e)},expression:"localcompInfo.phone"}})],1),t._v(" "),a("div",{staticClass:"com-info"},[a("p",[t._v("公司LOGO")]),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo w250",attrs:{disabled:t.peerUser,name:"files",action:t.GLOBAL.serverSrc+"/upload/obs/api/picture",multiple:"","on-success":t.handleSuccess,"before-remove":t.beforeRemove,limit:1,"on-exceed":t.handleExceed,"file-list":t.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:t.peerUser}},[t._v("点击上传")])],1)],1)]),t._v(" "),a("hr",{staticStyle:{margin:"0 20px",border:"1px solid #f6f6f6"}}),t._v(" "),a("div",{staticClass:"comContent"},[a("div",{staticClass:"com-info"},[a("p",[t._v("对公户名")]),t._v(" "),a("el-input",{staticClass:"w250",attrs:{placeholder:"请输入内容",disabled:t.peerUser},model:{value:t.localcompInfo.publicName,callback:function(e){t.$set(t.localcompInfo,"publicName",e)},expression:"localcompInfo.publicName"}})],1),t._v(" "),a("div",{staticClass:"com-info"},[a("p",[t._v("开户行")]),t._v(" "),a("el-input",{staticClass:"w250",attrs:{placeholder:"请输入内容",disabled:t.peerUser},model:{value:t.localcompInfo.bankName,callback:function(e){t.$set(t.localcompInfo,"bankName",e)},expression:"localcompInfo.bankName"}})],1),t._v(" "),a("div",{staticClass:"com-info"},[a("p",[t._v("对公账号")]),t._v(" "),a("el-input",{staticClass:"w250",attrs:{placeholder:"请输入内容",disabled:t.peerUser},model:{value:t.localcompInfo.bankcardNo,callback:function(e){t.$set(t.localcompInfo,"bankcardNo",e)},expression:"localcompInfo.bankcardNo"}})],1)]),t._v(" "),t.peerUser?t._e():a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.saveLocalcompInfo}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"cominfo",staticStyle:{"margin-bottom":"70px"}},[a("div",{staticClass:"cominfo-title"},[t._v("账户信息")]),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.acconutList,"header-cell-style":t.getRowClass,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.state?a("div",{staticClass:"red"},[t._v("停用")]):t._e(),t._v(" "),2==e.row.state?a("div",[t._v("正常")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.sex?a("span",[t._v("男")]):t._e(),t._v(" "),1===e.row.sex?a("span",[t._v("女")]):t._e(),t._v(" "),3===e.row.sex?a("span",[t._v("未选择")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"wx",label:"微信号",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"qq",label:"qq",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"职务",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.peerUserType?a("div",[t._v("管理员")]):t._e(),t._v(" "),2==e.row.peerUserType?a("div",[t._v("旅游顾问")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"cursor blue",on:{click:function(a){t.operation(2,e.row.phone)}}},[t._v("更改")])]}}])})],1),t._v(" "),a("div",{staticStyle:{width:"100%","margin-left":"20px",overflow:"hidden"}},[a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.peerUser?t._e():a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){t.operation(1)}}},[t._v("添加")])],1),t._v(" "),a("add-user",{attrs:{accountId:t.accountId,variable:t.variable}})],1)},staticRenderFns:[]};var O=a("VU/8")(L,z,!1,function(t){a("TY9F")},"data-v-2e3b251e",null).exports,M={components:{"order-detail":y},data:function(){return{tradeSales:"",manager:[],saleList:[],pageshow:!0,pageSize:10,pageIndex:1,total:0,variable:0,dialogType:0}},mounted:function(){},methods:{operation:function(t,e){this.orderData=t,this.variable++,this.dialogType=e},getRowClass:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;return 0==e?"background:#f7f7f7;height:60px;textAlign:center;color:#333;fontSize:15px":""},handleSizeChange:function(t){this.pageSize=t,this.pageIndex=1,this.initData(1,t)},handleCurrentChange:function(t){this.initData(t,this.pageSize),this.pageIndex=t},initData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize;arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.tradeSales;this.$http.post(this.GLOBAL.serverSrc+"/orderquery/get/api/sipage",{pageIndex:t,pageSize:a,object:{}}).then(function(t){e.saleList=[],e.saleList=t.data.objects,e.total=t.data.total,e.$nextTick(function(){e.pageshow=!0})})}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"search"},[a("span",{staticClass:"search-title"},[t._v("同业销售")]),t._v(" "),a("el-select",{attrs:{placeholder:"全部"},model:{value:t.tradeSales,callback:function(e){t.tradeSales=e},expression:"tradeSales"}},t._l(t.manager,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),t._v(" "),a("el-button",{staticClass:"ml20",attrs:{type:"primary"},on:{click:function(e){t.initData(1,t.pageSize)}}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:function(e){t.tradeSales=""}}},[t._v("重置")])],1),t._v(" "),a("el-button",{staticClass:"excel",attrs:{type:"primary"},on:{click:function(t){}}},[t._v("导出excel")]),t._v(" "),t._m(3),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.saleList,"header-cell-style":t.getRowClass,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名称","min-width":"230",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productType",label:"类型",width:"90",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"place",label:"出发地/目的地",width:"135",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"total",label:"价格",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"op",label:"操作人",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间",width:"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"cursor blue",on:{click:function(a){t.operation(e.row,1)}}},[t._v("查看订单")])]}}])})],1),t._v(" "),a("div",{staticStyle:{width:"1160px","margin-left":"20px",overflow:"hidden"}},[t.pageshow?a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":1,"page-sizes":[10,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("order-detail",{attrs:{orderData:t.saleList,variable:t.variable,dialogType:t.dialogType}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"borderstyle ml20"},[a("div",{staticClass:"iconstyle icon1"}),t._v(" "),a("div",{staticClass:"icon-left"},[a("div",{staticClass:"title"},[t._v("本月下单")]),t._v(" "),a("div",{staticClass:"sums"},[t._v("4")]),t._v(" "),a("div",{staticClass:"persent"},[a("span",{staticClass:"tip"},[t._v("▼10%")]),t._v(" "),a("span",[t._v("同比上月")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"borderstyle ml100"},[a("div",{staticClass:"iconstyle icon2"}),t._v(" "),a("div",{staticClass:"icon-left"},[a("div",{staticClass:"title"},[t._v("本月销售额")]),t._v(" "),a("div",{staticClass:"sums"},[t._v("54,323")]),t._v(" "),a("div",{staticClass:"persent"},[a("span",{staticClass:"tip"},[t._v("▼10%")]),t._v(" "),a("span",[t._v("同比上月")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"borderstyle ml100"},[a("div",{staticClass:"iconstyle icon3"}),t._v(" "),a("div",{staticClass:"icon-left"},[a("div",{staticClass:"title"},[t._v("退款订单(个)")]),t._v(" "),a("div",{staticClass:"sums"},[t._v("5")]),t._v(" "),a("div",{staticClass:"persent"},[a("span",{staticClass:"tip"},[t._v("▼10%")]),t._v(" "),a("span",[t._v("同比上月")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml20"},[a("span",{staticClass:"ml20"},[t._v("2016-01")]),t._v(" "),a("span",{staticClass:"line"},[t._v("|")]),t._v(" "),a("span",[t._v("年度销售总额 :")]),t._v(" "),a("span",{staticClass:"color-blue"},[t._v("123.90元")]),t._v(" "),a("span",{staticClass:"line"},[t._v("|")]),t._v(" "),a("span",[t._v("年度总订单数 :")]),t._v(" "),a("span",{staticClass:"color-blue"},[t._v("12笔")]),t._v(" "),a("span",{staticClass:"line"},[t._v("|")]),t._v(" "),a("span",[t._v("本月销售总额 :")]),t._v(" "),a("span",{staticClass:"color-blue"},[t._v("123.90元")]),t._v(" "),a("span",{staticClass:"line"},[t._v("|")]),t._v(" "),a("span",[t._v("本月总订单数 :")]),t._v(" "),a("span",{staticClass:"color-blue"},[t._v("12笔")])])}]};var q=a("VU/8")(M,U,!1,function(t){a("KDGZ")},"data-v-5382cc86",null).exports,P={data:function(){return{ruleForm:{user:"13022222222",password:"123456"},rules:{user:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{loginForm:function(t){var e=this;this.$refs.ruleForm.validate(function(t){t&&e.$http.post(e.GLOBAL.serverSrc+"/user/api/silogin",{userName:e.ruleForm.user,passWord:e.ruleForm.password}).then(function(t){JSON.parse(t.data).access_token?(sessionStorage.setItem("tyToken",JSON.parse(t.data).access_token),e.$http.post(e.GLOBAL.serverSrc+"/indirect/peeruser/api/info").then(function(t){sessionStorage.setItem("tyUserInfo",JSON.stringify(t.data)),e.$router.push("/productList"),e.$message.success("登录成功")}).catch(function(t){})):(e.$message.error("账号或密码错误"),e.ruleForm.password="")}).catch(function(t){})})}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[t._m(0),t._v(" "),a("div",{staticClass:"big"},[a("el-form",{ref:"ruleForm",staticClass:"login-container",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"80px"}},[a("span",{staticClass:"forget-title"},[t._v("嘉麒同业系统")]),t._v(" "),a("div",{staticClass:"forget-group"},[a("div",{staticClass:"forget-account"},[t._v("用户登录")]),t._v(" "),a("div",{staticClass:"forget-border"})]),t._v(" "),a("el-form-item",{staticClass:"user-input",attrs:{prop:"user"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"用户名"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.loginForm("ruleForm")}},model:{value:t.ruleForm.user,callback:function(e){t.$set(t.ruleForm,"user",e)},expression:"ruleForm.user"}})],1),t._v(" "),a("el-form-item",{staticClass:"password-input",attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",placeholder:"密码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.loginForm("ruleForm")}},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),t._v(" "),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.loginForm("ruleForm")},click:function(e){t.loginForm("ruleForm")}}},[t._v("登录")])],1),t._v(" "),a("div",{staticClass:"foot"},[t._v("\n      Copy right @2018 嘉麒集团版权所有 辽ICP备辽B2 - 20150118\n    ")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top_handle"},[e("span",[this._v("嘉麒集团")]),this._v(" "),e("span",[this._v("通行证")])])}]};var j=a("VU/8")(P,A,!1,function(t){a("DaY2")},"data-v-32a1b585",null).exports;s.default.use(u.a);var J=new u.a({routes:[{path:"/",redirect:"login"},{path:"/productList",component:m,name:"产品列表",meta:{keepAlive:!0,auth:!0}},{path:"/insertOrder",component:f,name:"详情预定",meta:{keepAlive:!0,auth:!0}},{path:"/productDetails",component:C,name:"产品详情",meta:{keepAlive:!0,auth:!0}},{path:"/orderManagement",component:T,name:"订单管理",meta:{keepAlive:!0,auth:!0}},{path:"/userList",component:O,name:"账户信息",meta:{keepAlive:!0,auth:!0}},{path:"/salesList",component:q,name:"销售统计",meta:{keepAlive:!0,auth:!0}},{path:"/login",component:j,meta:{keepAlive:!1}},{path:"*",redirect:"/productList"}]}),B={serverSrc:"http://223.100.19.245:3017",jqUrl:"http://223.100.19.245:3020/h3wf"},R=a("VU/8")(B,null,!1,null,null,null).exports,E=a("NYxO");s.default.use(E.a);var G=new E.a.Store({state:{isLogin:0,token:"",name:""},mutations:{changeLogin:function(t,e){t.isLogin=e},saveToken:function(t,e){t.token=e},saveName:function(t,e){t.name=e}}}),Y=a("zL8q"),W=a.n(Y),V=(a("tvR6"),a("mtWM")),H=a.n(V),Q=a("mw3O"),K=a.n(Q);s.default.use(W.a),s.default.prototype.$http=H.a,s.default.prototype.qs=K.a,s.default.prototype.GLOBAL=R,s.default.config.productionTip=!1,H.a.interceptors.request.use(function(t){var e=sessionStorage.getItem("tyToken");return e&&(t.headers.Authorization="Bearer "+e),t},function(t){return Promise.reject(t)}),H.a.interceptors.response.use(function(t){return t},function(t){switch(t.response.status){case 401:sessionStorage.removeItem("tyToken"),sessionStorage.removeItem("tyUserInfo"),J.replace({path:"login",query:{redirect:J.currentRoute.fullPath}})}return Promise.reject(t.response)});var Z=new s.default({el:"#app",store:G,router:J,components:{App:d},template:"<App/>"});JSON.parse(sessionStorage.getItem("tyUserInfo"))?Z.$router.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.auth})?JSON.parse(sessionStorage.getItem("tyUserInfo"))?a():(a({path:"/login",query:{Rurl:t.fullPath}}),sessionStorage.removeItem("tyToken"),sessionStorage.removeItem("tyUserInfo")):a()}):Z.$router.push({path:"/login"})},TY9F:function(t,e){},"W9Y/":function(t,e){},jc7z:function(t,e){},lLWn:function(t,e){},lRES:function(t,e){},tU4U:function(t,e){},tvR6:function(t,e){},udCb:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e3de4416d171c92df1ed.js.map